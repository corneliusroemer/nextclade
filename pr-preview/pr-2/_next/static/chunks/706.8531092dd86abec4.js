(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[706],{42891:function(b,a){"use strict";var c=Number.isNaN||function(a){return"number"==typeof a&&a!=a};function d(a,b){return a===b||!!(c(a)&&c(b))}function e(b,c){if(b.length!==c.length)return!1;for(var a=0;a<b.length;a++)if(!d(b[a],c[a]))return!1;return!0}a.Z=function(b,a){void 0===a&&(a=e);var c,d,f=[],g=!1;return function(){for(var e=[],h=0;h<arguments.length;h++)e[h]=arguments[h];return g&&c===this&&a(e,f)||(d=b.apply(this,e),g=!0,c=this,f=e),d}}},47849:function(e,c,a){"use strict";a.d(c,{w_:function(){return j}});var b=a(60822),d={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},f=b.createContext&&b.createContext(d),g=function(){return(g=Object.assign||function(d){for(var a,b=1,e=arguments.length;b<e;b++)for(var c in a=arguments[b])Object.prototype.hasOwnProperty.call(a,c)&&(d[c]=a[c]);return d}).apply(this,arguments)},h=function(b,e){var d={};for(var a in b)Object.prototype.hasOwnProperty.call(b,a)&&0>e.indexOf(a)&&(d[a]=b[a]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols)for(var c=0,a=Object.getOwnPropertySymbols(b);c<a.length;c++)0>e.indexOf(a[c])&&(d[a[c]]=b[a[c]]);return d};function i(a){return a&&a.map(function(a,c){return b.createElement(a.tag,g({key:c},a.attr),i(a.child))})}function j(a){return function(c){return b.createElement(k,g({attr:g({},a.attr)},c),i(a.child))}}function k(c){var a=function(a){var d,e=c.size||a.size||"1em";a.className&&(d=a.className),c.className&&(d=(d?d+" ":"")+c.className);var i=c.attr,f=c.title,j=h(c,["attr","title"]);return b.createElement("svg",g({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,i,j,{className:d,style:g({color:c.color||a.color},a.style,c.style),height:e,width:e,xmlns:"http://www.w3.org/2000/svg"}),f&&b.createElement("title",null,f),c.children)};return void 0!==f?b.createElement(f.Consumer,null,function(b){return a(b)}):a(d)}},56608:function(n,g,b){"use strict";b.d(g,{S:function(){return m}});for(var o=b(9652),a=b(29865),p=b(59518),q=b(74619),r=b(90958),s=b(65668),h=b(60822),t=b(82071),i=b(42891),u=b(45184),v={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},w=function(a){return(0,t.tZ)("span",(0,o.Z)({css:v},a))},x={guidance:function(a){var b=a.isSearchable,c=a.isMulti,d=a.isDisabled,e=a.tabSelectsValue,f=a.context;switch(f){case"menu":return"Use Up and Down to choose options".concat(d?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(e?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(a["aria-label"]||"Select"," is focused ").concat(b?",type to refine list":"",", press Down to open the menu, ").concat(c?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(a){var e=a.action,c=a.label,b=void 0===c?"":c,d=a.labels,f=a.isDisabled;switch(e){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(b,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(d.length>1?"s":""," ").concat(d.join(","),", selected.");case"select-option":return f?"option ".concat(b," is disabled. Select another option."):"option ".concat(b,", selected.");default:return""}},onFocus:function(a){var b=a.context,c=a.focused,h=a.options,d=a.label,e=void 0===d?"":d,f=a.selectValue,i=a.isDisabled,j=a.isSelected,g=function(a,b){return a&&a.length?"".concat(a.indexOf(b)+1," of ").concat(a.length):""};if("value"===b&&f)return"value ".concat(e," focused, ").concat(g(f,c),".");if("menu"===b){var k=i?" disabled":"",l="".concat(j?"selected":"focused").concat(k);return"option ".concat(e," ").concat(l,", ").concat(g(h,c),".")}return""},onFilter:function(a){var b=a.inputValue,c=a.resultsMessage;return"".concat(c).concat(b?" for search term "+b:"",".")}},y=function(c){var e=c.ariaSelection,i=c.focusedOption,j=c.focusedValue,p=c.focusableOptions,q=c.isFocused,f=c.selectValue,b=c.selectProps,r=c.id,s=b.ariaLiveMessages,k=b.getOptionLabel,u=b.inputValue,v=b.isMulti,g=b.isOptionDisabled,y=b.isSearchable,l=b.menuIsOpen,m=b.options,z=b.screenReaderStatus,A=b.tabSelectsValue,B=b["aria-label"],C=b["aria-live"],d=(0,h.useMemo)(function(){return(0,a.a)((0,a.a)({},x),s||{})},[s]),D=(0,h.useMemo)(function(){var c="";if(e&&d.onChange){var i=e.option,j=e.options,l=e.removedValue,m=e.removedValues,n=e.value,o=function(a){return Array.isArray(a)?null:a},b=l||i||o(n),p=b?k(b):"",h=j||m||void 0,q=h?h.map(k):[],r=(0,a.a)({isDisabled:b&&g(b,f),label:p,labels:q},e);c=d.onChange(r)}return c},[e,d,g,f,k]),E=(0,h.useMemo)(function(){var b="",a=i||j,c=!!(i&&f&&f.includes(i));if(a&&d.onFocus){var e={focused:a,label:k(a),isDisabled:g(a,f),isSelected:c,options:m,context:a===i?"menu":"value",selectValue:f};b=d.onFocus(e)}return b},[i,j,k,g,d,m,f]),F=(0,h.useMemo)(function(){var a="";if(l&&m.length&&d.onFilter){var b=z({count:p.length});a=d.onFilter({inputValue:u,resultsMessage:b})}return a},[p,u,l,d,m,z]),G=(0,h.useMemo)(function(){var a="";if(d.guidance){var b=j?"value":l?"menu":"input";a=d.guidance({"aria-label":B,context:b,isDisabled:i&&g(i,f),isMulti:v,isSearchable:y,tabSelectsValue:A})}return a},[B,i,j,v,g,y,l,d,f,A]),H="".concat(E," ").concat(F," ").concat(G),n=(0,t.tZ)(h.Fragment,null,(0,t.tZ)("span",{id:"aria-selection"},D),(0,t.tZ)("span",{id:"aria-context"},H)),o=(null==e?void 0:e.action)==="initial-input-focus";return(0,t.tZ)(h.Fragment,null,(0,t.tZ)(w,{id:r},o&&n),(0,t.tZ)(w,{"aria-live":C,"aria-atomic":"false","aria-relevant":"additions text"},q&&!o&&n))},c=[{base:"A",letters:"A\u24B6\uFF21\xc0\xc1\xc2\u1EA6\u1EA4\u1EAA\u1EA8\xc3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\xc4\u01DE\u1EA2\xc5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F"},{base:"AA",letters:"\uA732"},{base:"AE",letters:"\xc6\u01FC\u01E2"},{base:"AO",letters:"\uA734"},{base:"AU",letters:"\uA736"},{base:"AV",letters:"\uA738\uA73A"},{base:"AY",letters:"\uA73C"},{base:"B",letters:"B\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181"},{base:"C",letters:"C\u24B8\uFF23\u0106\u0108\u010A\u010C\xc7\u1E08\u0187\u023B\uA73E"},{base:"D",letters:"D\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779"},{base:"DZ",letters:"\u01F1\u01C4"},{base:"Dz",letters:"\u01F2\u01C5"},{base:"E",letters:"E\u24BA\uFF25\xc8\xc9\xca\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\xcb\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E"},{base:"F",letters:"F\u24BB\uFF26\u1E1E\u0191\uA77B"},{base:"G",letters:"G\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E"},{base:"H",letters:"H\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D"},{base:"I",letters:"I\u24BE\uFF29\xcc\xcd\xce\u0128\u012A\u012C\u0130\xcf\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197"},{base:"J",letters:"J\u24BF\uFF2A\u0134\u0248"},{base:"K",letters:"K\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2"},{base:"L",letters:"L\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780"},{base:"LJ",letters:"\u01C7"},{base:"Lj",letters:"\u01C8"},{base:"M",letters:"M\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C"},{base:"N",letters:"N\u24C3\uFF2E\u01F8\u0143\xd1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4"},{base:"NJ",letters:"\u01CA"},{base:"Nj",letters:"\u01CB"},{base:"O",letters:"O\u24C4\uFF2F\xd2\xd3\xd4\u1ED2\u1ED0\u1ED6\u1ED4\xd5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\xd6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\xd8\u01FE\u0186\u019F\uA74A\uA74C"},{base:"OI",letters:"\u01A2"},{base:"OO",letters:"\uA74E"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754"},{base:"Q",letters:"Q\u24C6\uFF31\uA756\uA758\u024A"},{base:"R",letters:"R\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782"},{base:"S",letters:"S\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784"},{base:"T",letters:"T\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786"},{base:"TZ",letters:"\uA728"},{base:"U",letters:"U\u24CA\uFF35\xd9\xda\xdb\u0168\u1E78\u016A\u1E7A\u016C\xdc\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244"},{base:"V",letters:"V\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245"},{base:"VY",letters:"\uA760"},{base:"W",letters:"W\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72"},{base:"X",letters:"X\u24CD\uFF38\u1E8A\u1E8C"},{base:"Y",letters:"Y\u24CE\uFF39\u1EF2\xdd\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE"},{base:"Z",letters:"Z\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762"},{base:"a",letters:"a\u24D0\uFF41\u1E9A\xe0\xe1\xe2\u1EA7\u1EA5\u1EAB\u1EA9\xe3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\xe4\u01DF\u1EA3\xe5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250"},{base:"aa",letters:"\uA733"},{base:"ae",letters:"\xe6\u01FD\u01E3"},{base:"ao",letters:"\uA735"},{base:"au",letters:"\uA737"},{base:"av",letters:"\uA739\uA73B"},{base:"ay",letters:"\uA73D"},{base:"b",letters:"b\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253"},{base:"c",letters:"c\u24D2\uFF43\u0107\u0109\u010B\u010D\xe7\u1E09\u0188\u023C\uA73F\u2184"},{base:"d",letters:"d\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A"},{base:"dz",letters:"\u01F3\u01C6"},{base:"e",letters:"e\u24D4\uFF45\xe8\xe9\xea\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\xeb\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD"},{base:"f",letters:"f\u24D5\uFF46\u1E1F\u0192\uA77C"},{base:"g",letters:"g\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F"},{base:"h",letters:"h\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24D8\uFF49\xec\xed\xee\u0129\u012B\u012D\xef\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131"},{base:"j",letters:"j\u24D9\uFF4A\u0135\u01F0\u0249"},{base:"k",letters:"k\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3"},{base:"l",letters:"l\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747"},{base:"lj",letters:"\u01C9"},{base:"m",letters:"m\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F"},{base:"n",letters:"n\u24DD\uFF4E\u01F9\u0144\xf1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5"},{base:"nj",letters:"\u01CC"},{base:"o",letters:"o\u24DE\uFF4F\xf2\xf3\xf4\u1ED3\u1ED1\u1ED7\u1ED5\xf5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\xf6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\xf8\u01FF\u0254\uA74B\uA74D\u0275"},{base:"oi",letters:"\u01A3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\uA74F"},{base:"p",letters:"p\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755"},{base:"q",letters:"q\u24E0\uFF51\u024B\uA757\uA759"},{base:"r",letters:"r\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783"},{base:"s",letters:"s\u24E2\uFF53\xdf\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B"},{base:"t",letters:"t\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787"},{base:"tz",letters:"\uA729"},{base:"u",letters:"u\u24E4\uFF55\xf9\xfa\xfb\u0169\u1E79\u016B\u1E7B\u016D\xfc\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289"},{base:"v",letters:"v\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C"},{base:"vy",letters:"\uA761"},{base:"w",letters:"w\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73"},{base:"x",letters:"x\u24E7\uFF58\u1E8B\u1E8D"},{base:"y",letters:"y\u24E8\uFF59\u1EF3\xfd\u0177\u1EF9\u0233\u1E8F\xff\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF"},{base:"z",letters:"z\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763"}],z=new RegExp("["+c.map(function(a){return a.letters}).join("")+"]","g"),j={},d=0;d<c.length;d++)for(var e=c[d],f=0;f<e.letters.length;f++)j[e.letters[f]]=e.base;var k=function(a){return a.replace(z,function(a){return j[a]})},A=(0,i.Z)(k),B=function(a){return a.replace(/^\s+|\s+$/g,"")},C=["innerRef"];function D(b){var c=b.innerRef,d=(0,u.Z)(b,C),e=(0,a.r)(d,"onExited","in","enter","exit","appear");return(0,t.tZ)("input",(0,o.Z)({ref:c},e,{css:(0,t.iv)({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var E=function(a){a.preventDefault(),a.stopPropagation()},F=["boxSizing","height","overflow","paddingRight","position"],G={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function H(a){a.preventDefault()}function I(a){a.stopPropagation()}function J(){var a=this.scrollTop,b=this.scrollHeight,c=a+this.offsetHeight;0===a?this.scrollTop=1:c===b&&(this.scrollTop=a-1)}function K(){return"ontouchstart"in window||navigator.maxTouchPoints}var L=!!("undefined"!=typeof window&&window.document&&window.document.createElement),M=0,N={capture:!1,passive:!1},O={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function P(b){var c,k,l,m,n,o,y,z,A,B,d,e,f,g,p,q,r,s,i,j,C,D,u,v,P=b.children,w=b.lockEnabled,x=b.captureEnabled,Q=b.onBottomArrive,R=b.onBottomLeave,S=b.onTopArrive,T=b.onTopLeave,U=(k=(c={isEnabled:void 0===x||x,onBottomArrive:Q,onBottomLeave:R,onTopArrive:S,onTopLeave:T}).isEnabled,l=c.onBottomArrive,m=c.onBottomLeave,n=c.onTopArrive,o=c.onTopLeave,y=(0,h.useRef)(!1),z=(0,h.useRef)(!1),A=(0,h.useRef)(0),B=(0,h.useRef)(null),d=(0,h.useCallback)(function(a,b){if(null!==B.current){var c=B.current,f=c.scrollTop,g=c.scrollHeight,j=c.clientHeight,h=B.current,d=b>0,i=g-j-f,e=!1;i>b&&y.current&&(m&&m(a),y.current=!1),d&&z.current&&(o&&o(a),z.current=!1),d&&b>i?(l&&!y.current&&l(a),h.scrollTop=g,e=!0,y.current=!0):!d&& -b>f&&(n&&!z.current&&n(a),h.scrollTop=0,e=!0,z.current=!0),e&&E(a)}},[l,m,n,o]),e=(0,h.useCallback)(function(a){d(a,a.deltaY)},[d]),f=(0,h.useCallback)(function(a){A.current=a.changedTouches[0].clientY},[]),g=(0,h.useCallback)(function(a){var b=A.current-a.changedTouches[0].clientY;d(a,b)},[d]),p=(0,h.useCallback)(function(b){if(b){var c=!!a.s&&{passive:!1};b.addEventListener("wheel",e,c),b.addEventListener("touchstart",f,c),b.addEventListener("touchmove",g,c)}},[g,f,e]),q=(0,h.useCallback)(function(a){a&&(a.removeEventListener("wheel",e,!1),a.removeEventListener("touchstart",f,!1),a.removeEventListener("touchmove",g,!1))},[g,f,e]),(0,h.useEffect)(function(){if(k){var a=B.current;return p(a),function(){q(a)}}},[k,p,q]),function(a){B.current=a}),V=(s=(r={isEnabled:w}).isEnabled,i=r.accountForScrollbars,j=void 0===i||i,C=(0,h.useRef)({}),D=(0,h.useRef)(null),u=(0,h.useCallback)(function(b){if(L){var a=document.body,c=a&&a.style;if(j&&F.forEach(function(a){var b=c&&c[a];C.current[a]=b}),j&&M<1){var d=parseInt(C.current.paddingRight,10)||0,e=document.body?document.body.clientWidth:0,f=window.innerWidth-e+d||0;Object.keys(G).forEach(function(a){var b=G[a];c&&(c[a]=b)}),c&&(c.paddingRight="".concat(f,"px"))}a&&K()&&(a.addEventListener("touchmove",H,N),b&&(b.addEventListener("touchstart",J,N),b.addEventListener("touchmove",I,N))),M+=1}},[j]),v=(0,h.useCallback)(function(b){if(L){var a=document.body,c=a&&a.style;M=Math.max(M-1,0),j&&M<1&&F.forEach(function(a){var b=C.current[a];c&&(c[a]=b)}),a&&K()&&(a.removeEventListener("touchmove",H,N),b&&(b.removeEventListener("touchstart",J,N),b.removeEventListener("touchmove",I,N)))}},[j]),(0,h.useEffect)(function(){if(s){var a=D.current;return u(a),function(){v(a)}}},[s,u,v]),function(a){D.current=a});return(0,t.tZ)(h.Fragment,null,w&&(0,t.tZ)("div",{onClick:function(){return document.activeElement&&document.activeElement.blur()},css:O}),P(function(a){U(a),V(a)}))}var Q={clearIndicator:a.b,container:a.d,control:a.e,dropdownIndicator:a.f,group:a.g,groupHeading:a.h,indicatorsContainer:a.i,indicatorSeparator:a.j,input:a.k,loadingIndicator:a.l,loadingMessage:a.m,menu:a.n,menuList:a.o,menuPortal:a.p,multiValue:a.q,multiValueLabel:a.t,multiValueRemove:a.u,noOptionsMessage:a.v,option:a.w,placeholder:a.x,singleValue:a.y,valueContainer:a.z},R={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},l={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:(0,a.A)(),captureMenuScroll:!(0,a.A)(),closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,f){if(e.data.__isNew__)return!0;var d=(0,a.a)({ignoreCase:!0,ignoreAccents:!0,stringify:function(a){return"".concat(a.label," ").concat(a.value)},trim:!0,matchFrom:"any"},void 0),i=d.ignoreCase,j=d.ignoreAccents,g=d.stringify,h=d.trim,l=d.matchFrom,b=h?B(f):f,c=h?B(g(e)):g(e);return i&&(b=b.toLowerCase(),c=c.toLowerCase()),j&&(b=A(b),c=k(c)),"start"===l?c.substr(0,b.length)===b:c.indexOf(b)> -1},formatGroupLabel:function(a){return a.label},getOptionLabel:function(a){return a.label},getOptionValue:function(a){return a.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(a){return!!a.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!(0,a.B)(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(b){var a=b.count;return"".concat(a," result").concat(1!==a?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0};function S(b,a,c,d){var e=Y(b,a,c),f=Z(b,a,c),g=W(b,a),h=X(b,a);return{type:"option",data:a,isDisabled:e,isSelected:f,label:g,value:h,index:d}}function T(b,c){return b.options.map(function(a,d){if("options"in a){var e=a.options.map(function(a,d){return S(b,a,c,d)}).filter(function(a){return V(b,a)});return e.length>0?{type:"group",data:a,options:e,index:d}:void 0}var f=S(b,a,c,d);return V(b,f)?f:void 0}).filter(a.H)}function U(a){return a.reduce(function(a,b){return"group"===b.type?a.push.apply(a,(0,s.Z)(b.options.map(function(a){return a.data}))):a.push(b.data),a},[])}function V(b,a){var c=b.inputValue,d=a.data,e=a.isSelected,f=a.label,g=a.value;return(!_(b)||!e)&&$(b,{label:f,value:g,data:d},void 0===c?"":c)}var W=function(a,b){return a.getOptionLabel(b)},X=function(a,b){return a.getOptionValue(b)};function Y(a,b,c){return"function"==typeof a.isOptionDisabled&&a.isOptionDisabled(b,c)}function Z(a,b,c){if(c.indexOf(b)> -1)return!0;if("function"==typeof a.isOptionSelected)return a.isOptionSelected(b,c);var d=X(a,b);return c.some(function(b){return X(a,b)===d})}function $(a,b,c){return!a.filterOption||a.filterOption(b,c)}var _=function(a){var b=a.hideSelectedOptions,c=a.isMulti;return void 0===b?c:b},aa=1,m=function(c){(0,r.Z)(b,c);var d=(0,a._)(b);function b(e){var c;return(0,p.Z)(this,b),(c=d.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},c.blockOptionHover=!1,c.isComposing=!1,c.commonProps=void 0,c.initialTouchX=0,c.initialTouchY=0,c.instancePrefix="",c.openAfterFocus=!1,c.scrollToFocusedOptionOnUpdate=!1,c.userIsDragging=void 0,c.controlRef=null,c.getControlRef=function(a){c.controlRef=a},c.focusedOptionRef=null,c.getFocusedOptionRef=function(a){c.focusedOptionRef=a},c.menuListRef=null,c.getMenuListRef=function(a){c.menuListRef=a},c.inputRef=null,c.getInputRef=function(a){c.inputRef=a},c.focus=c.focusInput,c.blur=c.blurInput,c.onChange=function(b,a){var d=c.props,e=d.onChange,f=d.name;a.name=f,c.ariaOnChange(b,a),e(b,a)},c.setValue=function(b,d,e){var a=c.props,f=a.closeMenuOnSelect,g=a.isMulti,h=a.inputValue;c.onInputChange("",{action:"set-value",prevInputValue:h}),f&&(c.setState({inputIsHiddenAfterUpdate:!g}),c.onMenuClose()),c.setState({clearFocusValueOnUpdate:!0}),c.onChange(b,{action:d,option:e})},c.selectOption=function(b){var e=c.props,g=e.blurInputOnSelect,f=e.isMulti,h=e.name,d=c.state.selectValue,i=f&&c.isOptionSelected(b,d),j=c.isOptionDisabled(b,d);if(i){var k=c.getOptionValue(b);c.setValue((0,a.C)(d.filter(function(a){return c.getOptionValue(a)!==k})),"deselect-option",b)}else if(j){c.ariaOnChange((0,a.D)(b),{action:"select-option",option:b,name:h});return}else f?c.setValue((0,a.C)([].concat((0,s.Z)(d),[b])),"select-option",b):c.setValue((0,a.D)(b),"select-option");g&&c.blurInput()},c.removeValue=function(b){var e=c.props.isMulti,f=c.state.selectValue,h=c.getOptionValue(b),d=f.filter(function(a){return c.getOptionValue(a)!==h}),g=(0,a.E)(e,d,d[0]||null);c.onChange(g,{action:"remove-value",removedValue:b}),c.focusInput()},c.clearValue=function(){var b=c.state.selectValue;c.onChange((0,a.E)(c.props.isMulti,[],null),{action:"clear",removedValues:b})},c.popValue=function(){var e=c.props.isMulti,b=c.state.selectValue,f=b[b.length-1],d=b.slice(0,b.length-1),g=(0,a.E)(e,d,d[0]||null);c.onChange(g,{action:"pop-value",removedValue:f})},c.getValue=function(){return c.state.selectValue},c.cx=function(){for(var d=arguments.length,e=new Array(d),b=0;b<d;b++)e[b]=arguments[b];return a.F.apply(void 0,[c.props.classNamePrefix].concat(e))},c.getOptionLabel=function(a){return W(c.props,a)},c.getOptionValue=function(a){return X(c.props,a)},c.getStyles=function(b,d){var a=Q[b](d);a.boxSizing="border-box";var e=c.props.styles[b];return e?e(a,d):a},c.getElementId=function(a){return"".concat(c.instancePrefix,"-").concat(a)},c.getComponents=function(){return(0,a.G)(c.props)},c.buildCategorizedOptions=function(){return T(c.props,c.state.selectValue)},c.getCategorizedOptions=function(){return c.props.menuIsOpen?c.buildCategorizedOptions():[]},c.buildFocusableOptions=function(){return U(c.buildCategorizedOptions())},c.getFocusableOptions=function(){return c.props.menuIsOpen?c.buildFocusableOptions():[]},c.ariaOnChange=function(b,d){c.setState({ariaSelection:(0,a.a)({value:b},d)})},c.onMenuMouseDown=function(a){0===a.button&&(a.stopPropagation(),a.preventDefault(),c.focusInput())},c.onMenuMouseMove=function(a){c.blockOptionHover=!1},c.onControlMouseDown=function(a){if(!a.defaultPrevented){var b=c.props.openMenuOnClick;c.state.isFocused?c.props.menuIsOpen?"INPUT"!==a.target.tagName&&"TEXTAREA"!==a.target.tagName&&c.onMenuClose():b&&c.openMenu("first"):(b&&(c.openAfterFocus=!0),c.focusInput()),"INPUT"!==a.target.tagName&&"TEXTAREA"!==a.target.tagName&&a.preventDefault()}},c.onDropdownIndicatorMouseDown=function(a){if((!a||"mousedown"!==a.type||0===a.button)&&!c.props.isDisabled){var b=c.props,d=b.isMulti,e=b.menuIsOpen;c.focusInput(),e?(c.setState({inputIsHiddenAfterUpdate:!d}),c.onMenuClose()):c.openMenu("first"),a.preventDefault()}},c.onClearIndicatorMouseDown=function(a){a&&"mousedown"===a.type&&0!==a.button||(c.clearValue(),a.preventDefault(),c.openAfterFocus=!1,"touchend"===a.type?c.focusInput():setTimeout(function(){return c.focusInput()}))},c.onScroll=function(b){"boolean"==typeof c.props.closeMenuOnScroll?b.target instanceof HTMLElement&&(0,a.I)(b.target)&&c.props.onMenuClose():"function"==typeof c.props.closeMenuOnScroll&&c.props.closeMenuOnScroll(b)&&c.props.onMenuClose()},c.onCompositionStart=function(){c.isComposing=!0},c.onCompositionEnd=function(){c.isComposing=!1},c.onTouchStart=function(d){var b=d.touches,a=b&&b.item(0);a&&(c.initialTouchX=a.clientX,c.initialTouchY=a.clientY,c.userIsDragging=!1)},c.onTouchMove=function(d){var b=d.touches,a=b&&b.item(0);if(a){var e=Math.abs(a.clientX-c.initialTouchX),f=Math.abs(a.clientY-c.initialTouchY);c.userIsDragging=e>5||f>5}},c.onTouchEnd=function(a){c.userIsDragging||(c.controlRef&&!c.controlRef.contains(a.target)&&c.menuListRef&&!c.menuListRef.contains(a.target)&&c.blurInput(),c.initialTouchX=0,c.initialTouchY=0)},c.onControlTouchEnd=function(a){c.userIsDragging||c.onControlMouseDown(a)},c.onClearIndicatorTouchEnd=function(a){c.userIsDragging||c.onClearIndicatorMouseDown(a)},c.onDropdownIndicatorTouchEnd=function(a){c.userIsDragging||c.onDropdownIndicatorMouseDown(a)},c.handleInputChange=function(a){var b=c.props.inputValue,d=a.currentTarget.value;c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange(d,{action:"input-change",prevInputValue:b}),c.props.menuIsOpen||c.onMenuOpen()},c.onInputFocus=function(a){c.props.onFocus&&c.props.onFocus(a),c.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(c.openAfterFocus||c.props.openMenuOnFocus)&&c.openMenu("first"),c.openAfterFocus=!1},c.onInputBlur=function(a){var b=c.props.inputValue;if(c.menuListRef&&c.menuListRef.contains(document.activeElement)){c.inputRef.focus();return}c.props.onBlur&&c.props.onBlur(a),c.onInputChange("",{action:"input-blur",prevInputValue:b}),c.onMenuClose(),c.setState({focusedValue:null,isFocused:!1})},c.onOptionHover=function(a){c.blockOptionHover||c.state.focusedOption===a||c.setState({focusedOption:a})},c.shouldHideSelectedOptions=function(){return _(c.props)},c.onKeyDown=function(e){var a=c.props,g=a.isMulti,l=a.backspaceRemovesValue,m=a.escapeClearsValue,f=a.inputValue,i=a.isClearable,n=a.isDisabled,b=a.menuIsOpen,j=a.onKeyDown,o=a.tabSelectsValue,p=a.openMenuOnFocus,h=c.state,d=h.focusedOption,k=h.focusedValue,q=h.selectValue;if(!n){if("function"==typeof j&&(j(e),e.defaultPrevented))return;switch(c.blockOptionHover=!0,e.key){case"ArrowLeft":if(!g||f)return;c.focusValue("previous");break;case"ArrowRight":if(!g||f)return;c.focusValue("next");break;case"Delete":case"Backspace":if(f)return;if(k)c.removeValue(k);else{if(!l)return;g?c.popValue():i&&c.clearValue()}break;case"Tab":if(c.isComposing)return;if(e.shiftKey||!b||!o||!d||p&&c.isOptionSelected(d,q))return;c.selectOption(d);break;case"Enter":if(229===e.keyCode)break;if(b){if(!d)return;if(c.isComposing)return;c.selectOption(d);break}return;case"Escape":b?(c.setState({inputIsHiddenAfterUpdate:!1}),c.onInputChange("",{action:"menu-close",prevInputValue:f}),c.onMenuClose()):i&&m&&c.clearValue();break;case" ":if(f)return;if(!b){c.openMenu("first");break}if(!d)return;c.selectOption(d);break;case"ArrowUp":b?c.focusOption("up"):c.openMenu("last");break;case"ArrowDown":b?c.focusOption("down"):c.openMenu("first");break;case"PageUp":if(!b)return;c.focusOption("pageup");break;case"PageDown":if(!b)return;c.focusOption("pagedown");break;case"Home":if(!b)return;c.focusOption("first");break;case"End":if(!b)return;c.focusOption("last");break;default:return}e.preventDefault()}},c.instancePrefix="react-select-"+(c.props.instanceId|| ++aa),c.state.selectValue=(0,a.J)(e.value),c}return(0,q.Z)(b,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput()}},{key:"componentDidUpdate",value:function(b){var d=this.props,e=d.isDisabled,f=d.menuIsOpen,c=this.state.isFocused;(c&&!e&&b.isDisabled||c&&f&&!b.menuIsOpen)&&this.focusInput(),c&&e&&!b.isDisabled&&this.setState({isFocused:!1},this.onMenuClose),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&((0,a.K)(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(a,b){this.props.onInputChange(a,b)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var h=this,b=this.state,f=b.selectValue,g=b.isFocused,a=this.buildFocusableOptions(),c="first"===e?0:a.length-1;if(!this.props.isMulti){var d=a.indexOf(f[0]);d> -1&&(c=d)}this.scrollToFocusedOptionOnUpdate=!(g&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:a[c]},function(){return h.onMenuOpen()})}},{key:"focusValue",value:function(g){var d=this.state,b=d.selectValue,e=d.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var a=b.indexOf(e);e||(a=-1);var f=b.length-1,c=-1;if(b.length){switch(g){case"previous":c=0===a?0:-1===a?f:a-1;break;case"next":a> -1&&a<f&&(c=a+1)}this.setState({inputIsHidden:-1!==c,focusedValue:b[c]})}}}},{key:"focusOption",value:function(){var d=arguments.length>0&& void 0!==arguments[0]?arguments[0]:"first",e=this.props.pageSize,f=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var b=0,c=a.indexOf(f);f||(c=-1),"up"===d?b=c>0?c-1:a.length-1:"down"===d?b=(c+1)%a.length:"pageup"===d?(b=c-e)<0&&(b=0):"pagedown"===d?(b=c+e)>a.length-1&&(b=a.length-1):"last"===d&&(b=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[b],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(R):(0,a.a)((0,a.a)({},R),this.props.theme):R}},{key:"getCommonProps",value:function(){var b=this.clearValue,c=this.cx,d=this.getStyles,e=this.getValue,f=this.selectOption,g=this.setValue,a=this.props,h=a.isMulti,i=a.isRtl,j=a.options,k=this.hasValue();return{clearValue:b,cx:c,getStyles:d,getValue:e,hasValue:k,isMulti:h,isRtl:i,options:j,selectOption:f,selectProps:a,setValue:g,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var a=this.props,b=a.isClearable,c=a.isMulti;return void 0===b?c:b}},{key:"isOptionDisabled",value:function(a,b){return Y(this.props,a,b)}},{key:"isOptionSelected",value:function(a,b){return Z(this.props,a,b)}},{key:"filterOption",value:function(a,b){return $(this.props,a,b)}},{key:"formatOptionLabel",value:function(a,b){if("function"!=typeof this.props.formatOptionLabel)return this.getOptionLabel(a);var c=this.props.inputValue,d=this.state.selectValue;return this.props.formatOptionLabel(a,{context:b,inputValue:c,selectValue:d})}},{key:"formatGroupLabel",value:function(a){return this.props.formatGroupLabel(a)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var b=this.props,c=b.isDisabled,d=b.isSearchable,m=b.inputId,n=b.inputValue,e=b.tabIndex,f=b.form,g=b.menuIsOpen,p=this.getComponents(),q=p.Input,i=this.state,r=i.inputIsHidden,j=i.ariaSelection,s=this.commonProps,k=m||this.getElementId("input"),l=(0,a.a)((0,a.a)((0,a.a)({"aria-autocomplete":"list","aria-expanded":g,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],role:"combobox"},g&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!d&&{"aria-readonly":!0}),this.hasValue()?(null==j?void 0:j.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return d?h.createElement(q,(0,o.Z)({},s,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:k,innerRef:this.getInputRef,isDisabled:c,isHidden:r,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:e,form:f,type:"text",value:n},l)):h.createElement(D,(0,o.Z)({id:k,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:a.L,onFocus:this.onInputFocus,disabled:c,tabIndex:e,inputMode:"none",form:f,value:""},l))}},{key:"renderPlaceholderOrValue",value:function(){var q=this,a=this.getComponents(),r=a.MultiValue,s=a.MultiValueContainer,t=a.MultiValueLabel,u=a.MultiValueRemove,j=a.SingleValue,k=a.Placeholder,d=this.commonProps,b=this.props,l=b.controlShouldRenderValue,e=b.isDisabled,m=b.isMulti,f=b.inputValue,n=b.placeholder,c=this.state,g=c.selectValue,v=c.focusedValue,p=c.isFocused;if(!this.hasValue()||!l)return f?null:h.createElement(k,(0,o.Z)({},d,{key:"placeholder",isDisabled:e,isFocused:p,innerProps:{id:this.getElementId("placeholder")}}),n);if(m)return g.map(function(a,b){var c=a===v,f="".concat(q.getOptionLabel(a),"-").concat(q.getOptionValue(a));return h.createElement(r,(0,o.Z)({},d,{components:{Container:s,Label:t,Remove:u},isFocused:c,isDisabled:e,key:f,index:b,removeProps:{onClick:function(){return q.removeValue(a)},onTouchEnd:function(){return q.removeValue(a)},onMouseDown:function(a){a.preventDefault()}},data:a}),q.formatOptionLabel(a,"value"))});if(f)return null;var i=g[0];return h.createElement(j,(0,o.Z)({},d,{data:i,isDisabled:e}),this.formatOptionLabel(i,"value"))}},{key:"renderClearIndicator",value:function(){var a=this.getComponents().ClearIndicator,c=this.commonProps,b=this.props,d=b.isDisabled,e=b.isLoading,f=this.state.isFocused;if(!this.isClearable()||!a||d||!this.hasValue()||e)return null;var g={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return h.createElement(a,(0,o.Z)({},c,{innerProps:g,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var a=this.getComponents().LoadingIndicator,c=this.commonProps,b=this.props,d=b.isDisabled,e=b.isLoading,f=this.state.isFocused;if(!a||!e)return null;var g={"aria-hidden":"true"};return h.createElement(a,(0,o.Z)({},c,{innerProps:g,isDisabled:d,isFocused:f}))}},{key:"renderIndicatorSeparator",value:function(){var a=this.getComponents(),c=a.DropdownIndicator,b=a.IndicatorSeparator;if(!c||!b)return null;var d=this.commonProps,e=this.props.isDisabled,f=this.state.isFocused;return h.createElement(b,(0,o.Z)({},d,{isDisabled:e,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var a=this.getComponents().DropdownIndicator;if(!a)return null;var b=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused,e={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return h.createElement(a,(0,o.Z)({},b,{innerProps:e,isDisabled:c,isFocused:d}))}},{key:"renderMenu",value:function(){var e,z=this,c=this.getComponents(),A=c.Group,B=c.GroupHeading,C=c.Menu,D=c.MenuList,n=c.MenuPortal,p=c.LoadingMessage,q=c.NoOptionsMessage,E=c.Option,d=this.commonProps,F=this.state.focusedOption,b=this.props,G=b.captureMenuScroll,g=b.inputValue,r=b.isLoading,s=b.loadingMessage,t=b.minMenuHeight,u=b.maxMenuHeight,v=b.menuIsOpen,i=b.menuPlacement,f=b.menuPosition,j=b.menuPortalTarget,H=b.menuShouldBlockScroll,w=b.menuShouldScrollIntoView,x=b.noOptionsMessage,I=b.onMenuScrollToTop,J=b.onMenuScrollToBottom;if(!v)return null;var K=function(a,i){var j=a.type,c=a.data,b=a.isDisabled,k=a.isSelected,l=a.label,m=a.value,e=F===c,f=b?void 0:function(){return z.onOptionHover(c)},n=b?void 0:function(){return z.selectOption(c)},g="".concat(z.getElementId("option"),"-").concat(i),p={id:g,onClick:n,onMouseMove:f,onMouseOver:f,tabIndex:-1};return h.createElement(E,(0,o.Z)({},d,{innerProps:p,data:c,isDisabled:b,isSelected:k,key:g,label:l,type:j,value:m,isFocused:e,innerRef:e?z.getFocusedOptionRef:void 0}),z.formatOptionLabel(a.data,"menu"))};if(this.hasOptions())e=this.getCategorizedOptions().map(function(a){if("group"===a.type){var c=a.data,e=a.options,f=a.index,b="".concat(z.getElementId("group"),"-").concat(f),g="".concat(b,"-heading");return h.createElement(A,(0,o.Z)({},d,{key:b,data:c,options:e,Heading:B,headingProps:{id:g,data:a.data},label:z.formatGroupLabel(a.data)}),a.options.map(function(a){return K(a,"".concat(f,"-").concat(a.index))}))}if("option"===a.type)return K(a,"".concat(a.index))});else if(r){var k=s({inputValue:g});if(null===k)return null;e=h.createElement(p,d,k)}else{var l=x({inputValue:g});if(null===l)return null;e=h.createElement(q,d,l)}var y={minMenuHeight:t,maxMenuHeight:u,menuPlacement:i,menuPosition:f,menuShouldScrollIntoView:w},m=h.createElement(a.M,(0,o.Z)({},d,y),function(a){var c=a.ref,b=a.placerProps,f=b.placement,g=b.maxHeight;return h.createElement(C,(0,o.Z)({},d,y,{innerRef:c,innerProps:{onMouseDown:z.onMenuMouseDown,onMouseMove:z.onMenuMouseMove,id:z.getElementId("listbox")},isLoading:r,placement:f}),h.createElement(P,{captureEnabled:G,onTopArrive:I,onBottomArrive:J,lockEnabled:H},function(a){return h.createElement(D,(0,o.Z)({},d,{innerRef:function(b){z.getMenuListRef(b),a(b)},isLoading:r,maxHeight:g,focusedOption:F}),e)}))});return j||"fixed"===f?h.createElement(n,(0,o.Z)({},d,{appendTo:j,controlElement:this.controlRef,menuPlacement:i,menuPosition:f}),m):m}},{key:"renderFormField",value:function(){var k=this,b=this.props,d=b.delimiter,e=b.isDisabled,f=b.isMulti,c=b.name,a=this.state.selectValue;if(c&&!e){if(f){if(d){var g=a.map(function(a){return k.getOptionValue(a)}).join(d);return h.createElement("input",{name:c,type:"hidden",value:g})}var i=a.length>0?a.map(function(a,b){return h.createElement("input",{key:"i-".concat(b),name:c,type:"hidden",value:k.getOptionValue(a)})}):h.createElement("input",{name:c,type:"hidden"});return h.createElement("div",null,i)}var j=a[0]?this.getOptionValue(a[0]):"";return h.createElement("input",{name:c,type:"hidden",value:j})}}},{key:"renderLiveRegion",value:function(){var b=this.commonProps,a=this.state,c=a.ariaSelection,d=a.focusedOption,e=a.focusedValue,f=a.isFocused,g=a.selectValue,i=this.getFocusableOptions();return h.createElement(y,(0,o.Z)({},b,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:d,focusedValue:e,isFocused:f,selectValue:g,focusableOptions:i}))}},{key:"render",value:function(){var a=this.getComponents(),f=a.Control,g=a.IndicatorsContainer,i=a.SelectContainer,j=a.ValueContainer,b=this.props,k=b.className,l=b.id,c=b.isDisabled,m=b.menuIsOpen,e=this.state.isFocused,d=this.commonProps=this.getCommonProps();return h.createElement(i,(0,o.Z)({},d,{className:k,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:e}),this.renderLiveRegion(),h.createElement(f,(0,o.Z)({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:e,menuIsOpen:m}),h.createElement(j,(0,o.Z)({},d,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),h.createElement(g,(0,o.Z)({},d,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(b,c){var d=c.prevProps,r=c.clearFocusValueOnUpdate,k=c.inputIsHiddenAfterUpdate,f=c.ariaSelection,l=c.isFocused,m=c.prevWasFocused,s=b.options,n=b.value,o=b.menuIsOpen,t=b.inputValue,u=b.isMulti,e=(0,a.J)(n),p={};if(d&&(n!==d.value||s!==d.options||o!==d.menuIsOpen||t!==d.inputValue)){var v,z,q,g,h,w=o?U(T(v=b,e)):[],x=r?function(d,a){var b=d.focusedValue,c=d.selectValue.indexOf(b);if(c> -1){if(a.indexOf(b)> -1)return b;if(c<a.length)return a[c]}return null}(c,e):null,y=(q=c,g=w,(h=q.focusedOption)&&g.indexOf(h)> -1?h:g[0]);p={selectValue:e,focusedOption:y,focusedValue:x,clearFocusValueOnUpdate:!1}}var i=f,j=l&&m;return l&&!j&&(i={value:(0,a.E)(u,e,e[0]||null),options:e,action:"initial-input-focus"},j=!m),(null==f?void 0:f.action)==="initial-input-focus"&&(i=null),(0,a.a)((0,a.a)((0,a.a)({},p),null!=k&&b!==d?{inputIsHidden:k,inputIsHiddenAfterUpdate:void 0}:{}),{},{prevProps:b,ariaSelection:i,prevWasFocused:j})}}]),b}(h.Component);m.defaultProps=l},29865:function(w,l,a){"use strict";a.d(l,{A:function(){return V},B:function(){return W},C:function(){return aa},D:function(){return _},E:function(){return $},F:function(){return M},G:function(){return aI},H:function(){return Y},I:function(){return Q},J:function(){return N},K:function(){return U},L:function(){return e},M:function(){return r},N:function(){return P},"_":function(){return J},a:function(){return o},b:function(){return ap},c:function(){return aH},d:function(){return ai},e:function(){return au},f:function(){return ao},g:function(){return aw},h:function(){return ax},i:function(){return ak},j:function(){return aq},k:function(){return az},l:function(){return as},m:function(){return ag},n:function(){return ad},o:function(){return ae},p:function(){return ah},q:function(){return aB},r:function(){return ab},s:function(){return X},t:function(){return aC},u:function(){return aD},v:function(){return af},w:function(){return aE},x:function(){return aF},y:function(){return aG},z:function(){return aj}});var d,x=a(9652),m=a(82071),n=a(72410),y=a(45184),z=a(24114),A=a(18679),B=a(59518),C=a(74619),D=a(90958),E=a(2753),c=a(60822),F=a(52425);function G(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function H(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function o(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?H(Object(b),!0).forEach(function(a){G(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):H(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}function I(a){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function J(a){var b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}();return function(){var e,c,d,f=I(a);if(b){var g=I(this).constructor;d=Reflect.construct(f,arguments,g)}else d=f.apply(this,arguments);return e=this,(c=d)&&("object"==typeof c||"function"==typeof c)?c:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(e)}}var K=["className","clearValue","cx","getStyles","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],e=function(){};function L(b,a){return a?"-"===a[0]?b+a:b+"__"+a:b}function M(c,a,e){var d=[e];if(a&&c)for(var b in a)a.hasOwnProperty(b)&&a[b]&&d.push("".concat(L(c,b)));return d.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var N=function(a){return Z(a)?a.filter(Boolean):"object"===(0,A.Z)(a)&&null!==a?[a]:[]},O=function(a){return a.className,a.clearValue,a.cx,a.getStyles,a.getValue,a.hasValue,a.isMulti,a.isRtl,a.options,a.selectOption,a.selectProps,a.setValue,a.theme,o({},(0,y.Z)(a,K))};function P(a,d,b){if(b){var c=b(a,d);if("string"==typeof c)return c}return a}function Q(a){return[document.documentElement,document.body,window].indexOf(a)> -1}function R(a){return Q(a)?window.pageYOffset:a.scrollTop}function S(a,b){if(Q(a)){window.scrollTo(0,b);return}a.scrollTop=b}function T(a,b){var f=arguments.length>2&& void 0!==arguments[2]?arguments[2]:200,g=arguments.length>3&& void 0!==arguments[3]?arguments[3]:e,c=R(a),h=b-c,i=0;function d(){var b,e,j,k;i+=10,S(a,(b=i,e=c,(j=h)*((b=b/f-1)*b*b+1)+e)),i<f?window.requestAnimationFrame(d):g(a)}d()}function U(a,b){var d=a.getBoundingClientRect(),e=b.getBoundingClientRect(),c=b.offsetHeight/3;e.bottom+c>d.bottom?S(a,Math.min(b.offsetTop+b.clientHeight-a.offsetHeight+c,a.scrollHeight)):e.top-c<d.top&&S(a,Math.max(b.offsetTop-c,0))}function V(){try{return document.createEvent("TouchEvent"),!0}catch(a){return!1}}function W(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(a){return!1}}var p={get passive(){return!0}},b="undefined"!=typeof window?window:{};b.addEventListener&&b.removeEventListener&&(b.addEventListener("p",e,p),b.removeEventListener("p",e,!1));var X=!1;function Y(a){return null!=a}function Z(a){return Array.isArray(a)}function $(a,b,c){return a?b:c}function _(a){return a}function aa(a){return a}var ab=function(c){for(var b=arguments.length,d=new Array(b>1?b-1:0),a=1;a<b;a++)d[a-1]=arguments[a];return Object.entries(c).filter(function(a){var b=(0,z.Z)(a,1)[0];return!d.includes(b)}).reduce(function(a,c){var b=(0,z.Z)(c,2),d=b[0],e=b[1];return a[d]=e,a},{})},ac=function(a){return"auto"===a?"bottom":a},ad=function(c){var a,d,f=c.placement,b=c.theme,g=b.borderRadius,e=b.spacing,h=b.colors;return a={label:"menu"},(0,E.Z)(a,(d=f)?({bottom:"top",top:"bottom"})[d]:"bottom","100%"),(0,E.Z)(a,"backgroundColor",h.neutral0),(0,E.Z)(a,"borderRadius",g),(0,E.Z)(a,"boxShadow","0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)"),(0,E.Z)(a,"marginBottom",e.menuGutter),(0,E.Z)(a,"marginTop",e.menuGutter),(0,E.Z)(a,"position","absolute"),(0,E.Z)(a,"width","100%"),(0,E.Z)(a,"zIndex",1),a},q=(0,c.createContext)({getPortalPlacement:null}),r=function(b){(0,D.Z)(a,b);var c=J(a);function a(){var b;(0,B.Z)(this,a);for(var e=arguments.length,f=new Array(e),d=0;d<e;d++)f[d]=arguments[d];return(b=c.call.apply(c,[this].concat(f))).state={maxHeight:b.props.maxMenuHeight,placement:null},b.context=void 0,b.getPlacement=function(c){var a=b.props,g=a.minMenuHeight,h=a.maxMenuHeight,i=a.menuPlacement,j=a.menuPosition,k=a.menuShouldScrollIntoView,l=a.theme;if(c){var d="fixed"===j,e=function(d){var b=d.maxHeight,e=d.menuEl,f=d.minHeight,j=d.placement,h=d.shouldScroll,a=d.isFixedPosition,B=d.theme.spacing,c=function(c){var a=getComputedStyle(c),d="absolute"===a.position,e=/(auto|scroll)/;if("fixed"===a.position)return document.documentElement;for(var b=c;b=b.parentElement;)if(a=getComputedStyle(b),(!d||"static"!==a.position)&&e.test(a.overflow+a.overflowY+a.overflowX))return b;return document.documentElement}(e),u={placement:"bottom",maxHeight:b};if(!e||!e.offsetParent)return u;var v,C=c.getBoundingClientRect().height,p=e.getBoundingClientRect(),D=p.bottom,k=p.height,q=p.top,E=e.offsetParent.getBoundingClientRect(),F=E.top,w=a?window.innerHeight:Q(v=c)?window.innerHeight:v.clientHeight,l=R(c),m=parseInt(getComputedStyle(e).marginBottom,10),n=parseInt(getComputedStyle(e).marginTop,10),g=F-n,r=w-q,i=g+l,s=C-l-q,t=D-w+l+m,x=l+q-n,o=160;switch(j){case"auto":case"bottom":if(r>=k)return{placement:"bottom",maxHeight:b};if(s>=k&&!a)return h&&T(c,t,o),{placement:"bottom",maxHeight:b};if(!a&&s>=f||a&&r>=f)return h&&T(c,t,o),{placement:"bottom",maxHeight:a?r-m:s-m};if("auto"===j||a){var y=b,z=a?g:i;return z>=f&&(y=Math.min(z-m-B.controlHeight,b)),{placement:"top",maxHeight:y}}if("bottom"===j)return h&&S(c,t),{placement:"bottom",maxHeight:b};break;case"top":if(g>=k)return{placement:"top",maxHeight:b};if(i>=k&&!a)return h&&T(c,x,o),{placement:"top",maxHeight:b};if(!a&&i>=f||a&&g>=f){var A=b;return(!a&&i>=f||a&&g>=f)&&(A=a?g-n:i-n),h&&T(c,x,o),{placement:"top",maxHeight:A}}return{placement:"bottom",maxHeight:b};default:throw new Error('Invalid placement provided "'.concat(j,'".'))}return u}({maxHeight:h,menuEl:c,minHeight:g,placement:i,shouldScroll:k&&!d,isFixedPosition:d,theme:l}),f=b.context.getPortalPlacement;f&&f(e),b.setState(e)}},b.getUpdatedProps=function(){var a=b.props.menuPlacement,c=b.state.placement||ac(a);return o(o({},b.props),{},{placement:c,maxHeight:b.state.maxHeight})},b}return(0,C.Z)(a,[{key:"render",value:function(){return(0,this.props.children)({ref:this.getPlacement,placerProps:this.getUpdatedProps()})}}]),a}(c.Component);r.contextType=q;var ae=function(a){var c=a.maxHeight,b=a.theme.spacing.baseUnit;return{maxHeight:c,overflowY:"auto",paddingBottom:b,paddingTop:b,position:"relative",WebkitOverflowScrolling:"touch"}},f=function(c){var a=c.theme,b=a.spacing.baseUnit;return{color:a.colors.neutral40,padding:"".concat(2*b,"px ").concat(3*b,"px"),textAlign:"center"}},af=f,ag=f,g=function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({css:e("noOptionsMessage",a),className:d({"menu-notice":!0,"menu-notice--no-options":!0},c)},f),b)};g.defaultProps={children:"No options"};var h=function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({css:e("loadingMessage",a),className:d({"menu-notice":!0,"menu-notice--loading":!0},c)},f),b)};h.defaultProps={children:"Loading..."};var ah=function(a){var b=a.rect,c=a.offset,d=a.position;return{left:b.left,position:d,top:c,width:b.width,zIndex:1}},s=function(b){(0,D.Z)(a,b);var c=J(a);function a(){var d;(0,B.Z)(this,a);for(var e=arguments.length,f=new Array(e),b=0;b<e;b++)f[b]=arguments[b];return(d=c.call.apply(c,[this].concat(f))).state={placement:null},d.getPortalPlacement=function(b){var a=b.placement;a!==ac(d.props.menuPlacement)&&d.setState({placement:a})},d}return(0,C.Z)(a,[{key:"render",value:function(){var a=this.props,c=a.appendTo,i=a.children,j=a.className,d=a.controlElement,k=a.cx,l=a.innerProps,n=a.menuPlacement,e=a.menuPosition,o=a.getStyles,f="fixed"===e;if(!c&&!f||!d)return null;var t,b,p=this.state.placement||ac(n),g={bottom:(b=d.getBoundingClientRect()).bottom,height:b.height,left:b.left,right:b.right,top:b.top,width:b.width},r=f?0:window.pageYOffset,s=g[p]+r,h=(0,m.tZ)("div",(0,x.Z)({css:o("menuPortal",{offset:s,position:e,rect:g}),className:k({"menu-portal":!0},j)},l),i);return(0,m.tZ)(q.Provider,{value:{getPortalPlacement:this.getPortalPlacement}},c?(0,F.createPortal)(h,c):h)}}]),a}(c.Component),ai=function(a){var b=a.isDisabled,c=a.isRtl;return{label:"container",direction:c?"rtl":void 0,pointerEvents:b?"none":void 0,position:"relative"}},aj=function(a){var b=a.theme.spacing,c=a.isMulti,d=a.hasValue,e=a.selectProps.controlShouldRenderValue;return{alignItems:"center",display:c&&d&&e?"flex":"grid",flex:1,flexWrap:"wrap",padding:"".concat(b.baseUnit/2,"px ").concat(2*b.baseUnit,"px"),WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"}},ak=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},al=["size"],am={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},an=function(a){var b=a.size,c=(0,y.Z)(a,al);return(0,m.tZ)("svg",(0,x.Z)({height:b,width:b,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:am},c))},t=function(a){return(0,m.tZ)(an,(0,x.Z)({size:20},a),(0,m.tZ)("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},u=function(a){return(0,m.tZ)(an,(0,x.Z)({size:20},a),(0,m.tZ)("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},i=function(b){var c=b.isFocused,d=b.theme,e=d.spacing.baseUnit,a=d.colors;return{label:"indicatorContainer",color:c?a.neutral60:a.neutral20,display:"flex",padding:2*e,transition:"color 150ms",":hover":{color:c?a.neutral80:a.neutral40}}},ao=i,ap=i,aq=function(a){var e=a.isDisabled,b=a.theme,c=b.spacing.baseUnit,d=b.colors;return{label:"indicatorSeparator",alignSelf:"stretch",backgroundColor:e?d.neutral10:d.neutral20,marginBottom:2*c,marginTop:2*c,width:1}},ar=(0,m.F4)(d||(d=(0,n.Z)(["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"]))),as=function(a){var e=a.isFocused,b=a.size,c=a.theme,d=c.colors,f=c.spacing.baseUnit;return{label:"loadingIndicator",color:e?d.neutral60:d.neutral20,display:"flex",padding:2*f,transition:"color 150ms",alignSelf:"center",fontSize:b,lineHeight:1,marginRight:b,textAlign:"center",verticalAlign:"middle"}},at=function(a){var b=a.delay,c=a.offset;return(0,m.tZ)("span",{css:(0,m.iv)({animation:"".concat(ar," 1s ease-in-out ").concat(b,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:c?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},j=function(a){var c=a.className,d=a.cx,e=a.getStyles,f=a.innerProps,b=a.isRtl;return(0,m.tZ)("div",(0,x.Z)({css:e("loadingIndicator",a),className:d({indicator:!0,"loading-indicator":!0},c)},f),(0,m.tZ)(at,{delay:0,offset:b}),(0,m.tZ)(at,{delay:160,offset:!0}),(0,m.tZ)(at,{delay:320,offset:!b}))};j.defaultProps={size:4};var au=function(b){var e=b.isDisabled,c=b.isFocused,d=b.theme,a=d.colors,f=d.borderRadius,g=d.spacing;return{label:"control",alignItems:"center",backgroundColor:e?a.neutral5:a.neutral0,borderColor:e?a.neutral10:c?a.primary:a.neutral20,borderRadius:f,borderStyle:"solid",borderWidth:1,boxShadow:c?"0 0 0 1px ".concat(a.primary):void 0,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:g.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:c?a.primary:a.neutral30}}},av=["data"],aw=function(b){var a=b.theme.spacing;return{paddingBottom:2*a.baseUnit,paddingTop:2*a.baseUnit}},ax=function(b){var a=b.theme.spacing;return{label:"group",color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"}},ay=["innerRef","isDisabled","isHidden","inputClassName"],az=function(a){var d=a.isDisabled,e=a.value,c=a.theme,b=c.spacing,f=c.colors;return o({margin:b.baseUnit/2,paddingBottom:b.baseUnit/2,paddingTop:b.baseUnit/2,visibility:d?"hidden":"visible",color:f.neutral80,transform:e?"translateZ(0)":""},aA)},v={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},aA={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":o({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},v)},aB=function(b){var a=b.theme,c=a.spacing,d=a.borderRadius,e=a.colors;return{label:"multiValue",backgroundColor:e.neutral10,borderRadius:d/2,display:"flex",margin:c.baseUnit/2,minWidth:0}},aC=function(a){var b=a.theme,d=b.borderRadius,e=b.colors,c=a.cropWithEllipsis;return{borderRadius:d/2,color:e.neutral80,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:c|| void 0===c?"ellipsis":void 0,whiteSpace:"nowrap"}},aD=function(c){var a=c.theme,d=a.spacing,e=a.borderRadius,b=a.colors,f=c.isFocused;return{alignItems:"center",borderRadius:e/2,backgroundColor:f?b.dangerLight:void 0,display:"flex",paddingLeft:d.baseUnit,paddingRight:d.baseUnit,":hover":{backgroundColor:b.dangerLight,color:b.danger}}},k=function(a){var b=a.children,c=a.innerProps;return(0,m.tZ)("div",c,b)},aE=function(b){var d=b.isDisabled,g=b.isFocused,c=b.isSelected,e=b.theme,f=e.spacing,a=e.colors;return{label:"option",backgroundColor:c?a.primary:g?a.primary25:"transparent",color:d?a.neutral20:c?a.neutral0:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:"".concat(2*f.baseUnit,"px ").concat(3*f.baseUnit,"px"),width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:d?void 0:c?a.primary:a.primary50}}},aF=function(c){var a=c.theme,b=a.spacing;return{label:"placeholder",color:a.colors.neutral50,gridArea:"1 / 1 / 2 / 3",marginLeft:b.baseUnit/2,marginRight:b.baseUnit/2}},aG=function(a){var e=a.isDisabled,b=a.theme,c=b.spacing,d=b.colors;return{label:"singleValue",color:e?d.neutral40:d.neutral80,gridArea:"1 / 1 / 2 / 3",marginLeft:c.baseUnit/2,marginRight:c.baseUnit/2,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},aH={ClearIndicator:function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({css:e("clearIndicator",a),className:d({indicator:!0,"clear-indicator":!0},c)},f),b||(0,m.tZ)(t,null))},Control:function(a){var b=a.children,c=a.cx,d=a.getStyles,e=a.className,f=a.isDisabled,g=a.isFocused,h=a.innerRef,i=a.innerProps,j=a.menuIsOpen;return(0,m.tZ)("div",(0,x.Z)({ref:h,css:d("control",a),className:c({control:!0,"control--is-disabled":f,"control--is-focused":g,"control--menu-is-open":j},e)},i),b)},DropdownIndicator:function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({css:e("dropdownIndicator",a),className:d({indicator:!0,"dropdown-indicator":!0},c)},f),b||(0,m.tZ)(u,null))},DownChevron:u,CrossIcon:t,Group:function(a){var d=a.children,e=a.className,b=a.cx,c=a.getStyles,f=a.Heading,g=a.headingProps,h=a.innerProps,i=a.label,j=a.theme,k=a.selectProps;return(0,m.tZ)("div",(0,x.Z)({css:c("group",a),className:b({group:!0},e)},h),(0,m.tZ)(f,(0,x.Z)({},g,{selectProps:k,theme:j,getStyles:c,cx:b}),i),(0,m.tZ)("div",null,d))},GroupHeading:function(a){var c=a.getStyles,d=a.cx,e=a.className,b=O(a);b.data;var f=(0,y.Z)(b,av);return(0,m.tZ)("div",(0,x.Z)({css:c("groupHeading",a),className:d({"group-heading":!0},e)},f))},IndicatorsContainer:function(a){var b=a.children,c=a.className,d=a.cx,e=a.innerProps,f=a.getStyles;return(0,m.tZ)("div",(0,x.Z)({css:f("indicatorsContainer",a),className:d({indicators:!0},c)},e),b)},IndicatorSeparator:function(a){var b=a.className,c=a.cx,d=a.getStyles,e=a.innerProps;return(0,m.tZ)("span",(0,x.Z)({},e,{css:d("indicatorSeparator",a),className:c({"indicator-separator":!0},b)}))},Input:function(a){var l,d=a.className,c=a.cx,e=a.getStyles,f=a.value,b=O(a),g=b.innerRef,h=b.isDisabled,i=b.isHidden,j=b.inputClassName,k=(0,y.Z)(b,ay);return(0,m.tZ)("div",{className:c({"input-container":!0},d),css:e("input",a),"data-value":f||""},(0,m.tZ)("input",(0,x.Z)({className:c({input:!0},j),ref:g,style:o({label:"input",color:"inherit",background:0,opacity:i?0:1,width:"100%"},v),disabled:h},k)))},LoadingIndicator:j,Menu:function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.innerRef,g=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({css:e("menu",a),className:d({menu:!0},c),ref:f},g),b)},MenuList:function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.innerProps,g=a.innerRef,h=a.isMulti;return(0,m.tZ)("div",(0,x.Z)({css:e("menuList",a),className:d({"menu-list":!0,"menu-list--is-multi":h},c),ref:g},f),b)},MenuPortal:s,LoadingMessage:h,NoOptionsMessage:g,MultiValue:function(a){var c=a.children,d=a.className,b=a.components,e=a.cx,f=a.data,g=a.getStyles,h=a.innerProps,i=a.isDisabled,j=a.removeProps,k=a.selectProps,l=b.Container,n=b.Label,p=b.Remove;return(0,m.tZ)(m.ms,null,function(r){var b=r.css,q=r.cx;return(0,m.tZ)(l,{data:f,innerProps:o({className:q(b(g("multiValue",a)),e({"multi-value":!0,"multi-value--is-disabled":i},d))},h),selectProps:k},(0,m.tZ)(n,{data:f,innerProps:{className:q(b(g("multiValueLabel",a)),e({"multi-value__label":!0},d))},selectProps:k},c),(0,m.tZ)(p,{data:f,innerProps:o({className:q(b(g("multiValueRemove",a)),e({"multi-value__remove":!0},d)),"aria-label":"Remove ".concat(c||"option")},j),selectProps:k}))})},MultiValueContainer:k,MultiValueLabel:k,MultiValueRemove:function(a){var b=a.children,c=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({role:"button"},c),b||(0,m.tZ)(t,{size:14}))},Option:function(a){var c=a.children,d=a.className,e=a.cx,f=a.getStyles,b=a.isDisabled,g=a.isFocused,h=a.isSelected,i=a.innerRef,j=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({css:f("option",a),className:e({option:!0,"option--is-disabled":b,"option--is-focused":g,"option--is-selected":h},d),ref:i,"aria-disabled":b},j),c)},Placeholder:function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({css:e("placeholder",a),className:d({placeholder:!0},c)},f),b)},SelectContainer:function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.innerProps,g=a.isDisabled,h=a.isRtl;return(0,m.tZ)("div",(0,x.Z)({css:e("container",a),className:d({"--is-disabled":g,"--is-rtl":h},c)},f),b)},SingleValue:function(a){var b=a.children,c=a.className,d=a.cx,e=a.getStyles,f=a.isDisabled,g=a.innerProps;return(0,m.tZ)("div",(0,x.Z)({css:e("singleValue",a),className:d({"single-value":!0,"single-value--is-disabled":f},c)},g),b)},ValueContainer:function(a){var b=a.children,c=a.className,d=a.cx,e=a.innerProps,f=a.isMulti,g=a.getStyles,h=a.hasValue;return(0,m.tZ)("div",(0,x.Z)({css:g("valueContainer",a),className:d({"value-container":!0,"value-container--is-multi":f,"value-container--has-value":h},c)},e),b)}},aI=function(a){return o(o({},aH),a.components)}},3798:function(c,b,a){"use strict";a.d(b,{u:function(){return i}});var d=a(29865),e=a(24114),f=a(45184),g=a(60822),h=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function i(a){var j=a.defaultInputValue,k=a.defaultMenuIsOpen,l=a.defaultValue,b=a.inputValue,c=a.menuIsOpen,p=a.onChange,q=a.onInputChange,r=a.onMenuClose,s=a.onMenuOpen,i=a.value,t=(0,f.Z)(a,h),u=(0,g.useState)(void 0!==b?b:void 0===j?"":j),m=(0,e.Z)(u,2),v=m[0],E=m[1],w=(0,g.useState)(void 0!==c?c:void 0!==k&&k),n=(0,e.Z)(w,2),x=n[0],F=n[1],y=(0,g.useState)(void 0!==i?i:void 0===l?null:l),o=(0,e.Z)(y,2),z=o[0],G=o[1],A=(0,g.useCallback)(function(a,b){"function"==typeof p&&p(a,b),G(a)},[p]),B=(0,g.useCallback)(function(b,c){var a;"function"==typeof q&&(a=q(b,c)),E(void 0!==a?a:b)},[q]),C=(0,g.useCallback)(function(){"function"==typeof s&&s(),F(!0)},[s]),D=(0,g.useCallback)(function(){"function"==typeof r&&r(),F(!1)},[r]);return(0,d.a)((0,d.a)({},t),{},{inputValue:void 0!==b?b:v,menuIsOpen:void 0!==c?c:x,onChange:A,onInputChange:B,onMenuClose:D,onMenuOpen:C,value:void 0!==i?i:z})}},80386:function(c,a,b){"use strict";function d(d,e){let a;if(void 0===e)for(let c of d)null!=c&&(a<c|| void 0===a&&c>=c)&&(a=c);else{let f=-1;for(let b of d)null!=(b=e(b,++f,d))&&(a<b|| void 0===a&&b>=b)&&(a=b)}return a}b.d(a,{Z:function(){return d}})},92498:function(c,a,b){"use strict";function d(d,e){let a;if(void 0===e)for(let c of d)null!=c&&(a>c|| void 0===a&&c>=c)&&(a=c);else{let f=-1;for(let b of d)null!=(b=e(b,++f,d))&&(a>b|| void 0===a&&b>=b)&&(a=b)}return a}b.d(a,{Z:function(){return d}})},25491:function(c,a,b){"use strict";function d(a,b,c){a=+a,b=+b,c=(e=arguments.length)<2?(b=a,a=0,1):e<3?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a+d*c;return f}b.d(a,{Z:function(){return d}})},56535:function(q,k,f){"use strict";f.d(k,{B8:function(){return m},Il:function(){return e},SU:function(){return B},Ss:function(){return n},Ym:function(){return o},ZP:function(){return l}});var c=f(91680);function e(){}var b="\\s*([+-]?\\d+)\\s*",d="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[b,b,b]+"\\)$"),t=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),u=new RegExp("^rgba\\("+[b,b,b,d]+"\\)$"),v=new RegExp("^rgba\\("+[a,a,a,d]+"\\)$"),w=new RegExp("^hsl\\("+[d,a,a]+"\\)$"),x=new RegExp("^hsla\\("+[d,a,a,d]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function h(){return this.rgb().formatRgb()}function l(b){var a,c;return b=(b+"").trim().toLowerCase(),(a=r.exec(b))?(c=a[1].length,a=parseInt(a[1],16),6===c?z(a):3===c?new n(a>>8&15|a>>4&240,a>>4&15|240&a,(15&a)<<4|15&a,1):8===c?A(a>>24&255,a>>16&255,a>>8&255,(255&a)/255):4===c?A(a>>12&15|a>>8&240,a>>8&15|a>>4&240,a>>4&15|240&a,((15&a)<<4|15&a)/255):null):(a=s.exec(b))?new n(a[1],a[2],a[3],1):(a=t.exec(b))?new n(255*a[1]/100,255*a[2]/100,255*a[3]/100,1):(a=u.exec(b))?A(a[1],a[2],a[3],a[4]):(a=v.exec(b))?A(255*a[1]/100,255*a[2]/100,255*a[3]/100,a[4]):(a=w.exec(b))?D(a[1],a[2]/100,a[3]/100,1):(a=x.exec(b))?D(a[1],a[2]/100,a[3]/100,a[4]):y.hasOwnProperty(b)?z(y[b]):"transparent"===b?new n(NaN,NaN,NaN,0):null}function z(a){return new n(a>>16&255,a>>8&255,255&a,1)}function A(a,b,c,d){return d<=0&&(a=b=c=NaN),new n(a,b,c,d)}function B(a){return(a instanceof e||(a=l(a)),a)?(a=a.rgb(),new n(a.r,a.g,a.b,a.opacity)):new n}function m(a,c,d,b){return 1===arguments.length?B(a):new n(a,c,d,null==b?1:b)}function n(a,b,c,d){this.r=+a,this.g=+b,this.b=+c,this.opacity=+d}function i(){return"#"+C(this.r)+C(this.g)+C(this.b)}function j(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===a?")":", "+a+")")}function C(a){return((a=Math.max(0,Math.min(255,Math.round(a)||0)))<16?"0":"")+a.toString(16)}function D(a,b,c,d){return d<=0?a=b=c=NaN:c<=0||c>=1?a=b=NaN:b<=0&&(a=NaN),new p(a,b,c,d)}function E(a){if(a instanceof p)return new p(a.h,a.s,a.l,a.opacity);if(a instanceof e||(a=l(a)),!a)return new p;if(a instanceof p)return a;var f=(a=a.rgb()).r/255,c=a.g/255,g=a.b/255,h=Math.min(f,c,g),d=Math.max(f,c,g),i=NaN,b=d-h,j=(d+h)/2;return b?(i=f===d?(c-g)/b+(c<g)*6:c===d?(g-f)/b+2:(f-c)/b+4,b/=j<.5?d+h:2-d-h,i*=60):b=j>0&&j<1?0:i,new p(i,b,j,a.opacity)}function o(a,c,d,b){return 1===arguments.length?E(a):new p(a,c,d,null==b?1:b)}function p(a,b,c,d){this.h=+a,this.s=+b,this.l=+c,this.opacity=+d}function F(a,b,c){return(a<60?b+(c-b)*a/60:a<180?c:a<240?b+(c-b)*(240-a)/60:b)*255}(0,c.Z)(e,l,{copy:function(a){return Object.assign(new this.constructor,this,a)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return E(this).formatHsl()},formatRgb:h,toString:h}),(0,c.Z)(n,m,(0,c.l)(e,{brighter:function(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new n(this.r*a,this.g*a,this.b*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new n(this.r*a,this.g*a,this.b*a,this.opacity)},rgb:function(){return this},displayable:function(){return -0.5<=this.r&&this.r<255.5&& -0.5<=this.g&&this.g<255.5&& -0.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:i,formatHex:i,formatRgb:j,toString:j})),(0,c.Z)(p,o,(0,c.l)(e,{brighter:function(a){return a=null==a?1.4285714285714286:Math.pow(1.4285714285714286,a),new p(this.h,this.s,this.l*a,this.opacity)},darker:function(a){return a=null==a?.7:Math.pow(.7,a),new p(this.h,this.s,this.l*a,this.opacity)},rgb:function(){var a=this.h%360+(this.h<0)*360,e=isNaN(a)||isNaN(this.s)?0:this.s,b=this.l,c=b+(b<.5?b:1-b)*e,d=2*b-c;return new n(F(a>=240?a-240:a+120,d,c),F(a,d,c),F(a<120?a+240:a-120,d,c),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var a=this.opacity;return(1===(a=isNaN(a)?1:Math.max(0,Math.min(1,a)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===a?")":", "+a+")")}}))},91680:function(c,a,b){"use strict";function d(a,c,b){a.prototype=c.prototype=b,b.constructor=a}function e(d,a){var b=Object.create(d.prototype);for(var c in a)b[c]=a[c];return b}b.d(a,{Z:function(){return d},l:function(){return e}})},38668:function(d,c){"use strict";var e={value:function(){}};function a(){for(var a,c=0,e=arguments.length,d={};c<e;++c){if(!(a=arguments[c]+"")||a in d||/[\s.]/.test(a))throw new Error("illegal type: "+a);d[a]=[]}return new b(d)}function b(a){this._=a}function f(b,d){for(var c,a=0,e=b.length;a<e;++a)if((c=b[a]).name===d)return c.value}function g(a,c,d){for(var b=0,f=a.length;b<f;++b)if(a[b].name===c){a[b]=e,a=a.slice(0,b).concat(a.slice(b+1));break}return null!=d&&a.push({name:c,value:d}),a}b.prototype=a.prototype={constructor:b,on:function(c,d){var i,k,a,b=this._,h=(i=c+"",k=b,i.trim().split(/^|\s+/).map(function(a){var c="",b=a.indexOf(".");if(b>=0&&(c=a.slice(b+1),a=a.slice(0,b)),a&&!k.hasOwnProperty(a))throw new Error("unknown type: "+a);return{type:a,name:c}})),e=-1,j=h.length;if(arguments.length<2){for(;++e<j;)if((a=(c=h[e]).type)&&(a=f(b[a],c.name)))return a;return}if(null!=d&&"function"!=typeof d)throw new Error("invalid callback: "+d);for(;++e<j;)if(a=(c=h[e]).type)b[a]=g(b[a],c.name,d);else if(null==d)for(a in b)b[a]=g(b[a],c.name,null);return this},copy:function(){var a={},c=this._;for(var d in c)a[d]=c[d].slice();return new b(a)},call:function(c,f){if((b=arguments.length-2)>0)for(var b,d,e=new Array(b),a=0;a<b;++a)e[a]=arguments[a+2];if(!this._.hasOwnProperty(c))throw new Error("unknown type: "+c);for(d=this._[c],a=0,b=d.length;a<b;++a)d[a].value.apply(f,e)},apply:function(a,d,e){if(!this._.hasOwnProperty(a))throw new Error("unknown type: "+a);for(var c=this._[a],b=0,f=c.length;b<f;++b)c[b].value.apply(d,e)}},c.Z=a},29105:function(i,c,a){"use strict";a.d(c,{WU:function(){return d},jH:function(){return e}});var j,b,d,e,k=a(36545),l=a(42938),f=a(22471);function g(d,e){var c=(0,f.V)(d,e);if(!c)return d+"";var a=c[0],b=c[1];return b<0?"0."+new Array(-b).join("0")+a:a.length>b+1?a.slice(0,b+1)+"."+a.slice(b+1):a+new Array(b-a.length+2).join("0")}var m={"%":function(a,b){return(100*a).toFixed(b)},b:function(a){return Math.round(a).toString(2)},c:function(a){return a+""},d:f.Z,e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},g:function(a,b){return a.toPrecision(b)},o:function(a){return Math.round(a).toString(8)},p:function(a,b){return g(100*a,b)},r:g,s:function(c,g){var d=(0,f.V)(c,g);if(!d)return c+"";var b=d[0],h=d[1],a=h-(j=3*Math.max(-8,Math.min(8,Math.floor(h/3))))+1,e=b.length;return a===e?b:a>e?b+new Array(a-e+1).join("0"):a>0?b.slice(0,a)+"."+b.slice(a):"0."+new Array(1-a).join("0")+(0,f.V)(c,Math.max(0,g+a-1))[0]},X:function(a){return Math.round(a).toString(16).toUpperCase()},x:function(a){return Math.round(a).toString(16)}};function n(a){return a}var h,o=Array.prototype.map,p=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];d=(b=function(a){var b,c,d,f=void 0===a.grouping|| void 0===a.thousands?n:(b=o.call(a.grouping,Number),c=a.thousands+"",function(g,d){for(var e=g.length,h=[],i=0,a=b[0],f=0;e>0&&a>0&&(f+a+1>d&&(a=Math.max(1,d-f)),h.push(g.substring(e-=a,e+a)),!((f+=a+1)>d));)a=b[i=(i+1)%b.length];return h.reverse().join(c)}),g=void 0===a.currency?"":a.currency[0]+"",h=void 0===a.currency?"":a.currency[1]+"",i=void 0===a.decimal?".":a.decimal+"",q=void 0===a.numerals?n:(d=o.call(a.numerals,String),function(a){return a.replace(/[0-9]/g,function(a){return d[+a]})}),r=void 0===a.percent?"%":a.percent+"",s=void 0===a.minus?"-":a.minus+"",t=void 0===a.nan?"NaN":a.nan+"";function e(a){var e=(a=(0,l.Z)(a)).fill,k=a.align,w=a.sign,d=a.symbol,n=a.zero,x=a.width,u=a.comma,c=a.precision,v=a.trim,b=a.type;"n"===b?(u=!0,b="g"):m[b]||(void 0===c&&(c=12),v=!0,b="g"),(n||"0"===e&&"="===k)&&(n=!0,e="0",k="=");var y="$"===d?g:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",z="$"===d?h:/[%p]/.test(b)?r:"",A=m[b],B=/[defgprs%]/.test(b);function o(a){var l,C,r,h=y,d=z;if("c"===b)d=A(a)+d,a="";else{var m=(a=+a)<0||1/a<0;if(a=isNaN(a)?t:A(Math.abs(a),c),v&&(a=function(c){out:for(var d,e=c.length,a=1,b=-1;a<e;++a)switch(c[a]){case".":b=d=a;break;case"0":0===b&&(b=a),d=a;break;default:if(!+c[a])break out;b>0&&(b=0)}return b>0?c.slice(0,b)+c.slice(d+1):c}(a)),m&&0== +a&&"+"!==w&&(m=!1),h=(m?"("===w?w:s:"-"===w||"("===w?"":w)+h,d=("s"===b?p[8+j/3]:"")+d+(m&&"("===w?")":""),B){for(l=-1,C=a.length;++l<C;)if(48>(r=a.charCodeAt(l))||r>57){d=(46===r?i+a.slice(l+1):a.slice(l))+d,a=a.slice(0,l);break}}}u&&!n&&(a=f(a,1/0));var o=h.length+a.length+d.length,g=o<x?new Array(x-o+1).join(e):"";switch(u&&n&&(a=f(g+a,g.length?x-d.length:1/0),g=""),k){case"<":a=h+a+d+g;break;case"=":a=h+g+a+d;break;case"^":a=g.slice(0,o=g.length>>1)+h+a+d+g.slice(o);break;default:a=g+h+a+d}return q(a)}return c=void 0===c?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,c)):Math.max(0,Math.min(20,c)),o.toString=function(){return a+""},o}return{format:e,formatPrefix:function(a,c){var d=e(((a=(0,l.Z)(a)).type="f",a)),b=3*Math.max(-8,Math.min(8,Math.floor((0,k.Z)(c)/3))),f=Math.pow(10,-b),g=p[8+b/3];return function(a){return d(f*a)+g}}}}(h={decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"})).format,e=b.formatPrefix},36545:function(c,b,a){"use strict";a.d(b,{Z:function(){return e}});var d=a(22471);function e(a){return(a=(0,d.V)(Math.abs(a)))?a[1]:NaN}},22471:function(c,a,b){"use strict";function d(a){return Math.abs(a=Math.round(a))>=1e21?a.toLocaleString("en").replace(/,/g,""):a.toString(10)}function e(a,c){if((d=(a=c?a.toExponential(c-1):a.toExponential()).indexOf("e"))<0)return null;var d,b=a.slice(0,d);return[b.length>1?b[0]+b.slice(2):b,+a.slice(d+1)]}b.d(a,{V:function(){return e},Z:function(){return d}})},42938:function(e,b,c){"use strict";c.d(b,{Z:function(){return d}});var f=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function d(c){var b;if(!(b=f.exec(c)))throw new Error("invalid format: "+c);return new a({fill:b[1],align:b[2],sign:b[3],symbol:b[4],zero:b[5],width:b[6],comma:b[7],precision:b[8]&&b[8].slice(1),trim:b[9],type:b[10]})}function a(a){this.fill=void 0===a.fill?" ":a.fill+"",this.align=void 0===a.align?">":a.align+"",this.sign=void 0===a.sign?"-":a.sign+"",this.symbol=void 0===a.symbol?"":a.symbol+"",this.zero=!!a.zero,this.width=void 0===a.width?void 0:+a.width,this.comma=!!a.comma,this.precision=void 0===a.precision?void 0:+a.precision,this.trim=!!a.trim,this.type=void 0===a.type?"":a.type+""}d.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type}},25941:function(c,b,a){"use strict";a.d(b,{ZP:function(){return h},wx:function(){return f},yi:function(){return g}});var d=a(74214);function e(a,b){return function(c){return a+c*b}}function f(b,c){var a=c-b;return a?e(b,a>180||a< -180?a-360*Math.round(a/360):a):(0,d.Z)(isNaN(b)?c:b)}function g(a){return 1==(a=+a)?h:function(b,f){var c,g,e;return f-b?(c=b,g=f,c=Math.pow(c,e=a),g=Math.pow(g,e)-c,e=1/e,function(a){return Math.pow(c+a*g,e)}):(0,d.Z)(isNaN(b)?f:b)}}function h(a,b){var c=b-a;return c?e(a,c):(0,d.Z)(isNaN(a)?b:a)}},74214:function(c,a,b){"use strict";function d(a){return function(){return a}}b.d(a,{Z:function(){return d}})},36263:function(c,a,b){"use strict";function d(a,b){return a=+a,b=+b,function(c){return a*(1-c)+b*c}}b.d(a,{Z:function(){return d}})},3251:function(d,c,a){"use strict";a.d(c,{ZP:function(){return h}});var e=a(56535);function f(a,d,e,f,g){var b=a*a,c=b*a;return((1-3*a+3*b-c)*d+(4-6*b+3*c)*e+(1+3*a+3*b-3*c)*f+c*g)/6}var g=a(25941),h=function b(c){var d=(0,g.yi)(1);function a(a,b){var c=d((a=(0,e.B8)(a)).r,(b=(0,e.B8)(b)).r),f=d(a.g,b.g),h=d(a.b,b.b),i=(0,g.ZP)(a.opacity,b.opacity);return function(b){return a.r=c(b),a.g=f(b),a.b=h(b),a.opacity=i(b),a+""}}return a.gamma=b,a}(1);function b(a){return function(i){var b,c,d=i.length,f=new Array(d),g=new Array(d),h=new Array(d);for(b=0;b<d;++b)c=(0,e.B8)(i[b]),f[b]=c.r||0,g[b]=c.g||0,h[b]=c.b||0;return f=a(f),g=a(g),h=a(h),c.opacity=1,function(a){return c.r=f(a),c.g=g(a),c.b=h(a),c+""}}}b(function(a){var b=a.length-1;return function(d){var c=d<=0?d=0:d>=1?(d=1,b-1):Math.floor(d*b),e=a[c],g=a[c+1],h=c>0?a[c-1]:2*e-g,i=c<b-1?a[c+2]:2*g-e;return f((d-c/b)*b,h,e,g,i)}}),b(function(a){var b=a.length;return function(d){var c=Math.floor(((d%=1)<0?++d:d)*b),e=a[(c+b-1)%b],g=a[c%b],h=a[(c+1)%b],i=a[(c+2)%b];return f((d-c/b)*b,e,g,h,i)}})},26969:function(d,b,a){"use strict";a.d(b,{Z:function(){return g}});var e=a(36263),c=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,f=new RegExp(c.source,"g");function g(l,g){var m,n,j,h,d,i=c.lastIndex=f.lastIndex=0,a=-1,b=[],k=[];for(l+="",g+="";(j=c.exec(l))&&(h=f.exec(g));)(d=h.index)>i&&(d=g.slice(i,d),b[a]?b[a]+=d:b[++a]=d),(j=j[0])===(h=h[0])?b[a]?b[a]+=h:b[++a]=h:(b[++a]=null,k.push({i:a,x:(0,e.Z)(j,h)})),i=f.lastIndex;return i<g.length&&(d=g.slice(i),b[a]?b[a]+=d:b[++a]=d),b.length<2?k[0]?(m=k[0].x,function(a){return m(a)+""}):(n=g,function(){return n}):(g=k.length,function(d){for(var c,a=0;a<g;++a)b[(c=k[a]).i]=c.x(d);return b.join("")})}},60205:function(c,b,a){"use strict";a.d(b,{Z:function(){return m}});var d=a(56535),e=a(3251);function f(c,b){var a,d=b?b.length:0,e=c?Math.min(d,c.length):0,f=new Array(e),g=new Array(d);for(a=0;a<e;++a)f[a]=m(c[a],b[a]);for(;a<d;++a)g[a]=b[a];return function(b){for(a=0;a<e;++a)g[a]=f[a](b);return g}}function g(a,b){var c=new Date;return a=+a,b=+b,function(d){return c.setTime(a*(1-d)+b*d),c}}var h=a(36263);function i(c,b){var a,d={},e={};for(a in(null===c||"object"!=typeof c)&&(c={}),(null===b||"object"!=typeof b)&&(b={}),b)a in c?d[a]=m(c[a],b[a]):e[a]=b[a];return function(b){for(a in d)e[a]=d[a](b);return e}}var j=a(26969),k=a(74214);function l(b,a){a||(a=[]);var c,d=b?Math.min(a.length,b.length):0,e=a.slice();return function(f){for(c=0;c<d;++c)e[c]=b[c]*(1-f)+a[c]*f;return e}}function m(n,a){var m,b,c=typeof a;return null==a||"boolean"===c?(0,k.Z)(a):("number"===c?h.Z:"string"===c?(m=(0,d.ZP)(a))?(a=m,e.ZP):j.Z:a instanceof d.ZP?e.ZP:a instanceof Date?g:(b=a,!ArrayBuffer.isView(b)||b instanceof DataView)?Array.isArray(a)?f:"function"!=typeof a.valueOf&&"function"!=typeof a.toString||isNaN(a)?i:h.Z:l)(n,a)}},32545:function(i,d,e){"use strict";function f(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}e.d(d,{b4:function(){return j},w6:function(){return q},G9:function(){return o},ly:function(){return p},sd:function(){return n}});var g,a,b=(1===(a=f).length&&(a=(g=a,function(a,b){return f(g(a),b)})),{left:function(e,f,b,c){for(null==b&&(b=0),null==c&&(c=e.length);b<c;){var d=b+c>>>1;0>a(e[d],f)?b=d+1:c=d}return b},right:function(e,f,b,c){for(null==b&&(b=0),null==c&&(c=e.length);b<c;){var d=b+c>>>1;a(e[d],f)>0?c=d:b=d+1}return b}}),h=b.right;b.left;var j=h,c=Array.prototype;c.slice,c.map;var k=Math.sqrt(50),l=Math.sqrt(10),m=Math.sqrt(2);function n(a,b,g){var h,d,e,c,f=-1;if(g=+g,(a=+a)==(b=+b)&&g>0)return[a];if((h=b<a)&&(d=a,a=b,b=d),0===(c=o(a,b,g))||!isFinite(c))return[];if(c>0)for(a=Math.ceil(a/c),b=Math.floor(b/c),e=new Array(d=Math.ceil(b-a+1));++f<d;)e[f]=(a+f)*c;else for(a=Math.floor(a*c),b=Math.ceil(b*c),e=new Array(d=Math.ceil(a-b+1));++f<d;)e[f]=(a-f)/c;return h&&e.reverse(),e}function o(d,e,f){var c=(e-d)/Math.max(0,f),b=Math.floor(Math.log(c)/Math.LN10),a=c/Math.pow(10,b);return b>=0?(a>=k?10:a>=l?5:a>=m?2:1)*Math.pow(10,b):-Math.pow(10,-b)/(a>=k?10:a>=l?5:a>=m?2:1)}function p(c,d,f){var e=Math.abs(d-c)/Math.max(0,f),a=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),b=e/a;return b>=k?a*=10:b>=l?a*=5:b>=m&&(a*=2),d<c?-a:a}function q(a,b,c){a=+a,b=+b,c=(e=arguments.length)<2?(b=a,a=0,1):e<3?1:+c;for(var d=-1,e=0|Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a+d*c;return f}},96837:function(c,a,b){"use strict";function d(a){return function(){return this.matches(a)}}b.d(a,{Z:function(){return d}})},23576:function(c,b,a){"use strict";a.d(b,{Z:function(){return e}});var d=a(63949);function e(a){var b=a+="",c=b.indexOf(":");return c>=0&&"xmlns"!==(b=a.slice(0,c))&&(a=a.slice(c+1)),d.Z.hasOwnProperty(b)?{space:d.Z[b],local:a}:a}},63949:function(d,a,b){"use strict";b.d(a,{P:function(){return c}});var c="http://www.w3.org/1999/xhtml";a.Z={svg:"http://www.w3.org/2000/svg",xhtml:c,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},82250:function(c,b,a){"use strict";a.d(b,{Z:function(){return e}});var d=a(1059);function e(a){return"string"==typeof a?new d.Y1([[document.querySelector(a)]],[document.documentElement]):new d.Y1([[a]],d.Jz)}},1059:function(i,e,a){"use strict";a.d(e,{Y1:function(){return c},ZP:function(){return aa},Jz:function(){return _}});var j=a(99110),k=a(27265),l=a(96837);function m(a){return new Array(a.length)}function b(a,b){this.ownerDocument=a.ownerDocument,this.namespaceURI=a.namespaceURI,this._next=null,this._parent=a,this.__data__=b}function n(f,d,g,h,i,e){for(var c,a=0,j=d.length,k=e.length;a<k;++a)(c=d[a])?(c.__data__=e[a],h[a]=c):g[a]=new b(f,e[a]);for(;a<j;++a)(c=d[a])&&(i[a]=c)}function o(i,g,m,n,j,d,k){var a,c,e,f={},h=g.length,o=d.length,l=new Array(h);for(a=0;a<h;++a)(c=g[a])&&(l[a]=e="$"+k.call(c,c.__data__,a,g),e in f?j[a]=c:f[e]=c);for(a=0;a<o;++a)(c=f[e="$"+k.call(i,d[a],a,d)])?(n[a]=c,c.__data__=d[a],f[e]=null):m[a]=new b(i,d[a]);for(a=0;a<h;++a)(c=g[a])&&f[l[a]]===c&&(j[a]=c)}function p(a,b){return a<b?-1:a>b?1:a>=b?0:NaN}b.prototype={constructor:b,appendChild:function(a){return this._parent.insertBefore(a,this._next)},insertBefore:function(a,b){return this._parent.insertBefore(a,b)},querySelector:function(a){return this._parent.querySelector(a)},querySelectorAll:function(a){return this._parent.querySelectorAll(a)}};var q=a(23576);function r(a){return function(){this.removeAttribute(a)}}function s(a){return function(){this.removeAttributeNS(a.space,a.local)}}function t(a,b){return function(){this.setAttribute(a,b)}}function u(a,b){return function(){this.setAttributeNS(a.space,a.local,b)}}function v(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}}function w(a,b){return function(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}}var f=a(73831);function x(a){return function(){delete this[a]}}function y(a,b){return function(){this[a]=b}}function z(a,b){return function(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=c}}function A(a){return a.trim().split(/^|\s+/)}function B(a){return a.classList||new g(a)}function g(a){this._node=a,this._names=A(a.getAttribute("class")||"")}function C(c,a){for(var d=B(c),b=-1,e=a.length;++b<e;)d.add(a[b])}function D(c,a){for(var d=B(c),b=-1,e=a.length;++b<e;)d.remove(a[b])}function E(a){return function(){C(this,a)}}function F(a){return function(){D(this,a)}}function G(a,b){return function(){(b.apply(this,arguments)?C:D)(this,a)}}function H(){this.textContent=""}function I(a){return function(){this.textContent=a}}function J(a){return function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}}function K(){this.innerHTML=""}function L(a){return function(){this.innerHTML=a}}function M(a){return function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}}function N(){this.nextSibling&&this.parentNode.appendChild(this)}function O(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}g.prototype={add:function(a){0>this._names.indexOf(a)&&(this._names.push(a),this._node.setAttribute("class",this._names.join(" ")))},remove:function(b){var a=this._names.indexOf(b);a>=0&&(this._names.splice(a,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(a){return this._names.indexOf(a)>=0}};var P=a(63949);function Q(a){return function(){var b=this.ownerDocument,c=this.namespaceURI;return c===P.P&&b.documentElement.namespaceURI===P.P?b.createElement(a):b.createElementNS(c,a)}}function R(a){return function(){return this.ownerDocument.createElementNS(a.space,a.local)}}function S(b){var a=(0,q.Z)(b);return(a.local?R:Q)(a)}function T(){return null}function U(){var a=this.parentNode;a&&a.removeChild(this)}function V(){var a=this.cloneNode(!1),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}function W(){var a=this.cloneNode(!0),b=this.parentNode;return b?b.insertBefore(a,this.nextSibling):a}var h=a(82633),X=a(27666);function Y(d,c,b){var e=(0,X.Z)(d),a=e.CustomEvent;"function"==typeof a?a=new a(c,b):(a=e.document.createEvent("Event"),b?(a.initEvent(c,b.bubbles,b.cancelable),a.detail=b.detail):a.initEvent(c,!1,!1)),d.dispatchEvent(a)}function Z(a,b){return function(){return Y(this,a,b)}}function $(a,b){return function(){return Y(this,a,b.apply(this,arguments))}}var _=[null];function c(a,b){this._groups=a,this._parents=b}function d(){return new c([[document.documentElement]],_)}c.prototype=d.prototype={constructor:c,select:function(d){"function"!=typeof d&&(d=(0,j.Z)(d));for(var h=this._groups,i=h.length,k=new Array(i),e=0;e<i;++e)for(var a,f,g=h[e],l=g.length,m=k[e]=new Array(l),b=0;b<l;++b)(a=g[b])&&(f=d.call(a,a.__data__,b,g))&&("__data__"in a&&(f.__data__=a.__data__),m[b]=f);return new c(k,this._parents)},selectAll:function(a){"function"!=typeof a&&(a=(0,k.Z)(a));for(var g=this._groups,j=g.length,h=[],i=[],e=0;e<j;++e)for(var b,f=g[e],l=f.length,d=0;d<l;++d)(b=f[d])&&(h.push(a.call(b,b.__data__,d,f)),i.push(b));return new c(h,i)},filter:function(a){"function"!=typeof a&&(a=(0,l.Z)(a));for(var g=this._groups,h=g.length,i=new Array(h),b=0;b<h;++b)for(var d,f=g[b],j=f.length,k=i[b]=[],e=0;e<j;++e)(d=f[e])&&a.call(d,d.__data__,e,f)&&k.push(d);return new c(i,this._parents)},data:function(b,k){if(!b)return r=new Array(this.size()),a=-1,this.each(function(b){r[++a]=b}),r;var w=k?o:n,j=this._parents,l=this._groups;"function"!=typeof b&&(b=(y=b,function(){return y}));for(var f=l.length,d=new Array(f),m=new Array(f),p=new Array(f),a=0;a<f;++a){var y,g=j[a],q=l[a],x=q.length,r=b.call(g,g&&g.__data__,a,j),h=r.length,s=m[a]=new Array(h),t=d[a]=new Array(h);w(g,q,s,t,p[a]=new Array(x),r,k);for(var u,v,e=0,i=0;e<h;++e)if(u=s[e]){for(e>=i&&(i=e+1);!(v=t[i])&& ++i<h;);u._next=v||null}}return(d=new c(d,j))._enter=m,d._exit=p,d},enter:function(){return new c(this._enter||this._groups.map(m),this._parents)},exit:function(){return new c(this._exit||this._groups.map(m),this._parents)},join:function(c,d,e){var a=this.enter(),b=this,f=this.exit();return a="function"==typeof c?c(a):a.append(c+""),null!=d&&(b=d(b)),null==e?f.remove():e(f),a&&b?a.merge(b).order():b},merge:function(k){for(var d=this._groups,g=k._groups,e=d.length,l=g.length,m=Math.min(e,l),f=new Array(e),a=0;a<m;++a)for(var h,i=d[a],n=g[a],j=i.length,o=f[a]=new Array(j),b=0;b<j;++b)(h=i[b]||n[b])&&(o[b]=h);for(;a<e;++a)f[a]=d[a];return new c(f,this._parents)},order:function(){for(var e=this._groups,f=-1,g=e.length;++f<g;)for(var b,c=e[f],d=c.length-1,a=c[d];--d>=0;)(b=c[d])&&(a&&4^b.compareDocumentPosition(a)&&a.parentNode.insertBefore(b,a),a=b);return this},sort:function(d){function l(a,b){return a&&b?d(a.__data__,b.__data__):!a- !b}d||(d=p);for(var e=this._groups,f=e.length,g=new Array(f),a=0;a<f;++a){for(var h,i=e[a],j=i.length,k=g[a]=new Array(j),b=0;b<j;++b)(h=i[b])&&(k[b]=h);k.sort(l)}return new c(g,this._parents).order()},call:function(){var a=arguments[0];return arguments[0]=this,a.apply(null,arguments),this},nodes:function(){var a=new Array(this.size()),b=-1;return this.each(function(){a[++b]=this}),a},node:function(){for(var c=this._groups,a=0,f=c.length;a<f;++a)for(var d=c[a],b=0,g=d.length;b<g;++b){var e=d[b];if(e)return e}return null},size:function(){var a=0;return this.each(function(){++a}),a},empty:function(){return!this.node()},each:function(f){for(var e=this._groups,b=0,g=e.length;b<g;++b)for(var c,d=e[b],a=0,h=d.length;a<h;++a)(c=d[a])&&f.call(c,c.__data__,a,d);return this},attr:function(d,b){var a=(0,q.Z)(d);if(arguments.length<2){var c=this.node();return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}return this.each((null==b?a.local?s:r:"function"==typeof b?a.local?w:v:a.local?u:t)(a,b))},style:f.Z,property:function(b,a){return arguments.length>1?this.each((null==a?x:"function"==typeof a?z:y)(b,a)):this.node()[b]},classed:function(d,a){var b=A(d+"");if(arguments.length<2){for(var e=B(this.node()),c=-1,f=b.length;++c<f;)if(!e.contains(b[c]))return!1;return!0}return this.each(("function"==typeof a?G:a?E:F)(b,a))},text:function(a){return arguments.length?this.each(null==a?H:("function"==typeof a?J:I)(a)):this.node().textContent},html:function(a){return arguments.length?this.each(null==a?K:("function"==typeof a?M:L)(a)):this.node().innerHTML},raise:function(){return this.each(N)},lower:function(){return this.each(O)},append:function(a){var b="function"==typeof a?a:S(a);return this.select(function(){return this.appendChild(b.apply(this,arguments))})},insert:function(b,a){var c="function"==typeof b?b:S(b),d=null==a?T:"function"==typeof a?a:(0,j.Z)(a);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})},remove:function(){return this.each(U)},clone:function(a){return this.select(a?W:V)},datum:function(a){return arguments.length?this.property("__data__",a):this.node().__data__},on:h.ZP,dispatch:function(b,a){return this.each(("function"==typeof a?$:Z)(b,a))}};var aa=d},82633:function(d,a,b){"use strict";b.d(a,{B:function(){return e},ZP:function(){return j},"_H":function(){return k}});var c={},e=null;function f(a,b,c){return a=g(a,b,c),function(c){var b=c.relatedTarget;b&&(b===this||8&b.compareDocumentPosition(this))||a.call(this,c)}}function g(a,b,c){return function(d){var f=e;e=d;try{a.call(this,this.__data__,b,c)}finally{e=f}}}function h(a){return function(){var c=this.__on;if(c){for(var b,d=0,e=-1,f=c.length;d<f;++d)(b=c[d],a.type&&b.type!==a.type||b.name!==a.name)?c[++e]=b:this.removeEventListener(b.type,b.listener,b.capture);++e?c.length=e:delete this.__on}}}function i(a,b,d){var e=c.hasOwnProperty(a.type)?f:g;return function(l,i,j){var c,f=this.__on,g=e(b,i,j);if(f){for(var h=0,k=f.length;h<k;++h)if((c=f[h]).type===a.type&&c.name===a.name){this.removeEventListener(c.type,c.listener,c.capture),this.addEventListener(c.type,c.listener=g,c.capture=d),c.value=b;return}}this.addEventListener(a.type,g,d),c={type:a.type,name:a.name,value:b,listener:g,capture:d},f?f.push(c):this.__on=[c]}}function j(l,g,d){var n,a,j,e=(l+"").trim().split(/^|\s+/).map(function(a){var c="",b=a.indexOf(".");return b>=0&&(c=a.slice(b+1),a=a.slice(0,b)),{type:a,name:c}}),k=e.length;if(arguments.length<2){var b=this.node().__on;if(b){for(var c,f=0,m=b.length;f<m;++f)for(a=0,c=b[f];a<k;++a)if((j=e[a]).type===c.type&&j.name===c.name)return c.value}return}for(b=g?i:h,null==d&&(d=!1),a=0;a<k;++a)this.each(b(e[a],g,d));return this}function k(a,b,c,d){var f=e;a.sourceEvent=e,e=a;try{return b.apply(c,d)}finally{e=f}}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(c={mouseenter:"mouseover",mouseleave:"mouseout"}))},73831:function(c,b,a){"use strict";a.d(b,{S:function(){return i},Z:function(){return h}});var d=a(27666);function e(a){return function(){this.style.removeProperty(a)}}function f(a,b,c){return function(){this.style.setProperty(a,b,c)}}function g(a,b,c){return function(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}}function h(b,a,c){return arguments.length>1?this.each((null==a?e:"function"==typeof a?g:f)(b,a,null==c?"":c)):i(this.node(),b)}function i(a,b){return a.style.getPropertyValue(b)||(0,d.Z)(a).getComputedStyle(a,null).getPropertyValue(b)}},99110:function(c,a,b){"use strict";function d(){}function e(a){return null==a?d:function(){return this.querySelector(a)}}b.d(a,{Z:function(){return e}})},27265:function(c,a,b){"use strict";function d(){return[]}function e(a){return null==a?d:function(){return this.querySelectorAll(a)}}b.d(a,{Z:function(){return e}})},27666:function(c,a,b){"use strict";function d(a){return a.ownerDocument&&a.ownerDocument.defaultView||a.document&&a||a.defaultView}b.d(a,{Z:function(){return d}})},38658:function(e,b,c){"use strict";c.d(b,{B7:function(){return a},HT:function(){return d},R8:function(){return r},zO:function(){return p}});var f,g,h=0,i=0,j=0,k=0,l=0,m=0,n="object"==typeof performance&&performance.now?performance:Date,o="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(a){setTimeout(a,17)};function p(){return l||(o(q),l=n.now()+m)}function q(){l=0}function a(){this._call=this._time=this._next=null}function d(c,d,e){var b=new a;return b.restart(c,d,e),b}function r(){p(),++h;for(var b,a=f;a;)(b=l-a._time)>=0&&a._call.call(null,b),a=a._next;--h}function s(){l=(k=n.now())+m,h=i=0;try{r()}finally{h=0,u(),l=0}}function t(){var a=n.now(),b=a-k;b>1e3&&(m-=b,k=a)}function u(){for(var b,c,a=f,d=1/0;a;)a._call?(d>a._time&&(d=a._time),b=a,a=a._next):(c=a._next,a._next=null,a=b?b._next=c:f=c);g=b,v(d)}function v(a){!h&&(i&&(i=clearTimeout(i)),a-l>24?(a<1/0&&(i=setTimeout(s,a-n.now()-m)),j&&(j=clearInterval(j))):(j||(k=n.now(),j=setInterval(t,1e3)),h=1,o(s)))}a.prototype=d.prototype={constructor:a,restart:function(b,c,a){if("function"!=typeof b)throw new TypeError("callback is not a function");a=(null==a?p():+a)+(null==c?0:+c),this._next||g===this||(g?g._next=this:f=this,g=this),this._call=b,this._time=a,v()},stop:function(){this._call&&(this._call=null,this._time=1/0,v())}}},8594:function(i,f,a){"use strict";a.d(f,{e1:function(){return w},eR:function(){return h}});var j,k,l,m,c=a(1059),g=a(38668),n=a(38658);function o(d,a,c){var b=new n.B7;return a=null==a?0:+a,b.restart(function(c){b.stop(),d(c+a)},a,c),b}var p=(0,g.Z)("start","end","cancel","interrupt"),q=[];function r(b,e,c,f,g,a){var d=b.__transition;if(d){if(c in d)return}else b.__transition={};v(b,c,{name:e,index:f,group:g,on:p,tween:q,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function s(b,c){var a=u(b,c);if(a.state>0)throw new Error("too late; already scheduled");return a}function t(b,c){var a=u(b,c);if(a.state>3)throw new Error("too late; already running");return a}function u(b,c){var a=b.__transition;if(!a||!(a=a[c]))throw new Error("transition not found");return a}function v(b,c,a){var e,d=b.__transition;function f(m){var j,k,l,i;if(1!==a.state)return h();for(j in d)if((i=d[j]).name===a.name){if(3===i.state)return o(f);4===i.state?(i.state=6,i.timer.stop(),i.on.call("interrupt",b,b.__data__,i.index,i.group),delete d[j]):+j<c&&(i.state=6,i.timer.stop(),i.on.call("cancel",b,b.__data__,i.index,i.group),delete d[j])}if(o(function(){3===a.state&&(a.state=4,a.timer.restart(g,a.delay,a.time),g(m))}),a.state=2,a.on.call("start",b,b.__data__,a.index,a.group),2===a.state){for(j=0,a.state=3,e=new Array(l=a.tween.length),k=-1;j<l;++j)(i=a.tween[j].value.call(b,b.__data__,a.index,a.group))&&(e[++k]=i);e.length=k+1}}function g(c){for(var f=c<a.duration?a.ease.call(null,c/a.duration):(a.timer.restart(h),a.state=5,1),d=-1,g=e.length;++d<g;)e[d].call(b,f);5===a.state&&(a.on.call("end",b,b.__data__,a.index,a.group),h())}function h(){for(var e in a.state=6,a.timer.stop(),delete d[c],d)return;delete b.__transition}d[c]=a,a.timer=(0,n.HT)(function(b){a.state=1,a.timer.restart(f,a.delay,a.time),a.delay<=b&&f(b-a.delay)},0,a.time)}function w(b,c){var a,f,e,d=b.__transition,g=!0;if(d){for(e in c=null==c?null:c+"",d){if((a=d[e]).name!==c){g=!1;continue}f=a.state>2&&a.state<5,a.state=6,a.timer.stop(),a.on.call(f?"interrupt":"cancel",b,b.__data__,a.index,a.group),delete d[e]}g&&delete b.__transition}}var x=a(36263),y=180/Math.PI,z={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function A(a,b,d,e,h,i){var f,g,c;return(f=Math.sqrt(a*a+b*b))&&(a/=f,b/=f),(c=a*d+b*e)&&(d-=a*c,e-=b*c),(g=Math.sqrt(d*d+e*e))&&(d/=g,e/=g,c/=g),a*e<b*d&&(a=-a,b=-b,c=-c,f=-f),{translateX:h,translateY:i,rotate:Math.atan2(b,a)*y,skewX:Math.atan(c)*y,scaleX:f,scaleY:g}}function d(a,b,c,d){function e(a){return a.length?a.pop()+" ":""}return function(f,g){var i,h,j,p,o,k,l,q,m=[],n=[];return f=a(f),g=a(g),!function(e,f,a,d,g,i){if(e!==a||f!==d){var h=g.push("translate(",null,b,null,c);i.push({i:h-4,x:(0,x.Z)(e,a)},{i:h-2,x:(0,x.Z)(f,d)})}else(a||d)&&g.push("translate("+a+b+d+c)}(f.translateX,f.translateY,g.translateX,g.translateY,m,n),i=f.rotate,h=g.rotate,j=m,p=n,i!==h?(i-h>180?h+=360:h-i>180&&(i+=360),p.push({i:j.push(e(j)+"rotate(",null,d)-2,x:(0,x.Z)(i,h)})):h&&j.push(e(j)+"rotate("+h+d),o=f.skewX,k=g.skewX,l=m,q=n,o!==k?q.push({i:l.push(e(l)+"skewX(",null,d)-2,x:(0,x.Z)(o,k)}):k&&l.push(e(l)+"skewX("+k+d),!function(d,f,a,b,c,h){if(d!==a||f!==b){var g=c.push(e(c)+"scale(",null,",",null,")");h.push({i:g-4,x:(0,x.Z)(d,a)},{i:g-2,x:(0,x.Z)(f,b)})}else(1!==a||1!==b)&&c.push(e(c)+"scale("+a+","+b+")")}(f.scaleX,f.scaleY,g.scaleX,g.scaleY,m,n),f=g=null,function(c){for(var a,b=-1,d=n.length;++b<d;)m[(a=n[b]).i]=a.x(c);return m.join("")}}}var B=d(function(a){return"none"===a?z:(j||(j=document.createElement("DIV"),k=document.documentElement,l=document.defaultView),j.style.transform=a,a=l.getComputedStyle(k.appendChild(j),null).getPropertyValue("transform"),k.removeChild(j),a=a.slice(7,-1).split(","),A(+a[0],+a[1],+a[2],+a[3],+a[4],+a[5]))},"px, ","px)","deg)"),C=d(function(a){return null==a?z:(m||(m=document.createElementNS("http://www.w3.org/2000/svg","g")),m.setAttribute("transform",a),a=m.transform.baseVal.consolidate())?A((a=a.matrix).a,a.b,a.c,a.d,a.e,a.f):z},", ",")",")"),D=a(23576);function E(a,b){var c,d;return function(){var f=t(this,a),g=f.tween;if(g!==c){d=c=g;for(var e=0,h=d.length;e<h;++e)if(d[e].name===b){(d=d.slice()).splice(e,1);break}}f.tween=d}}function F(b,c,a){var d,e;if("function"!=typeof a)throw new Error;return function(){var g=t(this,b),h=g.tween;if(h!==d){e=(d=h).slice();for(var i={name:c,value:a},f=0,j=e.length;f<j;++f)if(e[f].name===c){e[f]=i;break}f===j&&e.push(i)}g.tween=e}}function G(a,b,c){var d=a._id;return a.each(function(){var a=t(this,d);(a.value||(a.value={}))[b]=c.apply(this,arguments)}),function(a){return u(a,d).value[b]}}var H=a(56535),I=a(3251),J=a(26969);function K(c,a){var b;return("number"==typeof a?x.Z:a instanceof H.ZP?I.ZP:(b=(0,H.ZP)(a))?(a=b,I.ZP):J.Z)(c,a)}function L(a){return function(){this.removeAttribute(a)}}function M(a){return function(){this.removeAttributeNS(a.space,a.local)}}function N(b,c,a){var d,e,f=a+"";return function(){var g=this.getAttribute(b);return g===f?null:g===d?e:e=c(d=g,a)}}function O(b,c,a){var d,e,f=a+"";return function(){var g=this.getAttributeNS(b.space,b.local);return g===f?null:g===d?e:e=c(d=g,a)}}function P(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttribute(a):(g=this.getAttribute(a))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}}function Q(a,b,c){var d,e,f;return function(){var g,h,i=c(this);return null==i?void this.removeAttributeNS(a.space,a.local):(g=this.getAttributeNS(a.space,a.local))===(h=i+"")?null:g===d&&h===e?f:(e=h,f=b(d=g,i))}}function R(c,b){var d,e;function a(){var f,g,a=b.apply(this,arguments);return a!==e&&(d=(e=a)&&(f=c,g=a,function(a){this.setAttributeNS(f.space,f.local,g.call(this,a))})),d}return a._value=b,a}function S(c,b){var d,e;function a(){var f,g,a=b.apply(this,arguments);return a!==e&&(d=(e=a)&&(f=c,g=a,function(a){this.setAttribute(f,g.call(this,a))})),d}return a._value=b,a}function T(a,b){return function(){s(this,a).delay=+b.apply(this,arguments)}}function U(b,a){return a=+a,function(){s(this,b).delay=a}}function V(a,b){return function(){t(this,a).duration=+b.apply(this,arguments)}}function W(b,a){return a=+a,function(){t(this,b).duration=a}}var X=a(96837),Y=a(99110),Z=a(27265),$=c.ZP.prototype.constructor,_=a(73831);function aa(a){return function(){this.style.removeProperty(a)}}var ab=0;function e(a,b,c,d){this._groups=a,this._parents=b,this._name=c,this._id=d}function h(a){return(0,c.ZP)().transition(a)}var b=c.ZP.prototype;e.prototype=h.prototype={constructor:e,select:function(c){var j=this._name,f=this._id;"function"!=typeof c&&(c=(0,Y.Z)(c));for(var k=this._groups,l=k.length,m=new Array(l),d=0;d<l;++d)for(var b,g,h=k[d],n=h.length,i=m[d]=new Array(n),a=0;a<n;++a)(b=h[a])&&(g=c.call(b,b.__data__,a,h))&&("__data__"in b&&(g.__data__=b.__data__),i[a]=g,r(i[a],j,f,a,i,u(b,f)));return new e(m,this._parents,j,f)},selectAll:function(b){var j=this._name,g=this._id;"function"!=typeof b&&(b=(0,Z.Z)(b));for(var k=this._groups,o=k.length,l=[],m=[],h=0;h<o;++h)for(var a,i=k[h],p=i.length,c=0;c<p;++c)if(a=i[c]){for(var n,d=b.call(a,a.__data__,c,i),q=u(a,g),f=0,s=d.length;f<s;++f)(n=d[f])&&r(n,j,g,f,d,q);l.push(d),m.push(a)}return new e(l,m,j,g)},filter:function(a){"function"!=typeof a&&(a=(0,X.Z)(a));for(var g=this._groups,h=g.length,i=new Array(h),b=0;b<h;++b)for(var c,f=g[b],j=f.length,k=i[b]=[],d=0;d<j;++d)(c=f[d])&&a.call(c,c.__data__,d,f)&&k.push(c);return new e(i,this._parents,this._name,this._id)},merge:function(g){if(g._id!==this._id)throw new Error;for(var c=this._groups,h=g._groups,d=c.length,l=h.length,m=Math.min(d,l),f=new Array(d),a=0;a<m;++a)for(var i,j=c[a],n=h[a],k=j.length,o=f[a]=new Array(k),b=0;b<k;++b)(i=j[b]||n[b])&&(o[b]=i);for(;a<d;++a)f[a]=c[a];return new e(f,this._parents,this._name,this._id)},selection:function(){return new $(this._groups,this._parents)},transition:function(){for(var h=this._name,j=this._id,i=++ab,c=this._groups,k=c.length,d=0;d<k;++d)for(var f,g=c[d],l=g.length,b=0;b<l;++b)if(f=g[b]){var a=u(f,j);r(f,h,i,b,g,{time:a.time+a.delay+a.duration,delay:0,duration:a.duration,ease:a.ease})}return new e(c,this._parents,h,i)},call:b.call,nodes:b.nodes,node:b.node,size:b.size,empty:b.empty,each:b.each,on:function(a,d){var e,b,f,h,i,j,g,c=this._id;return arguments.length<2?u(this.node(),c).on.on(a):this.each((e=c,b=a,f=d,g=(b+"").trim().split(/^|\s+/).every(function(a){var b=a.indexOf(".");return b>=0&&(a=a.slice(0,b)),!a||"start"===a})?s:t,function(){var a=g(this,e),c=a.on;c!==i&&(j=(i=c).copy()).on(b,f),a.on=j}))},attr:function(c,b){var a=(0,D.Z)(c),d="transform"===a?C:K;return this.attrTween(c,"function"==typeof b?(a.local?Q:P)(a,d,G(this,"attr."+c,b)):null==b?(a.local?M:L)(a):(a.local?O:N)(a,d,b))},attrTween:function(c,b){var a="attr."+c;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==b)return this.tween(a,null);if("function"!=typeof b)throw new Error;var d=(0,D.Z)(c);return this.tween(a,(d.local?R:S)(d,b))},style:function(a,b,d){var e,f,r,s,u,g,h,i,v,w,x,j,k,y,z,A,C,l,m,n,o,p,D,E,q,c="transform"==(a+="")?B:K;return null==b?this.styleTween(a,(e=a,f=c,function(){var a=(0,_.S)(this,e),b=(this.style.removeProperty(e),(0,_.S)(this,e));return a===b?null:a===r&&b===s?u:u=f(r=a,s=b)})).on("end.style."+a,aa(a)):"function"==typeof b?this.styleTween(a,(g=a,h=c,i=G(this,"style."+a,b),function(){var c=(0,_.S)(this,g),a=i(this),b=a+"";return null==a&&(b=a=(this.style.removeProperty(g),(0,_.S)(this,g))),c===b?null:c===v&&b===w?x:(w=b,x=h(v=c,a))})).each((j=this._id,m="end."+(l="style."+(k=a)),function(){var a=t(this,j),b=a.on,c=null==a.value[l]?C||(C=aa(k)):void 0;(b!==y||A!==c)&&(z=(y=b).copy()).on(m,A=c),a.on=z})):this.styleTween(a,(n=a,o=c,q=(p=b)+"",function(){var a=(0,_.S)(this,n);return a===q?null:a===D?E:E=o(D=a,p)}),d).on("end.style."+a,null)},styleTween:function(c,b,d){var a="style."+(c+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==b)return this.tween(a,null);if("function"!=typeof b)throw new Error;return this.tween(a,function(c,b,d){var e,f;function a(){var g,h,i,a=b.apply(this,arguments);return a!==f&&(e=(f=a)&&(g=c,h=a,i=d,function(a){this.style.setProperty(g,h.call(this,a),i)})),e}return a._value=b,a}(c,b,null==d?"":d))},text:function(a){var b,c;return this.tween("text","function"==typeof a?(b=G(this,"text",a),function(){var a=b(this);this.textContent=null==a?"":a}):(c=null==a?"":a+"",function(){this.textContent=c}))},textTween:function(b){var a="text";if(arguments.length<1)return(a=this.tween(a))&&a._value;if(null==b)return this.tween(a,null);if("function"!=typeof b)throw new Error;return this.tween(a,function(b){var c,d;function a(){var e,a=b.apply(this,arguments);return a!==d&&(c=(d=a)&&(e=a,function(a){this.textContent=e.call(this,a)})),c}return a._value=b,a}(b))},remove:function(){var a;return this.on("end.remove",(a=this._id,function(){var b=this.parentNode;for(var c in this.__transition)if(+c!==a)return;b&&b.removeChild(this)}))},tween:function(a,c){var d=this._id;if(a+="",arguments.length<2){for(var e,f=u(this.node(),d).tween,b=0,g=f.length;b<g;++b)if((e=f[b]).name===a)return e.value;return null}return this.each((null==c?E:F)(d,a,c))},delay:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?T:U)(b,a)):u(this.node(),b).delay},duration:function(a){var b=this._id;return arguments.length?this.each(("function"==typeof a?V:W)(b,a)):u(this.node(),b).duration},ease:function(b){var a=this._id;return arguments.length?this.each(function(b,a){if("function"!=typeof a)throw new Error;return function(){t(this,b).ease=a}}(a,b)):u(this.node(),a).ease},end:function(){var b,c,a=this,d=a._id,e=a.size();return new Promise(function(g,f){var h={value:f},i={value:function(){0== --e&&g()}};a.each(function(){var a=t(this,d),e=a.on;e!==b&&((c=(b=e).copy())._.cancel.push(h),c._.interrupt.push(h),c._.end.push(i)),a.on=c})})}};var ac={time:null,delay:0,duration:250,ease:function(a){return((a*=2)<=1?a*a*a:(a-=2)*a*a+2)/2}};function ad(b,c){for(var a;!(a=b.__transition)||!(a=a[c]);)if(!(b=b.parentNode))return ac.time=(0,n.zO)(),ac;return a}c.ZP.prototype.interrupt=function(a){return this.each(function(){w(this,a)})},c.ZP.prototype.transition=function(a){var b,i;a instanceof e?(b=a._id,a=a._name):(b=++ab,(i=ac).time=(0,n.zO)(),a=null==a?null:a+"");for(var d=this._groups,j=d.length,f=0;f<j;++f)for(var g,h=d[f],k=h.length,c=0;c<k;++c)(g=h[c])&&r(g,a,b,c,h,i||ad(g,b));return new e(d,this._parents,a,b)}},1650:function(a,b,c){var d;!function(f,h,i){if(f){for(var j,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},k={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},l={"~":"`","!":"1","@":"2","#":"3","$":"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0","_":"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},m={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},e=1;e<20;++e)g[111+e]="f"+e;for(e=0;e<=9;++e)g[e+96]=e.toString();s.prototype.bind=function(a,b,c){return a=a instanceof Array?a:[a],this._bindMultiple.call(this,a,b,c),this},s.prototype.unbind=function(a,b){return this.bind.call(this,a,function(){},b)},s.prototype.trigger=function(a,b){return this._directMap[a+":"+b]&&this._directMap[a+":"+b]({},a),this},s.prototype.reset=function(){var a=this;return a._callbacks={},a._directMap={},a},s.prototype.stopCallback=function(b,a){if((" "+a.className+" ").indexOf(" mousetrap ")> -1)return!1;if(r(a,this.target))return!1;if("composedPath"in b&&"function"==typeof b.composedPath){var c=b.composedPath()[0];c!==b.target&&(a=c)}return"INPUT"==a.tagName||"SELECT"==a.tagName||"TEXTAREA"==a.tagName||a.isContentEditable},s.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},s.addKeycodes=function(a){for(var b in a)a.hasOwnProperty(b)&&(g[b]=a[b]);j=null},s.init=function(){var b=s(h);for(var a in b)"_"!==a.charAt(0)&&(s[a]=function(a){return function(){return b[a].apply(b,arguments)}}(a))},s.init(),f.Mousetrap=s,a.exports&&(a.exports=s),void 0!==(d=(function(){return s}).call(b,c,b,a))&&(a.exports=d)}function n(a,b,c){if(a.addEventListener){a.addEventListener(b,c,!1);return}a.attachEvent("on"+b,c)}function o(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return g[a.which]?g[a.which]:k[a.which]?k[a.which]:String.fromCharCode(a.which).toLowerCase()}function p(a,b){return a.sort().join(",")===b.sort().join(",")}function q(o,b){var d,k,n,c,h,a,e,i,f=[];for(e=0,h="+"===(i=o)?["+"]:(i=i.replace(/\+{2}/g,"+plus")).split("+");e<h.length;++e)m[a=h[e]]&&(a=m[a]),b&&"keypress"!=b&&l[a]&&(a=l[a],f.push("shift")),("shift"==(d=a)||"ctrl"==d||"alt"==d||"meta"==d)&&f.push(a);return b=(k=a,n=f,(c=b)||(c=function(){if(!j)for(var a in j={},g)a>95&&a<112||g.hasOwnProperty(a)&&(j[g[a]]=a);return j}()[k]?"keydown":"keypress"),"keypress"==c&&n.length&&(c="keydown"),c),{key:a,modifiers:f,action:b}}function r(a,b){return null!==a&&a!==h&&(a===b||r(a.parentNode,b))}function s(a){var d,b=this;if(a=a||h,!(b instanceof s))return new s(a);b.target=a,b._callbacks={},b._directMap={};var e={},f=!1,g=!1,i=!1;function j(a){a=a||{};var b,c=!1;for(b in e){if(a[b]){c=!0;continue}e[b]=0}c||(i=!1)}function k(c,j,h,f,l,m){var g,d,a,k=[],i=h.type;if(!b._callbacks[c])return[];for("keyup"==i&&("shift"==(g=c)||"ctrl"==g||"alt"==g||"meta"==g)&&(j=[c]),d=0;d<b._callbacks[c].length;++d)if(a=b._callbacks[c][d],(f||!a.seq||e[a.seq]==a.level)&&i==a.action&&("keypress"==i&&!h.metaKey&&!h.ctrlKey||p(j,a.modifiers))){var n=!f&&a.combo==l,o=f&&a.seq==f&&a.level==m;(n||o)&&b._callbacks[c].splice(d,1),k.push(a)}return k}function l(d,a,c,e){b.stopCallback(a,a.target||a.srcElement,c,e)|| !1===d(a,c)&&(!function(a){if(a.preventDefault){a.preventDefault();return}a.returnValue=!1}(a),function(a){if(a.stopPropagation){a.stopPropagation();return}a.cancelBubble=!0}(a))}function c(a){"number"!=typeof a.which&&(a.which=a.keyCode);var d,c,e=o(a);if(e){if("keyup"==a.type&&f===e){f=!1;return}b.handleKey(e,(c=[],(d=a).shiftKey&&c.push("shift"),d.altKey&&c.push("alt"),d.ctrlKey&&c.push("ctrl"),d.metaKey&&c.push("meta"),c),a)}}function m(c,g,h,n,p){b._directMap[c+":"+h]=g;var a,r=(c=c.replace(/\s+/g," ")).split(" ");if(r.length>1){!function(c,b,p,g){function h(a){return function(){i=a,++e[c],clearTimeout(d),d=setTimeout(j,1e3)}}function k(a){l(p,a,c),"keyup"!==g&&(f=o(a)),setTimeout(j,10)}e[c]=0;for(var a=0;a<b.length;++a){var n=a+1===b.length?k:h(g||q(b[a+1]).action);m(b[a],n,g,c,a)}}(c,r,g,h);return}a=q(c,h),b._callbacks[a.key]=b._callbacks[a.key]||[],k(a.key,a.modifiers,{type:a.action},n,c,p),b._callbacks[a.key][n?"unshift":"push"]({callback:g,modifiers:a.modifiers,action:a.action,seq:n,level:p,combo:c})}b._handleKey=function(h,n,c){var a,b=k(h,n,c),m={},e=0,f=!1;for(a=0;a<b.length;++a)b[a].seq&&(e=Math.max(e,b[a].level));for(a=0;a<b.length;++a){if(b[a].seq){if(b[a].level!=e)continue;f=!0,m[b[a].seq]=1,l(b[a].callback,c,b[a].combo,b[a].seq);continue}f||l(b[a].callback,c,b[a].combo)}var d,o="keypress"==c.type&&g;c.type!=i||"shift"==(d=h)||"ctrl"==d||"alt"==d||"meta"==d||o||j(m),g=f&&"keydown"==c.type},b._bindMultiple=function(b,c,d){for(var a=0;a<b.length;++a)m(b[a],c,d)},n(a,"keypress",c),n(a,"keydown",c),n(a,"keyup",c)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},69480:function(c,b,a){"use strict";a.d(b,{j:function(){return i}});var d=a(57455);a(57605);var e=a(56097),f=a(49817),g=a(1133),h=a(5859),i=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:void 0;return function(i,m){var b=m(),n=b.controls,j=b.tree,k=b.treeToo,o=b.metadata,p=b.frequencies;if(!(null!==j.nodes&&o.loaded))return null;var l=a||n.colorBy,c=(0,e.pu)(l,n,j,k,o),q=(0,d.lX)(j,c),r=k.loaded?(0,d.lX)(k,c):void 0;return i((0,f.J8)(l)),i({type:h.KA,colorBy:l,colorScale:c,nodeColors:q,nodeColorsToo:r,version:c.version}),p.loaded&&(0,g._)(i,m),null}}},49817:function(d,b,a){"use strict";a.d(b,{Bm:function(){return o},J8:function(){return m},QW:function(){return l},wC:function(){return n}});var c=a(31382),e=a(49765),f=a(69856),g=a(5859),h=a(57605);function i(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function j(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||k(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(a,c){if(a){if("string"==typeof a)return i(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return i(a,c)}}var l=(0,c.debounce)(function(f,h){var b=h(),c=b.entropy,i=b.controls,a=b.tree;if(a.nodes&&a.visibility&&c.genomeMap&&"Play"===i.animationPlayPauseButton){var d=j((0,e.UB)(a.nodes,a.visibility,c.selectedCds,c.showCounts),2),k=d[0],l=d[1];f({type:g.Rn,data:k,maxYVal:l})}},500,{leading:!0,trailing:!0}),m=function(a){return function(n,k){var b={type:g.fE},d=k().entropy;if(d.loaded){if(a===f.BJ){if(d.selectedCds===f.BJ)return;b.selectedCds=a,b.selectedPositions=[]}else if("string"==typeof a){if((0,h.O$)(a)){var i=(0,h.kW)(a);if(!i){console.error("Error decoding genotype colorBy for entropy recalc.");return}var o=(0,h.fO)(i.gene,d.genomeMap);b.selectedCds=o,b.selectedPositions=i.positions}else b.selectedCds=d.selectedCds,b.selectedPositions=[]}else if("object"==typeof a&&a.name&&a.segments)b.selectedCds=a,b.selectedPositions=[];else{console.error("Incorrect argument passed to changeEntropyCdsSelection:",a);return}if(d.selectedCds!==b.selectedCds){var l=k(),m=j((0,e.UB)(l.tree.nodes,l.tree.visibility,b.selectedCds,d.showCounts),2),p=m[0],q=m[1];b.bars=p,b.maxYVal=q}else if((0,c.isEqual)(b.selectedPositions,d.selectedPositions))return;n(b)}}},n=function(a){return function(b,c){b({type:g.pM,showCounts:a}),l(b,c)}},o=function(a){return function(b){b({type:g.l8,zoomc:a})}}},1133:function(d,b,a){"use strict";a.d(b,{"_":function(){return g}});var c=a(31382),e=a(5859),f=a(67411),g=(0,c.debounce)(function(h,i){var d=i(),a=d.frequencies,b=d.tree,c=d.controls;if(!c.colorScale){console.error("Race condition in updateFrequencyData. ColourScale not Set. Frequency Matrix can't be calculated.");return}if(!a.data){console.error("Race condition in updateFrequencyData. Frequencies data not in state. Matrix can't be calculated.");return}var g=c.normalizeFrequencies&&(0,f.bv)(a.data,a.pivots,b.nodes,b.visibility),j=(0,f.N0)(a.data,a.pivots,b.nodes,b.visibility,c.colorScale,c.colorBy,g);h({type:e.yZ,matrix:j,normalizeFrequencies:g})},500,{leading:!1,trailing:!0})},82379:function(c,b,a){"use strict";a.d(b,{Dr:function(){return l},EW:function(){return q},GT:function(){return p},RD:function(){return r},"_e":function(){return n},kq:function(){return o},oK:function(){return u}}),a(31382),a(69856);var d=a(65074),e=a(5859);function f(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function h(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){g(d,a,c[a])})}return d}function i(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||k(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(a){return function(a){if(Array.isArray(a))return f(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||k(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(a,c){if(a){if("string"==typeof a)return f(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return f(a,c)}}var l=function(b,c,e){var d=b.filter(function(a){return a.key===e})[0];if(!c)return d;var a=b.filter(function(a){return a.key===c});return 0===a.length?d:(a.length>1&&console.error("Found multiple collections with key ".concat(c,". Returning the first matching collection only.")),a[0])};function m(d,c){var f=c.display_defaults||{},b={measurementsGroupBy:"group_by",measurementsDisplay:"measurements_display",measurementsShowOverallMean:"show_overall_mean",measurementsShowThreshold:"show_threshold"}[d],a=f[b];switch(d){case"measurementsGroupBy":void 0!==a&&c.groupings.has(a)||(void 0!==a&&console.error("Ignoring invalid ".concat(b," value ").concat(a,", must be one of collection's groupings. Using first grouping as default")),a=c.groupings.keys().next().value);break;case"measurementsDisplay":var e=["mean","raw"];void 0===a||e.includes(a)||(console.error("Ignoring invalid ".concat(b," value ").concat(a,", must be one of ").concat(e)),a=void 0);break;case"measurementsShowOverallMean":void 0!==a&&"boolean"!=typeof a&&(console.error("Ignoring invalid ".concat(b," value ").concat(a,", must be a boolean")),a=void 0);break;case"measurementsShowThreshold":void 0!==a&&(Array.isArray(c.thresholds)&&c.thresholds.some(function(a){return"number"==typeof a})?"boolean"!=typeof a&&(console.error("Ignoring invalid ".concat(b," value ").concat(a,", must be a boolean")),a=void 0):(console.error("Ignoring ".concat(b," value because collection does not have valid thresholds")),a=void 0));break;case"measurementsCollectionKey":case"measurementsFilters":console.debug("Skipping control key ".concat(d," because it does not have default controls"));break;default:console.error("Skipping unknown control key ".concat(d))}return a}function n(b){var a=h({},d.TK);if(Object.keys(b).length){a.measurementsCollectionKey=b.key;var c=!0,f=!1,g=void 0;try{for(var j,e=Object.entries(a)[Symbol.iterator]();!(c=(j=e.next()).done);c=!0){var k=i(j.value,2),l=k[0],o=k[1],n=m(l,b);a[l]=void 0!==n?n:o}}catch(p){f=!0,g=p}finally{try{c||null==e.return||e.return()}finally{if(f)throw g}}}return a}var o=function(a,b,c){return function(i,j){var f=j(),k=f.controls,g=f.measurements,d=h({},k.measurementsFilters);d[a]=new Map(d[a]),d[a].set(b,{active:c}),i({type:e.FI,controls:{measurementsFilters:d},queryParams:t({measurementsFilters:d},g.collectionToDisplay,g.defaultCollectionKey)})}},p=function(a,b){return function(g,i){var d=i(),j=d.controls,f=d.measurements,c=h({},j.measurementsFilters);c[a]=new Map(c[a]),c[a].delete(b),0===c[a].size&&delete c[a],g({type:e.FI,controls:{measurementsFilters:c},queryParams:t({measurementsFilters:c},f.collectionToDisplay,f.defaultCollectionKey)})}},q=function(a){return function(d,f){var c=f(),g=c.controls,i=c.measurements,b=h({},g.measurementsFilters);delete b[a],d({type:e.FI,controls:{measurementsFilters:b},queryParams:t({measurementsFilters:b},i.collectionToDisplay)})}},r=function(a,b){return function(m,n){var g=n(),o=g.controls,i=g.measurements,c=h({},o.measurementsFilters);c[a]=new Map(c[a]);var d=!0,j=!1,k=void 0;try{for(var l,f=c[a].keys()[Symbol.iterator]();!(d=(l=f.next()).done);d=!0){var p=l.value;c[a].set(p,{active:b})}}catch(q){j=!0,k=q}finally{try{d||null==f.return||f.return()}finally{if(j)throw k}}m({type:e.FI,controls:{measurementsFilters:c},queryParams:t({measurementsFilters:c},i.collectionToDisplay,i.defaultCollectionKey)})}},s={measurementsCollectionKey:"m_collection",measurementsDisplay:"m_display",measurementsGroupBy:"m_groupBy",measurementsShowOverallMean:"m_overallMean",measurementsShowThreshold:"m_threshold"};function t(C,f,D){var a={},g=!0,p=!1,q=void 0;try{for(var r,h=Object.entries(C)[Symbol.iterator]();!(g=(r=h.next()).done);g=!0){var t=i(r.value,2),e=t[0],c=t[1],b=s[e],u=m(e,f),E=void 0!==u?u:d.TK[e];if(c===E)a[b]="";else switch(e){case"measurementsCollectionKey":c!==D?a[b]=c:a[b]="";break;case"measurementsDisplay":case"measurementsGroupBy":a[b]=c;break;case"measurementsShowOverallMean":a[b]=c?"show":"hide";break;case"measurementsShowThreshold":f.thresholds?a[b]=c?"show":"hide":a[b]="";break;case"measurementsFilters":var k=!0,v=!1,w=void 0;try{for(var x,l=f.filters.keys()[Symbol.iterator]();!(k=(x=l.next()).done);k=!0){var F=x.value;a[b="mf_"+F]=""}}catch(G){v=!0,w=G}finally{try{k||null==l.return||l.return()}finally{if(v)throw w}}var n=!0,y=!1,z=void 0;try{for(var A,o=Object.entries(c)[Symbol.iterator]();!(n=(A=o.next()).done);n=!0){var B=i(A.value,2),H=B[0],I=B[1];b="mf_"+H;var J=j(I).filter(function(b){var a=i(b,2);return a[0],a[1].active}).map(function(a){return i(a,1)[0]});a[b]=J}}catch(K){y=!0,z=K}finally{try{n||null==o.return||o.return()}finally{if(y)throw z}}break;default:console.error("Ignoring unsupported control ".concat(e))}}}catch(L){p=!0,q=L}finally{try{g||null==h.return||h.return()}finally{if(p)throw q}}return a}function u(a){var e={},f=!0,n=!1,o=void 0;try{for(var p,x=function(k,h){var g=i(h.value,2),j=g[0],f=g[1],c=a[f];if(void 0===c)return"continue";var b=[],d=function(){return null};switch(f){case"m_display":b=["mean","raw"],d=function(){return c};break;case"m_collection":case"m_groupBy":b=[c],d=function(){return c};break;case"m_overallMean":case"m_threshold":b=["show","hide"],d=function(){return"show"===c}}b.includes(c)?e[j]=d():console.error("Ignoring invalid query param ".concat(f,"=").concat(c,", value should be one of ").concat(b))},b=Object.entries(s)[Symbol.iterator]();!(f=(p=b.next()).done);f=!0)x(b,p)}catch(y){n=!0,o=y}finally{try{f||null==b.return||b.return()}finally{if(n)throw o}}var g=!0,q=!1,r=void 0;try{for(var t,j=Object.keys(a).filter(function(a){return a.startsWith("mf_")})[Symbol.iterator]();!(g=(t=j.next()).done);g=!0){var c=t.value,k=c.replace("mf_",""),z=Array.isArray(a[c])?a[c]:[a[c]],d=h({},e.measurementsFilters);d[k]=new Map(d[k]);var l=!0,u=!1,v=void 0;try{for(var w,m=z[Symbol.iterator]();!(l=(w=m.next()).done);l=!0){var A=w.value;d[k].set(A,{active:!0})}}catch(B){u=!0,v=B}finally{try{l||null==m.return||m.return()}finally{if(u)throw v}}e.measurementsFilters=d}}catch(C){q=!0,r=C}finally{try{g||null==j.return||j.return()}finally{if(q)throw r}}return e}},19107:function(c,b,a){"use strict";a.d(b,{p5:function(){return f}});var d=a(5859),e=a(69856),f=function(){var f,a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},b=a.message,c=a.details;return f={notificationType:"warning",message:void 0===b?"Warning":b,details:void 0===c?"":c},function(a,b){var c=b().notifications.counter+1;a(Object.assign({},f,{type:d.Dv,id:c})),"error"!==f.notificationType&&window.setTimeout(function(){return a({type:d.Kf,id:c})},e.Ck)}}},88747:function(c,b,a){"use strict";a.d(b,{px:function(){return f}});var d=a(31382),e=["tree","measurements","map"],f=function(b){var a;return a=b,(0,d.intersection)(a,e).length>1}},61382:function(e,b,a){"use strict";a.d(b,{f0:function(){return ax},ID:function(){return al}});var f=a(46810),g=a(31382),h=a(44163),i=a(69856),j=a(74864),k=a(62525),l=a(71476),m=a(65074),n=a(64458),o=a(86802),p=a(94329),q=a(49765),r=a(80775),s=a(26061);function t(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function u(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||w(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(a){return function(a){if(Array.isArray(a))return t(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||w(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(a,c){if(a){if("string"==typeof a)return t(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return t(a,c)}}var x=function(){return(1e32*Math.random()).toString(36).slice(0,6)},y=function(a){var c=new Set,b=new Set;return(0,p.BA)(a[0]),a.forEach(function(a,k){if(a.arrayIdx=k,a.hasChildren=void 0!==a.children,a.name||(a.name=x(),console.warn("Tree node without a name detected. Using the name '".concat(a.name,"' and continuing..."))),c.has(a.name)){var l=a.name;a.name="".concat(a.name,"_").concat(x()),console.warn("Tree node detected with a duplicate name. Changing '".concat(l,"' to '").concat(a.name,"' and continuing..."))}c.add(a.name);var d=!0,f=!1,g=void 0;try{for(var h,e=Object.entries(a.node_attrs||{})[Symbol.iterator]();!(d=(h=e.next()).done);d=!0){var i=u(h.value,2),m=i[0],j=i[1];"object"==typeof j&&"value"in j&&b.add(m)}}catch(n){f=!0,g=n}finally{try{d||null==e.return||e.return()}finally{if(f)throw g}}}),{nodeAttrKeys:b,nodes:a}},z=function(a){var b=new Set;return a.forEach(function(a){a.branch_attrs&&a.branch_attrs.labels&&Object.keys(a.branch_attrs.labels).forEach(function(c){b.add(c),a.branch_attrs.labels[c]=String(a.branch_attrs.labels[c])})}),["none"].concat(v(b))},A=function(g,f){var b,c,a={name:"__ROOT",node_attrs:{hidden:"always"},children:f.map(function(a){return g[a]})};a.parent=a;var d=a.children.map(function(a){return(0,s.KT)(a)}).filter(function(a){return void 0!==a});d.length&&(a.node_attrs.div=(b=Math).min.apply(b,v(d)));var e=a.children.map(function(a){return(0,s.rs)(a,"num_date")}).filter(function(a){return void 0!==a});return e.length&&(a.node_attrs.num_date={value:(c=Math).min.apply(c,v(e))}),a},B=function(e){var a=[],d=[];for(a.push(e);0!==a.length;){var b=a.pop();if(d.push(b),b.children)for(var c=b.children.length-1;c>=0;c-=1)a.push(b.children[c])}return d},C=function(d){d.parent=d;var b=[];for(b.push(d);0!==b.length;){var a=b.pop();if(a.children)for(var c=a.children.length-1;c>=0;c-=1)a.children[c].parent=a,b.push(a.children[c])}},D=function(a){a.forEach(function(a){a.parentInfo={original:a.parent}})},E=function(a){var b={};return a.forEach(function(a){a.branch_attrs&&a.branch_attrs.mutations&&Object.entries(a.branch_attrs.mutations).forEach(function(c){var a=u(c,2),d=a[0];a[1].forEach(function(a){b["".concat(d,":").concat(a)]?b["".concat(d,":").concat(a)]++:b["".concat(d,":").concat(a)]=1})})}),b},F=function(b){var m=Array.isArray(b)?b:[b],a=[],e=[],c=!0,f=!1,g=void 0;try{for(var h,d=m[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var i,j=h.value;C(j),e.push(a.length),(i=a).push.apply(i,v(B(j)))}}catch(n){f=!0,g=n}finally{try{c||null==d.return||d.return()}finally{if(f)throw g}}a.unshift(A(a,e));var k=y(a),o=k.nodeAttrKeys,l=k.nodes;D(a);var p=l.filter(function(b){var a=(0,s.nt)(b);return a&&(Object.keys(a).length>1||"serum"!==Object.keys(a)[0])}),q=z(a),t=E(a);return Object.assign({},(0,r.v)(),{nodes:l,nodeAttrKeys:o,vaccines:p,observedMutations:t,availableBranchLabels:q,loaded:!0})};function G(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}var H=function(a,b){try{var d=new Set;Object.entries(a.colorings||{}).forEach(function(e){var a,b,c=(a=e,b=2,function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||function(a,c){if(a){if("string"==typeof a)return G(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return G(a,c)}}(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=c[0],g=c[1];"continuous"===g.type&&d.add(f)}),b.nodes.forEach(function(e){var a=!0,f=!1,g=void 0;try{for(var h,b=d[Symbol.iterator]();!(a=(h=b.next()).done);a=!0){var c,j=h.value,i=null==e?void 0:null===(c=e.node_attrs)|| void 0===c?void 0:c[j];i&&I(i)}}catch(k){f=!0,g=k}finally{try{a||null==b.return||b.return()}finally{if(f)throw g}}})}catch(c){console.error(c)}};function I(a){var c;switch((c=a.value)&&"undefined"!=typeof Symbol&&c.constructor===Symbol?"symbol":typeof c){case"number":break;case"string":var b=a.value.trim();""===b||isNaN(b)||"Infinity"===b||"-Infinity"===b?a.value=void 0:a.value=Number(b);break;default:a.value=void 0}}var c=a(72607),d=a.n(c),J=a(60851);function K(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function L(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||N(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(a){return function(a){if(Array.isArray(a))return K(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||N(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(a,c){if(a){if("string"==typeof a)return K(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return K(a,c)}}var O=d().mark(R),P=function(c){var a=Object.entries(c).filter(function(a){return"nuc"===L(a,1)[0]}).map(function(a){return L(a,2)[1]})[0];if(!a)throw new Error("Genome annotation missing 'nuc' definition");if(!a.start||!a.end)throw new Error("Genome annotation for 'nuc' missing start or end");if("-"===a.strand)throw new Error("Auspice can only display genomes represented as positive strand.Note that -ve strand RNA viruses are typically annotated as 5' \u2192 3'.");var d=[a.start,a.end],e={};Object.entries(c).filter(function(a){return"nuc"!==L(a,1)[0]}).map(function(f){var b=L(f,2),c=b[0],d=b[1],a=d.gene||c;a in e||(e[a]={}),e[a][c]=d});var h=R(),f=new Set,b=Object.entries(e).map(function(c){var b=L(c,2),e=b[0],g=b[1],a={name:e,cds:[]},i=h.next().value;return a.cds=Object.entries(g).map(function(b){var a=L(b,2),c=a[0],e=a[1];return S(c,e,d,i)}).filter(function(a){return"__INVALID__"!==a.name}),a.cds.forEach(function(a){return f.add(a.strand)}),a}),g={strandsObserved:f,posStrandStackHeight:U(b,"+"),negStrandStackHeight:U(b,"-")};return[{name:"source",range:d,genes:b,metadata:g}]},Q=function(c){if(c)try{return{showCounts:!1,loaded:!0,genomeMap:P(c)}}catch(d){var b,a;b=d,(null!=(a=Error)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](b):b instanceof a)&&console.error(d.message),console.error("Genotype colorings and the entropy panel will not be available.")}return(0,J.t)()};function R(){var a;return d().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:a=0;case 1:return b.next=4,i.p3[a++];case 4:a===i.p3.length&&(a=0),b.next=1;break;case 7:case"end":return b.stop()}},O)}function S(e,a,f,t){var h={name:"__INVALID__",length:0,segments:[],strand:"+",isWrapping:!1,color:"#000"},g=a.strand;if(!("+"===g||"-"===g))return console.error("[Genome annotation]  ".concat(e," has strand ")+(Object.prototype.hasOwnProperty.call(a,"strand")?String(a.strand):"(missing)")+". This CDS will be ignored."),h;var i="+"===g,b=0,c=[];if(a.start&&a.end&&(a.end<=f[1]?(b=a.end-a.start+1,c.push({segmentNumber:1,rangeLocal:[1,b],rangeGenome:[a.start,a.end],phase:0,frame:T(a.start,a.end,0,f[1],i)})):(a.segments=[{start:a.start,end:f[1]},{start:1,end:a.end-f[1]}],i||a.segments.reverse())),a.segments&&Array.isArray(a.segments)){if(c.length)return console.error("[Genome annotation] ".concat(e," defines both start/stop and segments, but they are mutually exclusive.")),h;var j=0,u=1,k=!0,o=!1,p=void 0;try{for(var q,l=a.segments[Symbol.iterator]();!(k=(q=l.next()).done);k=!0){var d=q.value,m=d.end-d.start+1,r=b%3==0?0:b%3==1?2:1,v={segmentNumber:u++,rangeLocal:[j+1,j+m],rangeGenome:[d.start,d.end],phase:r,frame:T(d.start,d.end,r,f[1],i)};c.push(v),b+=m,j+=m}}catch(w){o=!0,p=w}finally{try{k||null==l.return||l.return()}finally{if(o)throw p}}}if(!c.length)return console.error("[Genome annotation] ".concat(e," requires either start+end or segments to be defined")),h;if(b%3)return console.error("[Genome annotation] ".concat(e," has length ").concat(b," which is not a multiple of 3")),h;var s,n={name:e,length:b,segments:c,strand:g,isWrapping:X(g,c),color:!!(s=a.color)&&s||t||"#000"};return"string"==typeof a.display_name&&(n.displayName=a.display_name),"string"==typeof a.description&&(n.description=a.description),n}function T(b,c,a,d,e){return e?(b+a-1)%3:Math.abs((c-a-d)%3)}function U(h){var i=arguments.length>1&& void 0!==arguments[1]?arguments[1]:null,a=h.reduce(function(a,b){return M(a).concat(M(b.cds))},[]);i&&(a=a.filter(function(a){return a.strand===i})),a.sort(function(a,b){return(m=Math).min.apply(m,M(a.segments.map(function(a){return a.rangeGenome[0]})))<(n=Math).min.apply(n,M(b.segments.map(function(a){return a.rangeGenome[0]})))?-1:1});var l=[],c=!0,d=!1,e=void 0;try{for(var m,n,f,g,j=function(g,f){var c,h,a=f.value,i=(c=Math).min.apply(c,M(a.segments.map(function(a){return a.rangeGenome[0]}))),b=(l=l.filter(function(a){return!((h=Math).max.apply(h,M(a.segments.map(function(a){return a.rangeGenome[1]})))<i)})).map(function(a){return a.stackPosition||0}).sort(),d=V(b);if(d)return a.stackPosition=d,l.push(a),"continue";var e=W(l,a);if(e)return a.stackPosition=e,l.push(a),"continue";a.stackPosition=(b[b.length-1]||0)+1,l.push(a)},b=a[Symbol.iterator]();!(c=(g=b.next()).done);c=!0)j(b,g)}catch(k){d=!0,e=k}finally{try{c||null==b.return||b.return()}finally{if(d)throw e}}return(f=Math).max.apply(f,M(a.map(function(a){return a.stackPosition||0})))}function V(a){if((a[0]||0)>1)return 1;for(var b=1;b<a.length;b++){var d=[a[b-1],a[b]],c=d[0],e=d[1];if(c&&e&&e-c>1)return c+1}return 0}function W(i,d){var l=(n=Math).min.apply(n,M(d.segments.map(function(a){return a.rangeGenome[0]}))),m=(o=Math).max.apply(o,M(d.segments.map(function(a){return a.rangeGenome[1]}))),b=!0,e=!1,f=void 0;try{for(var n,o,g,j=function(n,f){var c=f.value;if(1===c.segments.length)return"continue";var a=M(c.segments);a.sort(function(a,b){return a.rangeGenome[0]<b.rangeGenome[1]?-1:1});for(var b=0;b<a.length-1;b++){var d,e,g=(null===(d=a[b])|| void 0===d?void 0:d.rangeGenome[1])||0,h=(null===(e=a[b+1])|| void 0===e?void 0:e.rangeGenome[0])||0,j=c.stackPosition||0;if(g<l&&h>m){var k=!1;if(i.forEach(function(a){a.stackPosition===j&&(k||a.segments.forEach(function(a){a.rangeGenome[1]>=l&&a.rangeGenome[0]<=m&&(k=!0)}))}),!k)return{v:j}}}},a=i[Symbol.iterator]();!(b=(g=a.next()).done);b=!0){var c,h=j(a,g);if("object"==((c=h)&&"undefined"!=typeof Symbol&&c.constructor===Symbol?"symbol":typeof c))return h.v}}catch(k){e=!0,f=k}finally{try{b||null==a.return||a.return()}finally{if(e)throw f}}return 0}function X(i,j){var e="+"===i,b=!0,f=!1,g=void 0;try{for(var a,h,c=j[Symbol.iterator]();!(b=(h=c.next()).done);b=!0){var d=h.value;if(a){if(e&&a.rangeGenome[0]>d.rangeGenome[0])return!0;if(!e&&a.rangeGenome[0]<d.rangeGenome[0])return!0}a=d}}catch(k){f=!0,g=k}finally{try{b||null==c.return||c.return()}finally{if(f)throw g}}return!1}var Y=a(57455),Z=a(56097),$=a(67411),_=a(59894),aa=a(15080),ab=a(57605),ac=a(81458),ad=a(88747),ae=a(82379);function af(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function ag(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ah(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){ag(d,a,c[a])})}return d}function ai(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||ak(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var aj=function(a){return a&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};function ak(a,c){if(a){if("string"==typeof a)return af(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return af(a,c)}}var al=function(a,b){return a.coloringsPresentOnTreeWithConfidence.has(b)},am=function(b,c){var a=(0,s.rs)(b[0],"num_date");return void 0===a?(0,h.hT)(c.dateMaxNumeric-i.Zk):(0,h.hT)(a-.01)},an=function(b){var a=i.FU;return b.forEach(function(c){var b=(0,s.rs)(c,"num_date");void 0!==b&&b>a&&(a=b)}),a+=.01,(0,h.hT)(a)},ao=function(b,a){var d=function(a,b,c){return!(void 0===a||a>c||a<b)};if(a.l&&(b.layout=a.l),a.gmin&&(b.zoomMin=parseInt(a.gmin,10)),a.gmax&&(b.zoomMax=parseInt(a.gmax,10)),a.m&&"divAndDate"===b.branchLengthsToDisplay&&(b.distanceMeasure=a.m),a.c&&(b.colorBy=a.c),void 0===a.ci?b.temporalConfidence.on=!1:b.temporalConfidence.on=!0,a.r&&(b.geoResolution=a.r),a.d){var z=a.d.split(",");b.panelsToDisplay=b.panelsAvailable.filter(function(a){return -1!==z.indexOf(a)}),b.canTogglePanelLayout=(0,ad.px)(b.panelsToDisplay),b.canTogglePanelLayout||(b.panelLayout="full")}if(a.p&&b.canTogglePanelLayout&&("full"===a.p||"grid"===a.p)&&(b.panelLayout=a.p),a.tl&&(b.tipLabelKey="__strain__"===a.tl?i.Ac:a.tl),a.dmin){var m=(0,h.O$)(a.dmin);d(m,b.absoluteDateMinNumeric,b.absoluteDateMaxNumeric)?(b.dateMin=a.dmin,b.dateMinNumeric=m):(console.error('URL query "dmin='.concat(a.dmin,'" is invalid ').concat("divOnly"===b.branchLengthsToDisplay?"(the tree is not a timetree)":"")),delete a.dmin)}if(a.dmax){var g=(0,h.O$)(a.dmax);d(g,b.absoluteDateMinNumeric,b.absoluteDateMaxNumeric)?a.dmin&&g<=b.dateMinNumeric?(console.error('Requested "dmax='.concat(a.dmax,'" is earlier than "dmin=').concat(a.dmin,'", ignoring dmax.')),delete a.dmax):(b.dateMax=a.dmax,b.dateMaxNumeric=g):(console.error('URL query "dmax='.concat(a.dmax,'" is invalid ').concat("divOnly"===b.branchLengthsToDisplay?"(the tree is not a timetree)":"")),delete a.dmax)}var j=!0,n=!1,o=void 0;try{for(var p,k=Object.keys(a).filter(function(a){return a.startsWith("f_")})[Symbol.iterator]();!(j=(p=k.next()).done);j=!0){var l=p.value,t=l.replace("f_",""),u=a[l]?a[l].split(","):[];b.filters[t]=u.map(function(a){return{value:a,active:!0}})}}catch(v){n=!0,o=v}finally{try{j||null==k.return||k.return()}finally{if(n)throw o}}if(a.s){var w=a.s?a.s.split(","):[];b.filters[i.Ac]=w.map(function(a){return{value:a,active:!0}})}if(a.gt&&(b.filters[i.vD]=(0,ab.eL)(a.gt||"")),b.animationPlayPauseButton="Play",a.animate){var c=a.animate.split(",");if(5!==c.length)console.error("Invalid 'animate' URL query (not enough fields)"),delete a.animate;else if("divOnly"===b.branchLengthsToDisplay)console.error("Invalid 'animate' URL query (tree is not a timetree)"),delete a.animate;else{var q=[c[0],(0,h.O$)(c[0])],x=q[0],e=q[1],r=[c[1],(0,h.O$)(c[1])],y=r[0],f=r[1];if(d(e,b.absoluteDateMinNumeric,b.absoluteDateMaxNumeric)&&d(f,b.absoluteDateMinNumeric,b.absoluteDateMaxNumeric)&&!(e>=f)){window.NEXTSTRAIN.animationStartPoint=e,window.NEXTSTRAIN.animationEndPoint=f,b.dateMin=x,b.dateMax=y,b.dateMinNumeric=e,b.dateMaxNumeric=f,b.mapAnimationShouldLoop="1"===c[2],b.mapAnimationCumulative="1"===c[3];var s=parseInt(c[4],10);b.mapAnimationDurationInMilliseconds=isNaN(s)?3e4:s,b.animationPlayPauseButton="Pause"}else console.error("Invalid 'animate' URL query (invalid date range)"),delete a.animate}}return a.branchLabel&&(b.selectedBranchLabel=a.branchLabel),"all"===a.showBranchLabels&&(b.showAllBranchLabels=!0),a.sidebar&&("open"===a.sidebar?(b.defaults.sidebarOpen=!0,b.sidebarOpen=!0):"closed"===a.sidebar&&(b.defaults.sidebarOpen=!1,b.sidebarOpen=!1)),a.legend&&("open"===a.legend?b.legendOpen=!0:"closed"===a.legend&&(b.legendOpen=!1)),"onlyPanels"in a&&(b.showOnlyPanels=!0),a.transmissions&&("show"===a.transmissions?b.showTransmissionLines=!0:"hide"===a.transmissions&&(b.showTransmissionLines=!1)),"hide"===a.branches&&(b.scatterVariables.showBranches=!1),"show"===a.regression&&(b.scatterVariables.showRegression=!0),"hide"===a.regression&&(b.scatterVariables.showRegression=!1),a.scatterX&&(b.scatterVariables.x=a.scatterX),a.scatterY&&(b.scatterVariables.y=a.scatterY),b=ah({},b,(0,ae.oK)(a))},ap=function(a){var c=!0,e=!1,f=void 0;try{for(var g,d=Object.keys(a.defaults)[Symbol.iterator]();!(c=(g=d.next()).done);c=!0){var b=g.value;switch(aj(a.defaults[b])){case"boolean":case"string":a[b]=a.defaults[b];break;case"object":a[b]=JSON.parse(JSON.stringify(a.defaults[b]));break;default:console.error("unknown typeof for default state of ",b,a.defaults[b])}}}catch(h){e=!0,f=h}finally{try{c||null==d.return||d.return()}finally{if(e)throw f}}return a.dateMin=a.absoluteDateMin,a.dateMax=a.absoluteDateMax,a.dateMinNumeric=a.absoluteDateMinNumeric,a.dateMaxNumeric=a.absoluteDateMaxNumeric,a.zoomMax=void 0,a.zoomMin=void 0,a.panelLayout=(0,j.j)().width>i.Tr?"grid":"full",a.panelsToDisplay=a.panelsAvailable.slice(),a.tipLabelKey=i.Ac,a.scatterVariables={},a.showAllBranchLabels=!1,a},aq=function(a,b,g){if(b.analysisSlider&&(a.analysisSlider={key:b.analysisSlider,valid:!1}),b.filters){var e;a.filtersInFooter=function(a){if(Array.isArray(a))return af(a)}(e=b.filters)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(e)||ak(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}else console.warn("JSON did not include any filters"),a.filtersInFooter=[];if(b.displayDefaults)for(var d=["geoResolution","colorBy","distanceMeasure","layout","mapTriplicate","selectedBranchLabel","tipLabelKey","sidebar","showTransmissionLines","normalizeFrequencies"],f=["string","string","string","string","boolean","string","string","string","boolean","boolean"],c=0;c<d.length;c+=1)Object.hasOwnProperty.call(b.displayDefaults,d[c])&&(aj(b.displayDefaults[d[c]])===f[c]?"sidebar"===d[c]?"open"===b.displayDefaults[d[c]]?(a.defaults.sidebarOpen=!0,a.sidebarOpen=!0):"closed"===b.displayDefaults[d[c]]?(a.defaults.sidebarOpen=!1,a.sidebarOpen=!1):console.error("Skipping 'display_default' for sidebar as it's not 'open' or 'closed'"):(a[d[c]]=b.displayDefaults[d[c]],a.defaults[d[c]]=b.displayDefaults[d[c]]):console.error("Skipping 'display_default' for ",d[c],"as it is not of type ",f[c]));else b.displayDefaults={};return b.panels?(a.panelsAvailable=b.panels.slice(),a.panelsToDisplay=b.panels.slice()):(a.panelsAvailable=["tree","entropy"],a.panelsToDisplay=["tree","entropy"]),b.geoResolutions&&b.geoResolutions.length||(a.panelsAvailable=a.panelsAvailable.filter(function(a){return"map"!==a}),a.panelsToDisplay=a.panelsToDisplay.filter(function(a){return"map"!==a})),b.colorings||(b.colorings={}),g&&a.coloringsPresentOnTree.has("gt")?Object.keys(b.colorings).includes("gt")||(b.colorings.gt={title:"Genotype",type:"categorical"}):(a.panelsAvailable=a.panelsAvailable.filter(function(a){return"entropy"!==a}),a.panelsToDisplay=a.panelsToDisplay.filter(function(a){return"entropy"!==a}),Object.keys(b.colorings).includes("gt")&&(console.error("Genotype coloring ('gt') was specified as an option in the JSON, however the data does not support this: check that 'metadata.genome_annotations' is correct and that mutations have been assigned to 'branch_attrs' on the tree."),delete b.colorings.gt)),b.displayDefaults&&b.displayDefaults.panels&&Array.isArray(b.displayDefaults.panels)?(b.displayDefaults.panels=b.displayDefaults.panels.filter(function(b){return a.panelsAvailable.includes(b)}),a.panelsToDisplay=a.panelsToDisplay.filter(function(a){return b.displayDefaults.panels.includes(a)}),a.defaults.panels=b.displayDefaults.panels):a.defaults.panels=a.panelsAvailable.slice(),(0,ad.px)(a.panelsToDisplay)||(a.panelLayout="full",a.canTogglePanelLayout=!1),a},ar=function(a,b,c,d){if(a.dateMin=am(b.nodes,a),a.dateMax=an(b.nodes),a.dateMinNumeric=(0,h.O$)(a.dateMin),a.dateMaxNumeric=(0,h.O$)(a.dateMax),c){var e=am(c.nodes,a),f=an(c.nodes),g=(0,h.O$)(e),i=(0,h.O$)(f);g<a.dateMinNumeric&&(a.dateMinNumeric=g,a.dateMin=e),i>a.dateMaxNumeric&&(a.dateMaxNumeric=i,a.dateMax=f)}a.absoluteDateMin=a.dateMin,a.absoluteDateMax=a.dateMax,a.absoluteDateMinNumeric=(0,h.O$)(a.absoluteDateMin),a.absoluteDateMaxNumeric=(0,h.O$)(a.absoluteDateMax),a.coloringsPresentOnTree=new Set,a.coloringsPresentOnTreeWithConfidence=new Set;var m=[];d&&(m=Object.keys(d));var n=!1,o=!1,j=!1,k=function(b){b.forEach(function(b){if(m.forEach(function(c){!a.coloringsPresentOnTreeWithConfidence.has(c)&&((0,s.rs)(b,c,{confidence:!0})?(a.coloringsPresentOnTreeWithConfidence.add(c),a.coloringsPresentOnTree.add(c)):(0,s.rs)(b,c)&&a.coloringsPresentOnTree.add(c))}),b.branch_attrs&&b.branch_attrs.mutations){var c=Object.keys(b.branch_attrs.mutations);(c.length>1||1===c.length&&"nuc"!==c[0])&&(n=!0),c.includes("nuc")&&(o=!0)}!j&&(0,s.rs)(b,"num_date",{confidence:!0})&&(j=!0)})};k(b.nodes),c&&k(c.nodes),(n||o)&&a.coloringsPresentOnTree.add("gt");var l=void 0!==(0,s.rs)(b.nodes[0],"num_date"),p=void 0!==(0,s.KT)(b.nodes[0]);return a.branchLengthsToDisplay=l&&p?"divAndDate":l?"dateOnly":"divOnly",a.distanceMeasure="divOnly"===a.branchLengthsToDisplay?"div":"dateOnly"===a.branchLengthsToDisplay?"num_date":a.distanceMeasure,-1!==b.availableBranchLabels.indexOf("clade")&&(a.defaults.selectedBranchLabel="clade",a.selectedBranchLabel="clade"),a.temporalConfidence={exists:j,display:j,on:!1},a},as=function(a,c,e,b,j,t){c.colorings||(c.colorings={});var k=function(){var d=Object.keys(c.colorings).filter(function(a){return"gt"!==a});c.displayDefaults&&c.displayDefaults.colorBy&& -1!==d.indexOf(c.displayDefaults.colorBy)?(console.warn("colorBy falling back to",c.displayDefaults.colorBy),a.colorBy=c.displayDefaults.colorBy,a.defaults.colorBy=c.displayDefaults.colorBy):d.length?-1!==d.indexOf(i.VK)?(a.colorBy=i.VK,a.defaults.colorBy=i.VK):(console.error("Error detected trying to set colorBy to",a.colorBy,"falling back to",d[0]),a.colorBy=d[0],a.defaults.colorBy=d[0]):(console.error("Error detected trying to set colorBy to",a.colorBy," as there are no color options defined in the JSONs!"),a.colorBy="none",a.defaults.colorBy="none"),delete b.c};if((0,ab.O$)(a.colorBy)){if(e){var n=(0,ab.kW)(a.colorBy,e);if(n){var f=(0,ab.bP)(n);a.colorBy!==f&&(console.error("Genotype color-by ".concat(a.colorBy," contains at lease one invalid position. ")+"Color-by has been changed to ".concat(f,".")),b.c=f,a.colorBy=f)}else k()}else k()}else -1===Object.keys(c.colorings).indexOf(a.colorBy)&&k();var d=null==e?void 0:null===(x=e[0])|| void 0===x?void 0:x.range;if(d?((a.zoomMin<=d[0]||a.zoomMin>=d[1])&&(a.zoomMin=void 0,delete b.gmin),(a.zoomMax<=d[0]||a.zoomMax>=d[1])&&(a.zoomMax=void 0,delete b.gmax),a.zoomMin&&a.zoomMax&&a.zoomMin>a.zoomMax&&(z=[a.zoomMax,a.zoomMin],a.zoomMin=z[0],a.zoomMax=z[1],A=[a.zoomMin,a.zoomMax],b.gmin=A[0],b.gmax=A[1])):(y=[void 0,void 0],a.zoomMin=y[0],a.zoomMax=y[1],delete b.gmin,delete b.gmax),a.colorByConfidence=al(a,a.colorBy),-1===["div","num_date"].indexOf(a.distanceMeasure)&&(a.distanceMeasure="num_date",console.error("Error detected. Setting distanceMeasure to ",a.distanceMeasure)),c.geoResolutions){var g=c.geoResolutions.map(function(a){return a.key});-1===g.indexOf(a.geoResolution)&&(c.displayDefaults&&c.displayDefaults.geoResolution&& -1!==g.indexOf(c.displayDefaults.geoResolution)?a.geoResolution=c.displayDefaults.geoResolution:-1!==g.indexOf(i.Eq)?a.geoResolution=i.Eq:a.geoResolution=g[0],console.error("Error detected. Setting geoResolution to ",a.geoResolution),delete b.r)}a.selectedBranchLabel&&!j.availableBranchLabels.includes(a.selectedBranchLabel)&&(console.error("Can't set selected branch label to ",a.selectedBranchLabel),a.selectedBranchLabel="none",a.defaults.selectedBranchLabel="none");var o=(0,ac.I)(j.nodeAttrKeys,c.colorings).map(function(a){return a.value});o.includes(a.defaults.tipLabelKey)||(console.error("Invalid JSON-defined tip label:",a.defaults.tipLabelKey),a.defaults.tipLabelKey=i.Ac),o.includes(a.tipLabelKey)||(b.tl&&(console.error("Invalid URL-defined tip label:",a.tipLabelKey),delete b.tl),a.tipLabelKey=a.defaults.tipLabelKey),(0,m.xi)(a.temporalConfidence.exists,a.distanceMeasure,a.layout)?a.temporalConfidence.display=!0:(a.temporalConfidence.display=!1,a.temporalConfidence.on=!1,delete b.ci);var w=function(a){return a===i.Ac?"s":a===i.vD?"gt":"f_".concat(a)},l=!0,p=!1,q=void 0;try{for(var x,y,z,A,r,u=function(g,f){var c=f.value;if(!a.filters[c].length)return delete a.filters[c],delete b[w(c)],"continue";if(!Object.keys(j.totalStateCounts).includes(c)&&c!==i.Ac&&c!==i.vD)return delete a.filters[c],delete b[w(c)],"continue";var e=a.filters[c].map(function(a){return a.value}),d=void 0;if(c===i.Ac){var h=new Set(j.nodes.map(function(a){return a.name}));d=e.filter(function(a){return h.has(a)})}else if(c===i.vD){var k=(0,s.nx)(j.nodes);d=e.filter(function(a){return k.has(a)})}else d=e.filter(function(a){return j.totalStateCounts[c].has(a)});0===d.length?(delete a.filters[c],delete b[w(c)]):e.length!==d.length&&(a.filters[c]=d.map(function(a){return{value:a,active:!0}}),b[w(c)]=c===i.vD?(0,ab.FQ)(a.filters[c]):d.join(","))},h=Reflect.ownKeys(a.filters)[Symbol.iterator]();!(l=(r=h.next()).done);l=!0)u(h,r)}catch(v){p=!0,q=v}finally{try{l||null==h.return||h.return()}finally{if(p)throw q}}return a.filtersInFooter=a.filtersInFooter.filter(function(a){return a in j.totalStateCounts}),b.m&&"divAndDate"!==a.branchLengthsToDisplay&&delete b.m,"open"===b.sidebar||"closed"===b.sidebar||delete b.sidebar,t&&("sidebarOpen"in a.defaults&&delete a.defaults.sidebarOpen,a.sidebarOpen=!0),"scatter"===a.layout||"clock"===a.layout?(a.scatterVariables=(0,aa.HO)(a,c,j,"clock"===a.layout),b.scatterX&&b.scatterX!==a.scatterVariables.x&&delete b.scatterX,b.scatterY&&b.scatterY!==a.scatterVariables.y&&delete b.scatterY,"clock"===a.layout&&(delete b.scatterX,delete b.scatterY)):(a.scatterVariables={},delete b.scatterX,delete b.scatterY,delete b.regression,delete b.branches),a},at=function(a,b,c,g){var d=a.idxOfInViewRootNode;if(b){var e=ai(b.split(":"),2),h=e[0],i=e[1],j=(0,k.s9)(a.nodes,h,i,g);a.selectedClade=b,d=(0,_.CX)(j,a)}else a.selectedClade=void 0,d=(0,_.CX)(0,a);var l=(0,k.vK)(a,c,{dateMinNumeric:c.dateMinNumeric,dateMaxNumeric:c.dateMaxNumeric}),f=Object.assign({},a,l);return f.idxOfInViewRootNode=d,f},au=function(a){var b={};return a.forEach(function(a){b[a.key]=ah({},a),delete b[a.key].key}),b},av=function(a){var b={};if(a.meta.colorings&&(b.colorings=au(a.meta.colorings)),b.title=a.meta.title,b.updated=a.meta.updated,a.meta.description&&(b.description=a.meta.description),a.version&&(b.version=a.version),a.meta.maintainers&&(b.maintainers=a.meta.maintainers),a.meta.build_url&&(b.buildUrl=a.meta.build_url),a.meta.data_provenance&&(b.dataProvenance=a.meta.data_provenance),a.meta.filters&&(b.filters=a.meta.filters),a.meta.panels&&(b.panels=a.meta.panels),a.root_sequence&&(b.rootSequence=a.root_sequence),a.meta.display_defaults){b.displayDefaults={};var j={color_by:"colorBy",geo_resolution:"geoResolution",distance_measure:"distanceMeasure",branch_label:"selectedBranchLabel",tip_label:"tipLabelKey",map_triplicate:"mapTriplicate",layout:"layout",language:"language",sidebar:"sidebar",panels:"panels",transmission_lines:"showTransmissionLines"},c=!0,e=!1,f=void 0;try{for(var g,d=Object.entries(j)[Symbol.iterator]();!(c=(g=d.next()).done);c=!0){var h=ai(g.value,2),i=h[0],k=h[1];Object.prototype.hasOwnProperty.call(a.meta.display_defaults,i)&&(b.displayDefaults[k]=a.meta.display_defaults[i])}}catch(l){e=!0,f=l}finally{try{c||null==d.return||d.return()}finally{if(e)throw f}}}return a.meta.geo_resolutions&&(b.geoResolutions=a.meta.geo_resolutions),Object.prototype.hasOwnProperty.call(b,"loaded")&&console.error('Metadata JSON must not contain the key "loaded". Ignoring.'),b.loaded=!0,b},aw=function(b,c){var a=parseInt(b.n,10)||0;return a>=c.length&&(console.warn("Attempted to go to narrative page ".concat(a," which doesn't exist")),a=0),a},ax=function(r){var b,e,d,a,h,u,k,j,y,v,z=r.json,s=void 0!==z&&z,A=r.secondTreeDataset,B=void 0!==A&&A,C=r.oldState,l=void 0!==C&&C,D=r.narrativeBlocks,t=void 0!==D&&D,E=r.mainTreeName,L=void 0!==E&&E,G=r.secondTreeName,M=void 0!==G&&G,c=r.query,I=r.dispatch;if(s?(h=av(s),d=Q(s.meta.genome_annotations),k=(0,n.P)(),j=(0,o.h)(),b=F(s.tree),H(h,b),b.debug="LEFT",b.name=L,h.mainTreeNumTips=(0,p.Tr)(b.nodes),B&&(e=(y=ay(B,h,null==d?void 0:d.genomeMap,M)).treeToo,h=y.metadata),a=(0,m.lU)(),a=ar(a,b,e,h.colorings),a=aq(a,h,d.genomeMap)):l&&(a=(0,g.cloneDeep)(l.controls),d=ah({},l.entropy),b=ah({},l.tree),e=ah({},l.treeToo),h=ah({},l.metadata),k=ah({},l.frequencies),j=ah({},l.measurements),a=ap(a),a=aq(a,h,d.genomeMap),j.loaded&&(j.collectionToDisplay=(0,ae.Dr)(j.collections,"",j.defaultCollectionKey),a=ah({},a,(0,ae._e)(j.collectionToDisplay)))),t&&(v=aw(c,u=t),(c=f.parse(u[v].query)).m_collection&&j.loaded)){var N=(0,ae.Dr)(j.collections,c.m_collection,j.defaultCollectionKey);j.collectionToDisplay=N,a=ah({},a,(0,ae._e)(j.collectionToDisplay)),delete c.m_collection}a=ao(a,c),t&&u[v].mainDisplayMarkdown&&(a.panelsToDisplay=["MainDisplayMarkdown"]);var O=t||l&&l.narrative.display,P=(0,p.WO)(b.nodes,h.colorings);if(b.totalStateCounts=(0,p.CU)(b.nodes,P,!1,!0),a=as(a,h,d.genomeMap,c,b,O),s||a.colorBy!==l.controls.colorBy){var x=(0,Z.pu)(a.colorBy,a,b,e,h),R=(0,Y.lX)(b,x);a.colorScale=x,a.colorByConfidence=al(a,a.colorBy),b.nodeColorsVersion=x.version,b.nodeColors=R}if(c.clade&&(c.label||"root"===c.clade||(c.label="clade:".concat(c.clade)),delete c.clade),c.label&&(c.label.includes(":")||(console.error("Defined a label without ':' separator."),delete c.label),b.availableBranchLabels.includes(c.label.split(":")[0])||(console.error("Label name ".concat(c.label.split(":")[0]," doesn't exist")),delete c.label)),b=at(b,c.label,a,I),e&&e.loaded&&(e=az(b,e,a,I)),a.colorScale.visibleLegendValues=(0,Z.Sb)({colorBy:a.colorBy,scaleType:a.colorScale.scaleType,genotype:a.colorScale.genotype,legendValues:a.colorScale.legendValues,treeNodes:b.nodes,treeTooNodes:e?e.nodes:void 0,visibility:b.visibility,visibilityToo:null==e?void 0:e.visibility}),d.loaded){if(d.selectedCds=i.BJ,d.selectedPositions=[],(0,ab.O$)(a.colorBy)){var w=(0,ab.kW)(a.colorBy),J=(0,ab.fO)(null==w?void 0:w.gene,d.genomeMap);J&&(d.selectedCds=J,d.selectedPositions=(null==w?void 0:w.positions)||[])}var K=ai((0,q.UB)(b.nodes,b.visibility,d.selectedCds,d.showCounts),2),S=K[0],T=K[1];d.bars=S,d.maxYVal=T}return k&&k.loaded&&(k.version++,(0,$.bv)(k.data,k.pivots,b.nodes,b.visibility)||(a.normalizeFrequencies=!1),k.matrix=(0,$.N0)(k.data,k.pivots,b.nodes,b.visibility,a.colorScale,a.colorBy,a.normalizeFrequencies)),t&&(c={n:v}),{tree:b,treeToo:e,metadata:h,entropy:d,controls:a,narrative:u,frequencies:k,measurements:j,query:c}};function ay(b,c,e,f){var d,a=F(b.tree);H(c,a),a.debug="RIGHT",a.name=f,function(a,b,e){if(e&&b.meta.genome_annotations){try{a.identicalGenomeMapAcrossBothTrees=(0,g.isEqualWith)(e,P(b.meta.genome_annotations),function(b,c,a){return"color"===a||"metadata"===a||void 0})}catch(f){var d,c;d=f,(null!=(c=Error)&&"undefined"!=typeof Symbol&&c[Symbol.hasInstance]?!!c[Symbol.hasInstance](d):d instanceof c)&&console.error(f.message)}a.identicalGenomeMapAcrossBothTrees||console.warn("Heads up! The two trees have different genome_annotations and thus genotype colorings will only be applied to the LHS tree")}a.identicalGenomeMapAcrossBothTrees&&b.root_sequence&&(a.rootSequenceSecondTree=b.root_sequence)}(ah({},c),b,e);var h=au((null===(d=b.meta)|| void 0===d?void 0:d.colorings)||[]),i=(0,p.WO)(a.nodes,h);return a.totalStateCounts=(0,p.CU)(a.nodes,i,!1,!0),{treeToo:a,metadata:c}}function az(c,a,b,d){return a.nodeColorsVersion=c.nodeColorsVersion,a.nodeColors=(0,Y.lX)(a,b.colorScale),(a=at(a,void 0,b,d)).tangleTipLookup=(0,l.w)(c.nodes,a.nodes,c.visibility,a.visibility),b.showTreeToo=a.name,b.showTangle=!0,b.layout="rect",b.panelsToDisplay=b.panelsToDisplay.filter(function(a){return!["map","entropy","frequencies"].includes(a)}),b.canTogglePanelLayout=!1,b.panelLayout="full",a}},59894:function(c,b,a){"use strict";a.d(b,{Rb:function(){return w},CX:function(){return s},ms:function(){return u},DP:function(){return x},VB:function(){return v},ss:function(){return t}});var d=a(69856),e=a(57455),f=a(26061),g=function(c,d,a){var b=(0,e.BG)(d,a);return("temporal"===a.scaleType&&(b=(0,e.X6)(b)),a.continuous)?c===a.legendValues[0]&&b===a.legendBounds[c][0]||b<=a.legendBounds[c][1]&&b>a.legendBounds[c][0]:b===c},h=function(b){var c=b.tipSelectedIdx,e=void 0!==c&&c,h=b.selectedLegendItem,l=void 0!==h&&h,i=b.geoFilter,m=void 0===i?[]:i,j=b.searchNodes,n=void 0!==j&&j,o=b.colorScale,a=b.tree;if(!1!==l&&a&&a.nodes)return a.nodes.map(function(a){return g(l,a,o)?d.Fp:d.x_});if(2===m.length&&a&&a.nodes)return a.nodes.map(function(e){var a,b,c;return(a=e,b=m[0],c=m[1],c===(0,f.rs)(a,b))?d.Fp:d.x_});if(n)return a.nodes.map(function(a){return a.name.toLowerCase().includes(n)?d.Fp:d.x_});if(e){var k=a.nodes.map(function(){return d.x_});return k[e]=d.Fp+3,k}return a&&a.nodes?a.nodes.map(function(){return d.x_}):null},i=a(62525),j=a(5859),k=a(49817),l=a(1133),m=a(44163),n=a(96313),o=a(71476),p=a(56097);function q(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function r(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}a(19107),a(94329);var s=function(c,a){var b=void 0!==c?c:a.idxOfInViewRootNode;if(a.nodes[0].shell)a.nodes.forEach(function(a){a.shell.inView=!1,a.shell.update=!0}),a.nodes[b].hasChildren?(0,n.Yo)(a.nodes[b].shell,function(a){a.inView=!0}):0===a.nodes[b].parent.arrayIdx?a.nodes[b].shell.inView=!0:(0,n.Yo)(a.nodes[b].parent.shell,function(a){a.inView=!0});else{a.nodes.forEach(function(a){a.inView=!1});var d=function(a){if(a.inView=!0,a.children){var b=!0,e=!1,f=void 0;try{for(var g,c=a.children[Symbol.iterator]();!(b=(g=c.next()).done);b=!0){var h=g.value;d(h)}}catch(i){e=!0,f=i}finally{try{b||null==c.return||c.return()}finally{if(e)throw f}}}};d(a.nodes[b].hasChildren?a.nodes[b]:a.nodes[b].parent)}return b},t=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},b=a.root,d=void 0===b?[void 0,void 0]:b,c=a.cladeSelected,e=void 0===c?void 0:c;return function(n,q){var m=q(),c=m.tree,h=m.treeToo,a=m.controls,r=m.frequencies;if(void 0===d[0]&&!e&&c.selectedClade&&(e=c.selectedClade),c.nodes){var t=s(d[0],c),f=(0,i.vK)(c,a,{dateMinNumeric:a.dateMinNumeric,dateMaxNumeric:a.dateMaxNumeric}),b={type:j.st,visibility:f.visibility,visibilityVersion:f.visibilityVersion,branchThickness:f.branchThickness,branchThicknessVersion:f.branchThicknessVersion,idxOfInViewRootNode:t,idxOfFilteredRoot:f.idxOfFilteredRoot,cladeName:e,selectedClade:e};if(a.showTreeToo){var u=s(d[1],h),g=(0,i.vK)(h,a,{dateMinNumeric:a.dateMinNumeric,dateMaxNumeric:a.dateMaxNumeric});b.tangleTipLookup=(0,o.w)(c.nodes,h.nodes,f.visibility,g.visibility),b.visibilityToo=g.visibility,b.visibilityVersionToo=g.visibilityVersion,b.branchThicknessToo=g.branchThickness,b.branchThicknessVersionToo=g.branchThicknessVersion,b.idxOfInViewRootNodeToo=u,b.idxOfFilteredRootToo=g.idxOfFilteredRoot}b.visibleLegendValues=(0,p.Sb)({colorBy:a.colorBy,genotype:a.colorScale.genotype,scaleType:a.colorScale.scaleType,legendValues:a.colorScale.legendValues,treeNodes:c.nodes,treeTooNodes:h?h.nodes:void 0,visibility:b.visibility,visibilityToo:b.visibilityToo}),n(b),(0,k.QW)(n,q),r.loaded&&(0,l._)(n,q)}}},u=function(a){var b=a.newMin,e=void 0!==b&&b,c=a.newMax,f=void 0!==c&&c,d=a.quickdraw,g=void 0!==d&&d;return function(s,t){var n=t(),c=n.tree,q=n.treeToo,a=n.controls,u=n.frequencies;if(c.nodes){var r={dateMinNumeric:e?(0,m.O$)(e):a.dateMinNumeric,dateMaxNumeric:f?(0,m.O$)(f):a.dateMaxNumeric},d=(0,i.vK)(c,a,r),b={type:j.OV,quickdraw:g,dateMin:e||a.dateMin,dateMax:f||a.dateMax,dateMinNumeric:r.dateMinNumeric,dateMaxNumeric:r.dateMaxNumeric,visibility:d.visibility,visibilityVersion:d.visibilityVersion,branchThickness:d.branchThickness,branchThicknessVersion:d.branchThicknessVersion,idxOfInViewRootNode:c.idxOfInViewRootNode};if(a.showTreeToo){var h=(0,i.vK)(q,a,r);b.tangleTipLookup=(0,o.w)(c.nodes,q.nodes,d.visibility,h.visibility),b.visibilityToo=h.visibility,b.visibilityVersionToo=h.visibilityVersion,b.branchThicknessToo=h.branchThickness,b.branchThicknessVersionToo=h.branchThicknessVersion}b.visibleLegendValues=(0,p.Sb)({colorBy:a.colorBy,scaleType:a.colorScale.scaleType,genotype:a.colorScale.genotype,legendValues:a.colorScale.legendValues,treeNodes:c.nodes,treeTooNodes:q?q.nodes:void 0,visibility:b.visibility,visibilityToo:b.visibilityToo}),s(b),(0,k.QW)(s,t),u.loaded&&(0,l._)(s,t)}}},v=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},b=a.tipSelectedIdx,f=void 0!==b&&b,c=a.selectedLegendItem,g=void 0!==c&&c,d=a.geoFilter,k=void 0===d?[]:d,e=a.searchNodes,l=void 0!==e&&e;return function(o,p){var d=p(),m=d.controls,b=d.tree,e=d.treeToo,c=m.colorScale,a={type:j.S,version:b.tipRadiiVersion+1},n=m.showTreeToo;if(f){if(a.data=h({tipSelectedIdx:f,colorScale:c,tree:b}),n){var q=(0,i.oJ)(e.nodes,b.nodes[f].name);a.dataToo=h({idx:q,colorScale:c,tree:e})}}else a.data=h({selectedLegendItem:g,geoFilter:k,searchNodes:l,colorScale:c,tree:b}),n&&(a.dataToo=h({selectedLegendItem:g,geoFilter:k,searchNodes:l,colorScale:c,tree:e}));o(a)}},w=function(a,b,c){return function(i,p){var d=p().controls,k=Reflect.ownKeys(d.filters);switch(a){case"set":f=c.map(function(a){return{value:a,active:!0}});break;case"add":if(-1===k.indexOf(b))f=c.map(function(a){return{value:a,active:!0}});else{var u=(f=d.filters[b].slice()).map(function(a){return a.value});c.forEach(function(a){var b=u.indexOf(a);-1===b?f.push({value:a,active:!0}):f[b].active=!0})}break;case"remove":case"inactivate":if(-1===k.indexOf(b)){console.error("trying to ".concat(a," values from an un-initialised filter!"));return}var q=(f=d.filters[b].map(function(a){return function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){r(d,a,c[a])})}return d}({},a)})).map(function(a){return a.value}),e=!0,l=!1,m=void 0;try{for(var f,n,g=c[Symbol.iterator]();!(e=(n=g.next()).done);e=!0){var o=n.value,h=q.indexOf(o);-1!==h?"remove"===a?f.splice(h,1):f[h].active=!1:console.error("trying to ".concat(a," filter value ").concat(o," which was not part of the filter selection"))}}catch(s){l=!0,m=s}finally{try{e||null==g.return||g.return()}finally{if(l)throw m}}break;default:console.error("applyFilter called with invalid mode: ".concat(a));return}i({type:j.MY,trait:b,values:f}),i(t())}},x=function(){return{type:j.EV}},y=function(k,a,f){var b,c=a.hasChildren?function(a){if(Array.isArray(a))return q(a)}(b=a.children)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(b)||function(a,c){if(a){if("string"==typeof a)return q(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return q(a,c)}}(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():[];if(0===a.arrayIdx)a.unexplodedChildren=c;else if(a.hasChildren){var n=getTraitFromNode(a,f),g=a.children.map(function(a){return getTraitFromNode(a,f)}).map(function(a,b){return a!==n?b:void 0}).filter(function(a){return void 0!==a});g.length&&(g.forEach(function(c){var b=a.children[c];k.children.push(b),b.parent=k}),a.unexplodedChildren=c,a.children=a.children.filter(function(b,a){return!g.includes(a)}),0===a.children.length&&(a.hasChildren=!1))}var d=!0,h=!1,i=void 0;try{for(var j,e=c[Symbol.iterator]();!(d=(j=e.next()).done);d=!0){var l=j.value;y(k,l,f)}}catch(m){h=!0,i=m}finally{try{d||null==e.return||e.return()}finally{if(h)throw i}}}},5859:function(c,a,b){"use strict";b.d(a,{"$f":function(){return H},Ab:function(){return l},Ct:function(){return j},Dg:function(){return v},Dv:function(){return B},EV:function(){return z},FI:function(){return aa},HS:function(){return f},I_:function(){return n},JS:function(){return G},Jv:function(){return S},KA:function(){return e},KL:function(){return W},Kf:function(){return C},Lv:function(){return D},MY:function(){return r},Nn:function(){return R},OV:function(){return m},Q5:function(){return $},R7:function(){return p},RX:function(){return q},Rj:function(){return N},Rn:function(){return I},S:function(){return d},T3:function(){return k},TZ:function(){return P},Ue:function(){return K},W2:function(){return U},YU:function(){return M},b1:function(){return u},bg:function(){return E},c5:function(){return y},c7:function(){return ad},cn:function(){return _},eO:function(){return h},er:function(){return L},fE:function(){return t},g1:function(){return V},gZ:function(){return Q},i0:function(){return F},"if":function(){return A},jr:function(){return Y},"k$":function(){return ab},l8:function(){return O},nm:function(){return x},pM:function(){return J},"q$":function(){return ae},r7:function(){return Z},s4:function(){return T},sJ:function(){return ac},st:function(){return s},u7:function(){return o},v8:function(){return i},yZ:function(){return g},z:function(){return X},zp:function(){return w}});var d="UPDATE_TIP_RADII",e="NEW_COLORS",f="LOAD_FREQUENCIES",g="FREQUENCY_MATRIX",h="BROWSER_DIMENSIONS",i="CHANGE_LAYOUT",j="CHANGE_BRANCH_LABEL",k="CHANGE_DISTANCE_MEASURE",l="TOGGLE_FOCUS",m="CHANGE_DATES_VISIBILITY_THICKNESS",n="CHANGE_ABSOLUTE_DATE_MIN",o="CHANGE_ABSOLUTE_DATE_MAX",p="CHANGE_GEO_RESOLUTION",q="CLEAN_START",r="APPLY_FILTER",s="UPDATE_VISIBILITY_AND_BRANCH_THICKNESS",t="CHANGE_ENTROPY_CDS_SELECTION",u="CHANGE_ANIMATION_START",v="CHANGE_ANIMATION_TIME",w="CHANGE_ANIMATION_CUMULATIVE",x="CHANGE_ANIMATION_LOOP",y="DATA_INVALID",z="TOGGLE_TEMPORAL_CONF",A="MAP_ANIMATION_PLAY_PAUSE_BUTTON",B="ADD_NOTIFICATION",C="REMOVE_NOTIFICATION",D="CHANGE_PANEL_LAYOUT",E="TOGGLE_PANEL_DISPLAY",F="SET_MODAL",G="ADD_EXTRA_METADATA",H="TOGGLE_NARRATIVE",I="ENTROPY_DATA",J="ENTROPY_COUNTS_TOGGLE",K="URL_QUERY_CHANGE_WITH_COMPUTED_STATE",L="TREE_TOO_DATA",M="REMOVE_TREE_TOO",N="TOGGLE_TANGLE",O="CHANGE_ZOOM",P="SET_AVAILABLE",Q="TOGGLE_SIDEBAR",R="TOGGLE_LEGEND",S="TOGGLE_TRANSMISSION_LINES",T="SET_ROOT_SEQUENCE",U="CHANGE_TIP_LABEL_KEY",V="CHANGE_EXPLODE_ATTR",W="LOAD_MEASUREMENTS",X="CHANGE_MEASUREMENTS_COLLECTION",Y="CHANGE_MEASUREMENTS_GROUP_BY",Z="TOGGLE_MEASUREMENTS_THRESHOLD",$="TOGGLE_MEASUREMENTS_OVERALL_MEAN",_="CHANGE_MEASUREMENTS_DISPLAY",aa="APPLY_MEASUREMENTS_FILTER",ab="UPDATE_MEASUREMENTS_ERROR",ac="TOGGLE_SHOW_ALL_BRANCH_LABELS",ad="SELECT_NODE",ae="DESELECT_NODE"},68554:function(c,b,a){"use strict";a.d(b,{Y:function(){return h}});var d=a(28354);a(60822);var e=a(46641),f=a(54735),g=a(6290),h=function(b){var a=b.title,c=b.tooltip,h=void 0===c?void 0:c,i=(0,e.v9)(function(a){return a.general.mobileDisplay});return(0,d.jsxs)(g.TO,{children:[(0,d.jsx)(g.Gh,{children:a}),h&&!i&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.Zw,{"data-tip":!0,"data-for":a,onClick:function(a){return a.stopPropagation()},children:(0,d.jsx)(f.DAO,{})}),(0,d.jsx)(g.mi,{place:"bottom",type:"dark",effect:"solid",id:a,children:h})]})]})}},79462:function(l,c,a){"use strict";var b,m,n=a(28354),d=a(60822),e=a(46641),f=a(31884),o=a(5859),p=a(6290),q=a(69856),r=a(73221),s=a(65898);function t(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function u(a){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function v(a,b){return(v=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var g="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:paramtypes",[void 0]),h="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:type",Function),i=(0,e.$j)(function(a){var b;return{selected:a.controls.selectedBranchLabel,showAll:a.controls.showAllBranchLabels,available:Array.from(new Set(a.tree.availableBranchLabels).union(new Set(null!==(m=null===(b=a.treeToo)|| void 0===b?void 0:b.availableBranchLabels)&& void 0!==m?m:[]))),canRenderBranchLabels:a.controls.canRenderBranchLabels}}),j=b=i(b=h(b=g((b=function(e){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&v(b,a)}(d,e);var f,g,a,b,c,h=(f=d,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=u(f);if(g){var h=u(this).constructor;c=Reflect.construct(e,arguments,h)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function d(b){var a;return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),(a=h.call(this,b)).change=function(b){a.props.dispatch({type:o.Ct,value:b.value})},a}return a=d,b=[{key:"render",value:function(){var c=this;if(!this.props.canRenderBranchLabels)return null;var a=this.props.t,b=this.props.available.map(function(a){return{value:a,label:a}});return(0,n.jsxs)("div",{style:{paddingTop:5},children:[(0,n.jsx)(p.om,{children:a("sidebar:Branch Labels")}),(0,n.jsx)("div",{style:{width:q.HB,fontSize:14},children:(0,n.jsx)(r.Z,{value:b.filter(function(a){return a.value===c.props.selected}),options:b,isClearable:!1,isSearchable:!1,isMulti:!1,onChange:this.change})}),"none"!==this.props.selected&&(0,n.jsx)(s.Z,{display:!0,on:this.props.showAll,callback:function(){return c.props.dispatch({type:o.sJ,value:!c.props.showAll})},label:a("sidebar:Show all labels"),style:{paddingBottom:"5px",paddingTop:"10px"}})]})}}],t(a.prototype,b),c&&t(a,c),d}(d.Component))||b)||b)||b)||b,k=(0,f.Zh)()(j);c.Z=k},93227:function(r,f,a){"use strict";a.d(f,{Z:function(){return P}});var d,c,s=a(28354),g=a(60822),h=a(69515),e=a.n(h),i=a(46641),b=a(37536),j=a(31884),k=a(69856),t=a(15080),u=a(6290),v=a(5859);function w(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function x(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){w(d,a,c[a])})}return d}var y=function(a){var b=a.layout,c=a.showBranches,d=a.showRegression,e=a.x,f=a.xLabel,g=a.y,h=a.yLabel;return function(m,n){if(!window.NEXTSTRAIN||!window.NEXTSTRAIN.animationTickReference){var j=n(),i=j.controls,k=j.tree,l=j.metadata;if("rect"===b||"unrooted"===b||"radial"===b){m({type:v.v8,layout:b,scatterVariables:i.scatterVariables,canRenderBranchLabels:!0});return}var a="clock"===b||"scatter"===b?(0,t.HO)(i,l,k,"clock"===b):i.scatterVariables;e&&f&&(a=x({},a,(0,t.Sg)({x:e,xLabel:f},"x",i,k,l))),g&&h&&(a=x({},a,(0,t.Sg)({y:g,yLabel:h},"y",i,k,l))),void 0!==c&&(a.showBranches=c),void 0!==d&&(a.showRegression=d),"scatter"!==b||a.xContinuous&&a.yContinuous||(a.showRegression=!1),m({type:v.v8,layout:b||i.layout,scatterVariables:x({},a),canRenderBranchLabels:a.showBranches})}}},z=a(65898),A=a(73221);function B(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function l(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function C(a){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function D(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){l(d,a,c[a])})}return d}function E(a,b){return(E=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function F(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function m(){var a=F(["\n  padding: 0px 5px 1px 5px;\n"]);return m=function(){return a},a}function n(){var a=F(["\n  display: flex;\n  flex-direction: row;\n  align-content: stretch;\n  flex-wrap: nowrap;\n  height: 100%;\n  order: 0;\n  flex-grow: 0;\n  flex-shrink: 1;\n  flex-basis: auto;\n  align-self: auto;\n  padding: ","px 0px 2px 15px;\n"]);return n=function(){return a},a}function o(){var a=F(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  min-width: 18px;\n  font-size: 14px;\n  font-weight: 400;\n  font-family: ",";\n  color: ",";\n"]);return o=function(){return a},a}function p(){var a=F(["\n  width: ","px;\n  font-size: 12px;\n"]);return p=function(){return a},a}var G=(0,b.Zz)(function(c){var d=c.theme,e=c.selected,b=c.width,a=e?d.selectedColor:d.unselectedColor;return(0,s.jsx)("svg",{width:b,height:b+5,children:(0,s.jsx)("g",{transform:"translate(0,2)",children:(0,s.jsx)("svg",{width:b,height:b,viewBox:"16 19 27 22",children:(0,s.jsxs)("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)",children:[(0,s.jsx)("polyline",{id:"Path-3",stroke:a,points:"2.94117647 12.8571429 2.94117647 18.6083984 17.8459616 18.6083984 17.8459616 16.0260882 24.870031 16.0260882"}),(0,s.jsx)("polyline",{id:"Path-4",stroke:a,points:"17.8500004 18.5714286 17.8500004 20 25.0119374 20"}),(0,s.jsx)("polyline",{id:"Path-5",stroke:a,points:"2.94117647 12.8571429 3.00303284 7.21191058 10.2360102 7.11220045 10.4159559 2.99881623 17.1561911 2.93803403 17.1561911 0 24.313534 0"}),(0,s.jsx)("polyline",{id:"Path-6",stroke:a,points:"17.1599998 2.85714286 17.1599998 4.28571429 24.512941 4.28571429"}),(0,s.jsx)("path",{d:"M0,12.8571429 L2.94117647,12.8571429",id:"Path-6",stroke:a}),(0,s.jsx)("polyline",{id:"Path-7",stroke:a,points:"10.2941176 7.14285714 10.2941176 11.4285714 24.5454676 11.4285714"})]})})})})}),H=(0,b.Zz)(function(c){var d=c.theme,e=c.selected,b=c.width,a=e?d.selectedColor:d.unselectedColor;return(0,s.jsx)("svg",{width:b,height:b+5,children:(0,s.jsx)("g",{transform:"translate(0,0)",children:(0,s.jsx)("svg",{width:b,height:b,viewBox:"14 14 25 26",children:(0,s.jsxs)("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(15.000000, 15.000000)",children:[(0,s.jsx)("path",{d:"M15,15 L17.6450195,15",id:"Path-12",stroke:a}),(0,s.jsx)("path",{d:"M15.229248,22.5795898 L15.229248,18.2854004 C15.229248,18.2854004 17.8465223,17.6291504 17.8508301,15.0574951 C17.8551378,12.4858398 15.2944336,11.9138184 15.2944336,11.9138184 L15.229248,7.53540039",id:"Path-13",stroke:a}),(0,s.jsx)("path",{d:"M7.63037109,6.10498047 L10.230957,9.08325195 C10.230957,9.08325195 12.25,7.08233714 15.126709,7.04162598 C18.003418,7.00091481 20.5390625,8.91748047 20.5390625,8.91748047 L22.9765625,5.60839844",id:"Path-14",stroke:a}),(0,s.jsx)("path",{d:"M0.15942005,4.99135298 L2.76065146,7.96962446 C2.76065146,7.96962446 4.78019556,5.96870965 7.65761856,5.92799848 C10.5350415,5.88728732 13.0713154,7.80385298 13.0713154,7.80385298 L15.5094204,4.49477094",id:"Path-14",stroke:a,transform:"translate(7.834420, 6.232198) rotate(-34.000000) translate(-7.834420, -6.232198) "}),(0,s.jsx)("path",{d:"M7.5,21.496582 L10.1005859,24.4748535 C10.1005859,24.4748535 12.1196289,22.4739387 14.9963379,22.4332275 C17.8730469,22.3925164 20.4086914,24.309082 20.4086914,24.309082 L22.8461914,21",id:"Path-14",stroke:a,transform:"translate(15.173096, 22.737427) scale(1, -1) translate(-15.173096, -22.737427) "})]})})})})}),I=(0,b.Zz)(function(c){var d=c.theme,e=c.selected,b=c.width,a=e?d.selectedColor:d.unselectedColor;return(0,s.jsx)("svg",{width:b,height:b+5,children:(0,s.jsx)("g",{transform:"translate(0,2)",children:(0,s.jsxs)("svg",{width:b,height:b,viewBox:"106 49 150 118",children:[(0,s.jsx)("polyline",{id:"Path-2",stroke:a,strokeWidth:"4",fill:"none",points:"108 77 125.182237 87.8599894 133.381156 119.402591 111.867082 144.368016"}),(0,s.jsx)("path",{d:"M125.2,87.5 L137.624777,70",id:"Path-3",stroke:a,strokeWidth:"4",fill:"none"}),(0,s.jsx)("polyline",{id:"Path-4",stroke:a,strokeWidth:"4",fill:"none",points:"133 119.331781 192.127357 119.400002 215.445998 80.3916603 203.946476 51.4000015"}),(0,s.jsx)("path",{d:"M215.5,80.5 L253.378522,73",id:"Path-5",stroke:a,strokeWidth:"4",fill:"none"}),(0,s.jsx)("path",{d:"M192,119.2 L229.854937,164.55391",id:"Path-6",stroke:a,strokeWidth:"4",fill:"none"})]})})})}),J=(0,b.Zz)(function(c){var d=c.theme,e=c.selected,b=c.width,a=e?d.selectedColor:d.unselectedColor;return(0,s.jsx)("svg",{width:b,height:b+5,children:(0,s.jsx)("g",{transform:"translate(0,4)",children:(0,s.jsx)("svg",{width:b,height:b,viewBox:"0 0 30 30 ",children:(0,s.jsxs)("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)",children:[(0,s.jsx)("polyline",{id:"Path-3",stroke:a,points:"-15 5 -15 -25 "}),(0,s.jsx)("polyline",{id:"Path-4",stroke:a,points:"-15 5 25 5"}),(0,s.jsx)("polyline",{id:"Path-5",stroke:a,points:"-12 3 20 -25 "}),(0,s.jsx)("circle",{id:"c-1",stroke:a,cx:"-8",cy:"0",r:"2"}),(0,s.jsx)("circle",{id:"c-2",stroke:a,cx:"4",cy:"-10",r:"2"}),(0,s.jsx)("circle",{id:"c-3",stroke:a,cx:"4",cy:"-15",r:"2"}),(0,s.jsx)("circle",{id:"c-4",stroke:a,cx:"-4",cy:"-5",r:"2"}),(0,s.jsx)("circle",{id:"c-5",stroke:a,cx:"-2",cy:"-11",r:"2"})]})})})})}),K=(0,b.Zz)(function(c){var d=c.theme,e=c.selected,b=c.width,a=e?d.selectedColor:d.unselectedColor;return(0,s.jsx)("svg",{width:b,height:b+5,children:(0,s.jsx)("g",{transform:"translate(0,4)",children:(0,s.jsx)("svg",{width:b,height:b,viewBox:"0 0 30 30 ",children:(0,s.jsxs)("g",{id:"Group",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(17.000000, 20.000000)",children:[(0,s.jsx)("polyline",{id:"Path-3",stroke:a,points:"-15 5 -15 -25 "}),(0,s.jsx)("polyline",{id:"Path-4",stroke:a,points:"-15 5 25 5"}),(0,s.jsx)("circle",{id:"c-1",stroke:a,cx:"-8",cy:"0",r:"2"}),(0,s.jsx)("circle",{id:"c-2",stroke:a,cx:"3",cy:"0",r:"2"}),(0,s.jsx)("circle",{id:"c-3",stroke:a,cx:"8",cy:"-5",r:"2"}),(0,s.jsx)("circle",{id:"c-4",stroke:a,cx:"-4",cy:"-15",r:"2"}),(0,s.jsx)("circle",{id:"c-5",stroke:a,cx:"1",cy:"-11",r:"2"})]})})})})}),L=b.ZP.div.withConfig({componentId:"sc-aecd96ca-0"})(m()),M=b.ZP.div.withConfig({componentId:"sc-aecd96ca-1"})(n(),function(a){return a.padAbove?"2":"0"}),N=b.ZP.div.withConfig({componentId:"sc-aecd96ca-2"})(o(),function(a){return a.theme["font-family"]},function(a){return a.theme.color}),O=b.ZP.div.withConfig({componentId:"sc-aecd96ca-3"})(p(),k.HB-18),q=c=(0,i.$j)(function(a){return{layout:a.controls.layout,scatterVariables:a.controls.scatterVariables,colorings:a.metadata.colorings,colorBy:a.controls.colorBy,showTreeToo:a.controls.showTreeToo,branchLengthsToDisplay:a.controls.branchLengthsToDisplay}})((c=(l(d=function(e){"use strict";(function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&E(b,a)})(d,e);var f,g,a,b,c,h=(f=d,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=C(f);if(g){var h=C(this).constructor;c=Reflect.construct(e,arguments,h)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function d(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),h.apply(this,arguments)}return a=d,b=[{key:"renderScatterplotAxesSelector",value:function(){var c=this,a=(0,t.dQ)(this.props.colorings,this.props.colorBy),d=a.filter(function(a){return a.value===c.props.scatterVariables.x})[0],e=a.filter(function(a){return a.value===c.props.scatterVariables.y})[0],b={options:a,isClearable:!1,isSearchable:!1,isMulti:!1};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(M,{children:[(0,s.jsx)(N,{children:"x"}),(0,s.jsx)(O,{children:(0,s.jsx)(A.Z,D({},b,{value:a.filter(function(a){return a.value===d.value}),onChange:function(a){return c.props.dispatch(y({x:a.value,xLabel:a.label}))}}))})]}),(0,s.jsxs)(M,{children:[(0,s.jsx)(N,{children:"y"}),(0,s.jsx)(O,{children:(0,s.jsx)(A.Z,D({},b,{value:a.filter(function(a){return a.value===e.value}),onChange:function(a){return c.props.dispatch(y({y:a.value,yLabel:a.label}))}}))})]})]})}},{key:"renderBranchToggle",value:function(){var a=this;return(0,s.jsx)(M,{padAbove:!0,children:(0,s.jsx)(z.Z,{display:!0,on:this.props.scatterVariables.showBranches,callback:function(){return a.props.dispatch(y({showBranches:!a.props.scatterVariables.showBranches}))},label:"Show branches"})})}},{key:"renderRegressionToggle",value:function(){var a=this;return"scatter"!==this.props.layout||this.props.scatterVariables.xContinuous&&this.props.scatterVariables.yContinuous?(0,s.jsx)(M,{padAbove:!0,children:(0,s.jsx)(z.Z,{display:!0,on:this.props.scatterVariables.showRegression,callback:function(){return a.props.dispatch(y({showRegression:!a.props.scatterVariables.showRegression}))},label:"Show regression"})}):null}},{key:"render",value:function(){var c=this,b=this.props.t;if(this.props.showTreeToo)return null;var a=this.props.layout;return(0,s.jsxs)("div",{style:{marginBottom:15},children:[(0,s.jsx)(u.om,{children:b("sidebar:Layout")}),(0,s.jsxs)(L,{children:[(0,s.jsx)(G,{width:25,selected:"rect"===a}),(0,s.jsx)(u.fP,{selected:"rect"===a,onClick:function(){return c.props.dispatch(y({layout:"rect"}))},children:b("sidebar:rectangular")})]}),(0,s.jsxs)(L,{children:[(0,s.jsx)(H,{width:25,selected:"radial"===a}),(0,s.jsx)(u.fP,{selected:"radial"===a,onClick:function(){return c.props.dispatch(y({layout:"radial"}))},children:b("sidebar:radial")})]}),(0,s.jsxs)(L,{children:[(0,s.jsx)(I,{width:25,selected:"unrooted"===a}),(0,s.jsx)(u.fP,{selected:"unrooted"===a,onClick:function(){return c.props.dispatch(y({layout:"unrooted"}))},children:b("sidebar:unrooted")})]}),"divAndDate"===this.props.branchLengthsToDisplay?(0,s.jsxs)(L,{children:[(0,s.jsx)(J,{width:25,selected:"clock"===a}),(0,s.jsx)(u.fP,{selected:"clock"===a,onClick:function(){return c.props.dispatch(y({layout:"clock"}))},children:b("sidebar:clock")}),"clock"===a&&this.renderBranchToggle(),"clock"===a&&this.renderRegressionToggle()]}):null,(0,s.jsxs)(L,{children:[(0,s.jsx)(K,{width:25,selected:"scatter"===a}),(0,s.jsx)(u.fP,{selected:"scatter"===a,onClick:function(){return c.props.dispatch(y({layout:"scatter"}))},children:b("sidebar:scatter")}),"scatter"===a&&this.renderScatterplotAxesSelector(),"scatter"===a&&this.renderBranchToggle(),"scatter"===a&&this.renderRegressionToggle()]})]})}}],B(a.prototype,b),c&&B(a,c),d}(g.Component),"propTypes",{layout:e().string.isRequired,dispatch:e().func.isRequired}),d))||c)||c,P=(0,j.Zh)()(q)},51203:function(i,c,a){"use strict";var b,j=a(28354),d=a(60822),e=a(46641),f=a(31884),k=a(5859),l=a(15361),m=a(59894),n=a(6290),o=a(65898);function p(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function q(a){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function r(a,b){return(r=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var g=b=(0,e.$j)(function(a){return{distanceMeasure:a.controls.distanceMeasure,layout:a.controls.layout,showTreeToo:a.controls.showTreeToo,branchLengthsToDisplay:a.controls.branchLengthsToDisplay,temporalConfidence:a.controls.temporalConfidence}})((b=function(e){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&r(b,a)}(d,e);var f,g,a,b,c,h=(f=d,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=q(f);if(g){var h=q(this).constructor;c=Reflect.construct(e,arguments,h)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function d(){return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),h.apply(this,arguments)}return a=d,b=[{key:"render",value:function(){var b=this,a=this.props.t;return"divAndDate"!==this.props.branchLengthsToDisplay?null:"scatter"===this.props.layout||"clock"===this.props.layout?null:(0,j.jsxs)("div",{style:{marginBottom:0},children:[(0,j.jsx)(n.om,{children:a("sidebar:Branch Length")}),(0,j.jsx)(n.fP,{selected:"num_date"===this.props.distanceMeasure,onClick:function(){(0,l.fs)("tree-metric-temporal"),b.props.dispatch({type:k.T3,data:"num_date"})},children:a("sidebar:time")}),(0,j.jsx)("span",{style:{paddingRight:"12px"}}),(0,j.jsx)(n.fP,{selected:"div"===this.props.distanceMeasure,onClick:function(){(0,l.fs)("tree-metric-temporal"),b.props.dispatch({type:k.T3,data:"div"})},children:a("sidebar:divergence")}),this.props.showTreeToo?null:(0,j.jsx)("div",{style:{marginBottom:5},children:(0,j.jsx)(o.Z,{display:this.props.temporalConfidence.display,on:this.props.temporalConfidence.on,callback:function(){return b.props.dispatch((0,m.DP)())},label:a("sidebar:Show confidence intervals")})})]})}}],p(a.prototype,b),c&&p(a,c),d}(d.Component))||b)||b,h=(0,f.Zh)()(g);c.Z=h},81458:function(l,c,a){"use strict";a.d(c,{I:function(){return v}});var b,m=a(28354),d=a(60822),e=a(46641),f=a(31884),n=a(5859),o=a(6290),p=a(69856),q=a(73221);function r(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function s(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function t(a){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function u(a,b){return(u=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var g="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:paramtypes",[void 0]),h="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:type",Function),i=(0,e.$j)(function(a){return{selected:a.controls.tipLabelKey,options:v(a.tree.nodeAttrKeys,a.metadata.colorings)}}),j=b=i(b=h(b=g((b=function(e){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&u(b,a)}(d,e);var f,g,a,b,c,h=(f=d,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=t(f);if(g){var h=t(this).constructor;c=Reflect.construct(e,arguments,h)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function d(b){var a;return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),(a=h.call(this,b)).change=function(b){a.props.dispatch({type:n.W2,key:b.value})},a}return a=d,b=[{key:"render",value:function(){var b=this,a=this.props.t;return(0,m.jsxs)("div",{style:{paddingTop:5},children:[(0,m.jsx)(o.om,{children:a("sidebar:Tip Labels")}),(0,m.jsx)("div",{style:{width:p.HB,fontSize:14},children:(0,m.jsx)(q.Z,{value:this.props.options.filter(function(a){return a.value===b.props.selected}),getOptionValue:function(a){return a.value.toString()},options:this.props.options,isClearable:!1,isSearchable:!1,isMulti:!1,onChange:this.change})})]})}}],s(a.prototype,b),c&&s(a,c),d}(d.Component))||b)||b)||b)||b,k=(0,f.Zh)()(j);function v(b,c){var a;return[{value:"none",label:"none"},{value:p.Ac,label:"Sample Name"}].concat(function(a){if(Array.isArray(a))return r(a)}(a=Array.from(b).map(function(a){var b;return{value:a,label:(null===(b=c[a]||{})|| void 0===b?void 0:b.title)||a}}))||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||function(a,c){if(a){if("string"==typeof a)return r(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return r(a,c)}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}c.Z=k},43734:function(o,e,a){"use strict";a.d(e,{X:function(){return A}});var f,b,d=a(28354),g=a(60822),h=a(69515),c=a.n(h),i=a(46641),p=a(31382),q=a(17587),r=a(69856),s=a(69480),t=a(15361),u=a(57605),v=a(73221);function w(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function x(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function j(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function y(a){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function z(a,b){return(z=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var k="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:paramtypes",[void 0]),l="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:type",Function),m=(0,i.$j)(function(a){return{colorBy:a.controls.colorBy,colorings:a.metadata.colorings,genomeMap:a.entropy.genomeMap}}),n=b=m(b=l(b=k((b=(j(f=function(f){"use strict";(function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&z(b,a)})(e,f);var g,h,a,b,c,i=(g=e,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=y(g);if(h){var f=y(this).constructor;c=Reflect.construct(e,arguments,f)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:w(d)});function e(b){if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,e),j(w(a=i.call(this,b)),"dispatchColorByGenotype",(0,p.debounce)(function(b){a.dispatchColorBy(b,"genotype")},400)),a.BLANK_STATE={colorBySelected:"",geneSelected:"",positionSelected:""},(0,u.O$)(b.colorBy)){var a,c=(0,u.kW)(b.colorBy);c&&(a.state=a.newState({colorBySelected:"gt",geneSelected:c.gene,positionSelected:c.positions.join(",")}))}else a.state=a.newState({colorBySelected:b.colorBy});return a}return a=e,b=[{key:"replaceState",value:function(a){var b=this;this.setState(function(c,d){return b.newState(a)})}},{key:"newState",value:function(a){return function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){j(d,a,c[a])})}return d}({},this.BLANK_STATE,a)}},{key:"UNSAFE_componentWillReceiveProps",value:function(a){if(this.props.colorBy!==a.colorBy){if((0,u.O$)(a.colorBy)){var b=(0,u.kW)(a.colorBy);b&&this.replaceState({colorBySelected:"gt",geneSelected:b.gene,positionSelected:b.positions.join(",")})}else this.replaceState({colorBySelected:a.colorBy})}}},{key:"componentDidUpdate",value:function(){var c=this.state.colorBySelected;if("gt"===c){var d=this.state,a=d.geneSelected,e=d.positionSelected;if(a&&e){var b=(0,u.bP)({gene:a,positions:(0,u.bQ)(e,(0,u.Q$)(this.props.genomeMap,a))});b&&b!==this.props.colorBy&&this.dispatchColorByGenotype(b)}}else this.dispatchColorBy(c)}},{key:"shouldComponentUpdate",value:function(b,a){return this.state.colorBySelected!==a.colorBySelected||this.state.geneSelected!==a.geneSelected||this.state.positionSelected!==a.positionSelected||this.props.colorings!==b.colorings}},{key:"dispatchColorBy",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:a;(0,t.fs)("color-by-".concat(b)),this.props.dispatch((0,s.j)(a))}},{key:"getGtGeneOptions",value:function(){if(!(null===(b=this.props.genomeMap)|| void 0===b?void 0:b.length))return[];var b,a=[{value:r.BJ,label:"nucleotide"}];return this.props.genomeMap[0].genes.forEach(function(b){b.cds.forEach(function(b){a.push({value:b.name,label:b.name})})}),a}},{key:"gtGeneSelect",value:function(){var b=this,a=this.getGtGeneOptions();return(0,d.jsx)(v.Z,{name:"selectGenotype",id:"selectGenotype",placeholder:"gene\u2026",value:a.filter(function(a){return a.value===b.state.geneSelected}),options:a,isClearable:!1,isSearchable:!0,isMulti:!1,onChange:function(a){b.setState({geneSelected:a.value})}})}},{key:"gtPositionInput",value:function(){var c=this,a=this.state.geneSelected,b=a?"".concat(a," position (1\u2013").concat((0,u.Q$)(this.props.genomeMap,a),")\u2026"):"position\u2026";return(0,d.jsx)("input",{type:"text",style:q.H2,placeholder:b,value:this.state.positionSelected,onChange:function(a){c.setState({positionSelected:a.target.value})}})}},{key:"isNormalInteger",value:function(a){var b=Math.floor(Number(a));return String(b)===a&&b>=0}},{key:"getStyles",value:function(){return{base:{width:r.HB,marginBottom:0,fontSize:14}}}},{key:"render",value:function(){var c=this,b=this.getStyles(),a=Object.keys(this.props.colorings).map(function(a){return{value:a,label:c.props.colorings[a].title}});return(0,d.jsxs)("div",{style:b.base,id:"selectColorBy",children:[(0,d.jsx)(v.Z,{name:"selectColorBy",value:a.filter(function(a){return a.value===c.state.colorBySelected}),options:a,isClearable:!1,isSearchable:!0,isMulti:!1,onChange:function(a){c.replaceState({colorBySelected:a.value})}}),"gt"===this.state.colorBySelected?(0,d.jsxs)("div",{children:[this.gtGeneSelect(),this.gtPositionInput()]}):null]})}}],x(a.prototype,b),c&&x(a,c),e}(g.Component),"propTypes",{colorBy:c().string.isRequired,colorings:c().object.isRequired,dispatch:c().func.isRequired,genomeMap:c().array}),f))||b)||b)||b)||b,A=(0,d.jsxs)(d.Fragment,{children:["Change the metadata field which the visualisation is coloured by.",(0,d.jsx)("br",{}),"The phylogeny, map and frequencies panel (if available) will all be coloured in a consistent fashion."]});e.Z=n},29668:function(c,b,a){"use strict";a.d(b,{N:function(){return g}});var d=a(28354);a(60822);var e=a(6290),f=a(68554),g=function(a){var c=a.title,b=a.tooltip;return(0,d.jsx)(e.gM,{children:(0,d.jsx)(f.Y,{title:c,tooltip:void 0===b?void 0:b})})}},73221:function(e,c,a){"use strict";a.d(c,{X:function(){return o},Z:function(){return p}});var f=a(28354),b=a(60822),g=a(3798),h=a(9652),i=a(56608),j=(a(59518),a(74619),a(90958),a(29865));a(58021),a(91778),a(42891),a(52425);var d=(0,b.forwardRef)(function(a,c){var d=(0,g.u)(a);return b.createElement(i.S,(0,h.Z)({ref:c},d))});b.Component;var k=d;function l(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function m(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){l(d,a,c[a])})}return d}var n={IndicatorSeparator:function(){return null},DropdownIndicator:function(a){return(0,f.jsx)(j.c.DropdownIndicator,m({},a,{children:(0,f.jsx)("span",{style:{borderColor:"#999 transparent transparent",borderStyle:"solid",borderWidth:"5px 5px 2.5px",display:"inline-block",height:0,width:0,position:"relative"}})}))}},o={menu:function(a){return m({},a,{marginTop:0})},placeholder:function(a){return m({},a,{color:"#aaa"})}},p=function(a){var b=m({},n,a.components),c=m({},o,a.styles),d=m({},a,{components:b,styles:c});return(0,f.jsx)(k,m({},d))}},70451:function(y,n,a){"use strict";a.d(n,{Z:function(){return ay},C:function(){return az}});var z,b,h,i,j,k,l,m,c,e=a(28354),f=a(60822),o=a(46641),A=a(9652),B=a(56608),C=a(3798),d=a(2753),D=a(29865),E=a(24114),F=a(45184),G=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],H=a(52425),I=(0,f.forwardRef)(function(_,aa){var a,u,b,e,c,v,g,w,h,i,j,ab,ac,x,k,y,z,H,l,I,ad,J,m,K,ae,L,n,o,af,M,p,N,ag,O,q,P,ah,Q,r,R,S,T,s,U,V,W,t,X,Y,Z,$,ai=(b=void 0!==(u=(a=_).defaultOptions)&&u,e=a.cacheOptions,c=void 0!==e&&e,v=a.loadOptions,a.options,g=a.isLoading,w=a.onInputChange,h=a.filterOption,i=(0,F.Z)(a,G),j=i.inputValue,ab=(0,f.useRef)(void 0),ac=(0,f.useRef)(!1),x=(0,f.useState)(Array.isArray(b)?b:void 0),k=(0,E.Z)(x,2),y=k[0],z=k[1],H=(0,f.useState)(void 0!==j?j:""),l=(0,E.Z)(H,2),I=l[0],ad=l[1],J=(0,f.useState)(!0===b),m=(0,E.Z)(J,2),K=m[0],ae=m[1],L=(0,f.useState)(void 0),n=(0,E.Z)(L,2),o=n[0],af=n[1],M=(0,f.useState)([]),p=(0,E.Z)(M,2),N=p[0],ag=p[1],O=(0,f.useState)(!1),q=(0,E.Z)(O,2),P=q[0],ah=q[1],Q=(0,f.useState)({}),r=(0,E.Z)(Q,2),R=r[0],S=r[1],T=(0,f.useState)(void 0),s=(0,E.Z)(T,2),U=s[0],V=s[1],W=(0,f.useState)(void 0),t=(0,E.Z)(W,2),X=t[0],Y=t[1],c!==X&&(S({}),Y(c)),b!==U&&(z(Array.isArray(b)?b:void 0),V(b)),(0,f.useEffect)(function(){return ac.current=!0,function(){ac.current=!1}},[]),Z=(0,f.useCallback)(function(c,a){if(!v)return a();var b=v(c,a);b&&"function"==typeof b.then&&b.then(a,function(){return a()})},[v]),(0,f.useEffect)(function(){!0===b&&Z(I,function(a){ac.current&&(z(a||[]),ae(!!ab.current))})},[]),$=(0,f.useCallback)(function(b,e){var a=(0,D.N)(b,e,w);if(!a){ab.current=void 0,ad(""),af(""),ag([]),ae(!1),ah(!1);return}if(c&&R[a])ad(a),af(a),ag(R[a]),ae(!1),ah(!1);else{var f=ab.current={};ad(a),ae(!0),ah(!o),Z(a,function(b){ac&&f===ab.current&&(ab.current=void 0,ae(!1),af(a),ag(b||[]),ah(!1),S(b?(0,D.a)((0,D.a)({},R),{},(0,d.Z)({},a,b)):R))})}},[c,Z,o,R,w]),(0,D.a)((0,D.a)({},i),{},{options:P?[]:I&&o?N:y||[],isLoading:K|| void 0!==g&&g,onInputChange:$,filterOption:void 0===h?null:h})),aj=(0,C.u)(ai);return f.createElement(B.S,(0,A.Z)({ref:aa},aj))}),J=a(31382),K=a(69856),L=a(26061),M=a(59894),N=a(82379),O=a(26250),P=a(73221),Q=a(6290),R=a(59518),S=a(74619),T=a(18679),U=a(81348);function V(b,a){if(a&&("object"===(0,T.Z)(a)||"function"==typeof a))return a;if(void 0!==a)throw new TypeError("Derived constructors may only return object or undefined");return(0,U.Z)(b)}var W=a(37418),X=a(90958);function Y(a){var b,d,c="";if("string"==typeof a||"number"==typeof a)c+=a;else if("object"==typeof a){if(Array.isArray(a))for(b=0;b<a.length;b++)a[b]&&(d=Y(a[b]))&&(c&&(c+=" "),c+=d);else for(b in a)a[b]&&(c&&(c+=" "),c+=b)}return c}function Z(){for(var b,c,d=0,a="";d<arguments.length;)(b=arguments[d++])&&(c=Y(b))&&(a&&(a+=" "),a+=c);return a}function $(a){var e=a.cellCount,b=a.cellSize,f=a.computeMetadataCallback,g=a.computeMetadataCallbackProps,h=a.nextCellsCount,c=a.nextCellSize,i=a.nextScrollToIndex,d=a.scrollToIndex,j=a.updateScrollOffsetForScrollToIndex;(e!==h||("number"==typeof b||"number"==typeof c)&&b!==c)&&(f(g),d>=0&&d===i&&j())}var _=function(){function a(b){var c=b.cellCount,e=b.cellSizeGetter,f=b.estimatedCellSize;(0,R.Z)(this,a),(0,d.Z)(this,"_cellSizeAndPositionData",{}),(0,d.Z)(this,"_lastMeasuredIndex",-1),(0,d.Z)(this,"_lastBatchedIndex",-1),(0,d.Z)(this,"_cellCount",void 0),(0,d.Z)(this,"_cellSizeGetter",void 0),(0,d.Z)(this,"_estimatedCellSize",void 0),this._cellSizeGetter=e,this._cellCount=c,this._estimatedCellSize=f}return(0,S.Z)(a,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(a){var b=a.cellCount,c=a.estimatedCellSize,d=a.cellSizeGetter;this._cellCount=b,this._estimatedCellSize=c,this._cellSizeGetter=d}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(a){if(a<0||a>=this._cellCount)throw Error("Requested index ".concat(a," is outside of range 0..").concat(this._cellCount));if(a>this._lastMeasuredIndex)for(var e=this.getSizeAndPositionOfLastMeasuredCell(),d=e.offset+e.size,b=this._lastMeasuredIndex+1;b<=a;b++){var c=this._cellSizeGetter({index:b});if(void 0===c||isNaN(c))throw Error("Invalid size returned for cell ".concat(b," of value ").concat(c));null===c?(this._cellSizeAndPositionData[b]={offset:d,size:0},this._lastBatchedIndex=a):(this._cellSizeAndPositionData[b]={offset:d,size:c},d+=c,this._lastMeasuredIndex=a)}return this._cellSizeAndPositionData[a]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var a=this.getSizeAndPositionOfLastMeasuredCell();return a.offset+a.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(b){var a,f=b.align,c=b.containerSize,h=b.currentOffset,i=b.targetIndex;if(c<=0)return 0;var e=this.getSizeAndPositionOfCell(i),d=e.offset,g=d-c+e.size;switch(void 0===f?"auto":f){case"start":a=d;break;case"end":a=g;break;case"center":a=d-(c-e.size)/2;break;default:a=Math.max(g,Math.min(d,h))}return Math.max(0,Math.min(this.getTotalSize()-c,a))}},{key:"getVisibleCellRange",value:function(d){var f=d.containerSize,a=d.offset,g=this.getTotalSize();if(0===g)return{};var h=a+f,c=this._findNearestCell(a),e=this.getSizeAndPositionOfCell(c);a=e.offset+e.size;for(var b=c;a<h&&b<this._cellCount-1;)b++,a+=this.getSizeAndPositionOfCell(b).size;return{start:c,stop:b}}},{key:"resetCell",value:function(a){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,a-1)}},{key:"_binarySearch",value:function(c,a,d){for(;a<=c;){var b=a+Math.floor((c-a)/2),e=this.getSizeAndPositionOfCell(b).offset;if(e===d)return b;e<d?a=b+1:e>d&&(c=b-1)}return a>0?a-1:0}},{key:"_exponentialSearch",value:function(a,b){for(var c=1;a<this._cellCount&&this.getSizeAndPositionOfCell(a).offset<b;)a+=c,c*=2;return this._binarySearch(Math.min(a,this._cellCount-1),Math.floor(a/2),b)}},{key:"_findNearestCell",value:function(a){if(isNaN(a))throw Error("Invalid offset ".concat(a," specified"));a=Math.max(0,a);var c=this.getSizeAndPositionOfLastMeasuredCell(),b=Math.max(0,this._lastMeasuredIndex);return c.offset>=a?this._binarySearch(b,0,a):this._exponentialSearch(b,a)}}]),a}(),aa=function(){function a(b){var c=b.maxScrollSize,e=void 0===c?"undefined"!=typeof window&&window.chrome?16777100:15e5:c,f=(0,F.Z)(b,["maxScrollSize"]);(0,R.Z)(this,a),(0,d.Z)(this,"_cellSizeAndPositionManager",void 0),(0,d.Z)(this,"_maxScrollSize",void 0),this._cellSizeAndPositionManager=new _(f),this._maxScrollSize=e}return(0,S.Z)(a,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(a){this._cellSizeAndPositionManager.configure(a)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(a){var c=a.containerSize,d=a.offset,e=this._cellSizeAndPositionManager.getTotalSize(),b=this.getTotalSize(),f=this._getOffsetPercentage({containerSize:c,offset:d,totalSize:b});return Math.round(f*(b-e))}},{key:"getSizeAndPositionOfCell",value:function(a){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(a)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(a){var d=a.align,e=void 0===d?"auto":d,b=a.containerSize,c=a.currentOffset,f=a.targetIndex;c=this._safeOffsetToOffset({containerSize:b,offset:c});var g=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:e,containerSize:b,currentOffset:c,targetIndex:f});return this._offsetToSafeOffset({containerSize:b,offset:g})}},{key:"getVisibleCellRange",value:function(b){var c=b.containerSize,a=b.offset;return a=this._safeOffsetToOffset({containerSize:c,offset:a}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:c,offset:a})}},{key:"resetCell",value:function(a){this._cellSizeAndPositionManager.resetCell(a)}},{key:"_getOffsetPercentage",value:function(a){var b=a.containerSize,d=a.offset,c=a.totalSize;return c<=b?0:d/(c-b)}},{key:"_offsetToSafeOffset",value:function(a){var b=a.containerSize,c=a.offset,d=this._cellSizeAndPositionManager.getTotalSize(),e=this.getTotalSize();return d===e?c:Math.round(this._getOffsetPercentage({containerSize:b,offset:c,totalSize:d})*(e-b))}},{key:"_safeOffsetToOffset",value:function(a){var b=a.containerSize,c=a.offset,d=this._cellSizeAndPositionManager.getTotalSize(),e=this.getTotalSize();return d===e?c:Math.round(this._getOffsetPercentage({containerSize:b,offset:c,totalSize:e})*(d-b))}}]),a}();function ab(){var a=!(arguments.length>0)|| void 0===arguments[0]||arguments[0],b={};return function(e){var f=e.callback,c=e.indices,d=Object.keys(c),g=!a||d.every(function(b){var a=c[b];return Array.isArray(a)?a.length>0:a>=0}),h=d.length!==Object.keys(b).length||d.some(function(d){var e=b[d],a=c[d];return Array.isArray(a)?e.join(",")!==a.join(","):e!==a});b=c,g&&h&&f(c)}}function ac(a){var e=a.cellSize,f=a.cellSizeAndPositionManager,k=a.previousCellsCount,g=a.previousCellSize,l=a.previousScrollToAlignment,m=a.previousScrollToIndex,h=a.previousSize,n=a.scrollOffset,o=a.scrollToAlignment,b=a.scrollToIndex,d=a.size,p=a.sizeJustIncreasedFromZero,i=a.updateScrollIndexCallback,c=f.getCellCount(),j=b>=0&&b<c;j&&(d!==h||p||!g||"number"==typeof e&&e!==g||o!==l||b!==m)?i(b):!j&&c>0&&(d<h||c<k)&&n>f.getTotalSize()-d&&i(c-1)}var ad=!!("undefined"!=typeof window&&window.document&&window.document.createElement),p=a(2585),q=(b="undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||b.oRequestAnimationFrame||b.msRequestAnimationFrame||function(a){return b.setTimeout(a,1e3/60)},r=b.cancelAnimationFrame||b.webkitCancelAnimationFrame||b.mozCancelAnimationFrame||b.oCancelAnimationFrame||b.msCancelAnimationFrame||function(a){b.clearTimeout(a)},ae=q,af=r,ag=function(a){return af(a.id)},ah=function(b,c){Promise.resolve().then(function(){d=Date.now()});var d,a={id:ae(function e(){Date.now()-d>=c?b.call():a.id=ae(e)})};return a};function ai(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function aj(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?ai(b,!0).forEach(function(a){(0,d.Z)(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):ai(b).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}var ak={OBSERVED:"observed",REQUESTED:"requested"},g=(i=h=function(b){function a(b){(0,R.Z)(this,a),c=V(this,(0,W.Z)(a).call(this,b)),(0,d.Z)((0,U.Z)(c),"_onGridRenderedMemoizer",ab()),(0,d.Z)((0,U.Z)(c),"_onScrollMemoizer",ab(!1)),(0,d.Z)((0,U.Z)(c),"_deferredInvalidateColumnIndex",null),(0,d.Z)((0,U.Z)(c),"_deferredInvalidateRowIndex",null),(0,d.Z)((0,U.Z)(c),"_recomputeScrollLeftFlag",!1),(0,d.Z)((0,U.Z)(c),"_recomputeScrollTopFlag",!1),(0,d.Z)((0,U.Z)(c),"_horizontalScrollBarSize",0),(0,d.Z)((0,U.Z)(c),"_verticalScrollBarSize",0),(0,d.Z)((0,U.Z)(c),"_scrollbarPresenceChanged",!1),(0,d.Z)((0,U.Z)(c),"_scrollingContainer",void 0),(0,d.Z)((0,U.Z)(c),"_childrenToDisplay",void 0),(0,d.Z)((0,U.Z)(c),"_columnStartIndex",void 0),(0,d.Z)((0,U.Z)(c),"_columnStopIndex",void 0),(0,d.Z)((0,U.Z)(c),"_rowStartIndex",void 0),(0,d.Z)((0,U.Z)(c),"_rowStopIndex",void 0),(0,d.Z)((0,U.Z)(c),"_renderedColumnStartIndex",0),(0,d.Z)((0,U.Z)(c),"_renderedColumnStopIndex",0),(0,d.Z)((0,U.Z)(c),"_renderedRowStartIndex",0),(0,d.Z)((0,U.Z)(c),"_renderedRowStopIndex",0),(0,d.Z)((0,U.Z)(c),"_initialScrollTop",void 0),(0,d.Z)((0,U.Z)(c),"_initialScrollLeft",void 0),(0,d.Z)((0,U.Z)(c),"_disablePointerEventsTimeoutId",void 0),(0,d.Z)((0,U.Z)(c),"_styleCache",{}),(0,d.Z)((0,U.Z)(c),"_cellCache",{}),(0,d.Z)((0,U.Z)(c),"_debounceScrollEndedCallback",function(){c._disablePointerEventsTimeoutId=null,c.setState({isScrolling:!1,needToResetStyleCache:!1})}),(0,d.Z)((0,U.Z)(c),"_invokeOnGridRenderedHelper",function(){var a=c.props.onSectionRendered;c._onGridRenderedMemoizer({callback:a,indices:{columnOverscanStartIndex:c._columnStartIndex,columnOverscanStopIndex:c._columnStopIndex,columnStartIndex:c._renderedColumnStartIndex,columnStopIndex:c._renderedColumnStopIndex,rowOverscanStartIndex:c._rowStartIndex,rowOverscanStopIndex:c._rowStopIndex,rowStartIndex:c._renderedRowStartIndex,rowStopIndex:c._renderedRowStopIndex}})}),(0,d.Z)((0,U.Z)(c),"_setScrollingContainerRef",function(a){c._scrollingContainer=a}),(0,d.Z)((0,U.Z)(c),"_onScroll",function(a){a.target===c._scrollingContainer&&c.handleScrollEvent(a.target)});var c,e=new aa({cellCount:b.columnCount,cellSizeGetter:function(c){return a._wrapSizeGetter(b.columnWidth)(c)},estimatedCellSize:a._getEstimatedColumnSize(b)}),f=new aa({cellCount:b.rowCount,cellSizeGetter:function(c){return a._wrapSizeGetter(b.rowHeight)(c)},estimatedCellSize:a._getEstimatedRowSize(b)});return c.state={instanceProps:{columnSizeAndPositionManager:e,rowSizeAndPositionManager:f,prevColumnWidth:b.columnWidth,prevRowHeight:b.rowHeight,prevColumnCount:b.columnCount,prevRowCount:b.rowCount,prevIsScrolling:!0===b.isScrolling,prevScrollToColumn:b.scrollToColumn,prevScrollToRow:b.scrollToRow,scrollbarSize:0,scrollbarSizeMeasured:!1},isScrolling:!1,scrollDirectionHorizontal:1,scrollDirectionVertical:1,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null,needToResetStyleCache:!1},b.scrollToRow>0&&(c._initialScrollTop=c._getCalculatedScrollTop(b,c.state)),b.scrollToColumn>0&&(c._initialScrollLeft=c._getCalculatedScrollLeft(b,c.state)),c}return(0,X.Z)(a,b),(0,S.Z)(a,[{key:"getOffsetForCell",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},b=a.alignment,f=void 0===b?this.props.scrollToAlignment:b,c=a.columnIndex,g=void 0===c?this.props.scrollToColumn:c,d=a.rowIndex,h=void 0===d?this.props.scrollToRow:d,e=aj({},this.props,{scrollToAlignment:f,scrollToColumn:g,scrollToRow:h});return{scrollLeft:this._getCalculatedScrollLeft(e),scrollTop:this._getCalculatedScrollTop(e)}}},{key:"getTotalRowsHeight",value:function(){return this.state.instanceProps.rowSizeAndPositionManager.getTotalSize()}},{key:"getTotalColumnsWidth",value:function(){return this.state.instanceProps.columnSizeAndPositionManager.getTotalSize()}},{key:"handleScrollEvent",value:function(f){var g=f.scrollLeft,h=f.scrollTop,i=void 0===h?0:h;if(!(i<0)){this._debounceScrollEnded();var c=this.props,m=c.autoHeight,n=c.autoWidth,o=c.height,p=c.width,e=this.state.instanceProps,j=e.scrollbarSize,k=e.rowSizeAndPositionManager.getTotalSize(),l=e.columnSizeAndPositionManager.getTotalSize(),a=Math.min(Math.max(0,l-p+j),void 0===g?0:g),b=Math.min(Math.max(0,k-o+j),i);if(this.state.scrollLeft!==a||this.state.scrollTop!==b){var d={isScrolling:!0,scrollDirectionHorizontal:a!==this.state.scrollLeft?a>this.state.scrollLeft?1:-1:this.state.scrollDirectionHorizontal,scrollDirectionVertical:b!==this.state.scrollTop?b>this.state.scrollTop?1:-1:this.state.scrollDirectionVertical,scrollPositionChangeReason:ak.OBSERVED};m||(d.scrollTop=b),n||(d.scrollLeft=a),d.needToResetStyleCache=!1,this.setState(d)}this._invokeOnScrollMemoizer({scrollLeft:a,scrollTop:b,totalColumnsWidth:l,totalRowsHeight:k})}}},{key:"invalidateCellSizeAfterRender",value:function(a){var b=a.columnIndex,c=a.rowIndex;this._deferredInvalidateColumnIndex="number"==typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,b):b,this._deferredInvalidateRowIndex="number"==typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,c):c}},{key:"measureAllCells",value:function(){var a=this.props,c=a.columnCount,d=a.rowCount,b=this.state.instanceProps;b.columnSizeAndPositionManager.getSizeAndPositionOfCell(c-1),b.rowSizeAndPositionManager.getSizeAndPositionOfCell(d-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},f=e.columnIndex,a=void 0===f?0:f,g=e.rowIndex,b=void 0===g?0:g,h=this.props,c=h.scrollToColumn,d=h.scrollToRow,i=this.state.instanceProps;i.columnSizeAndPositionManager.resetCell(a),i.rowSizeAndPositionManager.resetCell(b),this._recomputeScrollLeftFlag=c>=0&&(1===this.state.scrollDirectionHorizontal?a<=c:a>=c),this._recomputeScrollTopFlag=d>=0&&(1===this.state.scrollDirectionVertical?b<=d:b>=d),this._styleCache={},this._cellCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(a){var b=a.columnIndex,c=a.rowIndex,e=this.props.columnCount,d=this.props;e>1&& void 0!==b&&this._updateScrollLeftForScrollToColumn(aj({},d,{scrollToColumn:b})),void 0!==c&&this._updateScrollTopForScrollToRow(aj({},d,{scrollToRow:c}))}},{key:"componentDidMount",value:function(){var b=this.props,l=b.getScrollbarSize,h=b.height,c=b.scrollLeft,i=b.scrollToColumn,d=b.scrollTop,j=b.scrollToRow,k=b.width,e=this.state.instanceProps;if(this._initialScrollTop=0,this._initialScrollLeft=0,this._handleInvalidatedGridSize(),e.scrollbarSizeMeasured||this.setState(function(b){var a=aj({},b,{needToResetStyleCache:!1});return a.instanceProps.scrollbarSize=l(),a.instanceProps.scrollbarSizeMeasured=!0,a}),"number"==typeof c&&c>=0||"number"==typeof d&&d>=0){var f=a._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:c,scrollTop:d});f&&(f.needToResetStyleCache=!1,this.setState(f))}this._scrollingContainer&&(this._scrollingContainer.scrollLeft!==this.state.scrollLeft&&(this._scrollingContainer.scrollLeft=this.state.scrollLeft),this._scrollingContainer.scrollTop!==this.state.scrollTop&&(this._scrollingContainer.scrollTop=this.state.scrollTop));var g=h>0&&k>0;i>=0&&g&&this._updateScrollLeftForScrollToColumn(),j>=0&&g&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:c||0,scrollTop:d||0,totalColumnsWidth:e.columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:e.rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(a,g){var v=this,b=this.props,m=b.autoHeight,n=b.autoWidth,o=b.columnCount,h=b.height,p=b.rowCount,i=b.scrollToAlignment,q=b.scrollToColumn,r=b.scrollToRow,j=b.width,e=this.state,c=e.scrollLeft,s=e.scrollPositionChangeReason,d=e.scrollTop,f=e.instanceProps;this._handleInvalidatedGridSize();var k=o>0&&0===a.columnCount||p>0&&0===a.rowCount;s===ak.REQUESTED&&(!n&&c>=0&&(c!==this._scrollingContainer.scrollLeft||k)&&(this._scrollingContainer.scrollLeft=c),!m&&d>=0&&(d!==this._scrollingContainer.scrollTop||k)&&(this._scrollingContainer.scrollTop=d));var l=(0===a.width||0===a.height)&&h>0&&j>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):ac({cellSizeAndPositionManager:f.columnSizeAndPositionManager,previousCellsCount:a.columnCount,previousCellSize:a.columnWidth,previousScrollToAlignment:a.scrollToAlignment,previousScrollToIndex:a.scrollToColumn,previousSize:a.width,scrollOffset:c,scrollToAlignment:i,scrollToIndex:q,size:j,sizeJustIncreasedFromZero:l,updateScrollIndexCallback:function(){return v._updateScrollLeftForScrollToColumn(v.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):ac({cellSizeAndPositionManager:f.rowSizeAndPositionManager,previousCellsCount:a.rowCount,previousCellSize:a.rowHeight,previousScrollToAlignment:a.scrollToAlignment,previousScrollToIndex:a.scrollToRow,previousSize:a.height,scrollOffset:d,scrollToAlignment:i,scrollToIndex:r,size:h,sizeJustIncreasedFromZero:l,updateScrollIndexCallback:function(){return v._updateScrollTopForScrollToRow(v.props)}}),this._invokeOnGridRenderedHelper(),c!==g.scrollLeft||d!==g.scrollTop){var t=f.rowSizeAndPositionManager.getTotalSize(),u=f.columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:c,scrollTop:d,totalColumnsWidth:u,totalRowsHeight:t})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&ag(this._disablePointerEventsTimeoutId)}},{key:"render",value:function(){var a=this.props,m=a.autoContainerWidth,n=a.autoHeight,o=a.autoWidth,p=a.className,q=a.containerProps,r=a.containerRole,s=a.containerStyle,b=a.height,t=a.id,u=a.noContentRenderer,v=a.role,w=a.style,x=a.tabIndex,c=a.width,l=this.state,d=l.instanceProps,y=l.needToResetStyleCache,z=this._isScrolling(),h={boxSizing:"border-box",direction:"ltr",height:n?"auto":b,position:"relative",width:o?"auto":c,WebkitOverflowScrolling:"touch",willChange:"transform"};y&&(this._styleCache={}),this.state.isScrolling||this._resetStyleCache(),this._calculateChildrenToRender(this.props,this.state);var e=d.columnSizeAndPositionManager.getTotalSize(),g=d.rowSizeAndPositionManager.getTotalSize(),i=g>b?d.scrollbarSize:0,j=e>c?d.scrollbarSize:0;(j!==this._horizontalScrollBarSize||i!==this._verticalScrollBarSize)&&(this._horizontalScrollBarSize=j,this._verticalScrollBarSize=i,this._scrollbarPresenceChanged=!0),h.overflowX=e+i<=c?"hidden":"auto",h.overflowY=g+j<=b?"hidden":"auto";var k=this._childrenToDisplay,B=0===k.length&&b>0&&c>0;return f.createElement("div",(0,A.Z)({ref:this._setScrollingContainerRef},q,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:Z("ReactVirtualized__Grid",p),id:t,onScroll:this._onScroll,role:v,style:aj({},h,{},w),tabIndex:x}),k.length>0&&f.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:r,style:aj({width:m?"auto":e,height:g,maxWidth:e,maxHeight:g,overflow:"hidden",pointerEvents:z?"none":"",position:"relative"},s)},k),B&&u())}},{key:"_calculateChildrenToRender",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.props,d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:this.state,v=a.cellRenderer,w=a.cellRangeRenderer,q=a.columnCount,e=a.deferredMeasurementCache,k=a.height,x=a.overscanColumnCount,r=a.overscanIndicesGetter,y=a.overscanRowCount,s=a.rowCount,l=a.width,z=a.isScrollingOptOut,A=d.scrollDirectionHorizontal,B=d.scrollDirectionVertical,f=d.instanceProps,m=this._initialScrollTop>0?this._initialScrollTop:d.scrollTop,n=this._initialScrollLeft>0?this._initialScrollLeft:d.scrollLeft,C=this._isScrolling(a,d);if(this._childrenToDisplay=[],k>0&&l>0){var b=f.columnSizeAndPositionManager.getVisibleCellRange({containerSize:l,offset:n}),c=f.rowSizeAndPositionManager.getVisibleCellRange({containerSize:k,offset:m}),D=f.columnSizeAndPositionManager.getOffsetAdjustment({containerSize:l,offset:n}),E=f.rowSizeAndPositionManager.getOffsetAdjustment({containerSize:k,offset:m});this._renderedColumnStartIndex=b.start,this._renderedColumnStopIndex=b.stop,this._renderedRowStartIndex=c.start,this._renderedRowStopIndex=c.stop;var t=r({direction:"horizontal",cellCount:q,overscanCellsCount:x,scrollDirection:A,startIndex:"number"==typeof b.start?b.start:0,stopIndex:"number"==typeof b.stop?b.stop:-1}),u=r({direction:"vertical",cellCount:s,overscanCellsCount:y,scrollDirection:B,startIndex:"number"==typeof c.start?c.start:0,stopIndex:"number"==typeof c.stop?c.stop:-1}),g=t.overscanStartIndex,h=t.overscanStopIndex,i=u.overscanStartIndex,j=u.overscanStopIndex;if(e){if(!e.hasFixedHeight()){for(var o=i;o<=j;o++)if(!e.has(o,0)){g=0,h=q-1;break}}if(!e.hasFixedWidth()){for(var p=g;p<=h;p++)if(!e.has(0,p)){i=0,j=s-1;break}}}this._childrenToDisplay=w({cellCache:this._cellCache,cellRenderer:v,columnSizeAndPositionManager:f.columnSizeAndPositionManager,columnStartIndex:g,columnStopIndex:h,deferredMeasurementCache:e,horizontalOffsetAdjustment:D,isScrolling:C,isScrollingOptOut:z,parent:this,rowSizeAndPositionManager:f.rowSizeAndPositionManager,rowStartIndex:i,rowStopIndex:j,scrollLeft:n,scrollTop:m,styleCache:this._styleCache,verticalOffsetAdjustment:E,visibleColumnIndices:b,visibleRowIndices:c}),this._columnStartIndex=g,this._columnStopIndex=h,this._rowStartIndex=i,this._rowStopIndex=j}}},{key:"_debounceScrollEnded",value:function(){var a=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&ag(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=ah(this._debounceScrollEndedCallback,a)}},{key:"_handleInvalidatedGridSize",value:function(){if("number"==typeof this._deferredInvalidateColumnIndex&&"number"==typeof this._deferredInvalidateRowIndex){var a=this._deferredInvalidateColumnIndex,b=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:a,rowIndex:b})}}},{key:"_invokeOnScrollMemoizer",value:function(a){var d=this,b=a.scrollLeft,c=a.scrollTop,e=a.totalColumnsWidth,f=a.totalRowsHeight;this._onScrollMemoizer({callback:function(b){var c=b.scrollLeft,g=b.scrollTop,a=d.props,h=a.height,i=a.onScroll,j=a.width;i({clientHeight:h,clientWidth:j,scrollHeight:f,scrollLeft:c,scrollTop:g,scrollWidth:e})},indices:{scrollLeft:b,scrollTop:c}})}},{key:"_isScrolling",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.props,b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(a,"isScrolling")?Boolean(a.isScrolling):Boolean(b.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var a=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,a({horizontal:this._horizontalScrollBarSize>0,size:this.state.instanceProps.scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(c){var d=c.scrollLeft,e=c.scrollTop,b=a._getScrollToPositionStateUpdate({prevState:this.state,scrollLeft:d,scrollTop:e});b&&(b.needToResetStyleCache=!1,this.setState(b))}},{key:"_getCalculatedScrollLeft",value:function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:this.state;return a._getCalculatedScrollLeft(b,c)}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var c=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.props,d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:this.state,b=a._getScrollLeftForScrollToColumnStateUpdate(c,d);b&&(b.needToResetStyleCache=!1,this.setState(b))}},{key:"_getCalculatedScrollTop",value:function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.props,c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:this.state;return a._getCalculatedScrollTop(b,c)}},{key:"_resetStyleCache",value:function(){var d=this._styleCache,e=this._cellCache,f=this.props.isScrollingOptOut;this._cellCache={},this._styleCache={};for(var b=this._rowStartIndex;b<=this._rowStopIndex;b++)for(var c=this._columnStartIndex;c<=this._columnStopIndex;c++){var a="".concat(b,"-").concat(c);this._styleCache[a]=d[a],f&&(this._cellCache[a]=e[a])}}},{key:"_updateScrollTopForScrollToRow",value:function(){var c=arguments.length>0&& void 0!==arguments[0]?arguments[0]:this.props,d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:this.state,b=a._getScrollTopForScrollToRowStateUpdate(c,d);b&&(b.needToResetStyleCache=!1,this.setState(b))}}],[{key:"getDerivedStateFromProps",value:function(b,e){var f,g,d={};0===b.columnCount&&0!==e.scrollLeft||0===b.rowCount&&0!==e.scrollTop?(d.scrollLeft=0,d.scrollTop=0):(b.scrollLeft!==e.scrollLeft&&b.scrollToColumn<0||b.scrollTop!==e.scrollTop&&b.scrollToRow<0)&&Object.assign(d,a._getScrollToPositionStateUpdate({prevState:e,scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}));var c=e.instanceProps;return d.needToResetStyleCache=!1,(b.columnWidth!==c.prevColumnWidth||b.rowHeight!==c.prevRowHeight)&&(d.needToResetStyleCache=!0),c.columnSizeAndPositionManager.configure({cellCount:b.columnCount,estimatedCellSize:a._getEstimatedColumnSize(b),cellSizeGetter:a._wrapSizeGetter(b.columnWidth)}),c.rowSizeAndPositionManager.configure({cellCount:b.rowCount,estimatedCellSize:a._getEstimatedRowSize(b),cellSizeGetter:a._wrapSizeGetter(b.rowHeight)}),(0===c.prevColumnCount||0===c.prevRowCount)&&(c.prevColumnCount=0,c.prevRowCount=0),b.autoHeight&& !1===b.isScrolling&& !0===c.prevIsScrolling&&Object.assign(d,{isScrolling:!1}),$({cellCount:c.prevColumnCount,cellSize:"number"==typeof c.prevColumnWidth?c.prevColumnWidth:null,computeMetadataCallback:function(){return c.columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:b,nextCellsCount:b.columnCount,nextCellSize:"number"==typeof b.columnWidth?b.columnWidth:null,nextScrollToIndex:b.scrollToColumn,scrollToIndex:c.prevScrollToColumn,updateScrollOffsetForScrollToIndex:function(){f=a._getScrollLeftForScrollToColumnStateUpdate(b,e)}}),$({cellCount:c.prevRowCount,cellSize:"number"==typeof c.prevRowHeight?c.prevRowHeight:null,computeMetadataCallback:function(){return c.rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:b,nextCellsCount:b.rowCount,nextCellSize:"number"==typeof b.rowHeight?b.rowHeight:null,nextScrollToIndex:b.scrollToRow,scrollToIndex:c.prevScrollToRow,updateScrollOffsetForScrollToIndex:function(){g=a._getScrollTopForScrollToRowStateUpdate(b,e)}}),c.prevColumnCount=b.columnCount,c.prevColumnWidth=b.columnWidth,c.prevIsScrolling=!0===b.isScrolling,c.prevRowCount=b.rowCount,c.prevRowHeight=b.rowHeight,c.prevScrollToColumn=b.scrollToColumn,c.prevScrollToRow=b.scrollToRow,c.scrollbarSize=b.getScrollbarSize(),void 0===c.scrollbarSize?(c.scrollbarSizeMeasured=!1,c.scrollbarSize=0):c.scrollbarSizeMeasured=!0,d.instanceProps=c,aj({},d,{},f,{},g)}},{key:"_getEstimatedColumnSize",value:function(a){return"number"==typeof a.columnWidth?a.columnWidth:a.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(a){return"number"==typeof a.rowHeight?a.rowHeight:a.estimatedRowSize}},{key:"_getScrollToPositionStateUpdate",value:function(e){var d=e.prevState,a=e.scrollLeft,b=e.scrollTop,c={scrollPositionChangeReason:ak.REQUESTED};return("number"==typeof a&&a>=0&&(c.scrollDirectionHorizontal=a>d.scrollLeft?1:-1,c.scrollLeft=a),"number"==typeof b&&b>=0&&(c.scrollDirectionVertical=b>d.scrollTop?1:-1,c.scrollTop=b),"number"==typeof a&&a>=0&&a!==d.scrollLeft||"number"==typeof b&&b>=0&&b!==d.scrollTop)?c:{}}},{key:"_wrapSizeGetter",value:function(a){return"function"==typeof a?a:function(){return a}}},{key:"_getCalculatedScrollLeft",value:function(a,c){var d=a.columnCount,g=a.height,h=a.scrollToAlignment,e=a.scrollToColumn,i=a.width,j=c.scrollLeft,b=c.instanceProps;if(d>0){var f=d-1,k=e<0?f:Math.min(f,e),l=b.rowSizeAndPositionManager.getTotalSize(),m=b.scrollbarSizeMeasured&&l>g?b.scrollbarSize:0;return b.columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:h,containerSize:i-m,currentOffset:j,targetIndex:k})}return 0}},{key:"_getScrollLeftForScrollToColumnStateUpdate",value:function(d,c){var e=c.scrollLeft,b=a._getCalculatedScrollLeft(d,c);return"number"==typeof b&&b>=0&&e!==b?a._getScrollToPositionStateUpdate({prevState:c,scrollLeft:b,scrollTop:-1}):{}}},{key:"_getCalculatedScrollTop",value:function(a,c){var g=a.height,d=a.rowCount,h=a.scrollToAlignment,e=a.scrollToRow,i=a.width,j=c.scrollTop,b=c.instanceProps;if(d>0){var f=d-1,k=e<0?f:Math.min(f,e),l=b.columnSizeAndPositionManager.getTotalSize(),m=b.scrollbarSizeMeasured&&l>i?b.scrollbarSize:0;return b.rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:h,containerSize:g-m,currentOffset:j,targetIndex:k})}return 0}},{key:"_getScrollTopForScrollToRowStateUpdate",value:function(d,c){var e=c.scrollTop,b=a._getCalculatedScrollTop(d,c);return"number"==typeof b&&b>=0&&e!==b?a._getScrollToPositionStateUpdate({prevState:c,scrollLeft:-1,scrollTop:b}):{}}}]),a}(f.PureComponent),(0,d.Z)(h,"propTypes",null),i);(0,d.Z)(g,"defaultProps",{"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:function(a){for(var g=a.cellCache,j=a.cellRenderer,k=a.columnSizeAndPositionManager,v=a.columnStartIndex,w=a.columnStopIndex,l=a.deferredMeasurementCache,m=a.horizontalOffsetAdjustment,h=a.isScrolling,x=a.isScrollingOptOut,y=a.parent,n=a.rowSizeAndPositionManager,z=a.rowStartIndex,A=a.rowStopIndex,i=a.styleCache,o=a.verticalOffsetAdjustment,p=a.visibleColumnIndices,q=a.visibleRowIndices,r=[],B=k.areOffsetsAdjusted()||n.areOffsetsAdjusted(),C=!h&&!B,b=z;b<=A;b++)for(var s=n.getSizeAndPositionOfCell(b),c=v;c<=w;c++){var t=k.getSizeAndPositionOfCell(c),D=c>=p.start&&c<=p.stop&&b>=q.start&&b<=q.stop,d="".concat(b,"-").concat(c),e=void 0;C&&i[d]?e=i[d]:l&&!l.has(b,c)?e={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(e={height:s.size,left:t.offset+m,position:"absolute",top:s.offset+o,width:t.size},i[d]=e);var u={columnIndex:c,isScrolling:h,isVisible:D,key:d,parent:y,rowIndex:b,style:e},f=void 0;(x||h)&&!m&&!o?(g[d]||(g[d]=j(u)),f=g[d]):f=j(u),null!=f&& !1!==f&&r.push(f)}return r},containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:function(b){if((!z&&0!==z||b)&&ad){var a=document.createElement("div");a.style.position="absolute",a.style.top="-9999px",a.style.width="50px",a.style.height="50px",a.style.overflow="scroll",document.body.appendChild(a),z=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return z},noContentRenderer:function(){return null},onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:function(a){var b=a.cellCount,c=a.overscanCellsCount,f=a.scrollDirection,d=a.startIndex,e=a.stopIndex;return 1===f?{overscanStartIndex:Math.max(0,d),overscanStopIndex:Math.min(b-1,e+c)}:{overscanStartIndex:Math.max(0,d-c),overscanStopIndex:Math.min(b-1,e)}},overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0,isScrollingOptOut:!1}),(0,p.polyfill)(g);var al=g,s=(k=j=function(b){function a(){(0,R.Z)(this,a);for(var e,b,f=arguments.length,g=new Array(f),c=0;c<f;c++)g[c]=arguments[c];return b=V(this,(e=(0,W.Z)(a)).call.apply(e,[this].concat(g))),(0,d.Z)((0,U.Z)(b),"Grid",void 0),(0,d.Z)((0,U.Z)(b),"_cellRenderer",function(a){var e=a.parent,f=a.rowIndex,c=a.style,g=a.isScrolling,h=a.isVisible,i=a.key,j=b.props.rowRenderer,d=Object.getOwnPropertyDescriptor(c,"width");return d&&d.writable&&(c.width="100%"),j({index:f,style:c,isScrolling:g,isVisible:h,key:i,parent:e})}),(0,d.Z)((0,U.Z)(b),"_setRef",function(a){b.Grid=a}),(0,d.Z)((0,U.Z)(b),"_onScroll",function(a){var c=a.clientHeight,d=a.scrollHeight,e=a.scrollTop,f=b.props.onScroll;f({clientHeight:c,scrollHeight:d,scrollTop:e})}),(0,d.Z)((0,U.Z)(b),"_onSectionRendered",function(a){var c=a.rowOverscanStartIndex,d=a.rowOverscanStopIndex,e=a.rowStartIndex,f=a.rowStopIndex,g=b.props.onRowsRendered;g({overscanStartIndex:c,overscanStopIndex:d,startIndex:e,stopIndex:f})}),b}return(0,X.Z)(a,b),(0,S.Z)(a,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(a){var b=a.alignment,c=a.index;return this.Grid?this.Grid.getOffsetForCell({alignment:b,rowIndex:c,columnIndex:0}).scrollTop:0}},{key:"invalidateCellSizeAfterRender",value:function(a){var b=a.columnIndex,c=a.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:c,columnIndex:b})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{},b=a.columnIndex,c=a.rowIndex;this.Grid&&this.Grid.recomputeGridSize({rowIndex:void 0===c?0:c,columnIndex:void 0===b?0:b})}},{key:"recomputeRowHeights",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:a,columnIndex:0})}},{key:"scrollToPosition",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:a})}},{key:"scrollToRow",value:function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:a})}},{key:"render",value:function(){var a=this.props,b=a.className,c=a.noRowsRenderer,d=a.scrollToIndex,e=a.width,g=Z("ReactVirtualized__List",b);return f.createElement(al,(0,A.Z)({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:g,columnWidth:e,columnCount:1,noContentRenderer:c,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:d}))}}]),a}(f.PureComponent),(0,d.Z)(j,"propTypes",null),k);(0,d.Z)(s,"defaultProps",{autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:function(a){var c=a.cellCount,b=a.overscanCellsCount,f=a.scrollDirection,d=a.startIndex,e=a.stopIndex;return(b=Math.max(1,b),1===f)?{overscanStartIndex:Math.max(0,d-1),overscanStopIndex:Math.min(c-1,e+b)}:{overscanStartIndex:Math.max(0,d-b),overscanStopIndex:Math.min(c-1,e+1)}},overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}});var t=(m=l=function(b){function a(){(0,R.Z)(this,a);for(var e,b,f=arguments.length,g=new Array(f),c=0;c<f;c++)g[c]=arguments[c];return b=V(this,(e=(0,W.Z)(a)).call.apply(e,[this].concat(g))),(0,d.Z)((0,U.Z)(b),"_child",void 0),(0,d.Z)((0,U.Z)(b),"_measure",function(){var a=b.props,e=a.cache,g=a.columnIndex,c=void 0===g?0:g,f=a.parent,h=a.rowIndex,d=void 0===h?b.props.index||0:h,i=b._getCellMeasurements(),j=i.height,k=i.width;(j!==e.getHeight(d,c)||k!==e.getWidth(d,c))&&(e.set(d,c,k,j),f&&"function"==typeof f.recomputeGridSize&&f.recomputeGridSize({columnIndex:c,rowIndex:d}))}),(0,d.Z)((0,U.Z)(b),"_registerChild",function(a){!a||a instanceof Element||console.warn("CellMeasurer registerChild expects to be passed Element or null"),b._child=a,a&&b._maybeMeasureCell()}),b}return(0,X.Z)(a,b),(0,S.Z)(a,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var a=this.props.children;return"function"==typeof a?a({measure:this._measure,registerChild:this._registerChild}):a}},{key:"_getCellMeasurements",value:function(){var b=this.props.cache,a=this._child||(0,H.findDOMNode)(this);if(!a||!a.ownerDocument||!a.ownerDocument.defaultView||!(a instanceof a.ownerDocument.defaultView.HTMLElement))return{height:0,width:0};var c=a.style.width,d=a.style.height;b.hasFixedWidth()||(a.style.width="auto"),b.hasFixedHeight()||(a.style.height="auto");var e=Math.ceil(a.offsetHeight),f=Math.ceil(a.offsetWidth);return c&&(a.style.width=c),d&&(a.style.height=d),{height:e,width:f}}},{key:"_maybeMeasureCell",value:function(){var a=this.props,e=a.cache,f=a.columnIndex,b=void 0===f?0:f,c=a.parent,g=a.rowIndex,d=void 0===g?this.props.index||0:g;if(!e.has(d,b)){var h=this._getCellMeasurements(),i=h.height,j=h.width;e.set(d,b,j,i),c&&"function"==typeof c.invalidateCellSizeAfterRender&&c.invalidateCellSizeAfterRender({columnIndex:b,rowIndex:d})}}}]),a}(f.PureComponent),(0,d.Z)(l,"propTypes",null),m);(0,d.Z)(t,"__internalCellMeasurerFlag",!1);var am=function(){function a(){var k=this,b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};(0,R.Z)(this,a),(0,d.Z)(this,"_cellHeightCache",{}),(0,d.Z)(this,"_cellWidthCache",{}),(0,d.Z)(this,"_columnWidthCache",{}),(0,d.Z)(this,"_rowHeightCache",{}),(0,d.Z)(this,"_defaultHeight",void 0),(0,d.Z)(this,"_defaultWidth",void 0),(0,d.Z)(this,"_minHeight",void 0),(0,d.Z)(this,"_minWidth",void 0),(0,d.Z)(this,"_keyMapper",void 0),(0,d.Z)(this,"_hasFixedHeight",void 0),(0,d.Z)(this,"_hasFixedWidth",void 0),(0,d.Z)(this,"_columnCount",0),(0,d.Z)(this,"_rowCount",0),(0,d.Z)(this,"columnWidth",function(b){var c=b.index,a=k._keyMapper(0,c);return void 0!==k._columnWidthCache[a]?k._columnWidthCache[a]:k._defaultWidth}),(0,d.Z)(this,"rowHeight",function(b){var c=b.index,a=k._keyMapper(c,0);return void 0!==k._rowHeightCache[a]?k._rowHeightCache[a]:k._defaultHeight});var c=b.defaultHeight,e=b.defaultWidth,f=b.fixedHeight,g=b.fixedWidth,h=b.keyMapper,i=b.minHeight,j=b.minWidth;this._hasFixedHeight=!0===f,this._hasFixedWidth=!0===g,this._minHeight=i||0,this._minWidth=j||0,this._keyMapper=h||an,this._defaultHeight=Math.max(this._minHeight,"number"==typeof c?c:30),this._defaultWidth=Math.max(this._minWidth,"number"==typeof e?e:100)}return(0,S.Z)(a,[{key:"clear",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0,c=this._keyMapper(a,b);delete this._cellHeightCache[c],delete this._cellWidthCache[c],this._updateCachedColumnAndRowSizes(a,b)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(b){var c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedHeight)return this._defaultHeight;var a=this._keyMapper(b,c);return void 0!==this._cellHeightCache[a]?Math.max(this._minHeight,this._cellHeightCache[a]):this._defaultHeight}},{key:"getWidth",value:function(b){var c=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedWidth)return this._defaultWidth;var a=this._keyMapper(b,c);return void 0!==this._cellWidthCache[a]?Math.max(this._minWidth,this._cellWidthCache[a]):this._defaultWidth}},{key:"has",value:function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:0,c=this._keyMapper(a,b);return void 0!==this._cellHeightCache[c]}},{key:"set",value:function(a,b,d,e){var c=this._keyMapper(a,b);b>=this._columnCount&&(this._columnCount=b+1),a>=this._rowCount&&(this._rowCount=a+1),this._cellHeightCache[c]=e,this._cellWidthCache[c]=d,this._updateCachedColumnAndRowSizes(a,b)}},{key:"_updateCachedColumnAndRowSizes",value:function(e,f){if(!this._hasFixedWidth){for(var a=0,b=0;b<this._rowCount;b++)a=Math.max(a,this.getWidth(b,f));var g=this._keyMapper(0,f);this._columnWidthCache[g]=a}if(!this._hasFixedHeight){for(var c=0,d=0;d<this._columnCount;d++)c=Math.max(c,this.getHeight(e,d));var h=this._keyMapper(e,0);this._rowHeightCache[h]=c}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}]),a}();function an(a,b){return"".concat(a,"-").concat(b)}function ao(b,a){return null!=a&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?!!a[Symbol.hasInstance](b):b instanceof a}var ap=function(b){var d,g,a=b.children,h=b.maxHeight,k=b.focusedOption,j=(0,f.useRef)(null),l=(0,f.useRef)(null),c=(0,f.useRef)(new am({fixedWidth:!0,defaultHeight:40}));if(ao(a,Array)){var i=a.findIndex(function(a){return(0,J.isEqual)(k,a.props.data)});i>=0&&(g=i)}return(0,f.useLayoutEffect)(function(){var d,b=ao(a,Array)?a.map(function(a){return a.key}):a;(0,J.isEqual)(l.current,b)||(c.current.clearAll(),j.current.recomputeRowHeights(),l.current=b)},[a]),(0,e.jsx)(s,{ref:j,height:0===(d=Object.values(c.current._rowHeightCache).reduce(function(a,b){return a+b},0))?h:Math.min(h,d),deferredMeasurementCache:c.current,rowHeight:c.current.rowHeight,rowRenderer:function(b){var d=b.index,f=b.key,g=b.parent,h=b.style;return(0,e.jsx)(t,{cache:c.current,columnIndex:0,parent:g,rowIndex:d,children:(0,e.jsx)("div",{style:h,children:ao(a,Array)?a[d]:a})},f)},rowCount:a.length||1,width:K.HB,scrollToIndex:g})};function aq(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function ar(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function as(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function at(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function au(a){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function av(a,b){return(av=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function aw(a){return function(a){if(Array.isArray(a))return aq(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||ax(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ax(a,c){if(a){if("string"==typeof a)return aq(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return aq(a,c)}}var u="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:paramtypes",[void 0]),v="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:type",Function),w=(0,o.$j)(function(a){var b,c;return{activeFilters:a.controls.filters,colorings:a.metadata.colorings,totalStateCounts:a.tree.totalStateCounts,canFilterByGenotype:!!a.entropy.genomeMap,nodes:a.tree.nodes,nodesSecondTree:null===(b=a.treeToo)|| void 0===b?void 0:b.nodes,totalStateCountsSecondTree:null===(c=a.treeToo)|| void 0===c?void 0:c.totalStateCounts,measurementsFieldsMap:a.measurements.collectionToDisplay.fields,measurementsFiltersMap:a.measurements.collectionToDisplay.filters,measurementsFilters:a.controls.measurementsFilters}}),x=c=w(c=v(c=u((c=function(f){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&av(b,a)}(d,f);var g,h,a,b,c,i=(g=d,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=au(g);if(h){var f=au(this).constructor;c=Reflect.construct(e,arguments,f)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:ar(d)});function d(b){var a;return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),at(ar(a=i.call(this,b)),"makeOptions",function(){var i=[],j=Object.keys(a.props.colorings||{}),k=aw(Object.keys(a.props.totalStateCounts)).concat(aw(Object.keys(a.props.totalStateCountsSecondTree))),l=aw(j.filter(function(a){return k.includes(a)})).concat(aw(k.filter(function(a){return!j.includes(a)}))),c=!0,d=!1,e=void 0;try{for(var f,m=function(o,j){var b=j.value,k=new Set(aw((null===(p=a.props.totalStateCounts[b])|| void 0===p?void 0:p.keys())||[]).concat(aw((null===(q=a.props.totalStateCountsSecondTree)|| void 0===q?void 0:null===(r=q[b])|| void 0===r?void 0:r.keys())||[])));a.props.totalStateCounts[b];var l=a.getFilterTitle(b),m=new Set((a.props.activeFilters[b]||[]).filter(function(a){return a.active}).map(function(a){return a.value})),c=!0,f=!1,g=void 0;try{for(var p,q,r,h,d=Array.from(k).sort()[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var e=h.value;m.has(e)||i.push({label:"".concat(l," \u2192 ").concat(e),value:[b,e]})}}catch(n){f=!0,g=n}finally{try{c||null==d.return||d.return()}finally{if(f)throw g}}},b=l[Symbol.iterator]();!(c=(f=b.next()).done);c=!0)m(b,f)}catch(n){d=!0,e=n}finally{try{c||null==b.return||b.return()}finally{if(d)throw e}}if(a.props.canFilterByGenotype){var g=(0,L.nx)(a.props.nodes),o=a.props.nodesSecondTree?(0,L.nx)(a.props.nodesSecondTree).difference(g):new Set;Array.from(g).concat(Array.from(o)).sort().forEach(function(a){i.push({label:"genotype ".concat(a),value:[K.vD,a]})})}var h=a.props.nodes.filter(function(a){return!a.hasChildren}).map(function(a){return a.name});if(h.forEach(function(a){i.push({label:"sample \u2192 ".concat(a),value:[K.Ac,a]})}),a.props.nodesSecondTree){var p=new Set(h);a.props.nodesSecondTree.filter(function(a){return!a.hasChildren&&!p.has(a.name)}).forEach(function(a){i.push({label:"sample \u2192 ".concat(a.name),value:[K.Ac,a.name]})})}return a.props.measurementsOn&&a.props.measurementsFiltersMap&&a.props.measurementsFieldsMap&&a.props.measurementsFiltersMap.forEach(function(b,c){var d=b.values,e=a.props.measurementsFieldsMap.get(c).title;d.forEach(function(a){i.push({_type:"measurements",label:"(M) ".concat(e," \u2192 ").concat(a),value:[c,a]})})}),i}),at(ar(a),"selectionMade",function(b){return"measurements"===b._type?a.props.dispatch((0,N.kq)(b.value[0],b.value[1],!0)):a.props.dispatch((0,M.Rb)("add",b.value[0],[b.value[1]]))}),at(ar(a),"summariseFilters",function(){return Reflect.ownKeys(a.props.activeFilters).filter(function(b){return a.props.activeFilters[b].length>0}).map(function(b){var c=a.props.activeFilters[b].filter(function(a){return a.active}).length;return{filterName:b,displayName:aA(c,a.getFilterTitle(b)),anyFiltersActive:function(){return a.props.activeFilters[b].filter(function(a){return a.active}).length>0},remove:function(){a.props.dispatch((0,M.Rb)("set",b,[]))},activate:function(){a.props.dispatch((0,M.Rb)("add",b,a.props.activeFilters[b].map(function(a){return a.value})))},inactivate:function(){a.props.dispatch((0,M.Rb)("inactivate",b,a.props.activeFilters[b].map(function(a){return a.value})))}}})}),at(ar(a),"summariseMeasurementsFilters",function(){return void 0===a.props.measurementsFieldsMap?[]:Object.entries(a.props.measurementsFilters).map(function(g){var b,c,d=(c=2,function(a){if(Array.isArray(a))return a}(b=g)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(b,c)||ax(b,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),e=d[0],h=d[1],f=Array.from(h.values()).reduce(function(a,b){return b.active?a+1:a},0);return{field:e,activeFiltersCount:f,badgeTitle:"".concat(f," x ").concat(a.props.measurementsFieldsMap.get(e).title)}})}),a}return a=d,b=[{key:"getStyles",value:function(){return{base:{width:K.HB,marginBottom:0,fontSize:14}}}},{key:"getFilterTitle",value:function(a){return this.props.colorings&&this.props.colorings[a]&&this.props.colorings[a].title||a}},{key:"render",value:function(){var g=this,h=this.makeOptions(),c=(0,J.debounce)(function(b,a){return a(h)},200),d=this.getStyles(),a=this.summariseFilters(),b=this.summariseMeasurementsFilters(),f=String(Object.keys(this.props.totalStateCounts).join(","));return(0,e.jsxs)("div",{style:d.base,children:[(0,e.jsx)(I,{name:"filterQueryBox",placeholder:"Type filter query here...",value:null,defaultOptions:!0,loadOptions:c,filterOption:function(b,a){return a.toLowerCase().split(" ").every(function(a){return b.label.toLowerCase().includes(a)})},isClearable:!1,isSearchable:!0,isMulti:!1,components:{DropdownIndicator:null,MenuList:ap},onChange:this.selectionMade,styles:P.X}),a.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Q.om,{spaceAbove:!0,children:"Currently selected filter categories:"}),a.map(function(a){return(0,e.jsx)("div",{style:{display:"inline-block",margin:"2px"},children:(0,e.jsx)(O.ZK,{active:a.anyFiltersActive(),canMakeInactive:!0,id:a.displayName,remove:a.remove,activate:a.activate,inactivate:a.inactivate,onHoverMessage:"Data is currently filtered by ".concat(a.displayName),children:a.displayName})},a.displayName)})]}):null,b.length?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(Q.om,{spaceAbove:!0,children:"Currently selected measurements filters:"}),b.map(function(b){var d=b.field,c=b.activeFiltersCount,a=b.badgeTitle;return(0,e.jsx)("div",{style:{display:"inline-block",margin:"2px"},children:(0,e.jsx)(O.ZK,{active:c>0,canMakeInactive:!0,id:a,remove:function(){return g.props.dispatch((0,N.EW)(d))},activate:function(){return g.props.dispatch((0,N.RD)(d,!0))},inactivate:function(){return g.props.dispatch((0,N.RD)(d,!1))},onHoverMessage:"Measurements are currently filtered by ".concat(a),children:a})},a)})]}):null]},f)}}],as(a.prototype,b),c&&as(a,c),d}(f.Component))||c)||c)||c)||c,ay=(0,e.jsxs)(e.Fragment,{children:["Use this box to filter the displayed data based upon filtering criteria.\n    For instance, start typing a country's name to filter the data accordingly.",(0,e.jsx)("br",{}),"Data is filtered by forming a union of selected values within each category, and then taking the intersection between categories (if more than one category is selected).",(0,e.jsx)("br",{}),"Scroll to the bottom of the main page (under the data visualisation) to see an expanded display of filters and available values.",(0,e.jsx)("br",{}),'Filter options prefixed with "(M)" are filters specific to the Measurements panel. They will have no effect on the phylogeny tree or other panels.']}),az=x;function aA(a,b){return b===K.Ac?"".concat(a," x samples"):b===K.vD?"".concat(a," x genotypes"):"".concat(a," x  ").concat(b)}},45261:function(d,c,b){"use strict";b.d(c,{on:function(){return e}});var a=b(28354);b(60822);var e=(0,a.jsxs)(a.Fragment,{children:["This panel displays the evolutionary relationships among samples, illustrating their genetic relatedness and inferred ancestry.",(0,a.jsx)("br",{}),"The exact options available depend on the dataset and specific analysis performed.",(0,a.jsx)("br",{}),"If ",(0,a.jsx)("em",{children:"Branch Length"})," is available, you can choose to display the tree branches in terms of (nucleotide) divergence or (inferred) time. It is often helpful to toggle on ",(0,a.jsx)("em",{children:"confidence intervals"})," to gauge the uncertainty in the reconstruction of internal node dates."]});a.Fragment,a.Fragment,a.Fragment,a.Fragment,a.Fragment,a.Fragment,a.Fragment,a.Fragment},6290:function(q,c,b){"use strict";b.d(c,{Gh:function(){return v},TO:function(){return u},Zw:function(){return w},fP:function(){return x},gM:function(){return t},k2:function(){return s},mi:function(){return y},om:function(){return p}});var a=b(37536),d=b(57510);function r(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function e(){var a=r(["\n  display: flex;\n  flex-direction: column;\n  align-content: stretch;\n  flex-wrap: nowrap;\n  height: 100%;\n  order: 0;\n  flex-grow: 0;\n  flex-shrink: 1;\n  flex-basis: auto;\n  align-self: auto;\n  padding: 0px 20px 20px 20px;\n"]);return e=function(){return a},a}function f(){var a=r(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  line-height: 28px;\n  min-height: 28px; /* needed for safari, else the div height is 0 */\n  margin-top: 15px;\n  margin-bottom: 5px;\n"]);return f=function(){return a},a}function g(){var a=r(["\n  // Less padding is necessary on the top because there is already some space\n  // from HeaderContainer's top margin.\n  padding-top: 2px;\n  padding-bottom: 8px;\n\n  // Add borders to delineate panel sections from other sections.\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n\n  // Don't add a top border when there is already a bottom border from a sibling\n  // above.\n  & + & {\n    border-top: none;\n  }\n"]);return g=function(){return a},a}function h(){var a=r(["\n  display: inline-flex;\n  align-items: center;\n"]);return h=function(){return a},a}function i(){var a=r(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: 500;\n  color: ",";\n"]);return i=function(){return a},a}function j(){var a=r(["\n  display: inline-flex;\n  font-size: 16px;\n  padding-left: 6px;\n  cursor: help;\n  color: #888;\n"]);return j=function(){return a},a}function k(){var a=r(["\n  border: 0px;\n  background-color: inherit;\n  margin: 5px 5px 10px 5px;\n  border-radius: 2px;\n  cursor: pointer;\n  padding: 2px;\n  font-family: ",";\n  color: ",";\n  font-weight: 400;\n  text-transform: uppercase;\n  font-size: 14px;\n  vertical-align: top;\n  outline: 0;\n"]);return k=function(){return a},a}function l(){var a=r(["\n  font-family: ",";\n  margin: ","px 0px 5px 0px;\n  font-size: 12px;\n  font-weight: 400;\n  color: ",";\n"]);return l=function(){return a},a}function m(){var a=r(["\n  display: flex;\n  justify-content: space-between;\n"]);return m=function(){return a},a}function n(){var a=r(["\n  padding-right: 3px;\n  font-size: 16px;\n  cursor: help;\n  color: #888;\n"]);return n=function(){return a},a}function o(){var a=r(["\n  max-width: 30vh;\n  white-space: normal;\n  line-height: 1.2;\n  padding: 21px !important; /* override internal styling */\n  z-index: 1001 !important; /* on top of viz legend */\n  & > br {\n    margin-bottom: 10px;\n  }\n"]);return o=function(){return a},a}var s=a.ZP.div.withConfig({componentId:"sc-fe30e3e7-0"})(e()),t=a.ZP.div.withConfig({componentId:"sc-fe30e3e7-1"})(f());a.ZP.div.withConfig({componentId:"sc-fe30e3e7-2"})(g(),function(a){return a.theme.alternateBackground},function(a){return a.theme.alternateBackground});var u=a.ZP.span.withConfig({componentId:"sc-fe30e3e7-3"})(h()),v=a.ZP.span.withConfig({componentId:"sc-fe30e3e7-4"})(i(),function(a){return a.theme["font-family"]},function(a){return a.theme.color}),w=a.ZP.span.withConfig({componentId:"sc-fe30e3e7-5"})(j()),x=a.ZP.button.withConfig({componentId:"sc-fe30e3e7-6"})(k(),function(a){return a.theme["font-family"]},function(a){return a.selected?a.theme.selectedColor:a.theme.unselectedColor}),p=a.ZP.div.withConfig({componentId:"sc-fe30e3e7-7"})(l(),function(a){return a.theme["font-family"]},function(a){return a.spaceAbove?"5":"0"},function(a){return a.theme.color});(0,a.ZP)(p).withConfig({componentId:"sc-fe30e3e7-8"})(m()),a.ZP.span.withConfig({componentId:"sc-fe30e3e7-9"})(n());var y=(0,a.ZP)(d.Z).withConfig({componentId:"sc-fe30e3e7-10"})(o())},65898:function(l,c,b){"use strict";var m=b(28354);b(60822);var n=b(83505),a=b(37536),d=b(6290);function o(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function e(){var a=o(["\n  // Same as ToggleBackground, necessary for panel toggles.\n  height: 21px;\n  position: relative;\n"]);return e=function(){return a},a}function f(){var a=o(["\n  position: relative;\n  display: inline-block;\n  width: 35px;\n  height: 21px;\n  input {\n    display: none;\n  }\n\n  input:checked {\n    background-color: ",";\n  }\n"]);return f=function(){return a},a}function g(){var a=o(["\n  margin-left: 40px;\n  margin-top: 4px;\n  width: 200px;\n"]);return g=function(){return a},a}function h(){var a=o(["\n  color: ",";\n  font-size: 10px;\n  position: absolute;\n  left: -12px;\n  top: 6px;\n"]);return h=function(){return a},a}function i(){var a=o(["\n  & {\n    position: absolute;\n    cursor: pointer;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-color: ",';\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 12px;\n  }\n  &:before {\n    position: absolute;\n    content: "";\n    height: 15px;\n    width: 15px;\n    left: 4px;\n    bottom: 3px;\n    background-color: #FFF;\n    -webkit-transition: .4s;\n    transition: .4s;\n    border-radius: 50%;\n  }\n  input:checked + &:before {\n    -webkit-transform: translateX(13px);\n    -ms-transform: translateX(13px);\n    transform: translateX(13px);\n  }\n']);return i=function(){return a},a}function j(){var a=o(['\n  & {\n    margin-left: "40px"\n  }\n  &:checked + '," {\n    background-color: ",";\n  }\n  &:focus {\n    box-shadow: 0 0 1px #2196F3;\n  }\n"]);return j=function(){return a},a}var p=a.ZP.div.withConfig({componentId:"sc-6339541f-0"})(e()),q=a.ZP.label.withConfig({componentId:"sc-6339541f-1"})(f(),function(a){return a.theme.unselectedColor}),r=(0,a.ZP)(d.om).withConfig({componentId:"sc-6339541f-2"})(g()),s=a.ZP.span.withConfig({componentId:"sc-6339541f-3"})(h(),function(a){return a.theme.color}),k=a.ZP.div.withConfig({componentId:"sc-6339541f-4"})(i(),function(a){return a.theme.alternateBackground}),t=a.ZP.input.withConfig({componentId:"sc-6339541f-5"})(j(),k,function(a){return a.theme.selectedColor});c.Z=function(a){var e=a.display,b=a.isExperimental,f=a.on,g=a.callback,c=a.label,d=a.style;return e?(0,m.jsxs)(p,{style:void 0===d?{}:d,children:[void 0!==b&&b&&(0,m.jsx)(s,{children:(0,m.jsx)(n.ooh,{})}),(0,m.jsxs)(q,{children:[(0,m.jsx)(t,{type:"checkbox",checked:f,onChange:g}),(0,m.jsx)(k,{}),""===c?null:(0,m.jsx)(r,{children:c})]})]}):null}},62009:function(s,g,a){"use strict";a.d(g,{Z:function(){return aX}});var f,c,t=a(28354),h=a(60822),i=a(69515),d=a.n(i),j=a(46641),u=a(82250),k=a(31884),v=a(8594),w=a(54735),x=a(31382),y=a(89702),z=a(69480),A=a(17587),B=a(82633),C=a(64881),D=Array.prototype.slice;function E(a){return a}function F(a){return"translate("+(a+.5)+",0)"}function G(a){return"translate(0,"+(a+.5)+")"}function H(a){return function(b){return+a(b)}}function I(a){var b=Math.max(0,a.bandwidth()-1)/2;return a.round()&&(b=Math.round(b)),function(c){return+a(c)+b}}function J(){return!this.__axis}function K(b,c){var d=[],e=null,f=null,g=6,h=6,i=3,j=1===b||4===b?-1:1,k=4===b||2===b?"x":"y",l=1===b||3===b?F:G;function a(a){var x=null==e?c.ticks?c.ticks.apply(c,d):c.domain():e,y=null==f?c.tickFormat?c.tickFormat.apply(c,d):E:f,w=Math.max(g,0)+i,u=c.range(),r=+u[0]+.5,s=+u[u.length-1]+.5,z=(c.bandwidth?I:H)(c.copy()),o=a.selection?a.selection():a,n=o.selectAll(".domain").data([null]),m=o.selectAll(".tick").data(x,c).order(),v=m.exit(),t=m.enter().append("g").attr("class","tick"),p=m.select("line"),q=m.select("text");n=n.merge(n.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),m=m.merge(t),p=p.merge(t.append("line").attr("stroke","currentColor").attr(k+"2",j*g)),q=q.merge(t.append("text").attr("fill","currentColor").attr(k,j*w).attr("dy",1===b?"0em":3===b?"0.71em":"0.32em")),a!==o&&(n=n.transition(a),m=m.transition(a),p=p.transition(a),q=q.transition(a),v=v.transition(a).attr("opacity",1e-6).attr("transform",function(a){return isFinite(a=z(a))?l(a):this.getAttribute("transform")}),t.attr("opacity",1e-6).attr("transform",function(b){var a=this.parentNode.__axis;return l(a&&isFinite(a=a(b))?a:z(b))})),v.remove(),n.attr("d",4===b||2==b?h?"M"+j*h+","+r+"H0.5V"+s+"H"+j*h:"M0.5,"+r+"V"+s:h?"M"+r+","+j*h+"V0.5H"+s+"V"+j*h:"M"+r+",0.5H"+s),m.attr("opacity",1).attr("transform",function(a){return l(z(a))}),p.attr(k+"2",j*g),q.attr(k,j*w).text(y),o.filter(J).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===b?"start":4===b?"end":"middle"),o.each(function(){this.__axis=z})}return a.scale=function(b){return arguments.length?(c=b,a):c},a.ticks=function(){return d=D.call(arguments),a},a.tickArguments=function(b){return arguments.length?(d=null==b?[]:D.call(b),a):d.slice()},a.tickValues=function(b){return arguments.length?(e=null==b?null:D.call(b),a):e&&e.slice()},a.tickFormat=function(b){return arguments.length?(f=b,a):f},a.tickSize=function(b){return arguments.length?(g=h=+b,a):g},a.tickSizeInner=function(b){return arguments.length?(g=+b,a):g},a.tickSizeOuter=function(b){return arguments.length?(h=+b,a):h},a.tickPadding=function(b){return arguments.length?(i=+b,a):i},a}function L(a){return K(3,a)}var M=a(29105),N=a(38668);function O(){B.B.preventDefault(),B.B.stopImmediatePropagation()}function P(b){var a=b.document.documentElement,c=(0,u.Z)(b).on("dragstart.drag",O,!0);"onselectstart"in a?c.on("selectstart.drag",O,!0):(a.__noselect=a.style.MozUserSelect,a.style.MozUserSelect="none")}function Q(b,d){var a=b.document.documentElement,c=(0,u.Z)(b).on("dragstart.drag",null);d&&(c.on("click.drag",O,!0),setTimeout(function(){c.on("click.drag",null)},0)),"onselectstart"in a?c.on("selectstart.drag",null):(a.style.MozUserSelect=a.__noselect,delete a.__noselect)}var R=Math.SQRT2;function S(a){return((a=Math.exp(a))+1/a)/2}function T(e,f){var c,g,m=e[0],n=e[1],a=e[2],o=f[0],p=f[1],b=f[2],j=o-m,k=p-n,d=j*j+k*k;if(d<1e-12)g=Math.log(b/a)/R,c=function(b){return[m+b*j,n+b*k,a*Math.exp(R*b*g)]};else{var l=Math.sqrt(d),h=(b*b-a*a+4*d)/(2*a*2*l),i=(b*b-a*a-4*d)/(2*b*2*l),q=Math.log(Math.sqrt(h*h+1)-h);g=(Math.log(Math.sqrt(i*i+1)-i)-q)/R,c=function(h){var b,c,d=h*g,e=S(q),f=a/(2*l)*(e*(((b=Math.exp(2*(b=R*d+q)))-1)/(b+1))-((c=Math.exp(c=q))-1/c)/2);return[m+f*j,n+f*k,a*e/S(R*d+q)]}}return c.duration=1e3*g,c}function U(){for(var b,a=B.B;b=a.sourceEvent;)a=b;return a}function V(a,c){var d=a.ownerSVGElement||a;if(d.createSVGPoint){var b=d.createSVGPoint();return b.x=c.clientX,b.y=c.clientY,[(b=b.matrixTransform(a.getScreenCTM().inverse())).x,b.y]}var e=a.getBoundingClientRect();return[c.clientX-e.left-a.clientLeft,c.clientY-e.top-a.clientTop]}function W(b){var a=U();return a.changedTouches&&(a=a.changedTouches[0]),V(b,a)}function X(e,a,c){arguments.length<3&&(c=a,a=U().changedTouches);for(var d,b=0,f=a?a.length:0;b<f;++b)if((d=a[b]).identifier===c)return V(e,d);return null}function Y(a){return function(){return a}}function Z(a,b,c){this.target=a,this.type=b,this.transform=c}function e(a,b,c){this.k=a,this.x=b,this.y=c}e.prototype={constructor:e,scale:function(a){return 1===a?this:new e(this.k*a,this.x,this.y)},translate:function(a,b){return 0===a&0===b?this:new e(this.k,this.x+this.k*a,this.y+this.k*b)},apply:function(a){return[a[0]*this.k+this.x,a[1]*this.k+this.y]},applyX:function(a){return a*this.k+this.x},applyY:function(a){return a*this.k+this.y},invert:function(a){return[(a[0]-this.x)/this.k,(a[1]-this.y)/this.k]},invertX:function(a){return(a-this.x)/this.k},invertY:function(a){return(a-this.y)/this.k},rescaleX:function(a){return a.copy().domain(a.range().map(this.invertX,this).map(a.invert,a))},rescaleY:function(a){return a.copy().domain(a.range().map(this.invertY,this).map(a.invert,a))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var $=new e(1,0,0);function _(){B.B.stopImmediatePropagation()}function aa(){B.B.preventDefault(),B.B.stopImmediatePropagation()}function ab(){return!B.B.ctrlKey&&!B.B.button}function ac(){var a=this;return a instanceof SVGElement?(a=a.ownerSVGElement||a).hasAttribute("viewBox")?[[(a=a.viewBox.baseVal).x,a.y],[a.x+a.width,a.y+a.height]]:[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]:[[0,0],[a.clientWidth,a.clientHeight]]}function ad(){return this.__zoom||$}function ae(){return-B.B.deltaY*(1===B.B.deltaMode?.05:B.B.deltaMode?1:.002)}function af(){return navigator.maxTouchPoints||"ontouchstart"in this}function ag(a,b,c){var d=a.invertX(b[0][0])-c[0][0],e=a.invertX(b[1][0])-c[1][0],f=a.invertY(b[0][1])-c[0][1],g=a.invertY(b[1][1])-c[1][1];return a.translate(e>d?(d+e)/2:Math.min(0,d)||Math.max(0,e),g>f?(f+g)/2:Math.min(0,f)||Math.max(0,g))}(function(a){for(;!a.__zoom;)if(!(a=a.parentNode))return $;return a.__zoom}).prototype=e.prototype;var ah=a(60205);function ai(a){return function(){return a}}function aj(a,b,c){this.target=a,this.type=b,this.selection=c}function ak(){B.B.stopImmediatePropagation()}function al(){B.B.preventDefault(),B.B.stopImmediatePropagation()}var am={name:"drag"},an={name:"space"},ao={name:"handle"},ap={name:"center"};function aq(a){return[+a[0],+a[1]]}function ar(a){return[aq(a[0]),aq(a[1])]}var as={name:"x",handles:["w","e"].map(az),input:function(a,b){return null==a?null:[[+a[0],b[0][1]],[+a[1],b[1][1]]]},output:function(a){return a&&[a[0][0],a[1][0]]}},at={name:"y",handles:["n","s"].map(az),input:function(a,b){return null==a?null:[[b[0][0],+a[0]],[b[1][0],+a[1]]]},output:function(a){return a&&[a[0][1],a[1][1]]}},au=(["n","w","e","s","nw","ne","sw","se"].map(az),{overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"}),av={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},aw={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},ax={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},ay={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function az(a){return{type:a}}function aA(){return!B.B.ctrlKey&&!B.B.button}function aB(){var a=this.ownerSVGElement||this;return a.hasAttribute("viewBox")?[[(a=a.viewBox.baseVal).x,a.y],[a.x+a.width,a.y+a.height]]:[[0,0],[a.width.baseVal.value,a.height.baseVal.value]]}function aC(){return navigator.maxTouchPoints||"ontouchstart"in this}function aD(a){for(;!a.__brush;)if(!(a=a.parentNode))return;return a.__brush}var l=a(1650),aE=a.n(l),aF=a(49817),aG=a(69856),aH=a(49765);function aI(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function aJ(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aK(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){aJ(d,a,c[a])})}return d}function aL(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||aN(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aM(a){return function(a){if(Array.isArray(a))return aI(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||aN(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aN(a,c){if(a){if("string"==typeof a)return aI(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return aI(a,c)}}var b=function(a,b,c){this.svg=(0,u.Z)(a),this.genomeMap=b,this.callbacks=c,this.okToDrawBars=!1};function aO(a,b,c){return(b-5)/a.length>c?a:null}b.prototype.render=function(a){this.props=a,this.selectedCds=a.selectedCds,this.selectedPositions=a.selectedPositions,this.aa="nuc"!==this.selectedCds,this.showCounts=a.showCounts,this.bars=a.bars,this._setSelectedNodes(),this.svg.selectAll("*").remove(),this._calcOffsets(a.width,a.height),this._createGroups(),this._setScales(a.maxYVal),this._setZoomBounds(),this._setZoomCoordinates(a.zoomMin,a.zoomMax),this._drawAxes(),this._setUpZoomBrush(),this._drawNavCds(),this._drawMainCds(),this.okToDrawBars=!0,this._drawBars()},b.prototype.update=function(a){var g=a.selectedCds,c=void 0===g?void 0:g,h=a.selectedPositions,b=void 0===h?void 0:h,i=a.newBars,d=void 0===i?void 0:i,j=a.showCounts,k=void 0===j?void 0:j,l=a.zoomMax,e=void 0===l?void 0:l,m=a.zoomMin,f=void 0===m?void 0:m;if(c&&(this.selectedCds=c,this._setUpZoomBrushWrapping(),this.aa="nuc"!==this.selectedCds,this._setZoomBounds()),d|| void 0!==b){var n=this;void 0!==k&&(this.showCounts=k),d&&(this.bars=d[0],this._updateOffsets(),this._updateMainScaleAndAxis(d[1]),this._drawNavCds()),void 0!==b&&(this.selectedPositions=b),(c|| void 0!==b)&&this._setZoomCoordinates(f,e,!!c),this._groups.navBrush.call(this.brush.move,function(){return n.zoomCoordinates.map(n.scales.xNav)}),void 0!==b&&(this._clearSelectedBars(),this._setSelectedNodes(),this._highlightSelectedBars())}else if(void 0!==f|| void 0!==e){var o=this;this._setZoomCoordinates(f,e,!1),this._groups.navBrush.call(this.brush.move,function(){return o.zoomCoordinates.map(o.scales.xNav)})}},b.prototype._setZoomBounds=function(){if(this.aa){var a,b,c=this.selectedCds.segments.map(function(a){return a.rangeGenome}).flat();this.zoomBounds=[(a=Math).min.apply(a,aM(c)),(b=Math).max.apply(b,aM(c))]}else this.zoomBounds=[0,this.genomeMap[0].range[1]]},b.prototype._setZoomCoordinates=function(a,b,j){if(j&&this.zoomCoordinates&&(this.zoomCoordinates=void 0),this.selectedCds===aG.BJ){var c=this.scales.xNav.domain();if(null===(k=this.selectedPositions)|| void 0===k?void 0:k.length){var k,f,g,h=(f=Math).min.apply(f,aM(this.selectedPositions)),i=(g=Math).max.apply(g,aM(this.selectedPositions));if(this.zoomCoordinates&&(this.zoomCoordinates[0]!==c[0]||this.zoomCoordinates[1]!==c[1])&&h>this.zoomCoordinates[0]&&i<this.zoomCoordinates[1])return;var e=Math.floor(.05*c[1]);e>1e3&&(e=1e3),this.zoomCoordinates=[h-e,i+e]}else this.zoomCoordinates=c;(a||b)&&(a&&(this.zoomCoordinates[0]=a),b&&(this.zoomCoordinates[1]=b),this.zoomCoordinates[0]>=this.zoomCoordinates[1]&&(a&&(this.zoomCoordinates=[a,c[1]]),b&&(this.zoomCoordinates=[c[0],b]))),this.zoomCoordinates[0]<c[0]&&(this.zoomCoordinates[0]=c[0]),this.zoomCoordinates[1]>c[1]&&(this.zoomCoordinates[1]=c[1])}else{var d=this.selectedCds.segments;this.selectedCds.isWrapping?("+"===this.selectedCds.strand?this.zoomCoordinates=[d[d.length-1].rangeGenome[1],d[0].rangeGenome[0]]:this.zoomCoordinates=[d[0].rangeGenome[1],d[d.length-1].rangeGenome[0]],a&&a<this.zoomCoordinates[0]&&(this.zoomCoordinates[0]=a),b&&b>this.zoomCoordinates[0]&&(this.zoomCoordinates[1]=b)):(this.zoomCoordinates=aM(this.zoomBounds),a&&a>this.zoomCoordinates[0]&&a<this.zoomCoordinates[1]&&(this.zoomCoordinates[0]=a),b&&b>this.zoomCoordinates[0]&&b<this.zoomCoordinates[1]&&(this.zoomCoordinates[1]=b))}},b.prototype._setSelectedNodes=function(){if(this.selectedNodes=[],this.selectedPositions.length){if(this.aa){var a=!0,g=!1,h=void 0;try{for(var i,b=this.bars[Symbol.iterator]();!(a=(i=b.next()).done);a=!0){var j=i.value,c=!0,k=!1,l=void 0;try{for(var m,d=this.selectedPositions[Symbol.iterator]();!(c=(m=d.next()).done);c=!0){var r=m.value;j.codon===r&&this.selectedNodes.push(j)}}catch(s){k=!0,l=s}finally{try{c||null==d.return||d.return()}finally{if(k)throw l}}}}catch(t){g=!0,h=t}finally{try{a||null==b.return||b.return()}finally{if(g)throw h}}}else{var e=!0,n=!1,o=void 0;try{for(var p,f=this.bars[Symbol.iterator]();!(e=(p=f.next()).done);e=!0){var q=p.value;-1!==this.selectedPositions.indexOf(q.x)&&this.selectedNodes.push(q)}}catch(u){n=!0,o=u}finally{try{e||null==f.return||f.return()}finally{if(n)throw o}}}}},b.prototype._drawMainCds=function(){var e=this;this._groups.mainCds.selectAll("*").remove();var a=aL(this.scales.xMain.domain(),2),c=a[0],d=a[1];if(this.selectedCds!==aG.BJ){var f=this;this._groups.mainCds.selectAll(".cds").data(this._cdsSegments({selected:!0})).enter().append("rect").attr("class","gene").attr("x",function(a){return f.scales.xMain(Math.max(a.rangeLocal[0]-.5,c))}).attr("y",0).attr("width",function(a){return f.scales.xMain(Math.min(a.rangeLocal[1]+.5,d))-f.scales.xMain(Math.max(a.rangeLocal[0]-.5,c))}).attr("height",this.offsets.mainCdsRectHeight).style("fill",this.selectedCds.color).style("stroke","#fff").style("stroke-width",2).style("opacity",1).on("mouseover",function(a){f.callbacks.onHover({d3event:B.B,tooltip:f._cdsTooltip(a)})}).on("mouseout",function(a){f.callbacks.onLeave(a)}),this._groups.mainCds.append("text").attr("x",function(){var a=f.scales.xMain(Math.max(1,c));return a+(f.scales.xMain(Math.min(f.selectedCds.length,d))-a)/2}).attr("y",1).attr("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","hanging").style("fill","white").style("font-size","".concat(this.offsets.mainCdsRectHeight-2,"px")).text(function(){return f.selectedCds.name});return}var b=this._cdsSegments({range:[c,d]}).map(function(a){var f=[e.scales.xMain(Math.max(a.rangeGenome[0]-.5,c)),e.scales.xMain(Math.min(a.rangeGenome[1]+.5,d))],b=(a.cds.stackPosition-1)*e.offsets.mainCdsJitter,g="+"===a.cds.strand?e.offsets.mainCdsPositiveDelta-b-e.offsets.mainCdsRectHeight:e.offsets.mainCdsNegativeDelta+b;return aK({rangePx:f,yPx:g},a)});this._groups.mainCds.selectAll(".cds").data(b).enter().append("path").attr("class","gene").attr("d",function(a){return function(b,g){var f=g.mainCdsRectHeight,a=Math.floor(b.rangePx[1]-b.rangePx[0]),d=Math.round(b.rangePx[0]);if(a<20)return"M ".concat(d,",").concat(b.yPx," h ").concat(a," v ").concat(f," h -").concat(a," Z");var c=Math.floor(Math.min(a/4,10));a-=c;var e=f/2;return"+"===b.cds.strand?"M ".concat(d,",").concat(b.yPx," h ").concat(a," l ").concat(c,",").concat(e," l -").concat(c,",").concat(e," h -").concat(a," Z"):(d=Math.round(b.rangePx[1]),"M ".concat(d,",").concat(b.yPx," h -").concat(a," l -").concat(c,",").concat(e," l ").concat(c,",").concat(e," h ").concat(a," Z"))}(a,e.offsets)}).style("fill",function(a){return a.cds.color}).style("opacity",.7).on("mouseover",function(a){e.callbacks.onHover({d3event:B.B,tooltip:e._cdsTooltip(a)})}).on("mouseout",this.callbacks.onLeave).on("click",this.callbacks.onCdsClick).style("cursor","pointer"),this._groups.mainCds.selectAll(".cdsText").data(b).enter().append("text").attr("x",function(a){return a.rangePx[0]+.5*(a.rangePx[1]-a.rangePx[0])}).attr("y",function(a){return a.yPx+1}).attr("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","hanging").style("font-size","".concat(this.offsets.mainCdsRectHeight-2,"px")).style("fill","white").text(function(a){return aO(a.cds.name,a.rangePx[1]-a.rangePx[0],10)})},b.prototype._drawNavCds=function(){var b=this;this._groups.navCds.selectAll("*").remove();var a=this._cdsSegments({}).map(function(a){return aK({rangePx:a.rangeGenome.map(b.scales.xNav),yPx:"+"===a.cds.strand?b.offsets.navCdsPositiveStrandSpace-a.cds.stackPosition*b.offsets.navCdsRectHeight:b.offsets.navCdsNegativeY1Delta+(a.cds.stackPosition-1)*b.offsets.navCdsRectHeight},a)});this._groups.navCds.selectAll(".cdsNav").data(a).enter().append("rect").attr("class","gene").attr("x",function(a){return a.rangePx[0]}).attr("y",function(a){return a.yPx}).attr("width",function(a){return a.rangePx[1]-a.rangePx[0]}).attr("height",this.offsets.navCdsRectHeight).style("fill",function(a){return a.cds.color}).style("fill-opacity",function(a){return b.selectedCds===aG.BJ?1:a.cds.name===b.selectedCds.name?1:.3}).style("stroke","#fff").style("stroke-width",1).on("mouseover",function(a){b.callbacks.onHover({d3event:B.B,tooltip:b._cdsTooltip(a)})}).on("mouseout",function(a){b.callbacks.onLeave(a)}).on("click",this.callbacks.onCdsClick).style("cursor","pointer"),this._groups.navCds.selectAll(".cdsNavText").data(a).enter().append("text").attr("x",function(a){return a.rangePx[0]+.5*(a.rangePx[1]-a.rangePx[0])}).attr("y",function(a){return a.yPx+2}).attr("pointer-events","none").attr("text-anchor","middle").attr("dominant-baseline","hanging").style("font-size","".concat(this.offsets.navCdsRectHeight-2,"px")).style("fill","#fff").text(function(a){return aO(a.cds.name,a.rangePx[1]-a.rangePx[0],7.5)})},b.prototype._cdsSegments=function(a){var b=a.range,e=void 0===b?void 0:b,c=a.selected,f=void 0!==c&&c,g=this,d=[];return this.genomeMap[0].genes.forEach(function(a){var b=g;a.cds.forEach(function(c){f&&c.name!==b.selectedCds.name||c.segments.forEach(function(b){if(!e|| !(b.rangeGenome[1]<e[0])&&!(b.rangeGenome[0]>e[1])){var f=aK({},b);f.cds=c,f.gene=a,d.push(f)}})})}),d},b.prototype._clearSelectedBars=function(){var a=!0,c=!1,d=void 0;try{for(var e,b=this.selectedNodes[Symbol.iterator]();!(a=(e=b.next()).done);a=!0){var f=e.value,g=this.aa?"#cds-".concat(this.selectedCds.name,"-").concat(f.codon):"#nt".concat(f.x);(0,u.Z)(g).style("fill",A.I6)}}catch(h){c=!0,d=h}finally{try{a||null==b.return||b.return()}finally{if(c)throw d}}this.selectedNodes=[]},b.prototype._highlightSelectedBars=function(){var a=!0,c=!1,d=void 0;try{for(var e,b=this.selectedNodes[Symbol.iterator]();!(a=(e=b.next()).done);a=!0){var f=e.value,g=this.aa?"#cds-".concat(this.selectedCds.name,"-").concat(f.codon):"#nt".concat(f.x);(0,u.Z)(g).style("fill","red")}}catch(h){c=!0,d=h}finally{try{a||null==b.return||b.return()}finally{if(c)throw d}}},b.prototype._drawBars=function(){var d=this;if(this.okToDrawBars){this._groups.mainBars.selectAll("*").remove();var b=this.scales.xMain.domain()[0],a=this.scales.xMain(b+1)-this.scales.xMain(b);this.aa&&(a*=3),(a*=.9)<1.5&&(a=1.5);var c=this.aa?function(a){return"cds-".concat(d.selectedCds.name,"-").concat(a.codon)}:function(a){return"nt"+a.x},e=a/2;this._groups.mainBars.selectAll(".bar").data(this.bars).enter().append("rect").attr("class","bar").attr("id",c).attr("x",function(a){return d.aa?d.scales.xMain((a.codon-1)*3+2)-e:d.scales.xMain(a.x)-e}).attr("y",function(a){return d.scales.y(a.y)}).attr("width",a).attr("height",function(a){return d.offsets.heightMainBars-d.scales.y(a.y)}).style("fill",A.I6).on("mouseover",function(a){d.callbacks.onHover({d3event:B.B,tooltip:d.aa?d._mainTooltipAa(a):d._mainTooltipNuc(a)})}).on("mouseout",function(a){d.callbacks.onLeave(a)}).on("click",function(a){d.callbacks.onClick(a)}).style("cursor","pointer"),this._highlightSelectedBars()}},b.prototype._setScales=function(c){this.scales={};var a=this.genomeMap[0].range[1],b=this.selectedCds===aG.BJ?a:this.selectedCds.length;this.scales.xMain=(0,C.Z)().domain([0,b]).range([0,this.offsets.widthNarrow]),this.scales.xNav=(0,C.Z)().domain([0,a]).range([0,this.offsets.width]),this.scales.y=(0,C.Z)().domain([0,c]).range([this.offsets.heightMainBars,0]),this.scales.xMainUpperLimit=b},b.prototype._drawAxes=function(){var a,b=this;this.axes={},this.axes.y=K(4,this.scales.y).ticks(4),this.axes.xMain=L(this.scales.xMain).ticks(16).tickFormat(function(a){return b.aa?Math.ceil(a/3):a}),this.axes.xNav=L(this.scales.xNav).ticks(20,",f"),this.scales.xNav.domain()[1]-this.scales.xNav.domain()[0]>1e6&&this.axes.xNav.tickFormat((0,M.WU)(".1e")),this._groups.mainXAxis.append("text").attr("class","axisLabel").attr("y",7).attr("x",-2).attr("pointer-events","none").attr("text-anchor","end").attr("dominant-baseline","hanging").style("fill",A.I6).style("font-size","12px").text("AA pos").style("visibility",this.aa?"visible":"hidden"),this._groups.mainYAxis.call(this.axes.y),this._groups.mainXAxis.call(this.axes.xMain),this._groups.navXAxis.call(this.axes.xNav)},b.prototype._updateMainScaleAndAxis=function(b){var c=this.genomeMap[0].range[1],a=this.selectedCds===aG.BJ?c:this.selectedCds.length;this.scales.xMain.domain()[1]!==a&&(this._groups.mainBars.attr("transform","translate("+this.offsets.x1Narrow+","+this.offsets.mainY1+")"),this._groups.mainCds.attr("transform","translate("+this.offsets.x1Narrow+","+this.offsets.mainCdsY1+")"),this._groups.mainXAxis.attr("transform","translate("+this.offsets.x1Narrow+","+this.offsets.mainAxisY1+")"),this._groups.mainClip.select("#cliprect").attr("width",this.offsets.widthNarrow).attr("height",this.offsets.heightMainBars),this.scales.xMain.domain([0,a]).range([0,this.offsets.widthNarrow]),this.scales.xMainUpperLimit=a,this._groups.mainXAxis.call(this.axes.xMain)),this._groups.mainXAxis.select(".axisLabel").style("visibility",this.aa?"visible":"hidden"),this.scales.y.domain([0,b]).range([this.offsets.heightMainBars,0]),this._groups.mainYAxis.call(this.axes.y)},b.prototype._calcOffsets=function(f,g){var a=this.genomeMap[0].metadata,c=a.strandsObserved.has("+")?13*a.posStrandStackHeight:0,d=a.strandsObserved.has("-")?13*a.negStrandStackHeight:0,b=a.strandsObserved.has("+")?16+(a.posStrandStackHeight-1)*8:0,e=a.strandsObserved.has("-")?16+(a.negStrandStackHeight-1)*8:0;this.offsets={},this.offsets.tinySpace=2,this.offsets.brushHandleHeight=14,this.offsets.navCdsRectHeight=13,this.offsets.navAxisY1=g-0-this.offsets.brushHandleHeight-20-d,this.offsets.navCdsY1=this.offsets.navAxisY1-2-c,this.offsets.navCdsPositiveStrandSpace=c,this.offsets.navCdsNegativeY1Delta=this.offsets.navAxisY1+20-this.offsets.navCdsY1,this.offsets.brushY1=this.offsets.navCdsY1-2,this.offsets.brushHeight=this.offsets.navCdsNegativeY1Delta+d+4,this.offsets.mainAxisY1=this.offsets.brushY1-2-20,this.aa?this.offsets.mainCdsY1=this.offsets.mainAxisY1-2-16:this.offsets.mainCdsY1=this.offsets.mainAxisY1-2-e-2-b,this.offsets.mainCdsNegativeStrandSpace=e,this.offsets.mainCdsPositiveStrandSpace=b,this.offsets.mainCdsPositiveDelta=b,this.offsets.mainCdsNegativeDelta=b+2,this.offsets.mainCdsJitter=8,this.offsets.mainCdsRectHeight=16,this.offsets.mainY1=10,this.offsets.heightMainBars=this.offsets.mainCdsY1-this.offsets.mainY1-2,this.offsets.x1=30,this.offsets.width=f-this.offsets.x1-15,this.offsets.xMainInternalPad=20,this.aa?(this.offsets.x1Narrow=this.offsets.x1+this.offsets.xMainInternalPad,this.offsets.widthNarrow=this.offsets.width-2*this.offsets.xMainInternalPad):(this.offsets.x1Narrow=this.offsets.x1,this.offsets.widthNarrow=this.offsets.width)},b.prototype._updateOffsets=function(){this.aa?(this.offsets.x1Narrow=this.offsets.x1+this.offsets.xMainInternalPad,this.offsets.widthNarrow=this.offsets.width-2*this.offsets.xMainInternalPad,this.offsets.mainCdsY1=this.offsets.mainAxisY1-this.offsets.tinySpace-this.offsets.mainCdsRectHeight):(this.offsets.x1Narrow=this.offsets.x1,this.offsets.widthNarrow=this.offsets.width,this.offsets.mainCdsY1=this.offsets.mainAxisY1-this.offsets.tinySpace-this.offsets.mainCdsNegativeStrandSpace-this.offsets.tinySpace-this.offsets.mainCdsPositiveStrandSpace),this.offsets.heightMainBars=this.offsets.mainCdsY1-this.offsets.mainY1-this.offsets.tinySpace},b.prototype._setUpZoomBrush=function(){var b=this;this.brush=(function(c){var d,e=aB,f=aA,g=aC,h=!0,i=(0,N.Z)("start","brush","end"),j=6;function a(a){var b=a.property("__brush",p).selectAll(".overlay").data([az("overlay")]);b.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",au.overlay).merge(b).each(function(){var a=aD(this).extent;(0,u.Z)(this).attr("x",a[0][0]).attr("y",a[0][1]).attr("width",a[1][0]-a[0][0]).attr("height",a[1][1]-a[0][1])}),a.selectAll(".selection").data([az("selection")]).enter().append("rect").attr("class","selection").attr("cursor",au.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var d=a.selectAll(".handle").data(c.handles,function(a){return a.type});d.exit().remove(),d.enter().append("rect").attr("class",function(a){return"handle handle--"+a.type}).attr("cursor",function(a){return au[a.type]}),a.each(k).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",m).filter(g).on("touchstart.brush",m).on("touchmove.brush",n).on("touchend.brush touchcancel.brush",o).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function k(){var b=(0,u.Z)(this),a=aD(this).selection;a?(b.selectAll(".selection").style("display",null).attr("x",a[0][0]).attr("y",a[0][1]).attr("width",a[1][0]-a[0][0]).attr("height",a[1][1]-a[0][1]),b.selectAll(".handle").style("display",null).attr("x",function(b){return"e"===b.type[b.type.length-1]?a[1][0]-j/2:a[0][0]-j/2}).attr("y",function(b){return"s"===b.type[0]?a[1][1]-j/2:a[0][1]-j/2}).attr("width",function(b){return"n"===b.type||"s"===b.type?a[1][0]-a[0][0]+j:j}).attr("height",function(b){return"e"===b.type||"w"===b.type?a[1][1]-a[0][1]+j:j})):b.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(c,e,d){var a=c.__brush.emitter;return!a||d&&a.clean?new b(c,e,d):a}function b(a,b,c){this.that=a,this.args=b,this.state=a.__brush,this.active=0,this.clean=c}function m(){if((!d||B.B.touches)&&f.apply(this,arguments)){var r,g,s,i,t,m,w,n,x,y,J,K,a=this,b=B.B.target.__data__.type,L=(h&&B.B.metaKey?b="overlay":b)==="selection"?am:h&&B.B.altKey?ap:ao,z=c===at?null:ax[b],A=c===as?null:ay[b],o=aD(a),j=o.extent,e=o.selection,C=j[0][0],D=j[0][1],E=j[1][0],F=j[1][1],M=0,N=0,O=z&&A&&h&&B.B.shiftKey,G=B.B.touches?(r=B.B.changedTouches[0].identifier,function(a){return X(a,B.B.touches,r)}):W,p=G(a),R=p,q=l(a,arguments,!0).beforestart();"overlay"===b?(e&&(y=!0),o.selection=e=[[g=c===at?C:p[0],i=c===as?D:p[1]],[m=c===at?E:g,n=c===as?F:i]]):(g=e[0][0],i=e[0][1],m=e[1][0],n=e[1][1]),s=g,t=i,w=m,x=n;var H=(0,u.Z)(a).attr("pointer-events","none"),S=H.selectAll(".overlay").attr("cursor",au[b]);if(B.B.touches)q.moved=T,q.ended=V;else{var I=(0,u.Z)(B.B.view).on("mousemove.brush",T,!0).on("mouseup.brush",V,!0);h&&I.on("keydown.brush",function(){switch(B.B.keyCode){case 16:O=z&&A;break;case 18:L===ao&&(z&&(m=w-M*z,g=s+M*z),A&&(n=x-N*A,i=t+N*A),L=ap,U());break;case 32:(L===ao||L===ap)&&(z<0?m=w-M:z>0&&(g=s-M),A<0?n=x-N:A>0&&(i=t-N),L=an,S.attr("cursor",au.selection),U());break;default:return}al()},!0).on("keyup.brush",function(){switch(B.B.keyCode){case 16:O&&(J=K=O=!1,U());break;case 18:L===ap&&(z<0?m=w:z>0&&(g=s),A<0?n=x:A>0&&(i=t),L=ao,U());break;case 32:L===an&&(B.B.altKey?(z&&(m=w-M*z,g=s+M*z),A&&(n=x-N*A,i=t+N*A),L=ap):(z<0?m=w:z>0&&(g=s),A<0?n=x:A>0&&(i=t),L=ao),S.attr("cursor",au[b]),U());break;default:return}al()},!0),P(B.B.view)}ak(),(0,v.e1)(a),k.call(a),q.start()}function T(){var b=G(a);!O||J||K||(Math.abs(b[0]-R[0])>Math.abs(b[1]-R[1])?K=!0:J=!0),R=b,y=!0,al(),U()}function U(){var c;switch(M=R[0]-p[0],N=R[1]-p[1],L){case an:case am:z&&(M=Math.max(C-g,Math.min(E-m,M)),s=g+M,w=m+M),A&&(N=Math.max(D-i,Math.min(F-n,N)),t=i+N,x=n+N);break;case ao:z<0?(M=Math.max(C-g,Math.min(E-g,M)),s=g+M,w=m):z>0&&(M=Math.max(C-m,Math.min(E-m,M)),s=g,w=m+M),A<0?(N=Math.max(D-i,Math.min(F-i,N)),t=i+N,x=n):A>0&&(N=Math.max(D-n,Math.min(F-n,N)),t=i,x=n+N);break;case ap:z&&(s=Math.max(C,Math.min(E,g-M*z)),w=Math.max(C,Math.min(E,m+M*z))),A&&(t=Math.max(D,Math.min(F,i-N*A)),x=Math.max(D,Math.min(F,n+N*A)))}w<s&&(z*=-1,c=g,g=m,m=c,c=s,s=w,w=c,b in av&&S.attr("cursor",au[b=av[b]])),x<t&&(A*=-1,c=i,i=n,n=c,c=t,t=x,x=c,b in aw&&S.attr("cursor",au[b=aw[b]])),o.selection&&(e=o.selection),J&&(s=e[0][0],w=e[1][0]),K&&(t=e[0][1],x=e[1][1]),(e[0][0]!==s||e[0][1]!==t||e[1][0]!==w||e[1][1]!==x)&&(o.selection=[[s,t],[w,x]],k.call(a),q.brush())}function V(){var b;if(ak(),B.B.touches){if(B.B.touches.length)return;d&&clearTimeout(d),d=setTimeout(function(){d=null},500)}else Q(B.B.view,y),I.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);H.attr("pointer-events","all"),S.attr("cursor",au.overlay),o.selection&&(e=o.selection),((b=e)[0][0]===b[1][0]||b[0][1]===b[1][1])&&(o.selection=null,k.call(a)),q.end()}}function n(){l(this,arguments).moved()}function o(){l(this,arguments).ended()}function p(){var a=this.__brush||{selection:null};return a.extent=ar(e.apply(this,arguments)),a.dim=c,a}return a.move=function(a,b){a.selection?a.on("start.brush",function(){l(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){l(this,arguments).end()}).tween("brush",function(){var a=this,d=a.__brush,h=l(a,arguments),e=d.selection,f=c.input("function"==typeof b?b.apply(this,arguments):b,d.extent),i=(0,ah.Z)(e,f);function g(b){d.selection=1===b&&null===f?null:i(b),k.call(a),h.brush()}return null!==e&&null!==f?g:g(1)}):a.each(function(){var a=this,d=arguments,e=a.__brush,f=c.input("function"==typeof b?b.apply(a,d):b,e.extent),g=l(a,d).beforestart();(0,v.e1)(a),e.selection=null===f?null:f,k.call(a),g.start().brush().end()})},a.clear=function(b){a.move(b,null)},b.prototype={beforestart:function(){return 1== ++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0== --this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(b){(0,B._H)(new aj(a,b,c.output(this.state.selection)),i.apply,i,[b,this.that,this.args])}},a.extent=function(b){return arguments.length?(e="function"==typeof b?b:ai(ar(b)),a):e},a.filter=function(b){return arguments.length?(f="function"==typeof b?b:ai(!!b),a):f},a.touchable=function(b){return arguments.length?(g="function"==typeof b?b:ai(!!b),a):g},a.handleSize=function(b){return arguments.length?(j=+b,a):j},a.keyModifiers=function(b){return arguments.length?(h=!!b,a):h},a.on=function(){var b=i.on.apply(i,arguments);return b===i?a:b},a})(as).extent([[0,0],[this.offsets.width,this.offsets.brushHeight]]).on("brush",function(){b._brushChanged()}).on("end",function(){b._brushChanged(!0),b._dispatchZoomCoordinates()}),this._groups.navBrush.attr("class","brush").attr("stroke-width",0).call(this.brush).call(this.brush.move,function(){return b.zoomCoordinates.map(b.scales.xNav)});var a=this.offsets.brushHandleHeight-4;this.brushHandle=this._groups.navBrush.selectAll(".handle--custom").data([{type:"w"},{type:"e"}]).enter().append("path").attr("class","handle--custom").attr("stroke",A.I6).attr("stroke-width",2).attr("cursor",function(c,a){return b.zoomCoordinates[a]===b.zoomBounds[a]?0===a?"e-resize":"w-resize":"ew-resize"}).attr("d","M0,0 -5,".concat(a," 5,").concat(a," Z")).attr("transform",function(a){return"e"===a.type?"translate(".concat(b.scales.xNav(b.zoomCoordinates[1]),",").concat(b.offsets.brushHeight,")"):"translate(".concat(b.scales.xNav(b.zoomCoordinates[0]),",").concat(b.offsets.brushHeight,")")}),this._setUpZoomBrushWrapping()},b.prototype._setUpZoomBrushWrapping=function(){var a,b=this;null===(a=this._navBrushWrappingSelection)|| void 0===a||a.remove(),this._navBrushWrappingSelection=void 0,this._groups.navBrush.select(".selection").attr("fill-opacity",.3),this.selectedCds!==aG.BJ&& !1!==this.selectedCds.isWrapping&&(this._navBrushWrappingSelection=this._groups.navBrushWrapping.selectAll(".selection-wrapping").data(this.zoomCoordinates).enter().append("rect").attr("class","selection-wrapping").attr("x",function(a,c){return 0===c?0:b.scales.xNav(a)}).attr("y",0).attr("width",function(a,c){return 0===c?b.scales.xNav(a):b.offsets.width-b.scales.xNav(a)}).attr("height",this.offsets.brushHeight).attr("fill","#777").attr("fill-opacity",.3),this._groups.navBrush.select(".selection").attr("fill-opacity",0))},b.prototype._dispatchZoomCoordinates=function(){this.props.dispatch((0,aF.Bm)(this.zoomCoordinates))},b.prototype._brushChanged=function(){var b=arguments.length>0&& void 0!==arguments[0]&&arguments[0],c=(B.B.selection||this.scales.xNav.range()).map(this.scales.xNav.invert,this.scales.xNav);if(this.zoomCoordinates=c.map(Math.round),this.selectedCds===aG.BJ)this.scales.xMain.domain(this.zoomCoordinates);else{var a=aL((0,aH.bM)(this.selectedCds,this.zoomCoordinates),2),d=a[0],e=a[1];if(e)this.scales.xMain.domain(d);else{var f=this;this._setZoomCoordinates(),this._groups.navBrush.call(this.brush.move,function(){return f.zoomCoordinates.map(f.scales.xNav)})}}if(this.axes.xMain=this.axes.xMain.scale(this.scales.xMain),this._groups.mainXAxis.call(this.axes.xMain),this._drawBars(),this._drawMainCds(),this.brushHandle){var g=this;if(this.brushHandle.attr("display",null).attr("transform",function(b,a){return"translate(".concat(g.scales.xNav(g.zoomCoordinates[a]),",").concat(g.offsets.brushHeight,")")}),b){var h=this;this._groups.navBrush.selectAll(".handle--custom").attr("cursor",function(b,a){return h.zoomCoordinates[a]===h.zoomBounds[a]?0===a?"e-resize":"w-resize":"ew-resize"})}}if(this._navBrushWrappingSelection){var i=this;this._navBrushWrappingSelection.attr("x",function(b,a){return 0===a?0:i.scales.xNav(i.zoomCoordinates[1])}).attr("width",function(b,a){return 0===a?i.scales.xNav(i.zoomCoordinates[0]):i.offsets.width-i.scales.xNav(i.zoomCoordinates[1])})}},b.prototype._setUpMousewheelZooming=function(){var c=this,a=[[this.offsets.x1Narrow,this.offsets.mainY1],[this.offsets.widthNarrow,this.offsets.heightMainBars+this.offsets.mainY1]],d=(function(){var c,d,f=ab,g=ac,h=ag,i=ae,j=af,k=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],m=250,n=T,o=(0,N.Z)("start","zoom","end"),p=0;function a(a){a.property("__zoom",ad).on("wheel.zoom",x).on("mousedown.zoom",y).on("dblclick.zoom",z).filter(j).on("touchstart.zoom",A).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function q(a,b){return(b=Math.max(k[0],Math.min(k[1],b)))===a.k?a:new e(b,a.x,a.y)}function r(a,b,c){var d=b[0]-c[0]*a.k,f=b[1]-c[1]*a.k;return d===a.x&&f===a.y?a:new e(a.k,d,f)}function s(a){return[(+a[0][0]+ +a[1][0])/2,(+a[0][1]+ +a[1][1])/2]}function t(a,b,c){a.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var d=arguments,k=w(this,d),a=g.apply(this,d),f=null==c?s(a):"function"==typeof c?c.apply(this,d):c,h=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),i=this.__zoom,j="function"==typeof b?b.apply(this,d):b,l=n(i.invert(f).concat(h/i.k),j.invert(f).concat(h/j.k));return function(a){if(1===a)a=j;else{var b=l(a),c=h/b[2];a=new e(c,f[0]-b[0]*c,f[1]-b[1]*c)}k.zoom(null,a)}})}function w(a,c,d){return!d&&a.__zooming||new b(a,c)}function b(a,b){this.that=a,this.args=b,this.active=0,this.extent=g.apply(a,b),this.taps=0}function x(){if(f.apply(this,arguments)){var a=w(this,arguments),b=this.__zoom,d=Math.max(k[0],Math.min(k[1],b.k*Math.pow(2,i.apply(this,arguments)))),c=W(this);if(a.wheel)(a.mouse[0][0]!==c[0]||a.mouse[0][1]!==c[1])&&(a.mouse[1]=b.invert(a.mouse[0]=c)),clearTimeout(a.wheel);else{if(b.k===d)return;a.mouse=[c,b.invert(c)],(0,v.e1)(this),a.start()}aa(),a.wheel=setTimeout(function(){a.wheel=null,a.end()},150),a.zoom("mouse",h(r(q(b,d),a.mouse[0],a.mouse[1]),a.extent,l))}}function y(){if(!d&&f.apply(this,arguments)){var a=w(this,arguments,!0),c=(0,u.Z)(B.B.view).on("mousemove.zoom",function(){if(aa(),!a.moved){var b=B.B.clientX-e,c=B.B.clientY-g;a.moved=b*b+c*c>p}a.zoom("mouse",h(r(a.that.__zoom,a.mouse[0]=W(a.that),a.mouse[1]),a.extent,l))},!0).on("mouseup.zoom",function(){c.on("mousemove.zoom mouseup.zoom",null),Q(B.B.view,a.moved),aa(),a.end()},!0),b=W(this),e=B.B.clientX,g=B.B.clientY;P(B.B.view),_(),a.mouse=[b,this.__zoom.invert(b)],(0,v.e1)(this),a.start()}}function z(){if(f.apply(this,arguments)){var b=this.__zoom,c=W(this),e=b.invert(c),i=b.k*(B.B.shiftKey?.5:2),d=h(r(q(b,i),c,e),g.apply(this,arguments),l);aa(),m>0?(0,u.Z)(this).transition().duration(m).call(t,d,c):(0,u.Z)(this).call(a.transform,d)}}function A(){if(f.apply(this,arguments)){var h,d,e,b,g=B.B.touches,i=g.length,a=w(this,arguments,B.B.changedTouches.length===i);for(_(),d=0;d<i;++d)e=g[d],b=[b=X(this,g,e.identifier),this.__zoom.invert(b),e.identifier],a.touch0?a.touch1||a.touch0[2]===b[2]||(a.touch1=b,a.taps=0):(a.touch0=b,h=!0,a.taps=1+ !!c);c&&(c=clearTimeout(c)),h&&(a.taps<2&&(c=setTimeout(function(){c=null},500)),(0,v.e1)(this),a.start())}}function C(){if(this.__zooming){var g,b,d,n,a=w(this,arguments),o=B.B.changedTouches,p=o.length;for(aa(),c&&(c=clearTimeout(c)),a.taps=0,g=0;g<p;++g)b=o[g],d=X(this,o,b.identifier),a.touch0&&a.touch0[2]===b.identifier?a.touch0[0]=d:a.touch1&&a.touch1[2]===b.identifier&&(a.touch1[0]=d);if(b=a.that.__zoom,a.touch1){var i=a.touch0[0],j=a.touch0[1],k=a.touch1[0],m=a.touch1[1],e=(e=k[0]-i[0])*e+(e=k[1]-i[1])*e,f=(f=m[0]-j[0])*f+(f=m[1]-j[1])*f;b=q(b,Math.sqrt(e/f)),d=[(i[0]+k[0])/2,(i[1]+k[1])/2],n=[(j[0]+m[0])/2,(j[1]+m[1])/2]}else{if(!a.touch0)return;d=a.touch0[0],n=a.touch0[1]}a.zoom("touch",h(r(b,d,n),a.extent,l))}}function D(){if(this.__zooming){var b,c,a=w(this,arguments),e=B.B.changedTouches,g=e.length;for(_(),d&&clearTimeout(d),d=setTimeout(function(){d=null},500),b=0;b<g;++b)c=e[b],a.touch0&&a.touch0[2]===c.identifier?delete a.touch0:a.touch1&&a.touch1[2]===c.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps){var f=(0,u.Z)(this).on("dblclick.zoom");f&&f.apply(this,arguments)}}}return a.transform=function(a,c,d){var b=a.selection?a.selection():a;b.property("__zoom",ad),a!==b?t(a,c,d):b.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof c?c.apply(this,arguments):c).end()})},a.scaleBy=function(b,d,c){a.scaleTo(b,function(){var a=this.__zoom.k,b="function"==typeof d?d.apply(this,arguments):d;return a*b},c)},a.scaleTo=function(b,d,c){a.transform(b,function(){var a=g.apply(this,arguments),b=this.__zoom,e=null==c?s(a):"function"==typeof c?c.apply(this,arguments):c,f=b.invert(e),i="function"==typeof d?d.apply(this,arguments):d;return h(r(q(b,i),e,f),a,l)},c)},a.translateBy=function(b,c,d){a.transform(b,function(){return h(this.__zoom.translate("function"==typeof c?c.apply(this,arguments):c,"function"==typeof d?d.apply(this,arguments):d),g.apply(this,arguments),l)})},a.translateTo=function(b,d,e,c){a.transform(b,function(){var a=g.apply(this,arguments),f=this.__zoom,b=null==c?s(a):"function"==typeof c?c.apply(this,arguments):c;return h($.translate(b[0],b[1]).scale(f.k).translate("function"==typeof d?-d.apply(this,arguments):-d,"function"==typeof e?-e.apply(this,arguments):-e),a,l)},c)},b.prototype={start:function(){return 1== ++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,a){return this.mouse&&"mouse"!==b&&(this.mouse[1]=a.invert(this.mouse[0])),this.touch0&&"touch"!==b&&(this.touch0[1]=a.invert(this.touch0[0])),this.touch1&&"touch"!==b&&(this.touch1[1]=a.invert(this.touch1[0])),this.that.__zoom=a,this.emit("zoom"),this},end:function(){return 0== --this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){(0,B._H)(new Z(a,b,this.that.__zoom),o.apply,o,[b,this.that,this.args])}},a.wheelDelta=function(b){return arguments.length?(i="function"==typeof b?b:Y(+b),a):i},a.filter=function(b){return arguments.length?(f="function"==typeof b?b:Y(!!b),a):f},a.touchable=function(b){return arguments.length?(j="function"==typeof b?b:Y(!!b),a):j},a.extent=function(b){return arguments.length?(g="function"==typeof b?b:Y([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),a):g},a.scaleExtent=function(b){return arguments.length?(k[0]=+b[0],k[1]=+b[1],a):[k[0],k[1]]},a.translateExtent=function(b){return arguments.length?(l[0][0]=+b[0][0],l[1][0]=+b[1][0],l[0][1]=+b[0][1],l[1][1]=+b[1][1],a):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},a.constrain=function(b){return arguments.length?(h=b,a):h},a.duration=function(b){return arguments.length?(m=+b,a):m},a.interpolate=function(b){return arguments.length?(n=b,a):n},a.on=function(){var b=o.on.apply(o,arguments);return b===o?a:b},a.clickDistance=function(b){return arguments.length?(p=(b=+b)*b,a):Math.sqrt(p)},a})().translateExtent(a).extent(a).on("zoom",function(){var f=c,a=B.B.transform,d=c.zoomCoordinates[1]-c.zoomCoordinates[0],e=(d-d/a.k)/2,b=[Math.max(c.zoomCoordinates[0]+e,c.scales.xNav(0)),Math.min(c.zoomCoordinates[1]-e,c.scales.xNav.domain()[1])];b[1]-b[0]<500&&a.k>1||(c.zoomCoordinates=b,a.rescaleX(c.scales.xMain),c._groups.navBrush.call(c.brush.move,function(){return f.zoomCoordinates.map(f.scales.xNav)}))}),b=["option","shift"];aE().bind(b,function(){c._groups.keyPressOverlay=c.svg.append("rect").attr("class","overlay").attr("text","zoom").attr("transform","translate("+c.offsets.x1Narrow+","+c.offsets.mainY1+")").attr("width",c.offsets.widthNarrow).attr("height",c.offsets.navCdsY1-c.offsets.mainY1).call(d).on("wheel",function(){B.B.preventDefault()})},"keydown"),aE().bind(b,function(){c._groups.keyPressOverlay&&c._groups.keyPressOverlay.remove()},"keyup")},b.prototype._createGroups=function(){this._groups={},this._groups.mainBars=this.svg.append("g").attr("id","mainBars").attr("clip-path","url(#clip)").attr("transform","translate("+this.offsets.x1Narrow+","+this.offsets.mainY1+")"),this._groups.navBrush=this.svg.append("g").attr("id","navBrush").attr("transform","translate("+this.offsets.x1+","+this.offsets.brushY1+")"),this._groups.navBrushWrapping=this.svg.append("g").attr("id","navBrushWrapping").attr("transform","translate("+this.offsets.x1+","+this.offsets.brushY1+")"),this._groups.navCds=this.svg.append("g").attr("id","navCds").attr("transform","translate("+this.offsets.x1+","+this.offsets.navCdsY1+")"),this._groups.mainCds=this.svg.append("g").attr("id","mainCds").attr("transform","translate("+this.offsets.x1Narrow+","+this.offsets.mainCdsY1+")"),this._groups.mainYAxis=this.svg.append("g").attr("id","entropyYAxis").attr("transform","translate("+this.offsets.x1+","+this.offsets.mainY1+")"),this._groups.mainXAxis=this.svg.append("g").attr("id","mainXAxis").attr("transform","translate("+this.offsets.x1Narrow+","+this.offsets.mainAxisY1+")"),this._groups.navXAxis=this.svg.append("g").attr("id","navXAxis").attr("transform","translate("+this.offsets.x1+","+this.offsets.navAxisY1+")"),this._groups.mainClip=this.svg.append("g").attr("id","mainClip"),this._groups.mainClip.append("clipPath").attr("class","clipPath").attr("id","clip").append("rect").attr("id","cliprect").attr("x",0).attr("y",0).attr("width",this.offsets.widthNarrow).attr("height",this.offsets.heightMainBars)},b.prototype._mainTooltipAa=function(a){return(function(b){var c=(0,aH.ZR)(this.genomeMap,this.selectedCds.name);if(!c)return console.error("CDS ".concat(this.selectedCds.name," not found in genomeMap (i.e. JSON annotations)")),null;var d=(0,aH.le)(c,a.codon),e=d.frame,f=d.nucCoordinates;return(0,t.jsxs)("div",{className:"tooltip",style:A.fu.tooltip,children:[(0,t.jsx)("div",{children:b("Codon {{codon}} in protein {{protein}}",{codon:a.codon,protein:this.selectedCds.name})}),(0,t.jsx)("p",{}),(0,t.jsx)("div",{children:b("Nuc positions {{positions}}",{positions:f.join(", ")})}),(0,t.jsx)("p",{}),(0,t.jsxs)("div",{children:["-"===c.strand?"Negative strand":"Positive strand".concat("+"!==c.strand?" (assumed)":""),", ".concat(e)]}),(0,t.jsx)("p",{}),(0,t.jsx)("div",{children:this.showCounts?"".concat(b("Num changes observed"),": ").concat(a.y):"".concat(b("Normalised Shannon entropy"),": ").concat(a.y)}),(0,t.jsx)("div",{style:A.fu.comment,children:b("Click to color tree & map by this genotype")})]})}).bind(this)},b.prototype._mainTooltipNuc=function(a){return(function(b){var d,e=a.x,c=(0,aH.Io)(this.genomeMap,e);return d=c?(0,t.jsxs)("div",{children:["Overlaps with ".concat(c.length," CDS segment").concat(c.length>1?"s":"",":"),(0,t.jsx)("p",{}),(0,t.jsx)("table",{className:"entropy-table",children:(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{minWidth:"60px"},children:"CDS"}),(0,t.jsx)("td",{children:"Nt Pos (in CDS)"}),(0,t.jsx)("td",{children:"AA Pos"})]},"header"),c.map(function(a){return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:a.cds.name}),(0,t.jsx)("td",{children:a.nucLocal}),(0,t.jsx)("td",{children:a.aaLocal})]},a.cds.name+a.nucLocal)})]})})]}):(0,t.jsx)("div",{children:b("No overlapping CDSs")}),(0,t.jsxs)("div",{className:"tooltip",style:A.fu.tooltip,children:[(0,t.jsx)("div",{children:b("Nucleotide {{nuc}}",{nuc:e})}),(0,t.jsx)("p",{}),d,(0,t.jsx)("p",{}),(0,t.jsx)("div",{children:this.showCounts?"".concat(b("Num changes observed"),": ").concat(a.y):"".concat(b("Normalised Shannon entropy"),": ").concat(a.y)}),(0,t.jsx)("div",{style:A.fu.comment,children:b("Click to color tree & map by this genotype")})]})}).bind(this)},b.prototype._cdsTooltip=function(a){return(function(g){var b,e,f,c,d,h=a.cds.segments.length>1;return(0,t.jsxs)("div",{className:"tooltip entropy",style:A.fu.tooltip,children:[(0,t.jsx)("table",{className:"entropy-table",children:(0,t.jsxs)("tbody",{children:[a.cds.displayName&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Name"}),(0,t.jsx)("td",{children:a.cds.displayName})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"CDS name"}),(0,t.jsx)("td",{children:a.cds.name})]}),a.cds.description&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Description"}),(0,t.jsx)("td",{children:a.cds.description})]}),a.cds.name!==a.gene.name&&(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Gene name"}),(0,t.jsx)("td",{children:a.gene.name})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"CDS length"}),(0,t.jsx)("td",{children:"".concat(a.cds.length/3," amino acids")})]}),h?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"CDS segment"}),(0,t.jsx)("td",{children:"".concat(a.segmentNumber,"/").concat(a.cds.segments.length)})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Segment length"}),(0,t.jsx)("td",{children:(c=(f=(e=a.rangeLocal)[1]-e[0]+1)%3,d=String(Math.floor(f/3)),c&&(d+=1===c?" \u2153":" \u2154"),d+" amino acids")})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Segment coords"}),(0,t.jsx)("td",{children:a.rangeGenome.join(" - ")+" (genome coordinates)"})]})]}):(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"CDS coords"}),(0,t.jsx)("td",{children:a.rangeGenome.join(" - ")+" (genome coordinates)"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Strand"}),(0,t.jsx)("td",{children:"+"===a.cds.strand?"Positive":"Negative"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Frame"}),(0,t.jsx)("td",{children:"".concat(a.frame," (").concat("+"===a.cds.strand?"F":"R").concat(a.frame,")")})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{style:{minWidth:"100px"},children:"Phase"}),(0,t.jsx)("td",{children:a.phase})]})]})}),(null===(b=this.selectedCds)|| void 0===b?void 0:b.name)!==a.cds.name&&(0,t.jsx)("div",{style:A.fu.comment,children:g("Click to view this CDS in isolation")})]})}).bind(this)};var aP=b,aQ=function(c){var d=c.d3event,e=c.width,f=c.height,g=c.children;if(!d)return null;var b={container:{position:"absolute",maxWidth:500,padding:"10px",borderRadius:10,zIndex:1e3,pointerEvents:"none",fontFamily:A.fu.panel.fontFamily,fontSize:14,lineHeight:1,fontWeight:A.fu.panel.fontWeight,color:A.fu.panel.color,backgroundColor:A.fu.panel.backgroundColor,wordWrap:"break-word",wordBreak:"break-word"}},a={x:d.layerX,y:d.layerY};return a.x<.7*e?b.container.left=a.x:b.container.right=e-a.x,a.y<.5*f?b.container.top=a.y:b.container.bottom=f-a.y,(0,t.jsx)("div",{style:b.container,children:g})},aR=a(57605),aS=a(6290);function aT(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function m(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function aU(a){return(aU=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function aV(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){m(d,a,c[a])})}return d}function aW(a,b){return(aW=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}a(94037);var n="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:paramtypes",[void 0]),o="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:type",Function),p=(0,j.$j)(function(a){return{selectedCds:a.entropy.selectedCds,selectedPositions:a.entropy.selectedPositions,bars:a.entropy.bars,genomeMap:a.entropy.genomeMap,maxYVal:a.entropy.maxYVal,showCounts:a.entropy.showCounts,loaded:a.entropy.loaded,colorBy:a.controls.colorBy,zoomMin:a.controls.zoomMin,zoomMax:a.controls.zoomMax,defaultColorBy:a.controls.defaults.colorBy,panelLayout:a.controls.panelLayout,narrativeMode:a.narrative.display,showOnlyPanels:a.controls.showOnlyPanels}}),q=c=p(c=o(c=n((c=(m(f=function(e){"use strict";(function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&aW(b,a)})(d,e);var f,g,a,b,c,h=(f=d,g=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=aU(f);if(g){var h=aU(this).constructor;c=Reflect.construct(e,arguments,h)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function d(b){var a;return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),(a=h.call(this,b)).state={hovered:!1,chart:!1},a}return a=d,b=[{key:"onHover",value:function(a){this.setState({hovered:a})}},{key:"onLeave",value:function(){this.setState({hovered:!1})}},{key:"onClick",value:function(a){if(!this.props.narrativeMode){var b=void 0===a.codon?(0,aR.bP)({positions:[a.x]}):(0,aR.bP)({gene:this.props.selectedCds.name,positions:[a.codon]});this.props.dispatch((0,z.j)(b)),this.setState({hovered:!1})}}},{key:"onCdsClick",value:function(a){this.props.dispatch((0,aF.J8)((0,aH.ZR)(this.props.genomeMap,a.cds.name))),this.setState({hovered:!1})}},{key:"resetLayout",value:function(a){var b=this;if(this.props.narrativeMode||!this.state.chart)return null;var c=this.props.selectedCds===aG.BJ;return(0,t.jsx)("div",{style:aV({},A.ug,a.resetLayout),children:(0,t.jsx)("button",{style:A.fp,onClick:function(){c?b.state.chart.update({zoomMin:b.state.chart.zoomBounds[0],zoomMax:b.state.chart.zoomBounds[1]}):b.props.dispatch((0,aF.J8)(aG.BJ))},children:(0,t.jsxs)("span",{style:a.switchTitle,children:[" ","RESET LAYOUT"," "]})},1)})}},{key:"entropyCountSwitch",value:function(a){var c=this,b=this.props.t;return this.props.narrativeMode?null:(0,t.jsxs)("div",{style:aV({},A.ug,a.entropyCountSwitch),children:[(0,t.jsx)("button",{style:this.props.showCounts?A.fp:A.cq,onClick:function(){return c.props.dispatch((0,aF.wC)(!1))},children:(0,t.jsxs)("span",{style:a.switchTitle,children:[" ",b("entropy")," "]})},1),(0,t.jsx)("button",{style:this.props.showCounts?A.cq:A.fp,onClick:function(){return c.props.dispatch((0,aF.wC)(!0))},children:(0,t.jsxs)("span",{style:a.switchTitle,children:[" ",b("events")," "]})},2)]})}},{key:"setUp",value:function(a){var b=new aP(this.d3entropy,a.genomeMap,{onHover:this.onHover.bind(this),onLeave:this.onLeave.bind(this),onClick:this.onClick.bind(this),onCdsClick:this.onCdsClick.bind(this)});b.render(a),a.narrativeMode&&(0,u.Z)(this.d3entropy).selectAll(".handle--custom").style("visibility","hidden"),this.setState({chart:b})}},{key:"componentDidMount",value:function(){this.props.loaded&&this.setUp(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(a){if(a.loaded||this.setState({chart:!1}),!this.state.chart){a.loaded&&this.setUp(a);return}if(this.props.width!==a.width||this.props.height!==a.height)this.state.chart.render(a);else{var b={};(this.props.zoomMax!==a.zoomMax||this.props.zoomMin!==a.zoomMin)&&(b.zoomMax=a.zoomMax,b.zoomMin=a.zoomMin),this.props.bars!==a.bars&&(b.newBars=[a.bars,a.maxYVal]),this.props.selectedCds!==a.selectedCds&&(b.selectedCds=a.selectedCds),this.props.showCounts!==a.showCounts&&(b.showCounts=a.showCounts),(0,x.isEqual)(this.props.selectedPositions,a.selectedPositions)||(b.selectedPositions=a.selectedPositions),Object.keys(b).length&&this.state.chart.update(b)}this.props.narrativeMode!==a.narrativeMode&&(a.narrativeMode?(0,u.Z)(this.d3entropy).selectAll(".handle--custom").style("visibility","hidden"):(0,u.Z)(this.d3entropy).selectAll(".handle--custom").style("visibility","visible"))}},{key:"title",value:function(){return this.props.width<500?"Diversity":this.props.selectedCds===aG.BJ?"Nucleotide diversity of genome":"Amino acid diversity of CDS ".concat(this.props.selectedCds.name)}},{key:"render",value:function(){var b,c=this,a={switchContainer:{position:"absolute",marginTop:-5,paddingLeft:(b=this.props.width)-100},switchContainerWide:{position:"absolute",marginTop:-25,paddingLeft:b-185},switchTitle:{margin:5,position:"relative",top:-1},resetLayout:{position:"absolute",right:190,top:0,zIndex:100},entropyCountSwitch:{position:"absolute",right:50,top:0,zIndex:100},helpIcon:{position:"absolute",right:25,top:3,fontSize:"16px",cursor:"help",color:"#888"}};return(0,t.jsxs)(y.Z,{infocard:this.props.showOnlyPanels,title:this.title(),children:[(0,t.jsx)(aQ,{d3event:this.state.hovered.d3event,width:this.props.width,height:this.props.height,children:this.state.hovered?this.state.hovered.tooltip(this.props.t):null}),(0,t.jsx)("svg",{id:"d3entropyParent",style:{pointerEvents:"auto"},width:this.props.width,height:this.props.height,children:(0,t.jsx)("g",{ref:function(a){c.d3entropy=a},id:"d3entropy"})}),this.resetLayout(a),this.entropyCountSwitch(a),(0,t.jsx)("span",{style:a.helpIcon,"data-tip":!0,"data-for":"entropyHelp",children:(0,t.jsx)(w.DAO,{})}),(0,t.jsx)(aS.mi,{place:"left",type:"dark",effect:"solid",id:"entropyHelp",style:{maxWidth:"50vh"},children:(0,t.jsxs)("div",{children:["This panel displays the observed diversity across the current genome or a selected CDS"," (currently you are viewing ".concat(this.props.selectedCds===aG.BJ?"the genome":"CDS ".concat(this.props.selectedCds.name),"). "),(0,t.jsx)("p",{}),"The lower axis shows the genome with +ve strand CDSs above and -ve strand CDSs below and the grey overlay allows zooming in to a region. The upper axis shows either the zoomed in region of the genome or a selected CDS; in the latter case the coordinates represent amino acids.",(0,t.jsx)("p",{}),"Clicking on a CDS will select it and show it on the upper axis.",' Clicking "Reset Layout" will always return you to viewing the entire genome.']})})]})}},{key:"componentWillUnmount",value:function(){}}],aT(a.prototype,b),c&&aT(a,c),d}(h.Component),"propTypes",{dispatch:d().func.isRequired,loaded:d().bool.isRequired,colorBy:d().string.isRequired,defaultColorBy:d().string.isRequired,selectedCds:d().any.isRequired,selectedPositions:d().array.isRequired}),f))||c)||c)||c)||c,r=(0,k.Zh)()(q),aX=r},89702:function(e,b,a){"use strict";var f=a(28354),c=a(60822),g=a(17587);function h(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function i(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function j(a){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function k(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){i(d,a,c[a])})}return d}function l(a,b){return(l=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var d=function(e){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&l(b,a)}(d,e);var i,m,a,b,c,n=(i=d,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=j(i);if(m){var f=j(this).constructor;c=Reflect.construct(e,arguments,f)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function d(){return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),n.apply(this,arguments)}return a=d,b=[{key:"getStyles",value:function(){return{base:{backgroundColor:"#FFFFFF",display:"inline-block",marginLeft:14,marginRight:0,marginTop:0,marginBottom:10,paddingLeft:6,paddingRight:6,paddingBottom:6,overflow:"hidden",position:"relative"},title:{fontFamily:g.Cc,color:g.I6,fontSize:16,marginLeft:0,marginTop:0,marginBottom:8,fontWeight:500,backgroundColor:"#FFFFFF",borderTop:"thin solid #BBB",minHeight:"15px"}}}},{key:"getStylesInfoCard",value:function(){return{base:{backgroundColor:"#FFFFFF",display:"inline-block",marginLeft:14,marginRight:0,marginTop:0,marginBottom:10,paddingLeft:6,paddingRight:6,paddingBottom:6,overflow:"hidden",position:"relative"},title:{fontFamily:g.Cc,color:"#fff",fontSize:16,marginLeft:0,marginTop:0,marginBottom:8,fontWeight:500,backgroundColor:"#FFFFFF"}}}},{key:"render",value:function(){var a=this.props.infocard?this.getStylesInfoCard():this.getStyles();return(0,f.jsxs)("div",{id:"".concat(this.props.title,"Card"),style:k({},a.base,this.props.style),children:[(0,f.jsx)("div",{id:"CardTitle",style:k({},a.title,this.props.titleStyles),children:this.props.title}),(0,f.jsx)("div",{id:"CardContentContainer",style:{display:"flex",justifyContent:this.props.center?"center":"flex-start"},children:this.props.children})]})}}],h(a.prototype,b),c&&h(a,c),d}(c.Component);b.Z=d},26250:function(m,d,b){"use strict";b.d(d,{ZK:function(){return v},u:function(){return u}});var n=b(28354);b(60822);var a=b(37536),o=b(54735),e=b(57510);function p(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function f(){var a=p(["\n  color: #5097BA;\n  cursor: pointer;\n  font-weight: 300;\n  padding: 0px 2px 0px 2px;\n"]);return f=function(){return a},a}function g(){var a=p(["\n  display: inline-block;\n  cursor: help;\n  margin: 0px 0px 0px 2px;\n"]);return g=function(){return a},a}function h(){var a=p(["\n  cursor: pointer;\n  color: #5097BA;\n  /* left vertical border */\n  border-width: 0px 0px 0px 1px;\n  border-style: solid;\n  border-color: #BDD8E5; */\n  min-width: 20px;\n  padding: 0px 1px 0px 5px;\n  display: inline-block;\n  text-align: center;\n  &:hover, &:focus {\n    & > svg {\n      color: #0071e6;\n    }\n  }\n  & > svg {\n    transform: translate(-2px, 2px);\n  }\n"]);return h=function(){return a},a}function i(){var a=p(["\n  margin: 1px 2px 1px 2px;\n  padding: 0px 2px 0px 2px;\n  &:hover {\n    text-decoration: underline; \n  }\n"]);return i=function(){return a},a}function j(){var a=p(["\n  background-color: #E9F2F6;\n  border-radius: 2px;\n  border: 1px solid #BDD8E5;\n  border-width: 1;\n  border-radius: 2px;\n  margin: 0px 2px 0px 0px;\n  &:hover {\n    text-decoration: none;\n  }\n"]);return j=function(){return a},a}function k(){var a=p(["\n  background-color: #E9F2F6;\n  ",";\n  display: inline-block;\n  font-size: 14px;\n  border-radius: 2px;\n  border-width: 1px;\n  border-style: solid;\n  border-color: #BDD8E5;\n"]);return k=function(){return a},a}function l(){var a=p(["\n  max-width: 30vh;\n  font-weight: 400;\n  white-space: normal;\n  line-height: 1.2;\n  padding: 4px !important; /* override ReactTooltip's internal styling */\n  & > br {\n    margin-bottom: 10px;\n  }\n"]);return l=function(){return a},a}var c=a.ZP.div.withConfig({componentId:"sc-b817976f-0"})(f()),q=(0,a.ZP)(c).withConfig({componentId:"sc-b817976f-1"})(g()),r=a.ZP.div.withConfig({componentId:"sc-b817976f-2"})(h()),s=((0,a.ZP)(c).withConfig({componentId:"sc-b817976f-3"})(i()),(0,a.ZP)(c).withConfig({componentId:"sc-b817976f-4"})(j()),a.ZP.div.withConfig({componentId:"sc-b817976f-5"})(k(),function(a){return a.striped?"background: repeating-linear-gradient(135deg, #E9F2F6, #E9F2F6 5px, #FFFFFF 5px, #FFFFFF 10px);":""})),t=(0,a.ZP)(e.Z).withConfig({componentId:"sc-b817976f-6"})(l()),u=function(a){var b=a.id,c=a.children;return(0,n.jsx)(t,{place:"bottom",type:"dark",effect:"solid",delayShow:300,id:b,children:c})},v=function(a){var f=a.remove,d=a.canMakeInactive,b=a.active,g=a.activate,h=a.inactivate,i=a.children,c=a.id,e=a.onHoverMessage;return(0,n.jsxs)(s,{striped:d&&!b,children:[(0,n.jsx)(q,{active:!d||b,"data-tip":!0,"data-for":c,children:i}),(0,n.jsx)(u,{id:c,children:d&&!b?"This filter is currently inactive":void 0===e?"The visible data is being filtered by this":e}),d&&(0,n.jsxs)(r,{onClick:b?h:g,role:"button",tabIndex:0,"data-tip":!0,"data-for":c+"active",children:[b?(0,n.jsx)(o.z5B,{}):(0,n.jsx)(o.tjB,{}),(0,n.jsx)(u,{id:c+"active",children:b?"Inactivate this filter":"Re-activate this filter"})]}),(0,n.jsxs)(r,{onClick:f,role:"button",tabIndex:0,children:[(0,n.jsx)(o.Xm5,{"data-tip":!0,"data-for":c+"remove"}),(0,n.jsx)(u,{id:c+"remove",children:"Remove this filter"})]})]})}},71975:function(m,d,a){"use strict";a.d(d,{Z:function(){return I}});var b,c=a(28354),e=a(60822),f=a(46641),g=a(31884),n=a(59894),o=a(82379),p=a(69856),q=a(26250),r=a(44163),s=a(62525),t={country:"countries",authors:"authors"},u=function(a){var c="number"==typeof a?(0,r.hT)(a):a,b=c.split("-");return 3===b.length?"".concat(p.e7[b[1]]," ").concat(b[0]):c};function v(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function w(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function x(a){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function y(a,b){return(y=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function z(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||B(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(a){return function(a){if(Array.isArray(a))return v(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||B(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(a,c){if(a){if("string"==typeof a)return v(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return v(a,c)}}var C=function(b){var a=b.id;return(0,c.jsxs)("span",{style:{fontSize:"2rem",fontWeight:300,padding:"0px 4px 0px 2px",cursor:"help"},"data-tip":!0,"data-for":a,children:["\u2229",(0,c.jsx)(q.u,{id:a,children:"Groups of filters are combined by intersection"})]})},D=function(){return(0,c.jsx)("span",{style:{fontSize:"1.5rem",padding:"0px 3px 0px 2px"},children:"\u222A"})},E=(0,c.jsx)("span",{style:{fontSize:"2rem",fontWeight:300,padding:"0px 0px 0px 2px"},children:"{"}),F=(0,c.jsx)("span",{style:{fontSize:"2rem",fontWeight:300,padding:"0px 2px"},children:"}"}),G=(0,c.jsx)("span",{style:{fontSize:"1.8rem",fontWeight:300,padding:"0px 2px"},children:"{"}),H=(0,c.jsx)("span",{style:{fontSize:"1.8rem",fontWeight:300,padding:"0px 2px"},children:"}"}),h="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:paramtypes",[void 0]),i="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:type",Function),j=(0,f.$j)(function(a){var b;return{browserDimensions:a.browserDimensions.browserDimensions,filters:a.controls.filters,animationPlayPauseButton:a.controls.animationPlayPauseButton,metadata:a.metadata,nodes:a.tree.nodes,totalStateCounts:a.tree.totalStateCounts,totalStateCountsSecondTree:null===(b=a.treeToo)|| void 0===b?void 0:b.totalStateCounts,visibility:a.tree.visibility,selectedClade:a.tree.selectedClade,dateMin:a.controls.dateMin,dateMax:a.controls.dateMax,absoluteDateMin:a.controls.absoluteDateMin,absoluteDateMax:a.controls.absoluteDateMax,branchLengthsToDisplay:a.controls.branchLengthsToDisplay,measurementsFilters:a.controls.measurementsFilters,measurementsFields:a.measurements.collectionToDisplay.fields}}),k=b=j(b=i(b=h((b=function(f){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&y(b,a)}(e,f);var g,h,a,b,d,i=(g=e,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=x(g);if(h){var f=x(this).constructor;c=Reflect.construct(e,arguments,f)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function e(a){return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,e),i.call(this,a)}return a=e,b=[{key:"createIndividualBadge",value:function(a){var f=a.filterName,b=a.item,d=a.label,e=a.onHoverMessage,g=this;return(0,c.jsx)(q.ZK,{id:String(b.value),remove:function(){g.props.dispatch((0,n.Rb)("remove",f,[b.value]))},canMakeInactive:!0,onHoverMessage:e,active:b.active,activate:function(){g.props.dispatch((0,n.Rb)("add",f,[b.value]))},inactivate:function(){g.props.dispatch((0,n.Rb)("inactivate",f,[b.value]))},children:d},b.value)}},{key:"createFilterBadgesForTime",value:function(){var a=this;return[(0,c.jsx)(q.ZK,{id:"timefilter",onHoverMessage:"Filtering to data sampled in this date range",remove:function(){return a.props.dispatch((0,n.ms)({newMin:a.props.absoluteDateMin,newMax:a.props.absoluteDateMax}))},children:"".concat(u(this.props.dateMin)," to ").concat(u(this.props.dateMax))},"timefilter")]}},{key:"createFilterBadges",value:function(b){var a,e=this,c=b===p.Ac?"sample":b,d=this.props.filters[b].length,f=1===d?"Filtering data to this ".concat(c):"Filtering data to these ".concat(d," ").concat(((a=c)in t&&(a=t[a]),"s"!==a.slice(-1).toLowerCase()&&(a+="s"),a=a.replace(/_/g," ")));return this.props.filters[b].sort(function(a,b){return a.value<b.value?-1:a.value>b.value?1:0}).map(function(a){var c="".concat(a.value);if(b!==p.Ac){var h=null!==(k=null===(j=e.props.totalStateCounts[b])|| void 0===j?void 0:j.get(a.value))&& void 0!==k?k:0;if(e.props.totalStateCountsSecondTree&&Reflect.ownKeys(e.props.totalStateCountsSecondTree).length){var j,k,d,g,i=null!==(g=null===(d=e.props.totalStateCountsSecondTree[b])|| void 0===d?void 0:d.get(a.value))&& void 0!==g?g:0;c+=" (L: ".concat(h,", R: ").concat(i,")")}else c+=" (".concat(h,")")}return e.createIndividualBadge({filterName:b,item:a,label:c,onHoverMessage:f})})}},{key:"createFilterBadgesForGenotype",value:function(){var b=this,a=this.props.filters[p.vD],c=new Set(a.filter(function(a){return a.active}).map(function(a){return a.value}));return(0,s.Vv)(a.map(function(a){return a.value})).map(function(a){var l=b,f="nuc"===a[0];if(1===a[2].size){var d=A(a[2])[0],k=f?"Filtering to sequences with nucleotide ".concat(d," at base ").concat(a[1]):"Filtering to sequences with ".concat((0,p.Wv)(d)," at codon ").concat(a[1]," in ").concat(a[0]),g="".concat(a[0]," ").concat(a[1]).concat(d),h={active:c.has(g),value:g};return b.createIndividualBadge({filterName:p.vD,item:h,label:h.value,onHoverMessage:k})}var e=A(a[2]),m=e.map(function(b){return"".concat(a[0]," ").concat(a[1]).concat(b)}),i=e.filter(function(b,a){return c.has(m[a])}),j=function(a){return a.length>1?"".concat(a.slice(0,-1).join(", ")," or ").concat(a[a.length-1]):a[0]},n=f?"Filtering to sequences with nucleotides ".concat(j(i)," at position ").concat(a[1]):"Filtering to sequences with ".concat(j(i.map(function(a){return(0,p.Wv)(a)}))," at codon ").concat(a[1]," in ").concat(a[0]);return e.map(function(e){var b="".concat(a[0]," ").concat(a[1]).concat(e),d={active:c.has(b),value:b};return l.createIndividualBadge({filterName:p.vD,item:d,label:d.value,onHoverMessage:n})})})}},{key:"render",value:function(){var d=this,b=this.props.t,a=[];return(Reflect.ownKeys(this.props.filters).filter(function(a){return d.props.filters[a].length>0}).forEach(function(b){b===p.Ac?a.push({name:"sample",badges:d.createFilterBadges(p.Ac)}):b===p.vD?a.push({name:"genotype",badges:d.createFilterBadgesForGenotype()}):a.push({name:b,badges:d.createFilterBadges(b)})}),this.props.dateMin===this.props.absoluteDateMin&&this.props.dateMax===this.props.absoluteDateMax||a.push({name:"temporal",badges:this.createFilterBadgesForTime()}),a.length||Object.keys(this.props.measurementsFilters).length)?(0,c.jsxs)(c.Fragment,{children:[a.length>0&&(0,c.jsxs)(c.Fragment,{children:[b("Filtered to")+" ",a.map(function(a,b){var d=a.badges.length>1,e=0!==b;return(0,c.jsxs)("span",{style:{fontSize:"2rem",padding:"0px 2px"},children:[e&&(0,c.jsx)(C,{id:"intersect"+b}),d&&E," ",a.badges.map(function(b,d){return Array.isArray(b)?(0,c.jsxs)("span",{children:[G,b.map(function(a,d){return(0,c.jsxs)("span",{children:[a,d!==b.length-1&&(0,c.jsx)(D,{})]},a.props.id)}),H,d!==a.badges.length-1&&", "]},b.map(function(a){return a.props.id}).join("")):(0,c.jsxs)("span",{children:[b,d!==a.badges.length-1&&", "]},b.props.id)}),d&&F]},a.name)}),". "]}),Object.keys(this.props.measurementsFilters).length>0&& void 0!==this.props.measurementsFields&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("br",{}),b("Measurements filtered to")+" ",Object.entries(this.props.measurementsFilters).map(function(e,f){var a=z(e,2),b=a[0],g=a[1],i=d,h=d.props.measurementsFields.get(b).title;return(0,c.jsxs)("span",{children:[E,"".concat(h,": "),A(g).map(function(e,f){var d=z(e,2),a=d[0],j=d[1].active,k=i;return(0,c.jsxs)("span",{style:{fontSize:"2rem",padding:"0px 2px"},children:[(0,c.jsx)(q.ZK,{active:j,canMakeInactive:!0,id:String(a),remove:function(){return k.props.dispatch((0,o.GT)(b,a))},activate:function(){return k.props.dispatch((0,o.kq)(b,a,!0))},inactivate:function(){return k.props.dispatch((0,o.kq)(b,a,!1))},onHoverMessage:"Filtering measurements to this ".concat(h),children:a}),f<g.size-1&&","]},a)}),F,f<Object.keys(d.props.measurementsFilters).length-1&&(0,c.jsx)(C,{})]},b)})]})]}):null}}],w(a.prototype,b),d&&w(a,d),e}(e.Component))||b)||b)||b)||b,l=(0,g.Zh)()(k),I=l},10485:function(A,h,b){"use strict";b.d(h,{Z:function(){return bX}});var d,g=b(46641),c=b(28354),f=b(60822),i=b(31884),B=b(54735),C=b(59894),D=b(89702),E=b(56535),F=b(17587),G=function(a){var j=a.dispatch,g=a.transform,d=a.clipId,b=a.legendRectSize,e=a.legendSpacing,h=a.rectStroke,i=a.rectFill,f=a.label,k=a.value;return(0,c.jsxs)("g",{transform:g,onMouseEnter:function(){j((0,C.VB)({selectedLegendItem:k}))},onMouseLeave:function(){j((0,C.VB)())},children:[(0,c.jsx)("rect",{style:{strokeWidth:2},width:b,height:b,fill:i,stroke:h}),(0,c.jsxs)("text",{x:b+e+5,y:b-e,style:{fontSize:12,fill:F.I6,fontFamily:F.kU},clipPath:d?"url(#".concat(d,")"):void 0,children:[(0,c.jsx)("title",{children:f}),f]})]})},j=b(69856),H=b(57455),I=b(44163),J=b(5859);function K(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function L(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function M(a){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function N(a,b){return(N=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var k="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:paramtypes",[void 0]),l="undefined"!=typeof Reflect&&"function"==typeof Reflect.metadata&&Reflect.metadata("design:type",Function),m=(0,g.$j)(function(a){return{colorBy:a.controls.colorBy,colorings:a.metadata.colorings,colorScale:a.controls.colorScale,legendOpen:a.controls.legendOpen}}),n=d=m(d=l(d=k((d=function(f){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&N(b,a)}(e,f);var g,h,a,b,d,i=(g=e,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=M(g);if(h){var f=M(this).constructor;c=Reflect.construct(e,arguments,f)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function e(a){return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,e),i.call(this,a)}return a=e,b=[{key:"showLegend",value:function(){return void 0!==this.props.legendOpen?this.props.legendOpen:!(this.props.width<600)&&!(this.props.colorScale.visibleLegendValues.length>32)}},{key:"getSVGHeight",value:function(){return this.showLegend()?19*Math.ceil(this.props.colorScale.visibleLegendValues.length/2)+4+20||100:18}},{key:"getSVGWidth",value:function(){return this.showLegend()?290:this.getTitleWidth()+20}},{key:"getTransformationForLegendItem",value:function(a,b){return"translate(".concat(145*Math.floor(b/a)+10,",").concat(b%a*19,")")}},{key:"getTitleWidth",value:function(){return 15+5.3*(0,H.Jp)(this.props.colorings,this.props.colorBy).length}},{key:"toggleLegend",value:function(){this.props.dispatch({type:J.Nn,value:!this.props.legendOpen})}},{key:"legendTitle",value:function(){return(0,c.jsxs)("g",{id:"Title",children:[(0,c.jsx)("rect",{width:this.getTitleWidth(),height:"12",fill:"rgba(255,255,255,.85)"}),(0,c.jsx)("text",{x:this.getTitleOffset(),y:10,style:{fontSize:12,fill:F.I6,fontFamily:F.Cc,backgroundColor:"#fff"},children:(0,H.Jp)(this.props.colorings,this.props.colorBy)})]})}},{key:"legendChevron",value:function(){var a=this.showLegend()?-180:0,b=this.getArrowOffset();return(0,c.jsx)("g",{id:"Chevron",transform:"translate(".concat(b,",0)"),children:(0,c.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 1792 1792",children:[(0,c.jsx)("rect",{width:"1792",height:"1792",fill:"rgba(255,255,255,.85)"}),(0,c.jsx)("path",{fill:F.I6,style:{transform:"rotate(".concat(a,"deg)"),transformOrigin:"50% 50%",transition:"".concat(j.SM,"ms ease-in-out")},d:"M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"})]})})}},{key:"styleLabelText",value:function(a){if(this.props.colorScale.legendLabels&&this.props.colorScale.legendLabels.has(a))return this.props.colorScale.legendLabels.get(a);if("num_date"===this.props.colorBy||"temporal"===this.props.colorScale.scaleType){var b=this.props.colorScale.visibleLegendValues;if(b[b.length-1]-b[0]>10&&b[b.length-1]-parseInt(a,10)>=10)return parseInt(a,10);var c,d,e=(c=(0,I.hT)(a).split("-"),d=3,function(a){if(Array.isArray(a))return a}(c)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(c,d)||function(a,c){if(a){if("string"==typeof a)return K(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return K(a,c)}}(c,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=e[0],g=e[1];return e[2],"".concat(j.e7[g]," ").concat(f)}return a}},{key:"legendItems",value:function(){var d=this,a=this.props.colorScale.visibleLegendValues,e=Math.ceil(a.length/2),b=a.filter(function(a){return void 0!==a}).map(function(a,b){return(0,c.jsx)(G,{dispatch:d.props.dispatch,legendRectSize:15,legendSpacing:4,rectFill:(0,H.m6)(d.props.colorScale.scale(a)),rectStroke:(0,E.B8)(d.props.colorScale.scale(a)).toString(),transform:d.getTransformationForLegendItem(e,b),value:a,label:d.styleLabelText(a),index:b,clipId:b<e?"legendFirstColumnClip":void 0},d.props.colorScale.colorBy+a+b)});return(0,c.jsxs)("g",{id:"ItemsContainer",children:[(0,c.jsx)("rect",{width:this.getSVGWidth(),height:this.getSVGHeight(),fill:"rgba(255,255,255,.85)"}),(0,c.jsx)("clipPath",{id:"legendFirstColumnClip",children:(0,c.jsx)("rect",{x:"0",y:"0",width:140,height:this.getSVGHeight(),fill:"rgb(150, 154, 223)"})}),(0,c.jsx)("g",{id:"Items",transform:"translate(0,20)",children:b})]})}},{key:"getContainerStyles",value:function(){var a={position:"absolute",top:26,borderRadius:4,zIndex:1e3,userSelect:"none"};return a[this.props.right?"right":"left"]=5,a}},{key:"getArrowOffset",value:function(){return this.props.right?this.getSVGWidth()-20:this.getTitleWidth()}},{key:"getTitleOffset",value:function(){return this.props.right?this.getSVGWidth()-this.getTitleWidth()-15:5}},{key:"render",value:function(){var a=this;return this.props.colorScale?(0,c.jsxs)("svg",{id:"TreeLegendContainer",width:this.getSVGWidth(),height:this.getSVGHeight(),style:this.getContainerStyles(),children:[this.legendItems(),(0,c.jsxs)("g",{id:"TitleAndChevron",onClick:function(){return a.toggleLegend()},style:{cursor:"pointer",textAlign:"right"},children:[this.legendTitle(),this.legendChevron()]})]}):null}}],L(a.prototype,b),d&&L(a,d),e}(f.Component))||d)||d)||d)||d,O=n,P=b(38658),Q=b(96313),o=function(a){return 1===a["stroke-width"]?0:a["stroke-width"]>6?a["stroke-width"]+6:2*a["stroke-width"]};function R(a,e){let b=0;if(void 0===e)for(let c of a)(c=+c)&&(b+=c);else{let f=-1;for(let d of a)(d=+e(d,++f,a))&&(b+=d)}return b}function S(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function T(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||U(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(a,c){if(a){if("string"==typeof a)return S(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return S(a,c)}}var p=function(a){var b=a.n.node_attrs&&a.n.node_attrs.hidden;return b&&("always"===b||"timetree"===b&&"num_date"===a.that.distance||"divtree"===b&&"div"===a.that.distance)?"hidden":"visible"},V=function(a,b){return a.branchStroke},W=function(a,e,b){if(a){var c=a.that.svg.select("#"+(0,Q.yQ)("branchT",a.n.name));c.empty()||c.style("stroke",b);var d=a.that.svg.select("#"+(0,Q.yQ)("branchS",a.n.name));d.empty()||d.style("stroke",b)}},X=function(a){a&&W(a,a.n.parent.shell.branchStroke,a.branchStroke)},Y=function(a){a&&W(a,(0,H.ii)(a.n.parent.shell.branchStroke),(0,H.ii)(a.branchStroke))},Z=b(65074),$=b(26061),_=function(a){return"aa"===a?"10px":"14px"},aa=function(a){return"aa"===a?"500":"700"},ab=function(a,b,c,d){return function(c){if(b)return"visible";if(c.visibility!==j.m7)return"hidden";var e=.03;return c.n.tipCount>e*d?"visible":"aa"!==a&&(c.n.name===c.n.parent.name||"__ROOT"===c.n.parent.name)?"visible":"hidden"}},ac=function(a){return"num_date"===a?function(a){return(0,I.ti)("DAY",(0,I.vA)((0,$.rs)(a.n,"num_date")))}:function(b){return(0,$.rs)(b.n,a)}};function ad(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function ae(a){return function(a){if(Array.isArray(a))return ad(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||af(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function af(a,c){if(a){if("string"==typeof a)return ad(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return ad(a,c)}}var ag=function(a,b){a.forEach(function(a,e){for(var c in a.update=!1,b){var d=b[c][e];d!==a[c]&&(a[c]=d,a.update=!0)}})},ah={attrs:{".tip":{r:function(a){return a.r},cx:function(a){return a.xTip},cy:function(a){return a.yTip}},".branch":{},".vaccineCross":{d:function(a){return a.vaccineCross}},".conf":{d:function(a){return a.confLine}}},styles:{".tip":{fill:function(a){return a.fill},stroke:function(a){return a.tipStroke},visibility:function(a){return a.visibility===j.m7?"visible":"hidden"}},".conf":{stroke:function(a){return a.branchStroke},"stroke-width":o},".branch":{"stroke-width":function(a){return a["stroke-width"]+"px"},stroke:function(a){return V(a)},cursor:function(a){return a.visibility===j.m7?"pointer":"default"},visibility:p}}},ai=function(a,b){return function(c){ah.attrs[a]&&ae(b).filter(function(b){return ah.attrs[a][b]}).forEach(function(b){c.attr(b,ah.attrs[a][b])}),ah.styles[a]&&ae(b).filter(function(b){return ah.styles[a][b]}).forEach(function(b){c.style(b,ah.styles[a][b])})}},aj=function(b,c,d,a){b.selectAll(c).filter(function(a){return a.update}).transition().duration(a).call(d),a||(0,P.R8)()},ak=b(92498),al=b(80386),am=b(64881),an=b(32545),ao=b(40978);function ap(){var c,d,b=function(){var b=e().length,l=g[1]<g[0],a=g[l-0],m=g[1-l];c=(m-a)/Math.max(1,b-i+2*j),h&&(c=Math.floor(c)),a+=(m-a-c*(b-i))*k,d=c*(1-i),h&&(a=Math.round(a),d=Math.round(d));var n=(0,an.w6)(b).map(function(b){return a+c*b});return f(l?n.reverse():n)},a=(0,ao.Z)().unknown(void 0),e=a.domain,f=a.range,g=[0,1],h=!1,i=0,j=0,k=.5;return delete a.unknown,a.domain=function(a){return arguments.length?(e(a),b()):e()},a.range=function(a){return arguments.length?(g=[+a[0],+a[1]],b()):g.slice()},a.rangeRound=function(a){return g=[+a[0],+a[1]],h=!0,b()},a.bandwidth=function(){return d},a.step=function(){return c},a.round=function(a){return arguments.length?(h=!!a,b()):h},a.padding=function(a){return arguments.length?(i=j=Math.max(0,Math.min(1,a)),b()):i},a.paddingInner=function(a){return arguments.length?(i=Math.max(0,Math.min(1,a)),b()):i},a.paddingOuter=function(a){return arguments.length?(j=Math.max(0,Math.min(1,a)),b()):j},a.align=function(a){return arguments.length?(k=Math.max(0,Math.min(1,a)),b()):k},a.copy=function(){return ap().domain(e()).range(g).round(h).paddingInner(i).paddingOuter(j).align(k)},b()}function aq(a){var b=a.copy;return a.padding=a.paddingOuter,delete a.paddingInner,delete a.paddingOuter,a.copy=function(){return aq(b())},a}function ar(){return aq(ap().paddingInner(1))}function as(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function at(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function au(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||av(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function av(a,c){if(a){if("string"==typeof a)return as(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return as(a,c)}}var aw=function(a,d){var e=a.depth-a.pDepth;a.x=a.px+e*Math.cos(a.tau+.5*a.w),a.y=a.py+e*Math.sin(a.tau+.5*a.w);var f=a.tau;if(a.n.hasChildren)for(var c=0;c<a.n.children.length;c++){var b=a.n.children[c].shell;b.w=2*Math.PI*az(b.n)/d,b.tau=f,f+=b.w,b.px=a.x,b.py=a.y,aw(b,d)}};function ax(b,a){return a.step()>50?a.padding(.5):b.length<=4?a.padding(.4):b.length<=6?a.padding(.3):b.length<=10?a.padding(.2):a.padding(.1)}function ay(b,c,e){var f=c.step();if(!(50>=c.step())){for(var d=[],g=100;g--;)d.push((Math.random()-.5)*f*.5);var a=["".concat(b,"Base"),"".concat(b,"Tip"),d.length],h=a[0],i=a[1],j=a[2],k=0;l(e[0])}function l(a){if(a[h]=(0,Q.Fw)(a.n).shell[i],a[i]+=d[k++],k>=j&&(k=0),a.n.hasChildren){var b=!0,e=!1,f=void 0;try{for(var g,c=a.n.children[Symbol.iterator]();!(b=(g=c.next()).done);b=!0){var m=g.value;l(m.shell)}}catch(n){e=!0,f=n}finally{try{b||null==c.return||c.return()}finally{if(e)throw f}}}}}function az(a){return a.tipCount+.15*(a.fullTipCount-a.tipCount)}var q=b(8594);function aA(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function aB(a){return function(a){if(Array.isArray(a))return aA(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||aC(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aC(a,c){if(a){if("string"==typeof a)return aA(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return aA(a,c)}}var aD=function(a,b){"temporalWindow"in a||(a.temporalWindow=b.append("g").attr("id","temporalWindow"),a.temporalWindowStart=a.temporalWindow.append("rect").attr("class","temporalWindowStart"),a.temporalWindowEnd=a.temporalWindow.append("rect").attr("class","temporalWindowEnd")),"majorGrid"in a||(a.majorGrid=b.append("g").attr("id","majorGrid").attr("clip-path","url(#treeClip)")),"minorGrid"in a||(a.minorGrid=b.append("g").attr("id","minorGrid").attr("clip-path","url(#treeClip)")),"gridText"in a||(a.gridText=b.append("g").attr("id","gridText")),"axisText"in a||(a.axisText=b.append("g").attr("id","axisText"))},aE=function(b,d){var a=Math.pow(10,Math.floor(Math.log10(b)));b/a<2?a/=5:b/a<5&&(a/=2);var c=d;return(5===a||10===a)&&(c=5),{majorStep:a,minorStep:a/c}},aF=function(e,d,o,p,i){for(var j=[],k=[],l=aE(d-e,p),a=l.majorStep,f=l.minorStep,g=Math.floor(e/a)*a,m="radial"===o?e:g,n=d,h=0;h<=(d-g)/a+3;h++){var b=g+a*h;j.push({position:b,name:b.toFixed(Math.max(0,-Math.floor(Math.log10(a)))),visibility:b<m||b>n?"hidden":"visible",axis:i});for(var c=b+f;c<b+a&&c<d;c+=f)k.push({position:c,visibility:c<m||c>n+f?"hidden":"visible",axis:i})}return{majorGridPoints:j,minorGridPoints:k}},aG=function(h,g){var a={unit:"DAY",n:1},d={unit:"DAY",n:0},f=h/Math.floor(g/(g<1e3?130:180)),b={CENTURY:{t:100,max:void 0},DECADE:{t:10,max:5},FIVEYEAR:{t:5,max:1},YEAR:{t:1,max:3},MONTH:{t:1/12,max:6},WEEK:{t:1/52,max:1},DAY:{t:1/365,max:3}},c=Object.keys(b);a.unit="DAY";for(var e=0;e<c.length-1;e++)if(f>b[c[e]].t){a.unit=c[e];break}a.n=Math.floor(f/b[a.unit].t)||1,b[a.unit].max&&a.n>b[a.unit].max&&(a.unit=c[c.indexOf(a.unit)-1],a.n=Math.floor(f/b[a.unit].t)||1),a.n>1||"DAY"===a.unit?d.unit=a.unit:d.unit=c[c.indexOf(a.unit)+1];var i=a.n*b[a.unit].t;return d.n=Math.ceil(b[d.unit].t/i),{majorStep:a,minorStep:d}},aH=function(d,e,h,i){for(var c=[],j=[],f=aG(e-d,Math.abs(h)),b=f.majorStep,k=f.minorStep,l=(0,I.OO)(b.unit,(0,I.vA)(e)),a=(0,I.c8)(b.unit,(0,I.vA)(d));a<l;){c.push({date:a,position:(0,I.O$)((0,I.UW)(a)),name:(0,I.ti)(b.unit,a),visibility:"visible",axis:i});for(var g=0;g<b.n;g++)a=(0,I.OO)(b.unit,a)}return k.n&&c.forEach(function(f,b){a=(0,I.OO)(k.unit,f.date);for(var d=0;d<k.n-1;d++)a=(0,I.OO)(k.unit,a);for(var g=b===c.length-1?l:c[b+1].date;a<g;){j.push({position:(0,I.O$)((0,I.UW)(a)),visibility:"visible",axis:i});for(var e=0;e<k.n;e++)a=(0,I.OO)(k.unit,a)}}),{majorGridPoints:c,minorGridPoints:j}};(0,q.eR)("temporalWindowTransition").duration(j.VC).ease(function(a){return+a});var a=function(a,b,c){var d=this;this.grid=!1,this.attributes=["r","cx","cy","id","class","d"],this.params={regressionStroke:F.I6,regressionWidth:6,majorGridStroke:"#DDD",majorGridWidth:2,minorGridStroke:"#EEE",minorGridWidth:1,tickLabelSize:12,tickLabelFill:F.I6,minorTicks:4,orientation:[1,1],showGrid:!0,fillSelected:"#A73",radiusSelected:5,branchStroke:"#AAA",branchStrokeWidth:2,tipStroke:"#AAA",tipFill:"#CCC",tipStrokeWidth:1,tipRadius:4,fontFamily:F.kU,branchLabelKey:!1,branchLabelFont:F.kU,branchLabelFill:"#777",branchLabelFontWeight:500,branchLabelPadX:8,branchLabelPadY:5,tipLabels:!0,tipLabelFont:F.kU,tipLabelFill:"#555",tipLabelPadX:8,tipLabelPadY:2,mapToScreenDebounceTime:500,tipLabelFontSizeL1:8,tipLabelFontSizeL2:10,tipLabelFontSizeL3:12,tipLabelBreakL1:75,tipLabelBreakL2:50,tipLabelBreakL3:25},this.groups={},this.id=b,this.nodes=a.map(function(a){var b={that:d,n:a,x:0,y:0,inView:void 0===a.inView||a.inView};return a.shell=b,b}),this.zoomNode=this.nodes[c],this.strainToNode={},this.nodes.forEach(function(a){d.strainToNode[a.n.name]=a})};a.prototype.change=function(a){var p=a.changeColorBy,q=void 0!==p&&p,r=a.changeVisibility,k=void 0!==r&&r,s=a.changeTipRadii,t=a.changeBranchThickness,u=a.showConfidences,l=void 0!==u&&u,v=a.removeConfidences,w=a.zoomIntoClade,e=void 0!==w&&w,x=a.svgHasChangedDimensions,m=void 0!==x&&x,y=a.animationInProgress,z=a.changeNodeOrder,g=void 0!==z&&z,A=a.newDistance,f=void 0===A?void 0:A,B=a.newLayout,h=void 0===B?void 0:B,C=a.updateLayout,i=void 0===C?void 0:C,D=a.newBranchLabellingKey,E=a.showAllBranchLabels,F=void 0===E?void 0:E,G=a.newTipLabelKey,n=void 0===G?void 0:G,H=a.branchStroke,I=a.tipStroke,J=a.fill,K=a.visibility,L=a.tipRadii,M=a.branchThickness,N=a.focus,O=void 0===N?void 0:N,P=a.scatterVariables,b=new Set,d={},c=new Set,o=500;Date.now()-this.timeLastRenderRequested<1e3&&(o=0),q&&(b.add(".branch").add(".tip").add(".conf"),c.add("stroke").add("fill"),d.branchStroke=void 0===H?void 0:H,d.tipStroke=void 0===I?void 0:I,d.fill=void 0===J?void 0:J),k&&(b.add(".tip").add(".tipLabel").add(".branchLabel"),c.add("visibility").add("cursor"),d.visibility=void 0===K?void 0:K),void 0!==s&&s&&(b.add(".tip"),c.add("r"),d.r=void 0===L?void 0:L),void 0!==t&&t&&(b.add(".branch").add(".conf"),c.add("stroke-width"),d["stroke-width"]=void 0===M?void 0:M),(f||h||i||e||m||g)&&(b.add(".tip").add(".branch.S").add(".branch.T").add(".branch"),b.add(".vaccineCross").add(".vaccineDottedLine").add(".conf"),b.add(".branchLabel").add(".tipLabel"),b.add(".grid").add(".regression"),c.add("cx").add("cy").add("d").add("opacity").add("visibility")),g&&((0,Q.Td)({nodes:this.nodes,focus:O}),this.setDistance()),ag(this.nodes,d),q&&this.updateColorBy(),k&&this.regression&&(b.add(".regression"),this.calculateRegression()),e&&(this.nodes.forEach(function(a){a.inView=!1,a.update=!0}),this.zoomNode=e.n.hasChildren?e:e.n.parent.shell,(0,Q.Yo)(this.zoomNode,function(a){a.inView=!0})),(m||g)&&this.nodes.forEach(function(a){a.update=!0}),(f||i)&&this.setDistance(f),i&&(0,Q.Td)({nodes:this.nodes,focus:O}),(f||h||i||g)&&this.setLayout(h||this.layout,void 0===P?void 0:P),l&&(this.params.confidence=!0),void 0!==F&&(this.params.showAllBranchLabels=F,b.add(".branchLabel")),(c.has(["stroke-width"])||f||h||g||i||e||m||l)&&this.mapToScreen(),n&&(this.callbacks.tipLabel=ac(n),b.add(".tipLabel"));var j={removeConfidences:void 0!==v&&v,showConfidences:l,newBranchLabellingKey:void 0===D?void 0:D};j.timeSliceHasPotentiallyChanged=k||f,j.hideTipLabels=void 0!==y&&y||"none"===n,h?this.modifySVGInStages(b,c,o,1e3,j):this.modifySVG(b,c,o,j),this.timeLastRenderRequested=Date.now()},a.prototype.modifySVG=function(a,f,d,b){var e,h=this,c=[".tip",".vaccineDottedLine",".vaccineCross",".branch"];if(a.has(".branch.S")||a.has(".branch.T")){var i=this,g=a.has(".branch");g&&c.splice(c.indexOf(".branch"),1),[".S",".T"].forEach(function(b,c){a.has(".branch".concat(b))&&(e=g?function(a){ai(".branch",f)(a),a.attr("d",function(a){return a.branch[c]})}:function(a){a.attr("d",function(a){return a.branch[c]})},aj(i.svg,".branch".concat(b),e,d))})}c.forEach(function(b){a.has(b)&&(e=ai(b,f),aj(h.svg,b,e,d))}),b.hideTipLabels?this.removeTipLabels():a.has(".tipLabel")&&this.updateTipLabels(),a.has(".grid")&&(this.grid&&"unrooted"!==this.layout?this.addGrid():this.hideGrid()),a.has(".regression")&&(this.removeRegression(),this.regression&&this.drawRegression()),b.removeConfidences&&this.confidencesInSVG?this.removeConfidence():b.showConfidences&&!this.confidencesInSVG?this.drawConfidence():a.has(".conf")&&this.confidencesInSVG&&((0,Z.xi)(!0,this.distance,this.layout)?(e=ai(".conf",f),aj(this.svg,".conf",e,d)):this.removeConfidence()),b.timeSliceHasPotentiallyChanged&&this.showTemporalSlice(),b.newBranchLabellingKey?(this.removeBranchLabels(),"none"!==b.newBranchLabellingKey&&this.drawBranchLabels(b.newBranchLabellingKey)):a.has(".branchLabel")&&this.updateBranchLabels(d)},a.prototype.modifySVGInStages=function(a,c,b,d,e){var f=this;a.delete(".tip"),this.hideGrid();var g=0,h=function(){f.drawBranches(),f.params.showGrid&&f.addGrid(),f.svg.selectAll(".tip").remove(),f.updateTipLabels(),f.drawTips(),f.vaccines&&f.drawVaccines(),f.showTemporalSlice(),f.regression&&f.drawRegression(),a.has(".branchLabel")&&f.drawBranchLabels(e.newBranchLabellingKey||f.params.branchLabelKey)};this.confidencesInSVG=!1,this.svg.selectAll(ae(a).join(", ")).transition().duration(b).style("opacity",0).remove().on("start",function(){return g++}).on("end",function(){if(!--g){f.setClipMask();var a=ai(".tip",c);aj(f.svg,".tip",a,d),setTimeout(h,d)}}),this.hideTemporalSlice(),b||(0,P.R8)()},a.prototype.render=function(b,c,d,e,f,g,k,l,h,a,m,n,o,p,i,j){var q=this;this.svg=b,this.params=Object.assign(this.params,f),this.callbacks=g,this.vaccines=a?a.map(function(a){return a.shell}):void 0,this.dateRange=i,this.nodes.forEach(function(a,b){a.branchStroke=m[b],a.tipStroke=n[b],a.fill=o[b],a.visibility=l[b],a["stroke-width"]=k[b],a.r=p?p[b]:q.params.tipRadius}),(0,Q.Td)({nodes:this.nodes,focus:e}),this.setDistance(d),this.setLayout(c,j),this.mapToScreen(),this.setClipMask(),this.params.showGrid&&(this.addGrid(),this.showTemporalSlice()),this.drawBranches(),this.updateTipLabels(),this.drawTips(),this.params.branchLabelKey&&this.drawBranchLabels(this.params.branchLabelKey),this.vaccines&&this.drawVaccines(),this.regression&&this.drawRegression(),this.confidencesInSVG=!1,h&&this.drawConfidence(),this.timeLastRenderRequested=Date.now()},a.prototype.clearSVG=function(){this.svg.selectAll("*").remove()},a.prototype.setClipMask=function(){var c,d=T(this.yScale.range(),2),e=d[0],k=d[1],f=T(this.xScale.range(),2),a=f[0],b=f[1];parseInt(a,10)>parseInt(b,10)&&(a=(c=[b,a])[0],b=c[1]);var g=a-5,h=b-a+20,i=e-15,j=k-e+20;this.groups.clipPath?this.groups.clipPath.select("rect").attr("x",g).attr("y",i).attr("width",h).attr("height",j):(this.groups.clipPath=this.svg.append("g").attr("id","clipGroup"),this.groups.clipPath.append("clipPath").attr("id","treeClip").append("rect").attr("x",g).attr("y",i).attr("width",h).attr("height",j))},a.prototype.drawTips=function(){var a=this.params;"tips"in this.groups||(this.groups.tips=this.svg.append("g").attr("id","tips").attr("clip-path","url(#treeClip)")),this.groups.tips.selectAll(".tip").data(this.nodes.filter(function(a){return!a.n.hasChildren})).enter().append("circle").attr("class","tip").attr("id",function(a){return(0,Q.yQ)("tip",a.n.name)}).attr("cx",function(a){return a.xTip}).attr("cy",function(a){return a.yTip}).attr("r",function(a){return a.r}).on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick).style("pointer-events","auto").style("visibility",function(a){return a.visibility===j.m7?"visible":"hidden"}).style("fill",function(b){return b.fill||a.tipFill}).style("stroke",function(b){return b.tipStroke||a.tipStroke}).style("stroke-width",function(){return a.tipStrokeWidth}).style("cursor","pointer")},a.prototype.drawBranches=function(){var a=this.params;"branchTee"in this.groups||(this.groups.branchTee=this.svg.append("g").attr("id","branchTee").attr("clip-path","url(#treeClip)")),"clock"===this.layout||"scatter"===this.layout||"unrooted"===this.layout?this.groups.branchTee.selectAll("*").remove():this.groups.branchTee.selectAll(".branch").data(this.nodes.filter(function(a){return a.n.hasChildren&& void 0!==a.displayOrder})).enter().append("path").attr("class","branch T").attr("id",function(a){return(0,Q.yQ)("branchT",a.n.name)}).attr("d",function(a){return a.branch[1]}).style("stroke",function(b){return b.branchStroke||a.branchStroke}).style("stroke-width",function(b){return b["stroke-width"]||a.branchStrokeWidth}).style("visibility",p).style("fill","none").style("pointer-events","auto").on("mouseover",this.callbacks.onBranchHover).on("mouseout",this.callbacks.onBranchLeave).on("click",this.callbacks.onBranchClick),this.groups.branchGradientDefs||(this.groups.branchGradientDefs=this.svg.append("defs")),this.groups.branchGradientDefs.selectAll("*").remove(),this.updateColorBy(),"branchStem"in this.groups||(this.groups.branchStem=this.svg.append("g").attr("id","branchStem").attr("clip-path","url(#treeClip)")),this.groups.branchStem.selectAll(".branch").data(this.nodes.filter(function(a){return void 0!==a.displayOrder})).enter().append("path").attr("class","branch S").attr("id",function(a){return(0,Q.yQ)("branchS",a.n.name)}).attr("d",function(a){return a.branch[0]}).style("stroke",function(b){return b.branchStroke?V(b,"S"):a.branchStroke}).style("stroke-linecap","round").style("stroke-width",function(b){return b["stroke-width"]||a.branchStrokeWidth}).style("visibility",p).style("cursor",function(a){return a.visibility===j.m7?"pointer":"default"}).style("pointer-events","auto").on("mouseover",this.callbacks.onBranchHover).on("mouseout",this.callbacks.onBranchLeave).on("click",this.callbacks.onBranchClick)},a.prototype.drawVaccines=function(){this.vaccines&&this.vaccines.length&&("vaccines"in this.groups||(this.groups.vaccines=this.svg.append("g").attr("id","vaccines")),this.groups.vaccines.selectAll(".vaccineCross").data(this.vaccines).enter().append("path").attr("class","vaccineCross").attr("d",function(a){return a.vaccineCross}).style("stroke","#333").style("stroke-width",2*this.params.branchStrokeWidth).style("fill","none").style("cursor","pointer").style("pointer-events","auto").on("mouseover",this.callbacks.onTipHover).on("mouseout",this.callbacks.onTipLeave).on("click",this.callbacks.onTipClick))},a.prototype.drawRegression=function(){if(void 0!==this.regression.slope){var a,b,c,d=this.yScale(this.regression.intercept+this.xScale.domain()[0]*this.regression.slope),e=this.yScale(this.regression.intercept+this.xScale.domain()[1]*this.regression.slope),f="M "+this.xScale.range()[0].toString()+" "+d.toString()+" L "+this.xScale.range()[1].toString()+" "+e.toString();"regression"in this.groups||(this.groups.regression=this.svg.append("g").attr("id","regression").attr("clip-path","url(#treeClip)")),this.groups.regression.append("path").attr("d",f).attr("class","regression").style("fill","none").style("visibility","visible").style("stroke",this.params.regressionStroke).style("stroke-width",this.params.regressionWidth),this.groups.regression.append("text").text((a=this.regression,b=this.layout,c=this.yScale,"clock"===b?(0,Q.jP)(c)?"rate estimate: ".concat(a.slope.toExponential(2)," subs per site per year"):"rate estimate: ".concat((0,Q.dX)(a.slope)," subs per year"):"intercept = ".concat(a.intercept.toPrecision(3),", slope = ").concat(a.slope.toPrecision(3),", R^2 = ").concat(a.r2.toPrecision(3)))).attr("class","regression").attr("x",this.xScale.range()[1]/2-75).attr("y",this.yScale.range()[0]+50).style("fill",this.params.regressionStroke).style("font-size",this.params.tickLabelSize+8).style("font-weight",400).style("font-family",this.params.fontFamily)}},a.prototype.removeRegression=function(){"regression"in this.groups&&this.groups.regression.selectAll("*").remove()},a.prototype.updateColorBy=function(){},a.prototype.setDistance=function(a){this.nodes.forEach(function(a){a.update=!0}),a&&(this.distance=a),["div","num_date"].includes(this.distance)||(console.error("Tree distance measure not set or invalid. Using `div`."),this.distance="div"),"div"===this.distance?this.nodes.forEach(function(a){a.depth=(0,$.KT)(a.n),a.pDepth=(0,$.KT)((0,Q.Fw)(a.n)),a.conf=[a.depth,a.depth]}):this.nodes.forEach(function(a){a.depth=(0,$.rs)(a.n,"num_date"),a.pDepth=(0,$.rs)((0,Q.Fw)(a.n),"num_date"),a.conf=(0,$.rs)(a.n,"num_date",{confidence:!0})||[a.depth,a.depth]}),this.vaccines&&this.vaccines.forEach(function(a){a.crossDepth=a.depth})},a.prototype.setLayout=function(a,b){(void 0===a||a!==this.layout)&&this.nodes.forEach(function(a){a.update=!0}),void 0===a?this.layout="rect":this.layout=a,this.regression=void 0,b&&(this.scatterVariables=function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){at(d,a,c[a])})}return d}({},b)),"clock"===this.layout&&(this.scatterVariables.x="num_date",this.scatterVariables.y="div"),"rect"===this.layout?this.rectangularLayout():"clock"===this.layout||"scatter"===this.layout?this.scatterplotLayout():"radial"===this.layout?this.radialLayout():"unrooted"===this.layout&&this.unrootedLayout()},a.prototype.rectangularLayout=function(){this.nodes.forEach(function(a){a.y=a.displayOrder,a.x=a.depth,a.px=a.pDepth,a.py=a.y}),this.vaccines&&this.vaccines.forEach(function(a){a.xCross=a.crossDepth,a.yCross=a.y})},a.prototype.scatterplotLayout=function(){var a=this;if(!this.scatterVariables){console.error("Scatterplot called without variables");return}var b="displayOrder"===this.scatterVariables.x||"displayOrder"===this.scatterVariables.y?(0,Q.rG)(this.nodes):void 0;this.nodes.forEach(function(c){var d,e,f,g;"div"===a.scatterVariables.x?(c.x=(0,$.KT)(c.n),c.px=(0,$.KT)((0,Q.Fw)(c.n))):"gt"===a.scatterVariables.x?(c.x=c.n.currentGt,c.px=(0,Q.Fw)(c.n).currentGt):"displayOrder"===a.scatterVariables.x?(d=au(b(c),2),c.x=d[0],c.px=d[1]):(c.x=(0,$.rs)(c.n,a.scatterVariables.x),c.px=(0,$.rs)((0,Q.Fw)(c.n),a.scatterVariables.x),a.scatterVariables.xTemporal&&(e=[(0,H.X6)(c.x,!0),(0,H.X6)(c.px,!0)],c.x=e[0],c.px=e[1])),"div"===a.scatterVariables.y?(c.y=(0,$.KT)(c.n),c.py=(0,$.KT)((0,Q.Fw)(c.n))):"gt"===a.scatterVariables.y?(c.y=c.n.currentGt,c.py=(0,Q.Fw)(c.n).currentGt):"displayOrder"===a.scatterVariables.y?(f=au(b(c),2),c.y=f[0],c.py=f[1]):(c.y=(0,$.rs)(c.n,a.scatterVariables.y),c.py=(0,$.rs)((0,Q.Fw)(c.n),a.scatterVariables.y),a.scatterVariables.yTemporal&&(g=[(0,H.X6)(c.y,!0),(0,H.X6)(c.py,!0)],c.y=g[0],c.py=g[1]))}),this.vaccines&&this.vaccines.forEach(function(a){a.xCross=a.x,a.yCross=a.y}),this.scatterVariables.showRegression&&this.calculateRegression()},a.prototype.unrootedLayout=function(){var d=az(this.nodes[0].n),b=1.5*Math.PI,e=this.nodes[0].n.children;this.nodes.forEach(function(a){a.x=void 0,a.y=void 0,a.px=void 0,a.py=void 0});for(var c=0;c<e.length;c++){var a=e[c].shell;if(a.w=2*Math.PI*az(a.n)/d,a.w>0){var f=a.depth-this.nodes[0].depth;a.px=f*Math.cos(b+.5*a.w),a.py=f*Math.sin(b+.5*a.w),a.tau=b,aw(a,d),b+=a.w}}this.vaccines&&this.vaccines.forEach(function(a){var b=a.crossDepth-a.depth;a.xCross=a.px+b*Math.cos(a.tau+.5*a.w),a.yCross=a.py+b*Math.sin(a.tau+.5*a.w)}),this.nodes.forEach(function(a){delete a.tau,delete a.w})},a.prototype.radialLayout=function(){var a,b,c=(b=Math).max.apply(b,function(a){if(Array.isArray(a))return as(a)}(a=this.nodes.map(function(a){return a.displayOrder}).filter(function(a){return a}))||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||av(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=this.nodes[0].depth;if(this.nodes.forEach(function(a){var b=1.9*Math.PI*a.displayOrderRange[0]/c,e=1.9*Math.PI*a.displayOrderRange[1]/c;a.angle=1.9*Math.PI*a.displayOrder/c,a.y=(a.depth-d)*Math.cos(a.angle),a.x=(a.depth-d)*Math.sin(a.angle),a.py=a.y*(a.pDepth-d)/(a.depth-d+1e-15),a.px=a.x*(a.pDepth-d)/(a.depth-d+1e-15),a.yCBarStart=(a.depth-d)*Math.cos(b),a.xCBarStart=(a.depth-d)*Math.sin(b),a.yCBarEnd=(a.depth-d)*Math.cos(e),a.xCBarEnd=(a.depth-d)*Math.sin(e),a.smallBigArc=Math.abs(e-b)>1*Math.PI}),this.vaccines){var e=this;this.vaccines.forEach(function(a){"div"===e.distance?(a.xCross=a.x,a.yCross=a.y):(a.xCross=(a.crossDepth-d)*Math.sin(a.angle),a.yCross=(a.crossDepth-d)*Math.cos(a.angle))})}},a.prototype.setScales=function(){"scatter"!==this.layout||this.scatterVariables.xContinuous?this.xScale=(0,am.Z)():this.xScale=ar().round(!1).align(.5).padding(.5),"scatter"!==this.layout||this.scatterVariables.yContinuous?this.yScale=(0,am.Z)():this.yScale=ar().round(!1).align(.5).padding(.5);var a=parseInt(this.svg.attr("width"),10),b=parseInt(this.svg.attr("height"),10);if("radial"===this.layout||"unrooted"===this.layout){var c=a-this.margins.left-this.margins.right,d=b-this.margins.bottom-this.margins.top,e=(0,ak.Z)([c,d]),f=c-e,g=d-e;this.xScale.range([.5*f+this.margins.left,a-.5*f-this.margins.right]),this.yScale.range([.5*g+this.margins.top,b-.5*g-this.margins.bottom])}else this.params.orientation[0]>0?this.xScale.range([this.margins.left,a-this.margins.right]):this.xScale.range([a-this.margins.right,this.margins.left]),this.params.orientation[1]>0?this.yScale.range([this.margins.top,b-this.margins.bottom]):this.yScale.range([b-this.margins.bottom,this.margins.top])},a.prototype.mapToScreen=function(){var d,a,b,e,r=this,k=this.nodes.filter(function(a){return!a.n.hasChildren}).filter(function(a){return a.inView});this.margins={left:"scatter"===this.layout||"clock"===this.layout?40:5,right:5+function(a,b){var d=0;if(b.length<a.tipLabelBreakL1){var c=a.tipLabelFontSizeL1;b.length<a.tipLabelBreakL2&&(c=a.tipLabelFontSizeL2),b.length<a.tipLabelBreakL3&&(c=a.tipLabelFontSizeL3),b.forEach(function(a){d<a.n.name.length&&(d=.65*a.n.name.length*c)})}return d}(this.params,k),top:"radial"===this.layout?10:15,bottom:35},this.setScales(),this.setClipMask();var f=this.nodes.filter(function(a){return a.inView&& void 0!==a.y&& void 0!==a.x});if("scatter"===this.layout&& !1===this.scatterVariables.showBranches&&(f=f.filter(function(a){return!a.n.hasChildren})),"scatter"!==this.layout||this.scatterVariables.xContinuous){var l=[1e6,-1e5],c=l[0],g=l[1];f.forEach(function(a){a.x<c&&(c=a.x),a.x>g&&(g=a.x)}),c===g&&(c-=.005,g+=.005);var j=1e-8;(b=g-c)<j&&(g=j-c,b=j),"rect"===this.layout&&0!==this.zoomNode.n.arrayIdx&&(c-=(g-c)/20),d=[c,g]}else{var s=new Set(f.map(function(a){return a.x}));ax(d=this.scatterVariables.xDomain.filter(function(a){return s.has(a)}),this.xScale)}if("scatter"!==this.layout||this.scatterVariables.yContinuous){var m=[1e6,-1e5],h=m[0],i=m[1];if(f.forEach(function(a){a.y<h&&(h=a.y),a.y>i&&(i=a.y)}),k.length<30){var n=.05*(i-h);h-=n,i+=n}e=i-h,a=[h,i]}else{var t=new Set(f.map(function(a){return a.y}));ax(a=this.scatterVariables.yDomain.filter(function(a){return t.has(a)}),this.yScale)}if("radial"===this.layout||"unrooted"===this.layout){var o=(0,al.Z)([e,b]),p=b>e?(b-e)*.5:0,q=b<e?(e-b)*.5:0;d=[d[0]-q,d[0]+o-q],a=[a[0]-p,a[0]+o-p]}("clock"===this.layout||"scatter"===this.layout)&&a.reverse(),this.xScale.domain(d),this.yScale.domain(a);var u=this.yScale.range()[1]+100,v=this.xScale.range()[0]-100;if(this.nodes.forEach(function(a){a.xTip=r.xScale(a.x),a.yTip=r.yScale(a.y),a.xBase=r.xScale(a.px),a.yBase=r.yScale(a.py),a.rot=180*Math.atan2(a.yTip-a.yBase,a.xTip-a.xBase)/Math.PI}),"scatter"===this.layout&&(this.scatterVariables.yContinuous||ay("y",this.yScale,this.nodes),this.scatterVariables.xContinuous||ay("x",this.xScale,this.nodes),this.nodes.forEach(function(a){isNaN(a.xTip)&&(a.xTip=v),isNaN(a.yTip)&&(a.yTip=u),isNaN(a.xBase)&&(a.xBase=v),isNaN(a.yBase)&&(a.yBase=u)})),this.vaccines){var w=this;this.vaccines.forEach(function(d){var a=6,b=w.xScale(d.xCross),c=w.yScale(d.yCross);d.vaccineCross=" M ".concat(b-a,",").concat(c-a," L ").concat(b+a,",").concat(c+a," M ").concat(b-a,",").concat(c+a," L ").concat(b+a,",").concat(c-a)})}if("unrooted"===this.layout)this.nodes.forEach(function(a){a.branch=[" M "+a.xBase.toString()+","+a.yBase.toString()+" L "+a.xTip.toString()+","+a.yTip.toString(),""]});else if("clock"===this.layout||"scatter"===this.layout)this.scatterVariables.showBranches?this.nodes.forEach(function(a){a.branch=a.xBase===v||a.xTip===v||a.yBase===u||a.yTip===u?[""]:[" M "+a.xBase.toString()+","+a.yBase.toString()+" L "+a.xTip.toString()+","+a.yTip.toString(),""]}):this.nodes.forEach(function(a){a.branch=[]});else if("rect"===this.layout){var x=this;this.nodes.forEach(function(a){var c=.5*((0,Q.Fw)(a.n).shell["stroke-width"]-a["stroke-width"])||0,b=[x.yScale(a.displayOrderRange[0]),x.yScale(a.displayOrderRange[1])];a.branch=[[" M ".concat(a.xBase-c,",").concat(a.yBase," L ").concat(a.xTip,",").concat(a.yTip+.01)],[" M ".concat(a.xTip,",").concat(b[0]," L ").concat(a.xTip,",").concat(b[1])]],x.params.confidence&&(a.confLine=" M ".concat(x.xScale(a.conf[0]),",").concat(a.yBase," L ").concat(x.xScale(a.conf[1]),",").concat(a.yTip))})}else if("radial"===this.layout){var y=this,z=this.nodes[0].depth,A=this.nodes.map(function(a){return .5*((0,Q.Fw)(a.n).shell["stroke-width"]-a["stroke-width"])||0});this.nodes.forEach(function(a,b){a.branch=[" M "+(a.xBase-A[b]*Math.sin(a.angle)).toString()+" "+(a.yBase-A[b]*Math.cos(a.angle)).toString()+" L "+a.xTip.toString()+" "+a.yTip.toString(),""],a.n.hasChildren&&(a.branch[1]=[" M "+y.xScale(a.xCBarStart).toString()+" "+y.yScale(a.yCBarStart).toString()+" A "+(y.xScale(a.depth)-y.xScale(z)).toString()+" "+(y.yScale(a.depth)-y.yScale(z)).toString()+" 0 "+(a.smallBigArc?"1 ":"0 ")+" 1  "+y.xScale(a.xCBarEnd).toString()+","+y.yScale(a.yCBarEnd).toString()])})}},a.prototype.calculateRegression=function(){"clock"===this.layout?this.regression=function(c){var a=c.filter(function(a){return!a.n.hasChildren&&a.visibility===j.m7}),b=a.length;if(0===b)return{slope:void 0,intercept:void 0,r2:void 0};var e=c[0].x,f=R(a.map(function(a){return a.y*(a.x-e)}))/b,g=R(a.map(function(a){return(a.x-e)*(a.x-e)}))/b,d=f/g;return{slope:d,intercept:-e*d,r2:void 0}}(this.nodes):this.regression=function(d){var a=d.filter(function(a){return!a.n.hasChildren&& void 0!==a.x&& void 0!==a.y&&a.visibility===j.m7}),b=a.length;if(0===b)return{slope:void 0,intercept:void 0,r2:void 0};var e=R(a.map(function(a){return a.x}))/b,f=R(a.map(function(a){return a.y}))/b,c=R(a.map(function(a){return(a.x-e)*(a.y-f)}))/R(a.map(function(a){return Math.pow(a.x-e,2)})),g=f-c*e;return{slope:c,intercept:g,r2:1-R(a.map(function(a){return Math.pow(a.y-(g+c*a.x),2)}))/R(a.map(function(a){return Math.pow(a.y-f,2)}))}}(this.nodes)},a.prototype.removeConfidence=function(a){this.confidencesInSVG=!1,"confidenceIntervals"in this.groups&&(a?this.groups.confidenceIntervals.selectAll("*").transition().duration(a).style("opacity",0).remove():this.groups.confidenceIntervals.selectAll("*").remove())},a.prototype.drawConfidence=function(a){if(this.confidencesInSVG=!0,"confidenceIntervals"in this.groups||(this.groups.confidenceIntervals=this.svg.append("g").attr("id","confidenceIntervals")),a){var b=this;this.groups.confidenceIntervals.selectAll(".conf").data(this.nodes).enter().call(function(a){return b.drawSingleCI(a,0)}),this.groups.confidenceIntervals.transition().duration(a).style("opacity",.5)}else{var c=this;this.groups.confidenceIntervals.selectAll(".conf").data(this.nodes).enter().call(function(a){return c.drawSingleCI(a,.5)})}},a.prototype.drawSingleCI=function(a,b){a.append("path").attr("class","conf").attr("id",function(a){return(0,Q.yQ)("conf",a.n.name)}).attr("d",function(a){return a.confLine}).style("stroke",function(a){return a.branchStroke||"#888"}).style("opacity",b).style("fill","none").style("stroke-width",o).style("pointer-events","none")},a.prototype.drawBranchLabels=function(a){var e=this;this.params.branchLabelKey=a;var b=_(a),c=aa(a),d=ab(a,this.params.showAllBranchLabels,this.layout,this.zoomNode.n.tipCount);"branchLabels"in this.groups||(this.groups.branchLabels=this.svg.append("g").attr("id","branchLabels").attr("clip-path","url(#treeClip)")),this.groups.branchLabels.selectAll(".branchLabel").data(this.nodes.filter(function(b){return b.n.branch_attrs&&b.n.branch_attrs.labels&&b.n.branch_attrs.labels[a]})).enter().append("text").attr("class","branchLabel").attr("x",function(a){return a.xTip+(e.params.orientation[0]>0?-5:5)}).attr("y",function(a){return a.yTip-e.params.branchLabelPadY}).style("text-anchor",this.params.orientation[0]>0?"end":"start").style("visibility",d).style("fill",this.params.branchLabelFill).style("font-family",this.params.branchLabelFont).style("font-weight",c).style("font-size",b).style("pointer-events","none").text(function(b){return b.n.branch_attrs.labels[a]})},a.prototype.removeBranchLabels=function(){this.params.branchLabelKey=void 0,"branchLabels"in this.groups&&this.groups.branchLabels.selectAll("*").remove()},a.prototype.updateBranchLabels=function(a){var e=this;if(this.groups.branchLabels){var b=ab(this.params.branchLabelKey,this.params.showAllBranchLabels,this.layout,this.zoomNode.n.tipCount),c=_(this.params.branchLabelKey),d=aa(this.params.branchLabelKey);this.groups.branchLabels.selectAll(".branchLabel").transition().duration(a).attr("x",function(a){return a.xTip-5}).attr("y",function(a){return a.yTip-e.params.branchLabelPadY}).style("visibility",b).style("font-weight",d).style("font-size",c),a||(0,P.R8)()}},a.prototype.updateTipLabels=function(c){"tipLabels"in this.groups?this.groups.tipLabels.selectAll("*").remove():this.groups.tipLabels=this.svg.append("g").attr("id","tipLabels");var e=this.callbacks.tipLabel,f=this.params.tipLabelPadX,g=this.params.tipLabelPadY,a=this.nodes.filter(function(a){return!a.n.hasChildren}).filter(function(a){return a.inView}),d=a.filter(function(a){return a.visibility===j.m7});if(d.length<this.params.tipLabelBreakL1){var h=this,b=this.params.tipLabelFontSizeL1;a.length<this.params.tipLabelBreakL3?b=this.params.tipLabelFontSizeL3:a.length<this.params.tipLabelBreakL2&&(b=this.params.tipLabelFontSizeL2),window.setTimeout(function(){h.groups.tipLabels.selectAll(".tipLabel").data(d).enter().append("text").attr("x",function(a){return a.xTip+f}).attr("y",function(a){return a.yTip+g}).text(function(a){return e(a)}).attr("class","tipLabel").style("font-size",b.toString()+"px").style("pointer-events","none").style("visibility",function(a){return a.visibility===j.m7?"visible":"hidden"})},c)}},a.prototype.removeTipLabels=function(){"tipLabels"in this.groups&&this.groups.tipLabels.selectAll("*").remove()},a.prototype.hideGrid=function(){"majorGrid"in this.groups&&this.groups.majorGrid.selectAll("*").style("visibility","hidden"),"minorGrid"in this.groups&&this.groups.minorGrid.selectAll("*").style("visibility","hidden"),"gridText"in this.groups&&this.groups.gridText.selectAll("*").style("visibility","hidden"),"axisText"in this.groups&&this.groups.axisText.selectAll("*").style("visibility","hidden")},a.prototype.addGrid=function(){var c,b,a=this.layout;if(aD(this.groups,this.svg),"unrooted"!==a){var f=(0,ak.Z)(this.yScale.domain()),g=(0,al.Z)(this.yScale.domain()),e="radial"===a?this.nodes[0].depth:this.xScale.domain()[0],h="radial"===a?e+(0,al.Z)([this.xScale.domain()[1],this.yScale.domain()[1],-this.xScale.domain()[0],-this.yScale.domain()[0]]):this.xScale.domain()[1],m=this.xScale.range()[1]-this.xScale.range()[0],d=(t="scatter"===this.layout&&"num_date"===this.scatterVariables.x||"clock"===this.layout||"scatter"!==this.layout&&"num_date"===this.distance?aH(e,h,m,"x"):"scatter"!==this.layout||this.scatterVariables.xContinuous?aF(e,h,a,this.params.minorTicks,"x"):{majorGridPoints:this.xScale.domain().map(function(a){return{name:a,visibility:"visible",axis:"x",position:a}}),minorGridPoints:[]}).majorGridPoints,n=t.minorGridPoints,i=function(a,b,c){return function(d){var f="";if("x"===d.axis){if("rect"===c||"clock"===c||"scatter"===c){var i=a(d.position);f="M"+i.toString()+" "+b.range()[1].toString()+" L "+i.toString()+" "+b.range()[0].toString()}else if("radial"===c){var g=a(Math.max(d.position-e,0));f="M "+g.toString()+"  "+b(0).toString()+" A "+(g-a(0)).toString()+" "+(b(d.position)-b(e)).toString()+" 0 1 0 "+g.toString()+" "+(b(0)+.001).toString()}}else if("y"===d.axis){var j=b(d.position);f="M".concat(a(e)+20," ").concat(j," L ").concat(a(h)," ").concat(j)}return f}},o=function(a,b){return function(c){return"x"===c.axis?"radial"===b?a(0):a(c.position):a.range()[0]-15}},p=function(a,b){return function(c){if("x"===c.axis){var d=c.position-e;return"radial"===b?a(Math.max(d,0))-5:a.range()[1]+18}return a(c.position)}},q=function(a){return function(b){return"x"===b.axis?"radial"===a?"end":"middle":"start"}};if("clock"===this.layout||"scatter"===this.layout){if("scatter"===this.layout&&"num_date"===this.scatterVariables.y){var t,j,r=aH(f,g,this.yScale.range()[1]-this.yScale.range()[0],"y");(j=d).push.apply(j,aB(r.majorGridPoints))}else if("scatter"!==this.layout||this.scatterVariables.yContinuous){var k,l,s=aF(f,g,a,1,"y");(l=d).push.apply(l,aB(s.majorGridPoints))}else(k=d).push.apply(k,aB(this.yScale.domain().map(function(a){return{name:a,visibility:"visible",axis:"y",position:a}})))}this.groups.majorGrid.selectAll("*").remove(),this.groups.majorGrid.selectAll(".majorGrid").data(d).enter().append("path").attr("d",i(this.xScale,this.yScale,a)).attr("class","majorGrid").style("fill","none").style("visibility",function(a){return a.visibility}).style("stroke",this.params.majorGridStroke).style("stroke-width",this.params.majorGridWidth),this.groups.minorGrid.selectAll("*").remove(),this.svg.selectAll(".minorGrid").remove(),this.groups.minorGrid.selectAll(".minorGrid").data(n).enter().append("path").attr("d",i(this.xScale,this.yScale,a)).attr("class","minorGrid").style("fill","none").style("visibility",function(a){return a.visibility}).style("stroke",this.params.minorGridStroke).style("stroke-width",this.params.minorGridWidth),this.groups.gridText.selectAll("*").remove(),this.svg.selectAll(".gridText").remove(),this.groups.gridText.selectAll(".gridText").data(d).enter().append("text").text(function(a){return a.name}).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor",q(a)).style("visibility",function(a){return a.visibility}).attr("x",o(this.xScale,a)).attr("y",p(this.yScale,a)),this.groups.axisText.selectAll("*").remove(),this.svg.selectAll(".axisText").remove(),"clock"===a?(b="Date",c=(0,Q.jP)(this.yScale)?"Divergence":"Mutations"):"scatter"===a?("div"===(b=this.scatterVariables.xLabel)&&(b=(0,Q.jP)(this.xScale)?"Divergence":"Mutations"),"div"===(c=this.scatterVariables.yLabel)&&(c=(0,Q.jP)(this.yScale)?"Divergence":"Mutations")):"rect"===a&&(b="num_date"===this.distance?"Date":(0,Q.jP)(this.xScale)?"Divergence":"Mutations"),b&&this.groups.axisText.append("text").text(b).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor","middle").attr("x",Math.abs(this.xScale.range()[1]-this.xScale.range()[0])/2).attr("y",parseInt(this.svg.attr("height"),10)-1),c&&this.groups.axisText.append("text").text(c).attr("class","gridText").style("font-size",this.params.tickLabelSize).style("font-family",this.params.fontFamily).style("fill",this.params.tickLabelFill).style("text-anchor","middle").attr("transform","translate(10,"+this.yScale.range()[1]/2+") rotate(-90)"),this.grid=!0}},a.prototype.showTemporalSlice=function(){if("rect"!==this.layout||"num_date"!==this.distance){this.hideTemporalSlice();return}var a=[this.xScale(this.dateRange[0]),this.xScale(this.dateRange[1])],f=this.yScale.range()[1],g="#EEE",d=-1===this.params.orientation[0],k=this.xScale(this.nodes[0].x),b=d?this.xScale.range()[0]:this.xScale.range()[1];if(b+=this.margins.left+this.margins.right,Math.abs(a[0]-k)>30){var e=a[0],h=0;d&&(e=b-a[0],h=a[0]);var l="1"===this.groups.temporalWindowStart.attr("opacity");this.groups.temporalWindowStart.attr("opacity",1).attr("height",f).attr("transform","translate(".concat(h,",0)")).attr("fill",g),l?this.groups.temporalWindowStart.transition("temporalWindowTransition").attr("width",e):this.groups.temporalWindowStart.attr("width",e)}else this.groups.temporalWindowStart.attr("opacity",0);var i=a[1],c=b-this.margins.right-a[1],j="translate(".concat(b-this.margins.right,",0) scale(-1,1)");if(d&&(i=this.margins.right,c=a[1]-this.margins.right,j="translate(".concat(i,",0)")),c>30){var m="1"===this.groups.temporalWindowEnd.attr("opacity");this.groups.temporalWindowEnd.attr("opacity",1).attr("height",f).attr("fill",g).attr("transform",j),m?this.groups.temporalWindowEnd.transition("temporalWindowTransition").attr("width",c):this.groups.temporalWindowEnd.attr("width",c)}else this.groups.temporalWindowEnd.attr("opacity",0)},a.prototype.hideTemporalSlice=function(){this.groups.temporalWindowStart.attr("opacity",0),this.groups.temporalWindowEnd.attr("opacity",0)};var aI=a,aJ=b(57605),e=b(37536),aK=b(6290);function aL(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function aM(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function r(){var a=aM(["\n  border: 0px;\n  background-color: inherit;\n  cursor: pointer;\n  outline: 0;\n  text-decoration: underline;\n  font-size: 16px;\n  padding: 0px 0px;\n"]);return r=function(){return a},a}function s(){var a=aM(["\n  margin-top: 12px;\n  margin-bottom: 4px;\n"]);return s=function(){return a},a}function t(){var a=aM(["\n  padding-right: 8px;\n"]);return t=function(){return a},a}function u(){var a=aM(["\n"]);return u=function(){return a},a}function v(){var a=aM(["\n  margin: 0px 0px 4px 0px;\n  font-weight: 300;\n  font-size: 16px;\n"]);return v=function(){return a},a}function w(){var a=aM(["\n  font-weight: 500;\n  white-space: nowrap;\n  vertical-align: baseline;\n"]);return w=function(){return a},a}function x(){var a=aM(["\n  padding-left: 10px;\n  cursor: help;\n  color: #888;\n"]);return x=function(){return a},a}var aN=e.ZP.button.withConfig({componentId:"sc-96dbdfea-0"})(r()),aO=function(b,c){var a=[parseInt(b.slice(1,-1),10),parseInt(c.slice(1,-1),10)],d=a[0],e=a[1];return d<e?-1:1},aP=function(a){var b=[];return a.sort(aO).forEach(function(c,d){var a=parseInt(c.slice(1,-1),10);0===d||a!==b[b.length-1].end+1?b.push({start:a,end:a,count:1,char:c.slice(-1)}):(b[b.length-1].end=a,b[b.length-1].count+=1)}),b},aQ=e.ZP.p.withConfig({componentId:"sc-96dbdfea-1"})(s()),aR=e.ZP.span.withConfig({componentId:"sc-96dbdfea-2"})(t()),aS=e.ZP.span.withConfig({componentId:"sc-96dbdfea-3"})(u()),aT=e.ZP.p.withConfig({componentId:"sc-96dbdfea-4"})(v()),aU=e.ZP.td.withConfig({componentId:"sc-96dbdfea-5"})(w()),aV=function(a){var d,e,f=a.name,b=a.muts,h=a.displayAsIntervals,i=a.isNuc;if(h){var g=aP(b);e="".concat(f," (").concat(g.length," regions, ").concat(b.length).concat(i?"bp":" codons","):"),d=g.map(function(a){return 1===a.count?"".concat(a.start):"".concat(a.start,"..").concat(a.end," (").concat(a.count," ").concat(i?"bp":"codons",")")}).join(", ")}else e="".concat(f," (").concat(b.length,"):"),d=b.sort(aO).join(", ");return(0,c.jsxs)(aT,{children:[(0,c.jsx)(aR,{children:e},f),(0,c.jsx)(aS,{children:d})]})},aW={unique:"Unique",changes:"Changes",homoplasies:"Homoplasies",reversionsToRoot:"Reversions to root",undeletions:"Undeletions",gaps:"Gaps",ns:"Ns "},aX=e.ZP.span.withConfig({componentId:"sc-96dbdfea-6"})(x()),aY=(0,c.jsxs)("div",{children:["A summary of mutations inferred to have occurred on this branch. Mutations are grouped into one of the following (mutually exclusive) categories, with the first matching category used:",(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{children:"Undeletions: a change from a '-' character to a base; beware that these are often bioinformatics artifacts"}),(0,c.jsx)("li",{children:"Gaps: A change to a '-' character, indicating a missing base; these can indicate deletions but sometimes areas of no coverage are filled with gaps"}),(0,c.jsx)("li",{children:"Ns: Typically due to lack of sequence coverage or ambiguity at this position (Nucleotides only)"}),(0,c.jsx)("li",{children:"Homoplasies: a mutation that has also been observed elsewhere on the tree"}),(0,c.jsx)("li",{children:"Unique: Mutations which are only observed on this branch"})]}),"Reversions to Root is an additional category which highlights those mutations which return the state to that of the root. Mutations in this category will also appear one of the five categories listed above.",(0,c.jsx)("p",{}),"Gaps and Ns are grouped into intervals, as they frequently occur in succession. Click below to copy all changes to clipboard to see the full list."]}),aZ=(0,c.jsxs)("div",{children:["A summary of sequence changes between the root and the selected tip. Changes are grouped into one of the following (mutually exclusive) categories, with the first matching category used:",(0,c.jsxs)("ol",{children:[(0,c.jsx)("li",{children:"Gaps: A change to a '-' character, indicating a missing base; these can indicate deletions but sometimes areas of no coverage are filled with gaps"}),(0,c.jsx)("li",{children:"Ns: Typically due to lack of sequence coverage or ambiguity at this position (Nucleotides only)"}),(0,c.jsx)("li",{children:"Reversions to root: The tip state is the same as the root state, however this has changed and been reverted along the way"}),(0,c.jsx)("li",{children:"Changes: The tip state differs from the root state"})]}),"Gaps and Ns are grouped into intervals, as they frequently occur in succession. Click below to copy all changes to clipboard to see the full list."]}),a$=function(b){var d=b.node,f=b.geneSortFn,a=b.isTip,g=b.observedMutations,e=a?(0,$.Wf)(d):(0,$.MS)(d,g);return 0===Object.keys(e).length?(0,c.jsx)(aQ,{children:a?"No sequence changes observed":"No mutations observed on branch"}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(aQ,{children:[a?"Sequence changes observed (from root)":"Mutations observed on branch",(0,c.jsx)(aX,{"data-tip":!0,"data-for":"seqChangesInfo",children:(0,c.jsx)(B.DAO,{})})]}),(0,c.jsx)(aK.mi,{place:"bottom",type:"light",effect:"solid",id:"seqChangesInfo",children:a?aZ:aY}),(0,c.jsx)("table",{children:(0,c.jsxs)("tbody",{children:[Object.keys(e).sort(f).map(function(b){var a,d;return a=b,d=e[b],0===Object.values(d).filter(function(a){return a.length}).length?null:(0,c.jsxs)("tr",{children:[(0,c.jsx)(aU,{children:"nuc"===a?"Nt":a}),(0,c.jsx)("td",{children:Object.entries(aW).map(function(i){var e,f,g=(f=2,function(a){if(Array.isArray(a))return a}(e=i)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(e,f)||function(a,c){if(a){if("string"==typeof a)return aL(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return aL(a,c)}}(e,f)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),b=g[0],h=g[1];return b in d&&d[b].length?(0,c.jsx)(aV,{name:h,muts:d[b],displayAsIntervals:"gaps"===b||"ns"===b||"undeletions"===b,isNuc:"nuc"===a},h):null})})]},a)}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{}),(0,c.jsx)("td",{children:(0,c.jsx)(aN,{onClick:function(){var a,b;navigator.clipboard.writeText((a=e,b=f,Object.keys(a).sort(b).map(function(b){return Object.keys(aW).filter(function(c){return c in a[b]&&a[b][c].length}).map(function(c){return"".concat(b,"	").concat(c,"	").concat(a[b][c].sort(aO).join(", "))})}).flat().join("\n")))},children:"Click to copy all ".concat(a?"changes":"mutations"," to clipboard as TSV")})})]})]})})]})};function a_(b,c,d,e){var a=(0,$.rs)(c,d);"num_date"===d&&a&&(a=(0,I.hT)(a));var f=!c.hasChildren;return e?f?a?b("Branch leading to {{tipLabel}}",{tipLabel:a}):b("Terminal branch"):b("Internal branch"):a}function a0(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function a1(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||a2(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a2(a,c){if(a){if("string"==typeof a)return a0(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return a0(a,c)}}var a3=function(b){var d=b.name,a=b.value,e=b.padBelow;return(0,c.jsxs)("div",{style:{paddingBottom:void 0!==e&&e?"15px":"10px"},children:[(0,c.jsx)("span",{style:{fontWeight:"500"},children:d+" "}),a||0===a?Array.isArray(a)?a.map(function(a){return(0,c.jsx)("div",{style:{fontWeight:"300",marginLeft:"0em"},children:a},a)}):(0,c.jsx)("span",{style:{fontWeight:"300"},children:a}):null]},d)},a4=function(g){var f=g.node,d=g.t,a=[],h=(0,$.KT)(f),i=(0,$.rs)(f,"num_date");if(h&&a.push((0,c.jsx)(a3,{name:d("Divergence")+":",value:(0,Q.dX)(h)},"div")),void 0!==i){var j=(0,I.hT)(i),b=(0,$.rs)(f,"num_date",{confidence:!0});if(b&&b[0]!==b[1]){a.push((0,c.jsx)(a3,{name:d("Inferred Date")+":",value:j},"inferredDate"));var e=[(0,I.hT)(b[0]),(0,I.hT)(b[1])];e[0]!==e[1]&&a.push((0,c.jsx)(a3,{name:d("Date Confidence Interval")+":",value:"(".concat(e[0],", ").concat(e[1],")")},"dateConf"))}else a.push((0,c.jsx)(a3,{name:d("Date")+":",value:j},"date"))}return a},a5=function(b){var d=b.node,a=b.colorBy,o=b.colorByConfidence,i=b.colorScale,f=b.colorings;if("num_date"===a)return null;if((0,aJ.O$)(a)){var g=(0,aJ.kW)(a),p=g.aa?"Amino Acid at ".concat(g.gene," site ").concat(g.positions.join(", "),":"):"Nucleotide at pos ".concat(g.positions.join(", "),":");return(0,c.jsx)(a3,{name:p,value:(0,H.BG)(d,i)})}if("author"===a){var e=(0,$.ZZ)(d);return e?(0,c.jsxs)(c.Fragment,{children:[e.title?(0,c.jsx)(a3,{name:"Title:",value:e.title}):null,e.journal?(0,c.jsx)(a3,{name:"Journal:",value:e.journal}):null]}):null}var k=f&&f[a]&&f[a].title?f[a].title:a,l=(0,$.rs)(d,a);if("temporal"===i.scaleType&&"number"==typeof l)return(0,c.jsx)(a3,{name:"".concat(k,":"),value:(0,I.hT)(l)});var m=function(){return(0,j.mg)(l)?(0,c.jsx)(a3,{name:"".concat(k,":"),value:l}):null};if(!0===o){var h=(0,$.rs)(d,a,{confidence:!0});if(!h)return console.error("couldn't find confidence vals for ",a),null;if(!d.hasChildren&&1===Object.keys(h).length&&Object.values(h)[0]>.99)return m();var n=Object.keys(h).filter(function(a){return(0,j.mg)(a)}).sort(function(a,b){return h[a]>h[b]?-1:1}).slice(0,4).map(function(a){return"".concat(a," (").concat((100*h[a]).toFixed(0),"%)")});return n.length?(0,c.jsx)(a3,{name:"".concat(k," (confidence):"),value:n}):null}return m()},a6=function(d){var i=d.node,e=d.t,f=(0,$.Wf)(i);if(!f.nuc)return null;var a={changes:0,gaps:0,reversionsToRoot:0,ns:0},b={changes:0,gaps:0,reversionsToRoot:0};Object.keys(f).forEach(function(c){Object.entries(f[c]).forEach(function(g){var d=a1(g,2),e=d[0],f=d[1];"nuc"===c?a[e]+=f.length:b[e]+=f.length})});var g="".concat(a.changes).concat(a.reversionsToRoot?" + ".concat(a.reversionsToRoot," reversions to root"):"");g+="".concat(a.gaps?" + ".concat(a.gaps," gaps"):"").concat(a.nt?" + ".concat(a.nt," Ns"):"");var h="".concat(b.changes).concat(b.reversionsToRoot?" + ".concat(b.reversionsToRoot," reversions to root"):"");return h+="".concat(b.gaps?" + ".concat(b.gaps," gaps"):""),[(0,c.jsx)(a3,{name:e("Nucleotide changes")+":",value:g},"nuc"),(0,c.jsx)(a3,{name:e("Amino Acid changes")+":",value:h},"aa")]},a7=function(d){var e=d.node,s=d.geneSortFn,t=d.observedMutations,g=d.t;if(!e.branch_attrs||!e.branch_attrs.mutations)return null;var b=[],f=e.branch_attrs.mutations,a=(0,$.MS)(e,t),j=function(a,b){return a.slice(0,Math.min(b,a.length)).join(", ")+(a.length>b?" + ".concat(a.length-b," more"):"")};if(a.nuc){var k=5;if(a.nuc.unique.length&&b.push((0,c.jsx)(a3,{name:"Unique Nucleotide mutations:",value:j(a.nuc.unique,k)},"nuc_unique")),a.nuc.homoplasies.length&&b.push((0,c.jsx)(a3,{name:"Homoplasic mutations:",value:j(a.nuc.homoplasies,k)},"nuc_homoplasies")),a.nuc.reversionsToRoot.length&&b.push((0,c.jsx)(a3,{name:"Reversions to Root:",value:a.nuc.reversionsToRoot.length},"nuc_rtr")),a.nuc.gaps.length){var u="".concat(aP(a.nuc.gaps).length," regions, ").concat(a.nuc.gaps.length,"bp.");b.push((0,c.jsx)(a3,{name:"Gaps:",value:u},"nuc_gaps"))}if(a.nuc.undeletions.length){var v="".concat(aP(a.nuc.undeletions).length," regions, ").concat(a.nuc.undeletions.length,"bp.");b.push((0,c.jsx)(a3,{name:"Undeletions:",value:v},"nuc_undeletions"))}if(a.nuc.ns.length){var w="".concat(aP(a.nuc.ns).length," regions, ").concat(a.nuc.ns.length,"bp.");b.push((0,c.jsx)(a3,{name:"Ns:",value:w},"nuc_ns"))}}else b.push((0,c.jsx)(a3,{name:g("No nucleotide mutations"),value:""},"nuc"));var x=Object.keys(f).sort(s).filter(function(a){return"nuc"!==a}),l={},m=!1,h=!0,n=!1,o=void 0;try{for(var p,i=x[Symbol.iterator]();!(h=(p=i.next()).done);h=!0){var q=p.value,r=f[q].filter(function(a){return!a.endsWith("X")});r.length&&(l[q]=r,m=!0)}}catch(y){n=!0,o=y}finally{try{h||null==i.return||i.return()}finally{if(n)throw o}}if(m){var A=3,B=7,z=[];Object.keys(l).forEach(function(a,b){if(b<B){var c=a+":\xa0\xa0"+l[a].slice(0,Math.min(A,l[a].length)).join(", ");l[a].length>A&&(c+=" + "+g("{{x}} more",{x:l[a].length-A})),z.push(c)}else b===B&&z.push("(".concat(g("protein mutations truncated"),")"))}),b.push((0,c.jsx)(a3,{name:g("AA mutations")+":",value:z},"aa"))}else f.nuc&&f.nuc.length&&b.push((0,c.jsx)(a3,{name:g("No amino acid mutations")},"aa"));return b},a8=function(a){var b=a.node,d=a.t,f=a.tipLabelKey,e=a1(1===b.fullTipCount?[a_(d,b,f,!0),""]:[d("Number of descendants")+":",b.fullTipCount],2),g=e[0],h=e[1];return(0,c.jsx)(a3,{name:g,value:h,padBelow:!0})},a9=function(e){var f=e.node,d=e.t,a=(0,$.nt)(f);if(!a)return null;var b=[];return a.selection_date&&b.push((0,c.jsx)(a3,{name:d("Vaccine selected")+":",value:a.selection_date},"seldate")),a.start_date&&b.push((0,c.jsx)(a3,{name:d("Vaccine start date")+":",value:a.start_date},"startdate")),a.end_date&&b.push((0,c.jsx)(a3,{name:d("Vaccine end date")+":",value:a.end_date},"enddate")),a.serum&&b.push((0,c.jsx)(a3,{name:d("Serum strain")},"serum")),b},ba=function(f){var b=f.node,a=[],d=(0,$.ZZ)(b);d&&a.push((0,c.jsx)(a3,{name:"Author:",value:d.value},"author"));var e=(0,$.rs)(b,"gisaid_epi_isl");if((0,j.mg)(e)){var g=e.split("_")[2];a.push((0,c.jsx)(a3,{name:"GISAID EPI ISL:",value:g},"gisaid_epi_isl"))}return a},bb=function(e){var d=e.node,a=e.panelDims,i=e.children,h=200;h=a.width<420?200:a.width<460?220:a.width<500?240:a.width<540?260:280;var f=-1===d.shell.that.params.orientation[0]?a.width/2+a.spaceBetweenTrees+d.shell.xTip:d.shell.xTip,g=d.shell.yTip,b={container:{position:"absolute",width:h,padding:"10px",borderRadius:10,zIndex:1e3,pointerEvents:"none",fontFamily:F.fu.panel.fontFamily,fontSize:14,lineHeight:1,fontWeight:F.fu.panel.fontWeight,color:F.fu.panel.color,backgroundColor:F.fu.panel.backgroundColor,wordWrap:"break-word",wordBreak:"break-word"}};return f<.5*a.width?b.container.left=f+10:b.container.right=a.width-f+10,g<.55*a.height?b.container.top=g+40:b.container.bottom=a.height-g+10,(0,c.jsx)("div",{style:b.container,children:(0,c.jsx)("div",{className:"tooltip",style:F.fu.tooltip,children:i})})},bc=function(a){var b=a.children;return(0,c.jsx)("div",{style:F.fu.comment,children:b})},bd=function(b){var e=b.selectedNode,g=b.colorBy,h=b.colorByConfidence,i=b.colorScale,l=b.panelDims,k=b.colorings,m=b.geneSortFn,n=b.observedMutations,f=b.tipLabelKey,d=b.t;if(!e)return null;var a=e.node.n,o=(0,Q.uN)(a);return(0,c.jsx)(bb,{node:a,panelDims:l,children:!1===e.isBranch?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{style:F.fu.tooltipHeading,children:a_(d,a,f,!1)}),f!==j.Ac&&(0,c.jsx)(a3,{name:"Node name:",value:a.name}),(0,c.jsx)(a9,{node:a,t:d}),(0,c.jsx)(a6,{node:a,t:d}),(0,c.jsx)(a4,{node:a,t:d}),(0,c.jsx)(a5,{node:a,colorBy:g,colorByConfidence:h,colorScale:i,colorings:k}),(0,c.jsx)(ba,{node:a}),(0,c.jsx)(bc,{children:d("Click on tip to display more info")})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a8,{node:a,t:d,tipLabelKey:f}),(0,c.jsx)(a7,{node:a,geneSortFn:m,observedMutations:n,t:d}),(0,c.jsx)(a4,{node:a,t:d}),(0,c.jsx)(a5,{node:a,colorBy:g,colorByConfidence:h,colorScale:i,colorings:k}),(0,c.jsx)(bc,{children:d(o===a.arrayIdx?"Click to zoom out to parent clade":"Click to zoom into clade")}),(0,c.jsx)(bc,{children:d("Shift + Click to display more info")})]})})};function be(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}var bf=function(a){a||(a=window.event),a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation()},bg=function(a,b,d){return(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:F.fu.item,children:a}),(0,c.jsx)("td",{style:F.fu.item,children:d?(0,c.jsx)("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:b}):b})]},a)},bh=function(a){var b=a.url,d=a.title,e=a.value;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{style:F.fu.item,children:d}),(0,c.jsx)("td",{style:F.fu.item,children:(0,c.jsx)("a",{href:b,target:"_blank",rel:"noopener noreferrer",children:e})})]})},bi=function(l){var g=l.node,a=(0,$.rs)(g,"gisaid_epi_isl"),b=(0,$.rs)(g,"genbank_accession"),d=null,h=null;if((0,j.mg)(a)){if(new RegExp("EPI_ISL_[0-9]{5,}").test(a)){var i=a.split("_")[2];d="https://www.epicov.org/acknowledgement/"+i.slice(-4,-2)+"/"+i.slice(-2)+"/"+a+".json"}else d="https://gisaid.org"}if((0,j.mg)(b)&&(h="https://www.ncbi.nlm.nih.gov/nuccore/"+b),(0,j.mg)(a)&&(0,j.mg)(b))return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(bh,{title:"GISAID EPI ISL",value:a,url:d}),(0,c.jsx)(bh,{title:"Genbank accession",value:b,url:h})]});if((0,j.mg)(a))return(0,c.jsx)(bh,{title:"GISAID EPI ISL",value:a,url:d});if((0,j.mg)(b))return(0,c.jsx)(bh,{title:"Genbank accession",value:b,url:h});var k=(0,$.Bu)(g),e=k.accession,f=k.url;return e&&f?(0,c.jsx)(bh,{url:f,value:e,title:"Accession"}):e?bg("Accession",e):f?(0,c.jsx)(bh,{title:"Strain URL",url:f,value:"click here"}):null},bj=function(e){var f=e.node,d=e.t,a=(0,$.nt)(f);if(!a)return null;var b=[];return a.selection_date&&b.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:d("Vaccine selected")}),(0,c.jsx)("td",{children:a.selection_date})]},"seldate")),a.start_date&&b.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:d("Vaccine start date")}),(0,c.jsx)("td",{children:a.start_date})]},"startdate")),a.end_date&&b.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:d("Vaccine end date")}),(0,c.jsx)("td",{children:a.end_date})]},"enddate")),a.serum&&b.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:d("Serum strain")}),(0,c.jsx)("td",{})]},"serum")),b},bk=function(d){var e=d.node,c=d.t,a=(0,$.ZZ)(e);if(!a)return null;var b=[];return b.push(bg(c("Authors"),a.value)),a.title&&"?"!==a.title&&(a.paper_url&&"?"!==a.paper_url?b.push(bg(c("Title"),a.title,a.paper_url)):b.push(bg(c("Title"),a.title))),a.journal&&"?"!==a.journal&&b.push(bg(c("Journal"),a.journal)),1===b.length?b[0]:b},bl=function(a){var b=a.children;return(0,c.jsx)("p",{style:F.fu.modalHeading,children:b})},bm=function(d){var f=d.isTerminal,g=d.node,e=d.t,b=(0,$.rs)(g,"num_date");if(!b)return null;var a=(0,$.rs)(g,"num_date",{confidence:!0});return b&&a&&a[0]!==a[1]?(0,c.jsxs)(c.Fragment,{children:[bg(e(f?"Inferred collection date":"Inferred date"),(0,I.hT)(b)),bg(e("Date Confidence Interval"),"(".concat((0,I.hT)(a[0]),", ").concat((0,I.hT)(a[1]),")"))]}):bg(e(f?"Collection date":"Inferred date"),(0,I.hT)(b))},bn=function(a){if(!a.node_attrs)return[];var b=["author","div","num_date","gisaid_epi_isl","genbank_accession","accession","url"];return Object.keys(a.node_attrs).filter(function(a){return!b.includes(a)})},bo=function(e){var g,h=e.node,b=e.trait,d=e.colorings,m=e.isTerminal,a=(0,$.rs)(h,b),f=(0,$.rs)(h,b,{confidence:!0}),k=(null===(g=d[b])|| void 0===g?void 0:g.type)==="temporal";if("number"!=typeof a||k||Number.isInteger(a)||(a=Number.parseFloat(a).toPrecision(3)),!(0,j.mg)(a))return null;f&&a in f&&(!m||f[a]<.99)&&(a="".concat(a," (").concat((100*f[a]).toFixed(0),"%)"));var i=d&&d[b]&&d[b].title?d[b].title:b;if(k&&"number"==typeof a)return bg(i,(0,I.hT)(a));var l=(0,$.eD)(h,b);return l?(0,c.jsx)(bh,{title:i,url:l,value:a}):bg(i,a)},bp=function(b){var g,f=b.selectedNode,l=b.nodesLhsTree,m=b.nodesRhsTree,q=b.clearSelectedNode,r=b.colorings,n=b.observedMutations,o=b.geneSortFn,i=b.tipLabelKey,d=b.t;if(!f)return null;var a=null===(g=f.treeId===bW?l:m)|| void 0===g?void 0:g[f.idx];if(!a)return console.error("Internal error retrieving selected node"),null;var k=function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){be(d,a,c[a])})}return d}({},F.fu.panel);k.maxHeight="70%";var h=!a.hasChildren,e=!f.isBranch,p=i!==j.Ac||!h;return(0,c.jsx)("div",{style:F.fu.modalContainer,onClick:function(){return q(f)},children:(0,c.jsxs)("div",{className:"panel",style:k,onClick:function(a){return bf(a)},children:[(0,c.jsx)(bl,{children:a_(d,a,i,!e)}),(0,c.jsx)("table",{children:(0,c.jsxs)("tbody",{children:[!h&&bg(d("Number of terminal tips"),a.fullTipCount),p&&bg(d("Node name"),a.name),e&&(0,c.jsx)(bj,{node:a,t:d}),(0,c.jsx)(bm,{isTerminal:h,node:a,t:d}),e&&(0,c.jsx)(bk,{node:a,t:d}),bn(a).map(function(b){return(0,c.jsx)(bo,{node:a,trait:b,colorings:r,isTerminal:h},b)}),e&&(0,c.jsx)(bi,{node:a}),bg("","")]})}),(0,c.jsx)(a$,{node:a,geneSortFn:o,isTip:e,observedMutations:n}),(0,c.jsx)("p",{style:F.fu.comment,children:d("Click outside this box to go back to the tree")})]})})},bq=function(f,g,c,a){var b={},h={},e=f?c.tree:c.treeToo,d=f?a.tree:a.treeToo,i=e.idxOfInViewRootNode!==d.idxOfInViewRootNode,k=c.dateMinNumeric!==a.dateMinNumeric||c.dateMaxNumeric!==a.dateMaxNumeric,l=c.filters!==a.filters;if(g.dateRange=[a.dateMinNumeric,a.dateMaxNumeric],d.nodeColorsVersion&&(e.nodeColorsVersion!==d.nodeColorsVersion||a.colorByConfidence!==c.colorByConfidence)&&(b.changeColorBy=!0,b.branchStroke=(0,H.qL)(d,!0,a.colorByConfidence,a.colorBy),b.tipStroke=(0,H.qL)(d,!1,a.colorByConfidence,a.colorBy),b.fill=b.tipStroke.map(H.m6)),d.visibilityVersion&&e.visibilityVersion!==d.visibilityVersion&&(b.changeVisibility=!0,b.visibility=d.visibility),d.tipRadiiVersion&&e.tipRadiiVersion!==d.tipRadiiVersion&&(b.changeTipRadii=!0,b.tipRadii=d.tipRadii),e.branchThicknessVersion!==d.branchThicknessVersion&&(b.changeBranchThickness=!0,b.branchThickness=d.branchThickness),c.distanceMeasure!==a.distanceMeasure&&(b.newDistance=a.distanceMeasure),c.explodeAttr!==a.explodeAttr&&(b.changeNodeOrder=!0,b.focus=a.focus),c.focus!==a.focus?(b.focus=a.focus,b.updateLayout=!0):!0===c.focus&& !0===a.focus&&(i||k||l)&&(b.focus=!0,b.updateLayout=!0),!0===c.canRenderBranchLabels&& !1===a.canRenderBranchLabels?b.newBranchLabellingKey="none":(!1===c.canRenderBranchLabels&& !0===a.canRenderBranchLabels||c.selectedBranchLabel!==a.selectedBranchLabel|| !1===c.scatterVariables.showBranches&& !0===a.scatterVariables.showBranches)&&(b.newBranchLabellingKey=a.selectedBranchLabel),c.showAllBranchLabels!==a.showAllBranchLabels&&(b.showAllBranchLabels=a.showAllBranchLabels),c.tipLabelKey!==a.tipLabelKey&&(b.newTipLabelKey=a.tipLabelKey),!0===c.temporalConfidence.display&& !1===a.temporalConfidence.display|| !0===c.temporalConfidence.on&& !1===a.temporalConfidence.on?b.removeConfidences=!0:!0===a.temporalConfidence.display&& !1===c.temporalConfidence.on&& !0===a.temporalConfidence.on&&(b.showConfidences=!0),("scatter"===a.layout||"clock"===a.layout)&&c.scatterVariables!==a.scatterVariables&&(b.updateLayout=!0,b.scatterVariables=a.scatterVariables),c.layout!==a.layout&&(b.newLayout=a.layout),i){var m=g.nodes[d.idxOfInViewRootNode];b.zoomIntoClade=m,h.selectedNode={},"unrooted"===a.layout&&(b.updateLayout=!0)}(c.width!==a.width||c.height!==a.height)&&(b.svgHasChangedDimensions=!0),f&&c.showTreeToo!==a.showTreeToo&&(b.svgHasChangedDimensions=!0);var j=Object.keys(b).length;return j&&(b.animationInProgress="Pause"===a.animationPlayPauseButton,g.change(b)),[!!Object.keys(h).length&&h,j]},br=function(a){a.visibility===j.m7&&((1===a.that.params.orientation[0]?this.state.tree:this.state.treeToo).svg.select("#"+(0,Q.yQ)("tip",a.n.name)).attr("r",function(a){return a.r+4}),this.setState({hoveredNode:{node:a,isBranch:!1}}))},bs=function(a){a.visibility===j.m7&&(this.props.narrativeMode||(this.props.dispatch({type:J.c7,name:a.n.name,idx:a.n.arrayIdx,isBranch:!1,treeId:a.that.id}),this.props.dispatch((0,C.Rb)("add",j.Ac,[a.n.name]))))},bt=function(a){if(a.visibility===j.m7){if(Y(a),this.props.temporalConfidence.exists&&this.props.temporalConfidence.display&&!this.props.temporalConfidence.on){var b=1===a.that.params.orientation[0]?this.state.tree:this.state.treeToo;"confidenceIntervals"in b.groups||(b.groups.confidenceIntervals=b.svg.append("g").attr("id","confidenceIntervals")),b.groups.confidenceIntervals.selectAll(".conf").data([a]).enter().call(function(a){return b.drawSingleCI(a,.5)})}this.setState({hoveredNode:{node:a,isBranch:!0}})}},bu=function(a){if(a.visibility===j.m7&&!this.props.narrativeMode){if(window.event.shiftKey){this.props.dispatch({type:J.c7,name:a.n.name,idx:a.n.arrayIdx,isBranch:!0,treeId:a.that.id});return}var d,b,c=[void 0,void 0];if(a.n.branch_attrs&& void 0!==a.n.branch_attrs.labels&&(b=Object.keys(a.n.branch_attrs.labels).filter(function(a){return"aa"!==a})),b&&b.length){var h=this.props.tree.availableBranchLabels;b.sort(function(a,b){return h.indexOf(a)-h.indexOf(b)});var e=b[0];d="".concat(e,":").concat(a.n.branch_attrs.labels[e])}var g=1===a.that.params.orientation[0]?this.props.tree.observedMutations:this.props.treeToo.observedMutations,f=(0,Q.uN)(a.n)===a.n.arrayIdx?(0,Q.s7)(a.n,this.props.distanceMeasure,g).arrayIdx:a.n.arrayIdx;1===a.that.params.orientation[0]?c[0]=f:c[1]=f,this.props.dispatch((0,C.ss)({root:c,cladeSelected:d}))}},bv=function(a){X(a),this.props.temporalConfidence.exists&&this.props.temporalConfidence.display&&!this.props.temporalConfidence.on&&(1===a.that.params.orientation[0]?this.state.tree:this.state.treeToo).removeConfidence(),this.setState({hoveredNode:null})},bw=function(a){var b=1===a.that.params.orientation[0]?this.state.tree:this.state.treeToo;this.state.hoveredNode&&b.svg.select("#"+(0,Q.yQ)("tip",a.n.name)).attr("r",function(a){return a.r}),this.setState({hoveredNode:null})},bx=function(a){a.isBranch||(a.existingFilterState?"inactive"===a.existingFilterState&&this.props.dispatch((0,C.Rb)("inactivate",j.Ac,[a.name])):this.props.dispatch((0,C.Rb)("remove",j.Ac,[a.name]))),this.props.dispatch({type:J.q$})},by=b(82250),bz=function(b,d,g,a){var h=d?b.domRefs.mainTree:b.domRefs.secondTree,c=d?a.tree:a.treeToo;if(!c.loaded){console.warn("can't run renderTree (not loaded)");return}var e=a.canRenderBranchLabels;Object.prototype.hasOwnProperty.call(a.scatterVariables,"showBranches")&& !1===a.scatterVariables.showBranches&&(e=!1);var f=(0,H.qL)(c,!1,a.colorByConfidence,a.colorBy);g.render((0,by.Z)(h),a.layout,a.distanceMeasure,a.focus,{grid:!0,confidence:a.temporalConfidence.display,branchLabelKey:e&&a.selectedBranchLabel,showAllBranchLabels:a.showAllBranchLabels,orientation:d?[1,1]:[-1,1],tipLabels:!0,showTipLabels:!0},{onTipHover:br.bind(b),onTipClick:bs.bind(b),onBranchHover:bt.bind(b),onBranchClick:bu.bind(b),onBranchLeave:bv.bind(b),onTipLeave:bw.bind(b),tipLabel:ac(a.tipLabelKey)},c.branchThickness,c.visibility,a.temporalConfidence.on,c.vaccines,(0,H.qL)(c,!0,a.colorByConfidence,a.colorBy),f,f.map(H.m6),c.tipRadii,[a.dateMinNumeric,a.dateMaxNumeric],a.scatterVariables)};function bA(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function bB(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function bC(a){return(bC=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function bD(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){bB(d,a,c[a])})}return d}function bE(a,b){return(bE=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var bF=function(f){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&bE(b,a)}(e,f);var g,h,a,b,d,i=(g=e,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=bC(g);if(h){var f=bC(this).constructor;c=Reflect.construct(e,arguments,f)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function e(b){var a;return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,e),(a=i.call(this,b)).state={left:0,top:31,lookup:void 0,drawn:!1},a.timeout=!1,a}return a=e,b=[{key:"shouldComponentUpdate",value:function(a){return this.props.width!==a.width||this.props.height!==a.height||this.props.leftTreeName!==a.leftTreeName||this.props.rightTreeName!==a.rightTreeName}},{key:"drawLines",value:function(a){a||(a=this.props);var b,c=a.lookup.length>750?.25:a.lookup.length>100?.5:1;(0,by.Z)(this.d3ref).selectAll("*").remove();var d=(b=a,function(a){var c=b.leftNodes[a[0]].shell,d=b.rightNodes[a[1]].shell;return"M ".concat(c.xTip,",").concat(c.yTip," H ").concat(b.width/2-b.spaceBetweenTrees/2," L ").concat(b.width/2+b.spaceBetweenTrees/2,",").concat(d.yTip," H ").concat(b.width/2+b.spaceBetweenTrees/2+d.xTip)});(0,by.Z)(this.d3ref).selectAll(".tangleLine").data(a.lookup).enter().append("path").attr("class","tangleLine").attr("d",d).attr("stroke-width",c).attr("stroke",function(b){return a.colors[b[0]]}).attr("fill","none")}},{key:"UNSAFE_componentWillReceiveProps",value:function(a){!this.state.drawn&&a.rightNodes[0].shell&&(this.drawLines(a),this.setState({drawn:!0}))}},{key:"componentDidMount",value:function(){!this.state.drawn&&this.props.rightNodes[0].shell&&(this.drawLines(this.props),this.setState({drawn:!0}))}},{key:"componentDidUpdate",value:function(a){(this.props.width!==a.width||this.props.height!==a.height)&&(this.timeout?window.clearTimeout(this.timeout):(0,by.Z)(this.d3ref).selectAll(".tangleLine").remove(),this.timeout=window.setTimeout(this.drawLines.bind(this),1e3))}},{key:"render",value:function(){var d=this,a={position:"absolute",top:5,zIndex:100,fontSize:16,color:"#000",fontWeight:500},b=[this.props.width/2-this.props.spaceBetweenTrees/2,this.props.width/2+this.props.spaceBetweenTrees/2];return(0,c.jsxs)("div",{id:"TangleContainer",children:[(0,c.jsx)("div",{id:"MainTreeTitle",style:bD({},a,{left:b[0],transform:"translateX(-100%)"}),children:this.props.leftTreeName}),(0,c.jsx)("div",{id:"SecondTreeTitle",style:bD({},a,{left:b[1]}),children:this.props.rightTreeName}),(0,c.jsx)("div",{id:"TangleSvgContainer",style:{position:"absolute",left:this.state.left,top:this.state.top,zIndex:100,pointerEvents:"none"},children:(0,c.jsx)("svg",{id:"Tangle",style:{cursor:"default",width:this.props.width,height:this.props.height},ref:function(a){d.d3ref=a}})})]})}}],bA(a.prototype,b),d&&bA(a,d),e}(f.Component);function bG(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function bH(a){return(bH=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function bI(a,b){return(bI=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var bJ=function(f){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&bI(b,a)}(e,f);var g,h,a,d,b,i=(g=e,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=bH(g);if(h){var f=bH(this).constructor;c=Reflect.construct(e,arguments,f)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(d)});function e(b){var a;return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,e),(a=i.call(this,b)).state={hasError:!1},a}return a=e,b=[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}],d=[{key:"componentDidCatch",value:function(a,b){console.error(a),console.error(b)}},{key:"render",value:function(){return this.state.hasError?this.props.showNothing?null:(0,c.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],bG(a.prototype,d),b&&bG(a,b),e}(f.Component),bK=function(k,l){for(var a=0,b=0,c=0,e=0,f=0,g=0,h=0;h<l.nodes.length;h++){var d=l.nodes[h];if(!d.n.children&&k.strainToNode[d.n.name]){var i=k.strainToNode[d.n.name].displayOrder,j=d.displayOrder;a++,b+=i,c+=j,e+=Math.pow(i,2),f+=Math.pow(j,2),g+=i*j}}return b/=a,c/=a,e/=a,f/=a,g/=a,(g-b*c)/Math.sqrt((e-Math.pow(b,2))*(f-Math.pow(c,2)))},bL=function(f,b){for(var g=bK(f,b),d=0;d<b.nodes.length;d++){var e=b.nodes[d],c=e.n;if(c.children){for(var a=c;a.hasChildren;){var j=a.children[0];a.children.forEach(function(a){a.shell.displayOrder<j.shell.displayOrder&&(j=a)}),a=j}var h=a.shell.displayOrder-1;c.children.reverse(),(0,Q.gH)(e,h);var i=bK(f,b);g>i?(c.children.reverse(),(0,Q.gH)(e,h)):g=i}}},bM=function(b,a){bL(b,a),(0,Q.Td)({nodes:a.nodes,focus:!1})};function bN(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function bO(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function bP(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function bQ(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function bR(a){return(bR=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function bS(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){bQ(d,a,c[a])})}return d}function bT(a,b){return(bT=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function bU(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||bV(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bV(a,c){if(a){if("string"==typeof a)return bN(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return bN(a,c)}}var bW="LEFT",y=function(f){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&bT(b,a)}(e,f);var g,h,a,b,d,i=(g=e,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var b,d,a,c,e=bR(g);if(h){var f=bR(this).constructor;c=Reflect.construct(e,arguments,f)}else c=e.apply(this,arguments);return d=this,(a=c)&&("object"==((b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)||"function"==typeof a)?a:bO(d)});function e(b){var a;return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,e),bQ(bO(a=i.call(this,b)),"redrawTree",function(){a.props.dispatch((0,C.ss)({root:[0,0]}))}),bQ(bO(a),"handlekeydownEvent",function(b){"Escape"===b.key&&a.props.selectedNode&&a.clearSelectedNode(a.props.selectedNode)}),bQ(bO(a),"getStyles",function(){var d=!!a.props.tree.idxOfFilteredRoot&&a.props.tree.idxOfInViewRootNode!==a.props.tree.idxOfFilteredRoot,e=!!a.props.treeToo.idxOfFilteredRoot&&a.props.treeToo.idxOfInViewRootNode!==a.props.treeToo.idxOfFilteredRoot,c=d||e,b=0!==a.props.tree.idxOfInViewRootNode||0!==a.props.treeToo.idxOfInViewRootNode;return{treeButtonsDiv:{zIndex:100,position:"absolute",right:5,top:0},resetTreeButton:{zIndex:100,display:"inline-block",marginLeft:4,cursor:b?"pointer":"auto",color:b?F.I6:F.CA},zoomToSelectedButton:{zIndex:100,display:"inline-block",cursor:c?"pointer":"auto",color:c?F.I6:F.CA,pointerEvents:c?"auto":"none"},zoomOutButton:{zIndex:100,display:"inline-block",cursor:b?"pointer":"auto",color:b?F.I6:F.CA,pointerEvents:b?"auto":"none",marginRight:"4px"}}}),bQ(bO(a),"zoomToSelected",function(){a.props.dispatch((0,C.ss)({root:[a.props.tree.idxOfFilteredRoot,a.props.treeToo.idxOfFilteredRoot]}))}),bQ(bO(a),"zoomBack",function(){if(0!==a.props.tree.idxOfInViewRootNode){var b,c,d=a.props.tree.nodes[a.props.tree.idxOfInViewRootNode];b=(0,Q.s7)(d,a.props.distanceMeasure,a.props.tree.observedMutations).arrayIdx}if(0!==a.props.treeToo.idxOfInViewRootNode){var e=a.props.treeToo.nodes[a.props.treeToo.idxOfInViewRootNode];c=(0,Q.s7)(e,a.props.distanceMeasure,a.props.treeToo.observedMutations).arrayIdx}a.props.dispatch((0,C.ss)({root:[b,c]}))}),a.domRefs={mainTree:void 0,secondTree:void 0},a.tangleRef=void 0,a.state={hoveredNode:null,tree:null,treeToo:null},a.clearSelectedNode=bx.bind(bO(a)),a}return a=e,b=[{key:"setUpAndRenderTreeToo",value:function(b,a){a.treeToo=new aI(b.treeToo.nodes,"RIGHT",b.treeToo.idxOfInViewRootNode),j.PD&&bM(a.tree,a.treeToo),bz(this,!1,a.treeToo,b)}},{key:"componentDidMount",value:function(){if(document.addEventListener("keyup",this.handlekeydownEvent),this.props.tree.loaded){var a={};a.tree=new aI(this.props.tree.nodes,bW,this.props.tree.idxOfInViewRootNode),bz(this,!0,a.tree,this.props),this.props.showTreeToo&&this.setUpAndRenderTreeToo(this.props,a),a.geneSortFn=(0,$.MG)(this.props.genomeMap),this.setState(a)}}},{key:"componentDidUpdate",value:function(b){var c,a={},d=!1,e=bU(bq(!0,this.state.tree,b,this.props),2),f=e[0],g=e[1];f&&(a=f),b.showTreeToo!==this.props.showTreeToo?this.props.showTreeToo?(this.state.treeToo&&this.state.treeToo.clearSVG(),a.tree=this.state.tree,this.setUpAndRenderTreeToo(this.props,a),this.tangleRef&&this.tangleRef.drawLines()):a.treeToo=null:this.state.treeToo&&((c=bU(bq(!1,this.state.treeToo,b,this.props),2))[0],d=c[1]),this.tangleRef&&(g||d)&&this.tangleRef.drawLines(),Object.keys(a).length&&this.setState(a)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keyup",this.handlekeydownEvent)}},{key:"renderTreeDiv",value:function(a){var b=a.width,d=a.height,e=a.mainTree,f=this;return(0,c.jsx)("svg",{id:e?"MainTree":"SecondTree",style:{pointerEvents:"auto",cursor:"default",userSelect:"none"},width:b,height:d,ref:function(a){e?f.domRefs.mainTree=a:f.domRefs.secondTree=a}})}},{key:"render",value:function(){var d,f=this,a=this.props.t,b=this.getStyles(),e=this.props.showTreeToo?(this.props.width-100)/2:this.props.width;return(0,c.jsxs)(D.Z,{center:!0,infocard:this.props.showOnlyPanels,title:a("Phylogeny"),children:[(0,c.jsx)(bJ,{children:(0,c.jsx)(O,{width:this.props.width})}),(0,c.jsx)(bd,{selectedNode:this.state.hoveredNode,colorBy:this.props.colorBy,colorByConfidence:this.props.colorByConfidence,colorScale:this.props.colorScale,colorings:this.props.colorings,geneSortFn:this.state.geneSortFn,observedMutations:this.props.tree.observedMutations,panelDims:{width:this.props.width,height:this.props.height,spaceBetweenTrees:100},tipLabelKey:this.props.tipLabelKey,t:a}),(0,c.jsx)(bp,{clearSelectedNode:this.clearSelectedNode,selectedNode:this.props.selectedNode,nodesLhsTree:this.props.tree.nodes,nodesRhsTree:null===(d=this.props.treeToo)|| void 0===d?void 0:d.nodes,observedMutations:this.props.tree.observedMutations,colorings:this.props.colorings,geneSortFn:this.state.geneSortFn,tipLabelKey:this.props.tipLabelKey,t:a}),this.props.showTangle&&this.state.tree&&this.state.treeToo?(0,c.jsx)(bF,{ref:function(a){f.tangleRef=a},width:this.props.width,height:this.props.height,lookup:this.props.treeToo.tangleTipLookup,leftNodes:this.props.tree.nodes,rightNodes:this.props.treeToo.nodes,colors:this.props.tree.nodeColors,cVersion:this.props.tree.nodeColorsVersion,vVersion:this.props.tree.visibilityVersion,metric:this.props.distanceMeasure,spaceBetweenTrees:100,leftTreeName:this.props.tree.name,rightTreeName:this.props.showTreeToo}):null,this.renderTreeDiv({width:e,height:this.props.height,mainTree:!0}),this.props.showTreeToo?(0,c.jsx)("div",{id:"treeSpacer",style:{width:100}}):null,this.props.showTreeToo?this.renderTreeDiv({width:e,height:this.props.height,mainTree:!1}):null,this.props.narrativeMode?null:(0,c.jsxs)("div",{style:bS({},b.treeButtonsDiv),children:[(0,c.jsx)("button",{style:bS({},F.PJ,b.zoomOutButton),onClick:this.zoomBack,children:(0,c.jsx)(B.oN5,{})}),(0,c.jsx)("button",{style:bS({},F.PJ,b.zoomToSelectedButton),onClick:this.zoomToSelected,children:a("Zoom to Selected")}),(0,c.jsx)("button",{style:bS({},F.PJ,b.resetTreeButton),onClick:this.redrawTree,children:a("Reset Layout")})]})]})}}],bP(a.prototype,b),d&&bP(a,d),e}(f.Component),z=(0,i.Zh)()(y),bX=(0,g.$j)(function(a){return{tree:a.tree,treeToo:a.treeToo,selectedNode:a.controls.selectedNode,dateMinNumeric:a.controls.dateMinNumeric,dateMaxNumeric:a.controls.dateMaxNumeric,filters:a.controls.filters,quickdraw:a.controls.quickdraw,colorBy:a.controls.colorBy,colorByConfidence:a.controls.colorByConfidence,layout:a.controls.layout,scatterVariables:a.controls.scatterVariables,temporalConfidence:a.controls.temporalConfidence,distanceMeasure:a.controls.distanceMeasure,explodeAttr:a.controls.explodeAttr,focus:a.controls.focus,colorScale:a.controls.colorScale,colorings:a.metadata.colorings,genomeMap:a.entropy.genomeMap,showTreeToo:a.controls.showTreeToo,showTangle:a.controls.showTangle,panelsToDisplay:a.controls.panelsToDisplay,selectedBranchLabel:a.controls.selectedBranchLabel,canRenderBranchLabels:a.controls.canRenderBranchLabels,showAllBranchLabels:a.controls.showAllBranchLabels,tipLabelKey:a.controls.tipLabelKey,narrativeMode:a.narrative.display,animationPlayPauseButton:a.controls.animationPlayPauseButton,showOnlyPanels:a.controls.showOnlyPanels}})(z)},96313:function(c,b,a){"use strict";a.d(b,{Fw:function(){return s},Td:function(){return j},Yo:function(){return h},dX:function(){return k},gH:function(){return i},jP:function(){return q},rG:function(){return t},s7:function(){return o},uN:function(){return l},yQ:function(){return g}});var d=a(80386),e=a(26061),f=a(69856),g=function(a,b){var c="".concat(a,"_").concat(b).replace(/(\W+)/g,"-");return CSS.escape(c)},h=function(d,e){e(d);var a=d.n;if(a.hasChildren&& void 0!==a.children){var b=!0,f=!1,g=void 0;try{for(var i,c=a.children[Symbol.iterator]();!(b=(i=c.next()).done);b=!0){var j=i.value;h(j.shell,e)}}catch(k){f=!0,g=k}finally{try{b||null==c.return||c.return()}finally{if(f)throw g}}}},i=function(c,e,a){var b=c.n.children;if(!b||!b.length)return 0!==c.n.fullTipCount&& void 0!==a&&(a+=e(c)),c.displayOrder=a,c.displayOrderRange=[a,a],a;for(var d=b.length-1;d>=0;d--)a=i(b[d].shell,e,a);return c.displayOrder=b.reduce(function(a,b){return a+b.shell.displayOrder},0)/b.length,c.displayOrderRange=[b[0].shell.displayOrder,b[b.length-1].shell.displayOrder],a},j=function(n){var g,c,a=n.nodes,o=n.focus,s=a[0].n.children.filter(function(a){return 0!==a.fullTipCount}).length,t=o?a[0].n.tipCount:a[0].n.fullTipCount,u=(g=s,c=t,1===g||c<10?0:2*g>c?0:c/20),h=function(a){return 1};if(o){var d=a[0].n.tipCount,e=a[0].n.fullTipCount,b=.8;b=Math.min(b,d/5);var v,x=(b=Math.max(b,d/e))*e/d,y=(1-b)*e/(e-d);h=(v=!1,function(a){var b=a.visibility===f.m7||v?x:y;return v=a.visibility===f.m7,b})}var j=0,k=!0,p=!1,q=void 0;try{for(var r,l=a[0].n.children[Symbol.iterator]();!(k=(r=l.next()).done);k=!0){var m=r.value;0===m.fullTipCount?i(a[m.arrayIdx],h,void 0):(j=i(a[m.arrayIdx],h,j),j+=u)}}catch(w){p=!0,q=w}finally{try{k||null==l.return||l.return()}finally{if(p)throw q}}a[0].displayOrder=void 0,a[0].displayOrderRange=[void 0,void 0]},k=function(a){return a>1?Math.round((a+Number.EPSILON)*1e3)/1e3:a>.01?Math.round((a+Number.EPSILON)*1e4)/1e4:a.toExponential(3)},l=function(a){return a.shell.that.zoomNode.n.arrayIdx};function m(a,b,c){if("num_date"===c){var d=(a.shell.that.dateRange[1]-a.shell.that.dateRange[0])/50;return(0,e.rs)(a,"num_date")-d<(0,e.rs)(b,"num_date")}var f=(a.shell.that.xScale.domain()[1]-a.shell.that.nodes[0].depth)/50;return(0,e.KT)(a)-f<(0,e.KT)(b)}function n(a){if(a.parent===a)return a;var b,c,d=(0,e.MS)(a,{});return(null==d?void 0:null===(b=d.nuc)|| void 0===b?void 0:null===(c=b.unique)|| void 0===c?void 0:c.length)>0?a.parent:n(a.parent)}var o=function(b,c,d){var a=b.parent;if("div"===c&&p(d))return n(b);for(;m(b,a,c)&&a!==a.parent;)a=a.parent;return a};function p(c){for(var b=Object.keys(c),a=b.length-1;a>=0;a--)if(b[a].startsWith("nuc:"))return!0;return!1}function q(a){return 5>=(0,d.Z)(a.domain())}var r=function(a){return"__ROOT"===a.parent.name&&a.parentInfo.original},s=function(a){return r(a)?a.parentInfo.original:a.parent},t=function(a){var b=a.map(function(a){return a.displayOrder}).reduce(function(b,a){return(null!=a?a:0)>b?a:b},0);return function(a){return[b-a.displayOrder,r(a.n)?void 0:b-a.n.parent.shell.displayOrder]}}},17587:function(f,d,c){"use strict";c.d(d,{CA:function(){return h},Cc:function(){return g},H2:function(){return i},I6:function(){return b},PJ:function(){return j},cq:function(){return m},fp:function(){return l},fu:function(){return n},kU:function(){return a},ug:function(){return k}});var e=c(69856),g="Lato, Helvetica Neue, Helvetica, sans-serif",a="Lato, Helvetica Neue, Helvetica, sans-serif",b="#333",h="#BBB",i={backgroundColor:"#FFF",fontFamily:a,width:e.HB-13,borderSpacing:0,fontSize:14,paddingLeft:"10px",border:"1px solid #ccc",height:36,appearance:"none",borderRadius:"4px",color:b,fontWeight:400,marginBottom:"3px"},j={borderTop:"1px solid #BBB",borderLeft:"1px solid #CCC",borderRight:"1px solid #CCC",borderBottom:"1px solid #CCC",borderRadius:"0px 0px 3px 3px",paddingTop:3,paddingBottom:3,paddingLeft:6,paddingRight:6,backgroundColor:"#fff",fontWeight:400,color:b,fontFamily:a,fontSize:12,textTransform:"uppercase"},k={borderTop:"1px solid #BBB",borderLeft:"1px solid #CCC",borderRight:"1px solid #CCC",borderBottom:"1px solid #CCC",borderRadius:"0px 0px 3px 3px",paddingTop:3,paddingBottom:3,paddingLeft:6,paddingRight:6,backgroundColor:"#fff"},l={border:"none",backgroundColor:"inherit",padding:0,margin:0,cursor:"pointer",fontFamily:a,color:b,fontWeight:400,textTransform:"uppercase",fontSize:12},m={border:"none",backgroundColor:"inherit",padding:0,margin:0,cursor:"pointer",fontFamily:a,color:"#5097BA",fontWeight:400,textTransform:"uppercase",fontSize:12},n={branchInfoHeading:{fontSize:15,fontWeight:400,verticalAlign:"middle",padding:"5px"},buttonLink:{float:"right",fontFamily:a,fontSize:14,fontWeight:400,textDecoration:"none",pointerEvents:"auto",background:"none",color:"white",cursor:"pointer",textTransform:"uppercase",borderRadius:2,border:"1px solid #CCC",verticalAlign:"middle"},tooltip:{position:"relative",padding:5,color:"white",fontFamily:a,fontSize:14,lineHeight:1,fontWeight:300},modalContainer:{position:"absolute",width:"100%",height:"100%",pointerEvents:"all",top:0,left:0,zIndex:2e3,backgroundColor:"rgba(80, 80, 80, .20)",display:"flex",justifyContent:"center",alignItems:"center",wordWrap:"break-word",wordBreak:"break-word"},panel:{position:"relative",paddingLeft:30,padding:"5% 5%",borderRadius:5,backgroundColor:"rgba(55,55,55,0.9)",color:"white",fontFamily:a,fontSize:18,lineHeight:1,fontWeight:300,maxWidth:"80%",overflowY:"auto"},modalHeading:{fontSize:24,fontWeight:400},modalSubheading:{fontSize:20,fontWeight:400,marginTop:"20px",marginBottom:"20px"},tooltipHeading:{fontSize:18,fontWeight:400,marginBottom:"10px"},comment:{fontStyle:"italic",fontWeight:200,fontSize:14,marginTop:"10px"},topRightMessage:{fontStyle:"italic",fontWeight:200,fontSize:14,textAlign:"right",marginTop:"-20px"},list:{paddingLeft:15,listStyleType:"disc"},item:{paddingTop:4,paddingBottom:4,minWidth:130,verticalAlign:"top"},break:{marginBottom:"10px"}}},74864:function(c,a,b){"use strict";b.d(a,{j:function(){return e}});var d=b(5859),e=function(){return{width:window.innerWidth,height:window.innerHeight,docHeight:window.document.body.clientHeight}};a.Z=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{browserDimensions:e()},b=arguments.length>1?arguments[1]:void 0;return b.type===d.eO?Object.assign({},a,{browserDimensions:b.data}):a}},65074:function(c,b,a){"use strict";a.d(b,{TK:function(){return p},lU:function(){return o},xi:function(){return q}});var d=a(44163),e=a(69856),f=a(5859),g=a(74864),h=a(61382),i=a(88747);function j(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function k(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function l(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){k(d,a,c[a])})}return d}function m(a){return function(a){if(Array.isArray(a))return j(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||n(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(a,c){if(a){if("string"==typeof a)return j(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return j(a,c)}}var o=function(){var a={distanceMeasure:e.cJ,layout:e.$j,focus:e.xE,geoResolution:e.Eq,filters:{},filtersInFooter:[],colorBy:e.VK,selectedBranchLabel:"none",tipLabelKey:e.Ac,showTransmissionLines:!0},b=r();b.setDefault&&(a.sidebarOpen=b.sidebarOpen);var c=(0,d.hT)((0,d.IV)()-e.Zk),f=(0,d.ow)(),h=(0,d.O$)(c),i=(0,d.O$)(f);return{defaults:a,available:void 0,canTogglePanelLayout:!0,temporalConfidence:{exists:!1,display:!1,on:!1},layout:a.layout,scatterVariables:{},distanceMeasure:a.distanceMeasure,focus:a.focus,dateMin:c,dateMinNumeric:h,dateMax:f,dateMaxNumeric:i,absoluteDateMin:c,absoluteDateMinNumeric:h,absoluteDateMax:f,absoluteDateMaxNumeric:i,colorBy:a.colorBy,colorByConfidence:!1,colorScale:void 0,explodeAttr:void 0,selectedBranchLabel:"none",showAllBranchLabels:!1,selectedNode:null,canRenderBranchLabels:!0,analysisSlider:!1,geoResolution:a.geoResolution,filters:a.filters,filtersInFooter:a.filtersInFooter,modal:null,quickdraw:!1,mapAnimationDurationInMilliseconds:3e4,mapAnimationStartDate:null,mapAnimationCumulative:!1,mapAnimationShouldLoop:!1,animationPlayPauseButton:"Play",panelsAvailable:[],panelsToDisplay:[],panelLayout:(0,g.j)().width>e.Tr?"grid":"full",tipLabelKey:a.tipLabelKey,showTreeToo:!1,showTangle:!1,zoomMin:void 0,zoomMax:void 0,branchLengthsToDisplay:"divAndDate",sidebarOpen:b.sidebarOpen,treeLegendOpen:void 0,mapLegendOpen:void 0,showOnlyPanels:!1,showTransmissionLines:!0,normalizeFrequencies:!0,measurementsCollectionKey:void 0,measurementsGroupBy:void 0,measurementsDisplay:void 0,measurementsShowOverallMean:void 0,measurementsShowThreshold:void 0,measurementsFilters:{}}},p={measurementsCollectionKey:void 0,measurementsGroupBy:void 0,measurementsDisplay:"mean",measurementsShowOverallMean:!0,measurementsShowThreshold:!0,measurementsFilters:{}},q=function(a,b,c){return a&&"num_date"===b&&"rect"===c};function r(){return{sidebarOpen:window.innerWidth>e.ly,setDefault:!1}}b.ZP=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:o(),b=arguments.length>1?arguments[1]:void 0;switch(b.type){case f.Ue:case f.RX:return b.controls;case f.TZ:return Object.assign({},a,{available:b.data});case f.g1:return Object.assign({},a,{explodeAttr:b.explodeAttr,colorScale:Object.assign({},a.colorScale,{visibleLegendValues:b.visibleLegendValues})});case f.Ct:return Object.assign({},a,{selectedBranchLabel:b.value});case f.sJ:return Object.assign({},a,{showAllBranchLabels:b.value});case f.v8:return Object.assign({},a,{layout:b.layout,canRenderBranchLabels:b.canRenderBranchLabels,scatterVariables:b.scatterVariables,temporalConfidence:Object.assign({},a.temporalConfidence,{display:q(a.temporalConfidence.exists,a.distanceMeasure,b.data),on:!1})});case f.T3:var j={distanceMeasure:b.data,branchLengthsToDisplay:a.branchLengthsToDisplay};return q(a.temporalConfidence.exists,b.data,a.layout)?j.temporalConfidence=Object.assign({},a.temporalConfidence,{display:!0}):j.temporalConfidence=Object.assign({},a.temporalConfidence,{display:!1,on:!1}),Object.assign({},a,j);case f.Ab:return l({},a,{focus:!a.focus});case f.OV:var c={quickdraw:b.quickdraw};b.dateMin&&(c.dateMin=b.dateMin,c.dateMinNumeric=b.dateMinNumeric),b.dateMax&&(c.dateMax=b.dateMax,c.dateMaxNumeric=b.dateMaxNumeric);var A=l({},a.colorScale,{visibleLegendValues:b.visibleLegendValues});return l({},a,c,{colorScale:A});case f.I_:return Object.assign({},a,{absoluteDateMin:b.data,absoluteDateMinNumeric:(0,d.O$)(b.data)});case f.u7:return Object.assign({},a,{absoluteDateMax:b.data,absoluteDateMaxNumeric:(0,d.O$)(b.data)});case f.Dg:return Object.assign({},a,{mapAnimationDurationInMilliseconds:b.data});case f.zp:return Object.assign({},a,{mapAnimationCumulative:b.data});case f.nm:return Object.assign({},a,{mapAnimationShouldLoop:b.data});case f.if:return Object.assign({},a,{quickdraw:"Play"!==b.data,animationPlayPauseButton:b.data});case f.b1:return Object.assign({},a,{mapAnimationStartDate:b.data});case f.Lv:return Object.assign({},a,{panelLayout:b.data});case f.W2:return l({},a,{tipLabelKey:b.key});case f.er:return b.controls;case f.bg:return Object.assign({},a,{panelsToDisplay:b.panelsToDisplay,panelLayout:b.panelLayout,canTogglePanelLayout:b.canTogglePanelLayout});case f.KA:var u=Object.assign({},a,{colorBy:b.colorBy,colorScale:b.colorScale,colorByConfidence:(0,h.ID)(a,b.colorBy)});return b.scatterVariables&&(u.scatterVariables=b.scatterVariables),u;case f.R7:return Object.assign({},a,{geoResolution:b.data});case f.c7:var k,v=((null===(k=a.filters)|| void 0===k?void 0:k[e.Ac])||[]).find(function(a){return a.value===b.name}),B=void 0===v?null:v.active?"active":"inactive";return l({},a,{selectedNode:{name:b.name,idx:b.idx,existingFilterState:B,isBranch:b.isBranch,treeId:b.treeId}});case f.q$:return l({},a,{selectedNode:null});case f.MY:var g=Object.assign({},a.filters,{});b.values.length?g[b.trait]=b.values:delete g[b.trait];var n=a.selectedNode;if(n){var p,w=null==g?void 0:null===(p=g[e.Ac])|| void 0===p?void 0:p.find(function(a){return a.value===n.name});w&&w.active||(n=null)}return Object.assign({},a,{filters:g,selectedNode:n});case f.EV:return Object.assign({},a,{temporalConfidence:Object.assign({},a.temporalConfidence,{on:!a.temporalConfidence.on})});case f.i0:return Object.assign({},a,{modal:b.modal||null});case f.YU:return Object.assign({},a,{showTreeToo:!1,showTangle:!1,canTogglePanelLayout:(0,i.px)(a.panelsAvailable),panelsToDisplay:a.panelsAvailable.slice()});case f.Rj:if(a.showTreeToo)return Object.assign({},a,{showTangle:!a.showTangle});return a;case f.gZ:return Object.assign({},a,{sidebarOpen:b.value});case f.Nn:return Object.assign({},a,{legendOpen:b.value});case f.JS:var r=!0,x=!1,y=void 0;try{for(var z,s=Object.keys(b.newColorings)[Symbol.iterator]();!(r=(z=s.next()).done);r=!0){var C=z.value;a.coloringsPresentOnTree.add(C)}}catch(D){x=!0,y=D}finally{try{r||null==s.return||s.return()}finally{if(x)throw y}}var t=Object.assign({},a,{coloringsPresentOnTree:a.coloringsPresentOnTree,filters:a.filters});return b.newGeoResolution&&!a.panelsAvailable.includes("map")&&(t=l({},t,{geoResolution:b.newGeoResolution.key,canTogglePanelLayout:(0,i.px)(m(a.panelsToDisplay).concat(["map"])),panelsAvailable:m(a.panelsAvailable).concat(["map"]),panelsToDisplay:m(a.panelsToDisplay).concat(["map"])})),t;case f.st:var E=Object.assign({},a.colorScale,{visibleLegendValues:b.visibleLegendValues});return Object.assign({},a,{colorScale:E});case f.Jv:return Object.assign({},a,{showTransmissionLines:b.data});case f.HS:return l({},a,{normalizeFrequencies:b.normalizeFrequencies});case f.yZ:if(Object.hasOwnProperty.call(b,"normalizeFrequencies"))return Object.assign({},a,{normalizeFrequencies:b.normalizeFrequencies});return a;case f.KL:case f.z:case f.cn:case f.jr:case f.Q5:case f.r7:case f.FI:return l({},a,b.controls);default:return a}}},60851:function(c,a,b){"use strict";b.d(a,{t:function(){return g}});var d=b(5859);function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){e(d,a,c[a])})}return d}var g=function(){return f({},{loaded:!1,showCounts:!1})};a.Z=function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:g(),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d.c5:return{loaded:!1,showCounts:!1};case d.Ue:case d.RX:return a.entropy;case d.Rn:return Object.assign({},b,{loaded:!0,bars:a.data,maxYVal:a.maxYVal});case d.pM:return Object.assign({},b,{showCounts:a.showCounts});case d.fE:return f({},b,a);default:return b}}},64458:function(c,a,b){"use strict";b.d(a,{P:function(){return e}});var d=b(5859),e=function(){return{loaded:!1,data:void 0,pivots:void 0,matrix:void 0,projection_pivot:void 0,version:0}};a.Z=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:e(),b=arguments.length>1?arguments[1]:void 0;switch(b.type){case d.Ue:case d.HS:return b.frequencies?b.frequencies:a;case d.yZ:return Object.assign({},a,{loaded:!0,matrix:b.matrix,version:a.version+1});case d.c5:return e();default:return a}}},86802:function(c,a,b){"use strict";b.d(a,{h:function(){return g}});var d=b(5859);function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){e(d,a,c[a])})}return d}var g=function(){return{error:void 0,loaded:!1,defaultCollectionKey:"",collections:[],collectionToDisplay:{}}};a.Z=function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:g(),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d.Ue:return f({},a.measurements);case d.KL:return f({},b,{loaded:!0,defaultCollectionKey:a.defaultCollectionKey,collections:a.collections,collectionToDisplay:a.collectionToDisplay});case d.z:return f({},b,{loaded:!0,collectionToDisplay:a.collectionToDisplay});case d.k$:return f({},b,{loaded:!0,error:a.data});default:return b}}},46923:function(c,b,a){"use strict";var d=a(69856),e=a(5859);function f(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}b.Z=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{loaded:!1,metadata:null,rootSequence:void 0,identicalGenomeMapAcrossBothTrees:!1,rootSequenceSecondTree:void 0,colorOptions:d.uY},b=arguments.length>1?arguments[1]:void 0;switch(b.type){case e.c5:return Object.assign({},a,{loaded:!1});case e.Ue:case e.er:case e.RX:return b.metadata;case e.JS:var h,j=Object.assign({},a.colorings,b.newColorings),c=a.geoResolutions;return b.newGeoResolution&&(c=c?((function(a){if(Array.isArray(a))return f(a)})(h=c)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(h)||function(a,c){if(a){if("string"==typeof a)return f(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return f(a,c)}}(h)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([b.newGeoResolution]):[b.newGeoResolution]),Object.assign({},a,{colorings:j,geoResolutions:c});case e.TZ:if(a.buildUrl)return a;var i=function(a){if(a){for(var c=window.location.pathname.replace(/^\//,"").replace(/\/$/,"").split(":")[0],b=0;b<a.length;b++)if(a[b].request===c)return a[b].buildUrl;return!1}}(b.data.datasets);if(i)return Object.assign({},a,{buildUrl:i});return a;case e.s4:return function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){g(d,a,c[a])})}return d}({},a,{rootSequence:b.data});case e.YU:return Object.assign({},a,{identicalGenomeMapAcrossBothTrees:!1,rootSequenceSecondTree:void 0});default:return a}}},35507:function(c,a,b){"use strict";var d=b(5859);function e(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function f(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){e(d,a,c[a])})}return d}var g={loaded:!1,blocks:null,blockIdx:void 0,pathname:void 0,display:!1,title:void 0};a.Z=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:g,b=arguments.length>1?arguments[1]:void 0;switch(b.type){case d.c5:return f({},a,{loaded:!1,display:!1});case d.RX:if(b.narrative){var c=b.narrative;return{loaded:!0,display:!0,blocks:c,title:c[0].__html.match(/>(.+?)</)[1],pathname:window.location.pathname,blockIdx:b.query.n||0}}return a;case d.Ue:if(Object.prototype.hasOwnProperty.call(b.query,"n"))return f({},a,{blockIdx:b.query.n});return a;case d.$f:if(a.loaded)return f({},a,{display:b.narrativeOn});return console.warn("Attempted to toggle narrative that was not loaded"),a;default:return a}}},52356:function(c,a,b){"use strict";var d=b(5859),e=function(b,c){for(var a=0,d=b.length;a<d;a++)if(b[a].id===c)return a;return -1};a.Z=function(){var a,b,c=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{stack:[],counter:0},f=arguments.length>1?arguments[1]:void 0;switch(f.type){case d.Dv:return(b=c.stack.slice()).push({message:(a=f).message||"",details:a.details||"",notificationType:a.notificationType,classes:["notification",a.notificationType],id:a.id}),Object.assign({},c,{counter:f.id,stack:b});case d.Kf:return(b=c.stack.slice()).splice(e(b,f.id),1),Object.assign({},c,{stack:b});default:return c}}},80775:function(c,b,a){"use strict";a.d(b,{v:function(){return i}});var d=a(94329),e=a(26061),f=a(5859);function g(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function h(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){g(d,a,c[a])})}return d}var i=function(){return{loaded:!1,nodes:null,name:void 0,visibility:null,visibilityVersion:0,nodeColors:null,nodeColorsVersion:0,tipRadii:null,tipRadiiVersion:0,branchThickness:null,branchThicknessVersion:0,vaccines:!1,version:0,idxOfInViewRootNode:0,totalStateCounts:{},observedMutations:{},availableBranchLabels:[],selectedClade:void 0}};b.Z=function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:i(),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case f.Ue:case f.RX:return a.tree;case f.c5:return Object.assign({},b,{loaded:!1});case f.g1:case f.OV:case f.st:var c={visibility:a.visibility,visibilityVersion:a.visibilityVersion,branchThickness:a.branchThickness,branchThicknessVersion:a.branchThicknessVersion,idxOfInViewRootNode:a.idxOfInViewRootNode,idxOfFilteredRoot:a.idxOfFilteredRoot,cladeName:a.cladeName,selectedClade:a.cladeName};return Object.assign({},b,c);case f.S:return Object.assign({},b,{tipRadii:a.data,tipRadiiVersion:a.version});case f.KA:return Object.assign({},b,{nodeColors:a.nodeColors,nodeColorsVersion:a.version});case f.er:return a.tree;case f.JS:(0,e.tX)(b.nodes,a.newNodeAttrs);var g=new Set(b.nodeAttrKeys);return Object.keys(a.newColorings).forEach(function(a){return g.add(a)}),h({},b,{totalStateCounts:h({},b.totalStateCounts,(0,d.CU)(b.nodes,Object.keys(a.newColorings),!1,!0)),nodeAttrKeys:g});default:return b}}},46857:function(c,b,a){"use strict";var d=a(5859),e=a(26061),f=a(80775);b.Z=function(){var b=arguments.length>0&& void 0!==arguments[0]?arguments[0]:(0,f.v)(),a=arguments.length>1?arguments[1]:void 0;switch(a.type){case d.c5:return Object.assign({},b,{loaded:!1});case d.Ue:case d.RX:if(a.treeToo)return a.treeToo;return(0,f.v)();case d.er:return a.treeToo}if(!b.loaded)return b;switch(a.type){case d.YU:return(0,f.v)();case d.OV:case d.st:if(a.tangleTipLookup)return Object.assign({},b,{tangleTipLookup:a.tangleTipLookup,visibility:a.visibilityToo,visibilityVersion:a.visibilityVersionToo,branchThickness:a.branchThicknessToo,branchThicknessVersion:a.branchThicknessVersionToo,idxOfInViewRootNode:a.idxOfInViewRootNodeToo,idxOfFilteredRoot:a.idxOfFilteredRootToo});return b;case d.S:return Object.assign({},b,{tipRadii:a.dataToo,tipRadiiVersion:a.version});case d.KA:if(a.nodeColorsToo)return Object.assign({},b,{nodeColors:a.nodeColorsToo,nodeColorsVersion:a.version});return b;case d.JS:return(0,e.tX)(b.nodes,a.newNodeAttrs),b;default:return b}}},57455:function(e,b,a){"use strict";a.d(b,{BG:function(){return n},Jp:function(){return u},X6:function(){return v},Yv:function(){return m},ii:function(){return s},lX:function(){return o},m6:function(){return t},qL:function(){return r}});var f=a(56535),g=a(3251),c=a(43717),h=a(57605),i=a(26061),j=a(69856),k=a(44163);function l(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}var m=function(d,b,e,f){var a,c=d.map(function(a){return(0,i.rs)(a,e)});return b&&b.forEach(function(a){return c.push((0,i.rs)(a,e))}),(c=function(a){if(Array.isArray(a))return l(a)}(a=new Set(c))||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||function(a,c){if(a){if("string"==typeof a)return l(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return l(a,c)}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter(function(a){return -1===f.indexOf(a)}).filter(function(a){return(0,j.mg)(a)})},n=function(b,a){return(0,h.O$)(a.colorBy)&&a.genotype?b.currentGt:(0,i.rs)(b,a.colorBy)},o=function(a,b){return a&&a.nodes&&b&&b.colorBy?a.nodes.map(function(a){return n(a,b)}).map(function(a){return b.scale(a)}):null},p="#BBB",d=(0,c.Z)().exponent([.6]).domain([0,2]).range([.4,1]).clamp(!0),q=d.copy().range([0,.9]),r=function(a,b,c,h){var e=function(a){return(0,f.B8)((0,g.ZP)(a,p)(.6)).toString()};return!0===c?a.nodeColors.map(b?function(b,j){var c=(0,i.rs)(a.nodes[j],h,{entropy:!0});return c?(0,f.B8)((0,g.ZP)(b,p)(d(c))).toString():e(b)}:function(b,c){if(!a.nodes[c].hasChildren){var d=(0,i.rs)(a.nodes[c],h,{entropy:!0});return d?(0,f.B8)((0,g.ZP)(b,p)(q(d))).toString():b}}):b?a.nodeColors.map(e):a.nodeColors},s=function(b){var a=(0,f.Ym)(b);return a.s*=1.8,a.l/=1.2,(0,f.B8)(a).toString()},t=function(a){return(0,f.B8)(a).brighter([.65]).toString()},u=function(c,a){if((0,h.O$)(a)){var b=(0,h.kW)(a);return b.aa?"Genotype at ".concat(b.gene," site ").concat(b.positions.join(", ")):"Nucleotide at position ".concat(b.positions.join(", "))}return void 0===c[a]?"":c[a].title};function v(a){var b;switch(void 0===a?"undefined":(b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b){case"number":return a;case"string":return(0,k.O$)(a,!0);default:return}}},56097:function(k,g,a){"use strict";a.d(g,{pu:function(){return S},Sb:function(){return _}});var l=a(40978),m=a(64881),n=a(92498),o=a(80386),p=a(25491),d=a(56535),c=a(91680),q=Math.PI/180,r=180/Math.PI,s=4/29,b=6/29,t=3*b*b,u=b*b*b;function v(a){if(a instanceof h)return new h(a.l,a.a,a.b,a.opacity);if(a instanceof j)return A(a);a instanceof d.Ss||(a=(0,d.SU)(a));var g,i,c=z(a.r),b=z(a.g),e=z(a.b),f=w((.2225045*c+.7168786*b+.0606169*e)/1);return c===b&&b===e?g=i=f:(g=w((.4360747*c+.3850649*b+.1430804*e)/.96422),i=w((.0139322*c+.0971045*b+.7141733*e)/.82521)),new h(116*f-16,500*(g-f),200*(f-i),a.opacity)}function h(a,b,c,d){this.l=+a,this.a=+b,this.b=+c,this.opacity=+d}function w(a){return a>u?Math.pow(a,1/3):a/t+s}function x(a){return a>b?a*a*a:t*(a-s)}function y(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function z(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function i(a,c,d,b){return 1===arguments.length?function(a){if(a instanceof j)return new j(a.h,a.c,a.l,a.opacity);if(a instanceof h||(a=v(a)),0===a.a&&0===a.b)return new j(NaN,0<a.l&&a.l<100?0:NaN,a.l,a.opacity);var b=Math.atan2(a.b,a.a)*r;return new j(b<0?b+360:b,Math.sqrt(a.a*a.a+a.b*a.b),a.l,a.opacity)}(a):new j(a,c,d,null==b?1:b)}function j(a,b,c,d){this.h=+a,this.c=+b,this.l=+c,this.opacity=+d}function A(a){if(isNaN(a.h))return new h(a.l,0,0,a.opacity);var b=a.h*q;return new h(a.l,Math.cos(b)*a.c,Math.sin(b)*a.c,a.opacity)}(0,c.Z)(h,function(a,c,d,b){return 1===arguments.length?v(a):new h(a,c,d,null==b?1:b)},(0,c.l)(d.Il,{brighter:function(a){return new h(this.l+18*(null==a?1:a),this.a,this.b,this.opacity)},darker:function(a){return new h(this.l-18*(null==a?1:a),this.a,this.b,this.opacity)},rgb:function(){var a=(this.l+16)/116,b=isNaN(this.a)?a:a+this.a/500,c=isNaN(this.b)?a:a-this.b/200;return b=.96422*x(b),a=1*x(a),c=.82521*x(c),new d.Ss(y(3.1338561*b-1.6168667*a-.4906146*c),y(-0.9787684*b+1.9161415*a+.033454*c),y(.0719453*b-.2289914*a+1.4052427*c),this.opacity)}})),(0,c.Z)(j,i,(0,c.l)(d.Il,{brighter:function(a){return new j(this.h,this.c,this.l+18*(null==a?1:a),this.opacity)},darker:function(a){return new j(this.h,this.c,this.l-18*(null==a?1:a),this.opacity)},rgb:function(){return A(this).rgb()}}));var e=a(25941);function f(a){return function(b,c){var d=a((b=i(b)).h,(c=i(c)).h),f=(0,e.ZP)(b.c,c.c),g=(0,e.ZP)(b.l,c.l),h=(0,e.ZP)(b.opacity,c.opacity);return function(a){return b.h=d(a),b.c=f(a),b.l=g(a),b.opacity=h(a),b+""}}}var B=f(e.wx);f(e.ZP);var C=a(69856),D=a(94329),E=a(57455),F=a(57605),G=a(26061);function H(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function I(a){return function(a){if(Array.isArray(a))return H(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||J(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(a,c){if(a){if("string"==typeof a)return H(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return H(a,c)}}var K=function(e,o,b,j){var k=b.length,f=b.map(function(){}),l=b.map(function(){return[]}),m=function(a,r){var e=r;if(a.branch_attrs&&a.branch_attrs.mutations&&a.branch_attrs.mutations[o]&&(v=a.branch_attrs.mutations[o]),v&&v.length)for(var h=0;h<v.length;h++)for(var c=v[h],s=parseInt(c.slice(1,c.length-1),10),d=0;d<k;d++)b[d]===s&&(f[d]||(f[d]=c.slice(0,1)),e[d]=c.slice(c.length-1,c.length));a.currentGt=I(e);for(var g=0;g<k;g++)e[g]||l[g].push(a);if(a.hasChildren){var i=!0,n=!1,p=void 0;try{for(var v,q,j=a.children[Symbol.iterator]();!(i=(q=j.next()).done);i=!0){var t=q.value;m(t,I(e))}}catch(u){n=!0,p=u}finally{try{i||null==j.return||j.return()}finally{if(n)throw p}}}};m(e[0],b.map(function(){})),j&&f.forEach(function(a,c){try{var d=j[o][b[c]-1];a?a!==d&&console.error("Mismatch between inferred ancestral state for ".concat(o,"@").concat(b[c]," of ").concat(a," and the root-sequence JSON value of ").concat(d)):f[c]=d}catch(e){console.error("Error accessing the root-sequence data",e.message)}});for(var a=0;a<k;a++){var c=!0,g=!1,h=void 0;try{for(var i,d=l[a][Symbol.iterator]();!(c=(i=d.next()).done);c=!0)i.value.currentGt[a]=f[a]}catch(n){g=!0,h=n}finally{try{c||null==d.return||d.return()}finally{if(g)throw h}}}e.forEach(function(a){a.currentGt=a.currentGt.join(" / ")})},L=function(f,c,d){var b,e=function(a){var b=(0,G.rs)(a,"num_date");void 0===b&&(b=0),(!g[a.currentGt]||b<g[a.currentGt])&&(g[a.currentGt]=b)},g={};f.forEach(e),c&&c.forEach(e);var a=Object.keys(g);return a.sort(function(a,b){return g[a]<g[b]?-1:1}),b=d?a.filter(function(a){return"X"!==a&&"-"!==a}):a.filter(function(a){return"X"!==a&&"-"!==a&&"N"!==a}),-1!==a.indexOf("-")&&b.push("-"),-1===a.indexOf("N")||d||b.push("N"),-1!==a.indexOf("X")&&b.push("X"),b},M=function(b,c,d){var a=Array.from(b);return"clade_membership"===c?a.sort():a.sort(function(a,b){return d.get(a)===d.get(b)?a<b?-1:1:d.get(a)>d.get(b)?-1:1}),a};function N(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function O(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||Q(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(a){return function(a){if(Array.isArray(a))return N(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||Q(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(a,c){if(a){if("string"==typeof a)return N(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return N(a,c)}}var R="#ADB1B3",S=function(a,h,b,d,i){try{if("none"===a)throw new Error("colorBy is 'none'. Falling back to a default, uninformative color scale.");if(!b.nodes)throw new Error("calcColorScale called before tree is ready.");var e=i.colorings,f=d?d.nodes:void 0,g=!1;(0,F.O$)(a)&&(n=(0,F.kW)(a),K(b.nodes,n.gene,n.positions,i.rootSequence),d&&i.identicalGenomeMapAcrossBothTrees&&K(d.nodes,n.gene,n.positions,i.rootSequenceSecondTree));var c=n?"categorical":e[a].type;if(n)j=(t=U(b.nodes,null==d?void 0:d.nodes,n.aa)).legendValues,p=t.colorScale,q=P(j);else if(e&&e[a]){if("temporal"===c||"num_date"===a)g=(u=X(a,e[a].scale,b.nodes,f)).continuous,p=u.colorScale,l=u.legendBounds,j=u.legendValues;else if("continuous"===c)g=(v=W(a,e[a].scale,b.nodes,f)).continuous,p=v.colorScale,l=v.legendBounds,j=v.legendValues;else if(e[a].scale)g=(w=T(a,e[a].scale,b.nodes,f)).continuous,j=w.legendValues,p=w.colorScale;else if("categorical"===c)j=$(b.nodes,f,a),p=aa(j,"categorical");else if("ordinal"===c)g=(x=V(a,b.nodes,f)).continuous,p=x.colorScale,j=x.legendValues,l=x.legendBounds;else if("boolean"===c)j=$(b.nodes,f,a),p=ab;else throw new Error("ColorBy ".concat(a," invalid type -- ").concat(c));"continuous"!==c&&(q=j.slice());var p,j,l,m,q,n,t,u,v,w,x,k,o=ae(e[a].legend,j,c);o&&(j=(k=o).legendValues,m=k.legendLabels,l=k.legendBounds)}else throw new Error("Error in logic for processing colorings");var r=_({colorBy:a,scaleType:c,genotype:n,legendValues:j,treeNodes:b.nodes,treeTooNodes:f,visibility:b.visibility,visibilityToo:d?d.visibility:void 0});return{scale:p,continuous:g,colorBy:a,version:void 0===h.colorScale?1:h.colorScale.version+1,legendValues:j,legendBounds:l,legendLabels:m,genotype:n,domain:q,scaleType:c,visibleLegendValues:r}}catch(s){return console.error("Error creating color scales. Details:\n",s.message),{scale:function(){return R},continuous:!1,colorBy:a,version:void 0===h.colorScale?1:h.colorScale.version+1,legendValues:["unknown"],legendBounds:{unknown:[-1/0,1/0]},genotype:null,scaleType:null,domain:[],visibleLegendValues:["unknown"]}}};function T(c,h,m,n){if(!Array.isArray(h))throw new Error("".concat(c," has defined a scale which wasn't an array"));var d=new Map,e=!0,i=!1,j=void 0;try{for(var k,f=h[Symbol.iterator]();!(e=(k=f.next()).done);e=!0){var l=O(k.value,2),g=l[0],o=l[1];d.has(g)?console.warn("User provided color scale contained a duplicate entry for ".concat(c,"\u2192").concat(g," which is ignored.")):d.set(g,o)}}catch(p){i=!0,j=p}finally{try{e||null==f.return||f.return()}finally{if(i)throw j}}var a=Array.from(d).map(function(a){return a[0]}),b=(0,E.Yv)(m,n,c,a);if(b.length){a=a.concat(b);var q=Z(b.length,["#BDC3C6","#868992"]);b.forEach(function(a,b){d.set(a,q[b])})}return{continuous:!1,legendValues:a,colorScale:function(a){return d.get(a)||R}}}function U(e,f,c){var a=L(e,f,c),g=c?a.filter(function(a){return"X"!==a&&"-"!==a&&""!==a}):a.filter(function(a){return"X"!==a&&"-"!==a&&"N"!==a&&""!==a}),h=[void 0].concat(P(a)),b=[R].concat(P(C.p3.slice(0,g.length)));return -1!==a.indexOf("-")&&b.push((0,d.B8)(217,217,217)),-1===a.indexOf("N")||c||b.push((0,d.B8)(153,153,153)),-1!==a.indexOf("X")&&b.push((0,d.B8)(102,102,102)),{colorScale:(0,l.Z)().domain(h).range(b),legendValues:a}}function V(f,g,h){var c,i,a=$(g,h,f),j=a.every(function(a){return Number.isInteger(a)}),d=!1;if(j){var b=Y(g,h,f);if(b[1]-b[0]<=C.O9.length){a=[];for(var e=b[0];e<=b[1];e++)a.push(e);c=aa(a,"ordinal")}else{console.warn("Using a continous scale as there are too many values in the ordinal scale"),d=!0;var l=(0,m.Z)().domain(C.NB.map(function(a){return b[0]+a*(b[1]-b[0])})).range(C.O9[9]);c=function(a){return(0,C.mg)(a)?l(a):R};var k=b[1]-b[0],n=k>5?2:3;a=C.NB.map(function(a){return parseFloat((b[0]+a*k).toFixed(n))}),Object.is(a[0],-0)&&(a[0]=0),i=ac(a)}}else console.warn("Using a categorical scale as currently ordinal scales must only contain integers"),d=!1,c=aa(a,"categorical");return{continuous:d,colorScale:c,legendValues:a,legendBounds:i}}function W(f,g,h,i){var b,c,e=Y(h,i,f),d=ad(g,function(a){return"number"==typeof a});d?(b=d.map(function(a){return a[0]}),c=d.map(function(a){return a[1]})):(c=C.O9[9],b=C.NB.map(function(a){return e[0]+a*(e[1]-e[0])}));var k=(0,m.Z)().domain(b).range(c),j=e[1]-e[0],l=j>5?2:3,a=C.NB.map(function(a){return parseFloat((e[0]+a*j).toFixed(l))}).filter(function(a,b,c){return c.indexOf(a)===b});return Object.is(a[0],-0)&&(a[0]=0),{continuous:!0,colorScale:function(a){return(0,C.mg)(a)?k(a):R},legendBounds:ac(a),legendValues:a}}function X(i,n,j,e){var a,f,c=ad(n,function(a){return void 0!==(0,E.X6)(a)});if(c)a=c.map(function(a){return(0,E.X6)(a[0])}),f=c.map(function(a){return a[1]});else{var g=(0,E.X6)((0,G.rs)(j[0],i)),b=j.filter(function(a){return!a.hasChildren}).map(function(a){return(0,E.X6)((0,G.rs)(a,i))});if(e){var k=(0,E.X6)((0,G.rs)(e[0],i));k<g&&(g=k),b.concat(e.filter(function(a){return!a.hasChildren}).map(function(a){return(0,E.X6)((0,G.rs)(a,i))}))}b=b.sort(),a=[g];for(var l=10,o=parseInt(b.length/(l-1),10),h=0;h<l-1;h++)a.push(b[o*h]);a.push(b[b.length-1]),a=P(new Set(a)),f=C.O9[a.length]}var p=(0,m.Z)().domain(a).range(f),d=c?a.slice():a.slice(1);return Object.is(d[0],-0)&&(d[0]=0),{continuous:!0,colorScale:function(b){var a=(0,E.X6)(b);return void 0===a?R:p(a)},legendBounds:ac(d),legendValues:d}}function Y(a,b,d){var c=(b?a.concat(b):a.slice()).map(function(a){return(0,G.rs)(a,d)}).filter(function(a){return void 0!==a}).filter(function(a,b,c){return c.indexOf(a)===b}).map(function(a){return+a});return[(0,n.Z)(c),(0,o.Z)(c)]}function Z(a,b){var c=(0,m.Z)().domain([0,a]).interpolate(B).range(b);return(0,p.Z)(0,a).map(c)}function $(j,e,a){var b=(0,D.CU)(j,[a],!1,!1)[a];if(e){var k=(0,D.CU)(e,[a],!1,!1)[a],c=!0,f=!1,g=void 0;try{for(var h,d=k.keys()[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var i=h.value,l=b.get(i)||0;b.set(i,l+1)}}catch(m){f=!0,g=m}finally{try{c||null==d.return||d.return()}finally{if(f)throw g}}}return M(Array.from(b.keys()).filter(function(a){return(0,C.mg)(a)}),a,b)}function _(a){var j=a.colorBy,c=a.scaleType,k=a.genotype,d=a.legendValues,f=a.treeNodes,e=a.treeTooNodes,g=a.visibility,h=a.visibilityToo;if(g&&("ordinal"===c||"categorical"===c)){var b=f.filter(function(a,b){return!a.hasChildren&&g[b]===C.m7}).map(function(a){return k?a.currentGt:(0,G.rs)(a,j)});if(e&&h){var i=e.filter(function(a,b){return!a.hasChildren&&h[b]===C.m7}).map(function(a){return k?a.currentGt:(0,G.rs)(a,j)});b=P(b).concat(P(i))}return b=new Set(b),d.filter(function(a){return b.has(a)})}return d.slice()}function aa(a,b){("ordinal"===b||"categorical"===b)&&(c=a.length<C.O9.length?C.O9[a.length].slice():C.O9[C.O9.length-1].slice());var c,d=(0,l.Z)().domain(a).range(c);return function(b){return void 0===b|| -1===a.indexOf(b)?R:d(b)}}function ab(a){return(0,C.mg)(a)?["true","1","yes"].includes(String(a).toLowerCase())?"#4C90C0":"#CBB742":R}function ac(a){var c=function(a,b){return a+.5*(b-a)},d=a.length,e={};e[a[0]]=[-1/0,c(a[0],a[1])];for(var b=1;b<d-1;b++)e[a[b]]=[c(a[b-1],a[b]),c(a[b],a[b+1])];return e[a[d-1]]=[c(a[d-2],a[d-1]),1/0],e}function ad(a,c){if(!Array.isArray(a))return!1;var b=a.filter(function(a){return Array.isArray(a)&&2===a.length&&c(a[0])&&"string"==typeof a[1]&&a[1].match(/#[0-9A-Fa-f]{6}/)});return!(b.length<2)&&b}function ae(c,h,d){if(!Array.isArray(c))return!1;if("temporal"===d)return console.error("Auspice currently doesn't allow a JSON-provided 'legend' for temporal colorings, however all provided 'scale' entries will be shown in the legend"),!1;var a="continuous"===d?c.filter(function(a){return"number"==typeof a.value}):c.filter(function(a){return h.includes(a.value)});if(!a.length)return console.warn("Provided legend info for this coloring doesn't match any values in the tree!"),!1;var b=a.map(function(a){return a.value}),f=new Map(a.map(function(a){return"string"==typeof a.display||"number"==typeof a.display?[a.value,a.display]:[a.value,a.value]})),e={};if("continuous"===d){var g=a.map(function(a){return a.bounds}).filter(function(a){return Array.isArray(a)&&2===a.length&&"number"==typeof a[0]&&"number"==typeof a[1]}).map(function(d){var c=O(d,2),a=c[0],b=c[1];return a>b?[b,a]:[a,b]}).filter(function(f,g,h){for(var e=O(f,2),b=e[0],c=e[1],d=0;d<g;d++){var a=h[d];if(b<a[1]&&b>a[0]||c<a[1]&&c>a[0])return console.warn("Legend bounds must not overlap. Check [".concat(b,", ").concat(c,"] and [").concat(a[0],", ").concat(a[1],"]. Auspice will create its own bounds.")),!1}return!0});g.length===b.length?b.forEach(function(a,b){e[a]=g[b]}):e=ac(b)}return{legendValues:b,legendLabels:f,legendBounds:e}}},44163:function(c,b,a){"use strict";a.d(b,{IV:function(){return n},"O$":function(){return k},OO:function(){return p},UW:function(){return h},c8:function(){return o},hT:function(){return j},ow:function(){return m},ti:function(){return q},vA:function(){return i}});var d=a(69856);function e(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function f(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||g(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(a,c){if(a){if("string"==typeof a)return e(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return e(a,c)}}var h=function(a){return"".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"),"-").concat(String(a.getDate()).padStart(2,"0"))},i=function(b){var a,c=parseInt(b,10),d=(a=c)%4==0&&a%100!=0||a%400==0?366:365;return new Date(new Date(c,0,1).getTime()+864e5*(b%1*d))},j=function(a){return a<0?Math.round(a).toString():h(i(a))},k=function(c){var m=arguments.length>1&& void 0!==arguments[1]&&arguments[1];if("string"==typeof c){if("-"===c[0]){var i=-parseFloat(c.substring(1).split("-")[0]);return isNaN(i)?void 0:i}var d=c.split("-");if(3===d.length){var e=f(d,3),n=e[0],j=e[1],k=e[2],g=f(d.map(function(a){return parseInt(a,10)}),3),a=g[0],b=g[1],o=g[2];if(c.includes("X")){if(!m)return;if(n.includes("X"))return;if(j.includes("X")){if(isNaN(a)||"XX"!==j||"XX"!==k)return;return a+.5}if(isNaN(a)||isNaN(b)||"XX"!==k)return;var h=[l(a,b,1),l(12===b?a+1:a,12===b?1:b+1,1)];return h[0]+(h[1]-h[0])/2}return l(a,b,o)}}};function l(a,c,d){var b,e=((Date.UTC(a,c-1,d)-Date.UTC(a,0,1))/864e5+.5)/((b=a)%4==0&&b%100!=0||b%400==0?366:365);return a+e}var m=function(){return h(new Date)},n=function(){return k(m())},o=function(c,a){var b=new Date(a.getTime()),e=1===a.getDate()&&0===a.getMonth();switch(c){case"DAY":return b;case"WEEK":var d=a.getDay();if(1===d)return b;return b.setDate(a.getDate()+(8-d)%7-7),b;case"MONTH":if(1===a.getDate())return b;return new Date(a.getFullYear(),a.getMonth(),1,12);case"YEAR":if(e)return b;return new Date(a.getFullYear(),0,1,12);case"FIVEYEAR":case"DECADE":return new Date(5*Math.floor(a.getFullYear()/5),0,1,12);case"CENTURY":return new Date(100*Math.floor(a.getFullYear()/100),0,1,12);default:return console.error("Unknown unit for `advanceDateTo`:",c),b}},p=function(c,a){var b=new Date(a.getTime());switch(c){case"DAY":b.setDate(a.getDate()+1);break;case"WEEK":b.setDate(a.getDate()+7);break;case"MONTH":b.setMonth(a.getMonth()+1);break;case"YEAR":b.setFullYear(a.getFullYear()+1);break;case"FIVEYEAR":b.setFullYear(a.getFullYear()+5);break;case"DECADE":b.setFullYear(a.getFullYear()+10);break;case"CENTURY":b.setFullYear(a.getFullYear()+100);break;default:console.error("Unknown unit for `getNextDate`:",c)}return b},q=function(n,b){var i,g,a,c,e,k,l,m="number"==typeof b?j(b):(i=b,null!=(g=Date)&&"undefined"!=typeof Symbol&&g[Symbol.hasInstance]?!!g[Symbol.hasInstance](i):i instanceof g)?h(b):b;switch(m.startsWith("-")?(a=(l=f(m.slice(1).split("-"),3))[0],c=l[1],e=l[2],a="-".concat(a)):(a=(k=f(m.split("-"),3))[0],c=k[1],e=k[2]),n){case"CENTURY":case"DECADE":case"FIVEYEAR":case"YEAR":if("01"===c&&"01"===e)return a;case"MONTH":if("01"===e)return"".concat(a,"-").concat(d.e7[c]);default:return"".concat(a,"-").concat(d.e7[c],"-").concat(e)}}},49765:function(c,b,a){"use strict";a.d(b,{Io:function(){return q},UB:function(){return k},ZR:function(){return m},bM:function(){return n},le:function(){return o}});var d=a(69856);function e(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function f(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||g(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(a,c){if(a){if("string"==typeof a)return e(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return e(a,c)}}var h=function(a){return!!a.branch_attrs&&!!a.branch_attrs.mutations&&!!Object.keys(a.branch_attrs.mutations).length&&a.branch_attrs.mutations},i=function(j,k,e){var f=e!==d.BJ,b=[],l=f?e.name:d.BJ;j.forEach(function(c){if(k[c.arrayIdx]===d.m7){var a,e=h(c);null==e||null===(a=e[l])|| void 0===a||a.forEach(function(a){var c=parseInt(a.slice(1,a.length-1),10),d=a.slice(0,1),e=a.slice(-1);p(d,e,f)&&(b[c]?b[c]++:b[c]=1)})}});for(var g=[],i=0,c=0,a=0;a<b.length;a++)b[a]&&(b[a]>c&&(c=b[a]),g[i]=f?{codon:parseInt(a,10),y:b[a]}:{x:a,y:b[a]},i++);return[g,c]},j=function(G,L,r){var s=r!==d.BJ,M=s?r.name:d.BJ,e={},b={},t=0,H=function(c,m){var n=h(c);if(null==n||null===(B=n[M])|| void 0===B||B.forEach(function(a){var b=parseInt(a.slice(1,a.length-1),10),c=a.slice(0,1),d=a.slice(a.length-1,a.length);p(c,d,s)&&(e[b]||(e[b]=c),m[b]=d)}),c.hasChildren){var i=!0,o=!1,q=void 0;try{for(var B,r,j=c.children[Symbol.iterator]();!(i=(r=j.next()).done);i=!0){var y=r.value;H(y,Object.assign({},m))}}catch(z){o=!0,q=z}finally{try{i||null==j.return||j.return()}finally{if(o)throw q}}}else if(L[c.arrayIdx]===d.m7){t++;var k=!0,u=!1,v=void 0;try{for(var w,l=Object.entries(m)[Symbol.iterator]();!(k=(w=l.next()).done);k=!0){var x=f(w.value,2),a=x[0],g=x[1];b[a]?b[a][g]?b[a][g]++:b[a][g]=1:(b[a]={},b[a][g]=1)}}catch(A){u=!0,v=A}finally{try{k||null==l.return||l.return()}finally{if(u)throw v}}}};H(G[0],{});var u=[],g=0,i=0,j=!0,v=!1,w=void 0;try{for(var x,k=Object.keys(b)[Symbol.iterator]();!(j=(x=k.next()).done);j=!0){var a=x.value,y=0,l=!0,z=!1,A=void 0;try{for(var B,m=Object.values(b[a])[Symbol.iterator]();!(l=(B=m.next()).done);l=!0)y+=B.value}catch(I){z=!0,A=I}finally{try{l||null==m.return||m.return()}finally{if(z)throw A}}var n=t-y;n>0&&(b[a][e[a]]?b[a][e[a]]+=n:b[a][e[a]]=n);var c=0,o=!0,C=!1,D=void 0;try{for(var E,q=Object.values(b[a])[Symbol.iterator]();!(o=(E=q.next()).done);o=!0){var F=E.value/t;c+=-1*F*Math.log(F)}}catch(J){C=!0,D=J}finally{try{o||null==q.return||q.return()}finally{if(C)throw D}}c>g&&(g=c),u[i]=s?{y:c.toFixed(3),codon:parseInt(a,10),fill:d.p3[i%10]}:{x:parseInt(a,10),y:c.toFixed(3)},i++}}catch(K){v=!0,w=K}finally{try{j||null==k.return||k.return()}finally{if(v)throw w}}return[u,g]},k=function(a,b,c,d){return d?i(a,b,c):j(a,b,c)};function l(a){var b=[];return a[0].genes.forEach(function(a){b=b.concat(a.cds)}),b}function m(a,b){return l(a).filter(function(a){return a.name===b})[0]}function n(i,k){var j="+"===i.strand,n=f(i.isWrapping?[k[1],k[0]]:k,2),b=n[0],c=n[1],h=i.segments,o=f(j?[h[0],h[h.length-1]]:[h[h.length-1],h[0]],2),u=o[0],v=o[1],p=[1,i.length],d=p[0],e=p[1];if(b<u.rangeGenome[0]||c>v.rangeGenome[1])return[[d,e],!1];var l=!0,q=!1,r=void 0;try{for(var g,s,m=h[Symbol.iterator]();!(l=(s=m.next()).done);l=!0){var a=s.value;if(a.rangeGenome[0]<=b&&a.rangeGenome[1]>=b){if(j){var w=b-a.rangeGenome[0];d=a.rangeLocal[0]+w}else{var x=b-a.rangeGenome[0];e=a.rangeLocal[1]-x}}if(a.rangeGenome[0]<=c&&a.rangeGenome[1]>=c){if(j){var y=c-a.rangeGenome[0];e=a.rangeLocal[0]+y}else{var z=a.rangeGenome[1]-c;d=a.rangeLocal[0]+z}}g&&(j?(g.rangeGenome[1]<b&&a.rangeGenome[0]>b&&(d=a.rangeLocal[0]),g.rangeGenome[1]<c&&a.rangeGenome[0]>c&&(e=g.rangeLocal[1])):(g.rangeGenome[0]>b&&a.rangeGenome[1]<b&&(e=g.rangeLocal[1]),g.rangeGenome[0]>c&&a.rangeGenome[1]<c&&(d=a.rangeLocal[0]))),g=a}}catch(A){q=!0,r=A}finally{try{l||null==m.return||m.return()}finally{if(q)throw r}}d-=(d-1)%3;var t=e%3;return t&&(e+=1===t?2:1),[[d,e],!0]}function o(c,g){for(var d,b=[],f=(g-1)*3+1,h="+"===c.strand,e=0;e<c.segments.length;e++){var a=c.segments[e];if(!(a.rangeLocal[1]<f)){if(d="frame ".concat(a.frame),h)for(var i=a.rangeGenome[0]+(f-a.rangeLocal[0]);i<=a.rangeGenome[1]&&b.length<3;)b.push(i++);else for(var j=a.rangeGenome[1]-(f-a.rangeLocal[0]);j>=a.rangeGenome[0]&&b.length<3;)b.push(j--);if(3!==b.length){if(a=c.segments[e+1],d=d.replace("frame","frames")+" \u2192 ".concat(a.frame),a.phase!==3-b.length){console.error("Internal Error -- phase mismatch for CDS ".concat(c.name," when mapping codon ").concat(g)),b.push("Internal Error!");break}h?(b.push(a.rangeGenome[0]),b.length<3&&b.push(a.rangeGenome[0]+1)):(b.push(a.rangeGenome[1]),b.length<3&&b.push(a.rangeGenome[1]-1))}break}}return{frame:d,nucCoordinates:b}}function p(a,b,c){return c?"X"!==a&&"X"!==b:"N"!==a&&"-"!==a&&"N"!==b&&"-"!==b}function q(a,c){var b=[];return l(a).forEach(function(d){var e=!0,g=!1,h=void 0;try{for(var i,f=d.segments[Symbol.iterator]();!(e=(i=f.next()).done);e=!0){var a=i.value;if(a.rangeGenome[0]<=c&&a.rangeGenome[1]>=c){var k="+"===d.strand?c-a.rangeGenome[0]:a.rangeGenome[1]-c,j=a.rangeLocal[0]+k,l=Math.ceil(j/3);b.push({cds:d,nucLocal:j,aaLocal:l})}}}catch(m){g=!0,h=m}finally{try{e||null==f.return||f.return()}finally{if(g)throw h}}}),b}},57605:function(c,b,a){"use strict";a.d(b,{FQ:function(){return l},"O$":function(){return h},O3:function(){return n},"Q$":function(){return p},bP:function(){return i},bQ:function(){return k},eL:function(){return m},fO:function(){return o},kW:function(){return j}});var d=a(69856);function e(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function f(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||g(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(a,c){if(a){if("string"==typeof a)return e(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return e(a,c)}}var h=function(a){return"gt"===a||a.startsWith("gt-")},i=function(c){var a=c.gene,b=c.positions;return(a||(a=d.BJ),b&&b.length)?"gt-".concat(a,"_").concat(b.join(",")):(console.error("encodeColorByGenotype failed: no positions"),null)},j=function(a,e){var g=!!e,h=a.match(/^gt-(.+)_([0-9,]+)$/);if(h){var i=f(h,3),b=i[1],j=i[2],c=g?p(e,b):"Infinity";if(g&&!c)return console.error("decodeColorByGenotype failed for color-by ".concat(a," (cds name: ").concat(b,") ")+"as it wasn't found in the genome map;"),null;var l=k(j,c);return l.length?{gene:b,positions:l,aa:b!==d.BJ}:(console.error("decodeColorByGenotype failed: no valid positions",a,j,c),null)}return console.error("Unable to decode colorBy genotype:",a),null};function k(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:"Infinity";return a.split(",").map(function(a){return parseInt(a,10)}).filter(function(a){return a>0&&a<=Math.floor(b)})}var l=function(a){var b=a.filter(function(a){return a.active}).map(function(a){return a.value}).reduce(function(a,d){var c=f(d.split(" "),2),b=c[0],e=c[1];return a.has(b)||a.set(b,[]),a.get(b).push(e),a},new Map);return Array.from(b.entries()).map(function(b){var a=f(b,2),c=a[0],d=a[1];return"".concat(c,".").concat(d.join(","))}).join(",")},m=function(a){var b;return a.split(",").map(function(a){if(a.includes(".")){var c=a.split(".");return b=c[0],c.join(" ")}return"".concat(b," ").concat(a)}).filter(function(a){return!!a}).map(function(a){return{active:!0,value:a}})},n=function(b){var a=!!h(b)&&j(b);return!!a&&"Genotype ".concat(a.gene,": ").concat(a.positions.join(", "))},o=function(a,b){if(!Array.isArray(b)||!b.length||!a)return null;if("nuc"===a)return d.BJ;var c=!0,h=!1,i=void 0;try{for(var j,e=b[0].genes[Symbol.iterator]();!(c=(j=e.next()).done);c=!0){var o=j.value,f=!0,k=!1,l=void 0;try{for(var m,g=o.cds[Symbol.iterator]();!(f=(m=g.next()).done);f=!0){var n=m.value;if(n.name===a)return n}}catch(p){k=!0,l=p}finally{try{f||null==g.return||g.return()}finally{if(k)throw l}}}}catch(q){h=!0,i=q}finally{try{c||null==e.return||e.return()}finally{if(h)throw i}}return null};function p(f,g){if(g===d.BJ)return f[0].range[1];var a=!0,h=!1,i=void 0;try{for(var j,b=f[0].genes[Symbol.iterator]();!(a=(j=b.next()).done);a=!0){var o=j.value,c=!0,k=!1,l=void 0;try{for(var m,e=o.cds[Symbol.iterator]();!(c=(m=e.next()).done);c=!0){var n=m.value;if(n.name===g)return n.length/3}}catch(p){k=!0,l=p}finally{try{c||null==e.return||e.return()}finally{if(k)throw l}}}}catch(q){h=!0,i=q}finally{try{a||null==b.return||b.return()}finally{if(h)throw i}}return 0}},69856:function(f,d,a){"use strict";a.d(d,{"$j":function(){return m},Ac:function(){return H},BJ:function(){return s},Ck:function(){return A},Eq:function(){return l},FU:function(){return q},Fp:function(){return u},HB:function(){return h},NB:function(){return b},O9:function(){return z},OR:function(){return C},PD:function(){return r},SM:function(){return v},Tr:function(){return j},UX:function(){return x},VC:function(){return w},VK:function(){return k},Wv:function(){return K},Zk:function(){return p},cJ:function(){return n},e7:function(){return B},ly:function(){return i},m7:function(){return E},mZ:function(){return D},mg:function(){return G},p3:function(){return y},uY:function(){return g},vD:function(){return I},xE:function(){return o},x_:function(){return t}});var c=a(43717),e=a(64881);a(71614);var g={country:{key:"country",legendTitle:"Country",menuItem:"country",type:"discrete"},region:{key:"region",legendTitle:"Region",menuItem:"region",type:"discrete"},num_date:{key:"num_date",legendTitle:"Sampling date",menuItem:"date",type:"continuous"},ep:{key:"ep",legendTitle:"Epitope Mutations",menuItem:"epitope mutations",type:"continuous"},ne:{key:"ne",legendTitle:"Non-epitope Mutations",menuItem:"nonepitope mutations",type:"continuous"},rb:{key:"rb",legendTitle:"Receptor Binding Mutations",menuItem:"RBS mutations",type:"continuous"},gt:{key:"genotype",legendTitle:"Genotype",menuItem:"genotype",type:"discrete"}},h=220,i=780,j=1600,k="country",l="country",m="rect",n="num_date",o=!1,p=6,q=-1e8,r=!1,s="nuc",b=[0,.111,.222,.333,.444,.555,.666,.777,.888,1],t=4,u=7,v=350,w=10;b.map(function(a){return Math.round(100*(3.6*a))/100}),b.map(function(a){return Math.round(100*(.2+1.8*a))/100}),b.map(function(a){return Math.round(100*((a-.5)*16))/100}),(0,e.Z)().domain([0,1]).range([2,4.5]);var x=(0,c._)().domain([0,1]).range([1,10]);(0,c._)().domain([3,20]).range([9,3]).clamp([!0]);var y=["#60AA9E","#D9AD3D","#5097BA","#E67030","#8EBC66","#E59637","#AABD52","#DF4327","#C4B945","#75B681"],z=[[],["#4C90C0"],["#4C90C0","#CBB742"],["#4988C5","#7EB876","#CBB742"],["#4580CA","#6BB28D","#AABD52","#DFA43B"],["#4377CD","#61AB9D","#94BD61","#CDB642","#E68133"],["#416DCE","#59A3AA","#84BA6F","#BBBC49","#E29D39","#E1502A"],["#3F63CF","#529AB6","#75B681","#A6BE55","#D4B13F","#E68133","#DC2F24"],["#3E58CF","#4B8EC1","#65AE96","#8CBB69","#B8BC4A","#DCAB3C","#E67932","#DC2F24"],["#3F4DCB","#4681C9","#5AA4A8","#78B67E","#9EBE5A","#C5B945","#E0A23A","#E67231","#DC2F24"],["#4042C7","#4274CE","#5199B7","#69B091","#88BB6C","#ADBD51","#CEB541","#E39B39","#E56C2F","#DC2F24"],["#4137C2","#4066CF","#4B8DC2","#5DA8A3","#77B67F","#96BD60","#B8BC4B","#D4B13F","#E59638","#E4672F","#DC2F24"],["#462EB9","#3E58CF","#4580CA","#549DB2","#69B091","#83BA70","#A2BE57","#C1BA47","#D9AD3D","#E69136","#E4632E","#DC2F24"],["#4B26B1","#3F4ACA","#4272CE","#4D92BF","#5DA8A3","#74B583","#8EBC66","#ACBD51","#C8B944","#DDA93C","#E68B35","#E3602D","#DC2F24"],["#511EA8","#403DC5","#4063CF","#4785C7","#559EB1","#67AF94","#7EB877","#98BD5E","#B4BD4C","#CDB642","#DFA53B","#E68735","#E35D2D","#DC2F24"],["#511EA8","#403AC4","#3F5ED0","#457FCB","#5098B9","#60AA9F","#73B583","#8BBB6A","#A4BE56","#BDBB48","#D3B240","#E19F3A","#E68234","#E25A2C","#DC2F24"],["#511EA8","#4138C3","#3E59CF","#4379CD","#4D92BE","#5AA5A8","#6BB18E","#7FB975","#96BD5F","#AFBD4F","#C5B945","#D8AE3E","#E39B39","#E67D33","#E2572B","#DC2F24"],["#511EA8","#4236C1","#3F55CE","#4273CE","#4A8CC2","#569FAF","#64AD98","#76B680","#8BBB6A","#A1BE58","#B7BC4B","#CCB742","#DCAB3C","#E59638","#E67932","#E1552B","#DC2F24"],["#511EA8","#4335BF","#3F51CC","#416ECE","#4887C6","#529BB6","#5FA9A0","#6EB389","#81B973","#95BD61","#AABD52","#BFBB48","#D1B340","#DEA63B","#E69237","#E67531","#E1522A","#DC2F24"],["#511EA8","#4333BE","#3F4ECB","#4169CF","#4682C9","#4F96BB","#5AA5A8","#68AF92","#78B77D","#8BBB6A","#9EBE59","#B3BD4D","#C5B945","#D5B03F","#E0A23A","#E68D36","#E67231","#E1502A","#DC2F24"],["#511EA8","#4432BD","#3F4BCA","#4065CF","#447ECC","#4C91BF","#56A0AE","#63AC9A","#71B486","#81BA72","#94BD62","#A7BE54","#BABC4A","#CBB742","#D9AE3E","#E29E39","#E68935","#E56E30","#E14F2A","#DC2F24"],["#511EA8","#4531BC","#3F48C9","#3F61D0","#4379CD","#4A8CC2","#539CB4","#5EA9A2","#6BB18E","#7AB77B","#8BBB6A","#9CBE5B","#AFBD4F","#C0BA47","#CFB541","#DCAB3C","#E39B39","#E68534","#E56B2F","#E04D29","#DC2F24"],["#511EA8","#4530BB","#3F46C8","#3F5ED0","#4375CD","#4988C5","#5098B9","#5AA5A8","#66AE95","#73B583","#82BA71","#93BC62","#A4BE56","#B5BD4C","#C5B945","#D3B240","#DEA73B","#E59738","#E68234","#E4682F","#E04C29","#DC2F24"],["#511EA8","#462FBA","#3F44C8","#3E5BD0","#4270CE","#4784C8","#4E95BD","#57A1AD","#61AB9C","#6DB38A","#7BB879","#8BBB6A","#9BBE5C","#ABBD51","#BBBC49","#CBB843","#D6AF3E","#DFA43B","#E69537","#E67F33","#E4662E","#E04A29","#DC2F24"],["#511EA8","#462EB9","#4042C7","#3E58CF","#416DCE","#4580CA","#4C90C0","#549DB2","#5DA8A3","#69B091","#75B681","#83BA70","#92BC63","#A2BE57","#B2BD4D","#C1BA47","#CEB541","#D9AD3D","#E1A03A","#E69136","#E67C32","#E4632E","#E04929","#DC2F24"],["#511EA8","#462EB9","#4040C6","#3F55CE","#4169CF","#447DCC","#4A8CC2","#529AB7","#5AA5A8","#64AD98","#70B487","#7DB878","#8BBB6A","#99BD5D","#A9BD53","#B7BC4B","#C5B945","#D1B340","#DCAB3C","#E29D39","#E68D36","#E67932","#E3612D","#E04828","#DC2F24"],["#511EA8","#472DB8","#403EC6","#3F53CD","#4066CF","#4379CD","#4989C5","#4F97BB","#57A1AD","#61AA9E","#6BB18E","#77B67F","#84BA70","#92BC64","#A0BE58","#AFBD4F","#BCBB49","#CAB843","#D4B13F","#DEA83C","#E39B39","#E68A35","#E67732","#E35F2D","#DF4728","#DC2F24"],["#511EA8","#472CB7","#403DC5","#3F50CC","#4063CF","#4375CD","#4785C7","#4D93BE","#559EB1","#5DA8A3","#67AF94","#72B485","#7EB877","#8BBB6A","#98BD5E","#A6BE55","#B4BD4C","#C1BA47","#CDB642","#D7AF3E","#DFA53B","#E49838","#E68735","#E67431","#E35D2D","#DF4628","#DC2F24"],["#511EA8","#482CB7","#403BC5","#3F4ECB","#3F61D0","#4272CE","#4682C9","#4C90C0","#529BB5","#5AA5A8","#63AC9A","#6DB28B","#78B77D","#84BA6F","#91BC64","#9EBE59","#ACBD51","#B9BC4A","#C5B945","#D0B441","#DAAD3D","#E0A23A","#E59637","#E68434","#E67231","#E35C2C","#DF4528","#DC2F24"],["#511EA8","#482BB6","#403AC4","#3F4CCB","#3F5ED0","#426FCE","#457FCB","#4A8CC2","#5098B9","#58A2AC","#60AA9F","#69B091","#73B583","#7FB976","#8BBB6A","#97BD5F","#A4BE56","#B1BD4E","#BDBB48","#C9B843","#D3B240","#DCAB3C","#E19F3A","#E69337","#E68234","#E67030","#E25A2C","#DF4428","#DC2F24"],["#511EA8","#482BB6","#4039C3","#3F4ACA","#3E5CD0","#416CCE","#447CCD","#4989C4","#4E96BC","#559FB0","#5DA8A4","#66AE96","#6FB388","#7AB77C","#85BA6F","#91BC64","#9DBE5A","#AABD53","#B6BD4B","#C2BA46","#CDB642","#D6B03F","#DDA83C","#E29D39","#E69036","#E67F33","#E56D30","#E2592C","#DF4428","#DC2F24"],["#511EA8","#482AB5","#4138C3","#3F48C9","#3E59CF","#4169CF","#4379CD","#4886C6","#4D92BE","#539CB4","#5AA5A8","#62AB9B","#6BB18E","#75B581","#7FB975","#8BBB6A","#96BD5F","#A2BE57","#AFBD4F","#BABC4A","#C5B945","#CFB541","#D8AE3E","#DFA63B","#E39B39","#E68D36","#E67D33","#E56B2F","#E2572B","#DF4328","#DC2F24"],["#511EA8","#492AB5","#4137C2","#3F47C9","#3E57CE","#4067CF","#4376CD","#4783C8","#4C8FC0","#519AB7","#58A2AC","#5FA9A0","#68AF93","#70B486","#7BB77A","#85BA6F","#90BC65","#9CBE5B","#A8BE54","#B3BD4D","#BEBB48","#C9B843","#D2B340","#DAAD3D","#E0A33B","#E49838","#E68B35","#E67B32","#E5692F","#E2562B","#DF4227","#DC2F24"],["#511EA8","#492AB5","#4236C1","#3F45C8","#3F55CE","#4064CF","#4273CE","#4681CA","#4A8CC2","#4F97BA","#569FAF","#5CA7A4","#64AD98","#6DB28B","#76B680","#80B974","#8BBB6A","#96BD60","#A1BE58","#ACBD51","#B7BC4B","#C2BA46","#CCB742","#D4B13F","#DCAB3C","#E1A13A","#E59638","#E68835","#E67932","#E4672F","#E1552B","#DF4227","#DC2F24"],["#511EA8","#4929B4","#4235C0","#3F44C8","#3F53CD","#3F62CF","#4270CE","#457ECB","#4989C4","#4E95BD","#549DB3","#5AA5A8","#61AB9C","#69B090","#72B485","#7BB879","#85BA6E","#90BC65","#9BBE5C","#A6BE55","#B1BD4E","#BBBC49","#C5B945","#CEB541","#D6AF3E","#DDA93C","#E29F39","#E69537","#E68634","#E67732","#E4662E","#E1532B","#DF4127","#DC2F24"],["#511EA8","#4929B4","#4335BF","#3F42C7","#3F51CC","#3F60D0","#416ECE","#447CCD","#4887C6","#4D92BF","#529BB6","#58A2AB","#5FA9A0","#66AE95","#6EB389","#77B67E","#81B973","#8BBB6A","#95BD61","#A0BE59","#AABD52","#B5BD4C","#BFBB48","#C9B843","#D1B340","#D8AE3E","#DEA63B","#E29C39","#E69237","#E68434","#E67531","#E4642E","#E1522A","#DF4127","#DC2F24"],["#511EA8","#4928B4","#4334BF","#4041C7","#3F50CC","#3F5ED0","#416CCE","#4379CD","#4784C7","#4B8FC1","#5098B9","#56A0AF","#5CA7A4","#63AC99","#6BB18E","#73B583","#7CB878","#86BB6E","#90BC65","#9ABD5C","#A4BE56","#AFBD4F","#B9BC4A","#C2BA46","#CCB742","#D3B240","#DAAC3D","#DFA43B","#E39B39","#E68F36","#E68234","#E67431","#E4632E","#E1512A","#DF4027","#DC2F24"]],A=1e4,B={1:"Jan",2:"Feb",3:"Mar",4:"Apr",5:"May",6:"Jun",7:"Jul",8:"Aug",9:"Sep",10:"Oct",11:"Nov",12:"Dec","01":"Jan","02":"Feb","03":"Mar","04":"Apr","05":"May","06":"Jun","07":"Jul","08":"Aug","09":"Sep"},C=0,D=1,E=2,F=["unknown","?","nan","na","n/a","","unassigned"],G=function(a){var b;return!!["number","boolean","string"].includes(void 0===a?"undefined":(b=a)&&"undefined"!=typeof Symbol&&b.constructor===Symbol?"symbol":typeof b)&&!("string"==typeof a&&F.includes(a.toLowerCase()))},H=Symbol("strain"),I=Symbol("genotype");Symbol("measurementId");var J={A:"Alanine",R:"Arginine",N:"Asparagine",D:"Aspartic acid",C:"Cysteine",Q:"Glutamine",E:"Glutamic acid",G:"Glycine",H:"Histidine",I:"Isoleucine",L:"Leucine",K:"Lysine",M:"Methionine",F:"Phenylalanine",P:"Proline",S:"Serine",T:"Threonine",W:"Tryptophan",Y:"Tyrosine",V:"Valine"},K=function(a){return J[a.toUpperCase()]||"Unknown"}},15361:function(g,d,a){"use strict";a.d(d,{fs:function(){return l}});var e,h,i,f=a(72607),b=a.n(f),j=a(71614);function k(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function c(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){k(g,e,f,d,h,"next",a)}function h(a){k(g,e,f,d,h,"throw",a)}d(void 0)})}}c(b().mark(function c(){return b().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if((0,j.y)("googleAnalyticsKey")){b.next=2;break}return b.abrupt("return");case 2:return i=a.e(495).then(a.bind(a,61495)),b.next=5,i;case 5:h=b.sent.default,b.next=9;break;case 9:h.initialize((0,j.R)("googleAnalyticsKey"));case 10:case"end":return b.stop()}},c)})),c(b().mark(function a(){return b().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=5;break}return a.next=3,i;case 3:a.next=6;break;case 5:return a.abrupt("return");case 6:h.set({page:window.location.pathname}),h.pageview(window.location.pathname);case 8:case"end":return a.stop()}},a)}));var l=(e=c(b().mark(function a(c){return b().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=5;break}return a.next=3,i;case 3:a.next=6;break;case 5:return a.abrupt("return");case 6:h.event({category:"Controls",action:c});case 7:case"end":return a.stop()}},a)})),function(a){return e.apply(this,arguments)})},67411:function(c,b,a){"use strict";a.d(b,{N0:function(){return k},bv:function(){return j}});var d=a(69856),e=a(57605),f=a(26061);function g(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}var h="unassigned",i=function(b,e,g,i,j){if(j)return g.currentGt;var a=(0,f.rs)(g,i);if(!b.continuous)return a&&"unknown"!==a?a:h;for(var c=0;c<e.length;c++){var d=e[c],k=b.legendBounds[d][0],l=b.legendBounds[d][1];if(a<=l&&a>=k)return d}return h},j=function(a,b,e,f){var c=b.length,g=new Array(c).fill(0);return a.forEach(function(b){if(f[b.idx]===d.m7)for(var a=0;a<c;a++)g[a]+=b.values[a]}),!0},k=function(m,n,u,v,o,p,q){var r=o.legendValues.filter(function(a){return void 0!==a}),w=(0,e.O$)(p),a=new Map,f=n.length;r.forEach(function(b){a.set(b,new Array(f).fill(0))}),a.set(h,new Array(f).fill(0));var x=new Array(f).fill(0);if(m.forEach(function(c){if(v[c.idx]===d.m7)for(var e=i(o,r,u[c.idx],p,w),b=0;b<f;b++)a.get(e)[b]+=c.values[b],x[b]+=c.values[b]}),q){var y=1e-7,c=!0,j=!1,k=void 0;try{for(var l,s=function(e,d){var b,c,f=(b=d.value,c=1,function(a){if(Array.isArray(a))return a}(b)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(b,c)||function(a,c){if(a){if("string"==typeof a)return g(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return g(a,c)}}(b,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];x.forEach(function(b,c){b>y?a.get(f)[c]/=b:a.get(f)[c]=0})},b=a[Symbol.iterator]();!(c=(l=b.next()).done);c=!0)s(b,l)}catch(t){j=!0,k=t}finally{try{c||null==b.return||b.return()}finally{if(j)throw k}}}return 0===a.get(h).reduce(function(a,b){return a+b},0)&&a.delete(h),a}},15080:function(c,b,a){"use strict";a.d(b,{HO:function(){return h},Sg:function(){return j},dQ:function(){return g}});var d=a(56097),e=a(57605);function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(b,c){var a=Object.keys(b).filter(function(a){return"boolean"!==b[a].type}).map(function(a){return{value:a,label:b[a].title||a}}),d=(0,e.O3)(c);return d?a.forEach(function(a){"gt"===a.value&&(a.label=d)}):a=a.filter(function(a){return"gt"!==a.value}),a.unshift({value:"displayOrder",label:"Node ordering in tree"}),a.unshift({value:"div",label:"Divergence"}),a}function h(c,k,r,l){var s=c.distanceMeasure,t=c.colorBy,b=function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){f(d,a,c[a])})}return d}({},c.scatterVariables),m=g(k.colorings,c.colorBy),a={};if(a.showBranches=!Object.prototype.hasOwnProperty.call(b,"showBranches")||b.showBranches,a.showRegression=Object.prototype.hasOwnProperty.call(b,"showRegression")?b.showRegression:!!l,!l){var d=i(m,[b.x,s],b.y);a.x=d.value,a.xLabel=d.label;var n=i(m,[b.y,t],d.value);a.y=n.value,a.yLabel=n.label;var e=!0,o=!1,p=void 0;try{for(var q,h=["x","y"][Symbol.iterator]();!(e=(q=h.next()).done);e=!0){var u=q.value;j(a,u,c,r,k)}}catch(v){o=!0,p=v}finally{try{e||null==h.return||h.return()}finally{if(o)throw p}}a.xContinuous&&a.yContinuous||(a.showRegression=!1)}return a}function i(d,b,g){for(var f=d.map(function(a){return a.value}),a=0;a<b.length;a++)if(b[a]&&b[a]!==g){var i=(0,e.O$)(b[a])?"gt":b[a],h=f.indexOf(i);if(-1!==h)return d[h]}for(var c=0;c<f.length;c++)if(f[c]!==g)return d[c]}function j(a,b,g,h,c){var f,e=a[b];if(["div","num_date","displayOrder"].includes(e)||"continuous"===c.colorings[e].type||"temporal"===c.colorings[e].type)return a["".concat(b,"Continuous")]=!0,a["".concat(b,"Domain")]=void 0,a["".concat(b,"Temporal")]=(null===(f=c.colorings[e])|| void 0===f?void 0:f.type)==="temporal",a;var i="gt"===a[b]?g.colorBy:a[b];return k(a,(0,d.pu)(i,g,h,null,c),b)}function k(a,c,b){return"continuous"===c.scaleType||"temporal"===c.scaleType?(a["".concat(b,"Continuous")]=!0,a["".concat(b,"Domain")]=void 0,a["".concat(b,"Temporal")]="temporal"===c.scaleType,a):(a["".concat(b,"Continuous")]=!1,a["".concat(b,"Domain")]=c.domain.slice(),a["".concat(b,"Temporal")]=!1,a)}},94329:function(c,b,a){"use strict";a.d(b,{BA:function(){return n},CU:function(){return j},Tr:function(){return m},WO:function(){return k},fL:function(){return l}});var d=a(69856),e=a(26061);function f(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function g(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||i(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(a){return function(a){if(Array.isArray(a))return f(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||i(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(a,c){if(a){if("string"==typeof a)return f(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return f(a,c)}}var j=function(a,b,f,g){var c={};return b.forEach(function(a){c[a]=new Map}),a.forEach(function(a){b.forEach(function(b){if((!g||!a.hasChildren)&&(!f||f[a.arrayIdx]===d.m7)){var h=(0,e.rs)(a,b);if(void 0!==h){var i=c[b].get(h)||0;c[b].set(h,i+1)}}})}),c},k=function(l,m){var n=new Set(["num_date",].concat(h(Object.entries(m).filter(function(b){var a=g(b,2);return"continuous"===(a[0],a[1]).type}).map(function(b){var a=g(b,2),c=a[0];return a[1],c})))),b=new Set,c=!0,i=!1,j=void 0;try{for(var k,d=l[Symbol.iterator]();!(c=(k=d.next()).done);c=!0){var f=k.value;if(!f.hasChildren)for(var a in f.node_attrs||{})n.has(a)|| !b.has(a)&&(0,e.rs)(f,a)&&b.add(a)}}catch(o){i=!0,j=o}finally{try{c||null==d.return||d.return()}finally{if(i)throw j}}return h(b)},l=function(a,c){if(a.tipCount=0,void 0!==a.children)for(var b=0;b<a.children.length;b++)l(a.children[b],c),a.tipCount+=a.children[b].tipCount;else a.tipCount=c[a.arrayIdx]===d.m7?1:0},m=function(a){var b=0;return a.forEach(function(a){!a.hasChildren&&b++}),b},n=function(a){if(a.fullTipCount=0,void 0!==a.children)for(var b=0;b<a.children.length;b++)n(a.children[b]),a.fullTipCount+=a.children[b].fullTipCount;else a.fullTipCount=1}},26061:function(c,b,a){"use strict";a.d(b,{Bu:function(){return l},KT:function(){return i},MG:function(){return u},MS:function(){return s},Wf:function(){return t},ZZ:function(){return k},eD:function(){return m},nt:function(){return j},nx:function(){return o},rs:function(){return h},tX:function(){return v}});var d=a(69856);function e(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function f(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||g(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(a,c){if(a){if("string"==typeof a)return e(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return e(a,c)}}var h=function(a,b){var c=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{},e=c.entropy,f=void 0!==e&&e,g=c.confidence,h=void 0!==g&&g;if(a.node_attrs){if(f||h){if(f)return a.node_attrs[b]?a.node_attrs[b].entropy:void 0;if(h)return a.node_attrs[b]?a.node_attrs[b].confidence:void 0}else{if(!a.node_attrs[b])return b===d.Ac?a.name:void 0;var i=a.node_attrs[b].value;if(!(0,d.mg)(i))return;return i}}},i=function(a){if(a.node_attrs&& void 0!==a.node_attrs.div)return a.node_attrs.div},j=function(a){if(a.node_attrs&&a.node_attrs.vaccine)return a.node_attrs.vaccine},k=function(a){return a.node_attrs&&a.node_attrs.author&&a.node_attrs.author.value?a.node_attrs.author:void 0},l=function(a){var b,c;return a.node_attrs&&((0,d.mg)(a.node_attrs.accession)&&(b=a.node_attrs.accession),c=n(a.node_attrs.url)),{accession:b,url:c}},m=function(a,b){if(a.node_attrs&&a.node_attrs[b])return n(a.node_attrs[b].url)};function n(a){if(void 0!==a)try{if("string"!=typeof a)throw new Error;return a.startsWith("http_")&&(a=a.replace("http_","http:")),a.startsWith("https_")&&(a=a.replace("https_","https:")),new URL(a).href}catch(b){console.warn("Dataset provided the invalid URL ".concat(a));return}}function o(a){var b=new Set;return a.forEach(function(a){a.branch_attrs&&a.branch_attrs.mutations&&Object.keys(a.branch_attrs.mutations).length&&Object.entries(a.branch_attrs.mutations).forEach(function(c){var a=f(c,2),d=a[0];a[1].forEach(function(a){var c=[a.slice(0,1),a.slice(1,-1),a.slice(-1)],f=c[0],e=c[1],g=c[2];b.add("".concat(d," ").concat(e).concat(g)),b.add("".concat(d," ").concat(e).concat(f))})})}),b}var p=function(a){var b={},c=function(a){a.branch_attrs&&a.branch_attrs.mutations&&Object.keys(a.branch_attrs.mutations).length&&Object.entries(a.branch_attrs.mutations).forEach(function(d){var c=f(d,2),a=c[0],e=c[1];("nuc"===a||"nuc"!==a)&&(b[a]||(b[a]={}),e.forEach(function(c){var d=[c.slice(0,1),c.slice(1,-1),c.slice(-1)],f=d[0],e=d[1],g=d[2];b[a][e]?b[a][e][0]=f:b[a][e]=[f,g]}))});var e=a.arrayIdx,d=a.parent;d&&d.arrayIdx!==e&&c(d)};return c(a),b},q=function(f,j,k){var g={},b=!0,c=!1,d=void 0;try{for(var e,h=function(e,c){var a=c.value,b={unique:[],homoplasies:[],gaps:[],reversionsToRoot:[],undeletions:[]},d="nuc"===a;d&&(b.ns=[]),f[a].forEach(function(c){var g=c.slice(0,1),e=c.slice(-1);"-"===g?b.undeletions.push(c):"-"===e?b.gaps.push(c):d&&"N"===e?b.ns.push(c):j["".concat(a,":").concat(c)]>1?b.homoplasies.push(c):b.unique.push(c);var f=c.slice(1,-1);"-"!==g&&"-"!==e&&"N"!==e&&k[a]&&k[a][f]&&k[a][f][0]===k[a][f][1]&&b.reversionsToRoot.push(c)}),g[a]=b},a=Object.keys(f)[Symbol.iterator]();!(b=(e=a.next()).done);b=!0)h(a,e)}catch(i){c=!0,d=i}finally{try{b||null==a.return||a.return()}finally{if(c)throw d}}return g},r=function(j){var k={},d=!0,l=!1,m=void 0;try{for(var n,e=Object.keys(j)[Symbol.iterator]();!(d=(n=e.next()).done);d=!0){var g=n.value,a={changes:[],gaps:[],reversionsToRoot:[]},o="nuc"===g;o&&(a.ns=[]);var h=!0,p=!1,q=void 0;try{for(var r,i=Object.entries(j[g])[Symbol.iterator]();!(h=(r=i.next()).done);h=!0){var s=f(r.value,2),v=s[0],t=f(s[1],2),u=t[0],b=t[1],c="".concat(u).concat(v).concat(b);"-"===b?a.gaps.push(c):o&&"N"===b?a.ns.push(c):u===b?a.reversionsToRoot.push(c):a.changes.push(c)}}catch(w){p=!0,q=w}finally{try{h||null==i.return||i.return()}finally{if(p)throw q}}k[g]=a}}catch(x){l=!0,m=x}finally{try{d||null==e.return||e.return()}finally{if(l)throw m}}return k},s=function(a,c){var b=a.branch_attrs&&a.branch_attrs.mutations;if("object"!=typeof b)return{};var d=a.parent===a?{}:p(a,b),e=q(b,c,d);return e},t=function(a){var b=a.branch_attrs&&a.branch_attrs.mutations,c=p(a,b),d=r(c);return d},u=function(a){if(!a)return function(){return 0};var b=a[0].genes.map(function(a){return a.cds.map(function(a){return[a.name,a.segments[0].rangeGenome["+"===a.strand?0:1]]})}).flat();b.sort(function(a,b){return a[1]>b[1]?1:-1});var c={};return b.forEach(function(a,b){c[f(a,1)[0]]=b+1}),c.nuc=0,function(a,b){return void 0===c[a]?1:void 0===c[b]?-1:c[a]-c[b]}},v=function(a,b){a.forEach(function(a){if(b[a.name]){a.node_attrs||(a.node_attrs={});var c=!0,e=!1,g=void 0;try{for(var h,d=Object.entries(b[a.name])[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var i=f(h.value,2),j=i[0],k=i[1];a.node_attrs[j]=k}}catch(l){e=!0,g=l}finally{try{c||null==d.return||d.return()}finally{if(e)throw g}}}})}},71476:function(c,b,a){"use strict";a.d(b,{w:function(){return e}});var d=a(69856),e=function(c,e,i,j){for(var f={},b=0;b<e.length;b++)e[b].hasChildren||(f[e[b].name]=b);for(var g=[],a=0;a<c.length;a++){var h=f[c[a].name];!c[a].hasChildren&&h&&i[a]===d.m7&&j[h]===d.m7&&g.push([a,f[c[a].name]])}return g}},62525:function(c,b,a){"use strict";a.d(b,{Vv:function(){return t},oJ:function(){return k},s9:function(){return l},vK:function(){return r}});var d=a(69856),e=a(94329),f=a(26061),g=a(19107);function h(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function i(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||j(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(a,c){if(a){if("string"==typeof a)return h(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return h(a,c)}}var k=function(b,c){var a;for(a=0;a<b.length;a++)if(b[a].name===c)return a;return console.error("strainNameToIdx couldn't find strain"),0},l=function(d,b,c,f){var a,e=0;for(a=0;a<d.length;a++)if(d[a].branch_attrs&& void 0!==d[a].branch_attrs.labels&&d[a].branch_attrs.labels[b]===c){if(0!==e)return console.error("getIdxMatchingLabel found multiple labels ".concat(b,"===").concat(c)),f((0,g.p5)({message:"Specified Zoom Label Found Multiple Times!",details:"Multiple nodes in the tree are labelled '"+b+" "+c+"' - no zoom performed"})),0;e=a}return 0===e&&(console.error("getIdxMatchingLabel couldn't find label ".concat(b,"===").concat(c)),f((0,g.p5)({message:"Specified Zoom Label Value Not Found!",details:"The label '"+b+"' value '"+c+"' was not found in the tree - no zoom performed"}))),e},m=function(a,c){var b=a[0].tipCount;return b||(b=1),a.map(function(a,e){return c[e]===d.m7?(0,d.UX)((a.tipCount+5)/(b+5)):.5})},n=function(b,a){0===a.arrayIdx||b[a.parent.arrayIdx]||(b[a.parent.arrayIdx]=!0,n(b,a.parent))},o=function(d,a){if(!a.hasChildren)return a.arrayIdx;var b=a.children.filter(function(a){return d[a.arrayIdx]});if(b.length>1)return a.arrayIdx;d[a.arrayIdx]=!1;for(var c=0;c<b.length;c++){var e=o(d,b[c]);if(e)return e}return null},p=function(a){var b;if(!a.nodes)return console.error("getInView() ran without tree.nodes"),null;try{b=a.nodes.map(function(a){return a.shell.inView})}catch(c){b=a.nodes.map(function(a){return void 0===a.inView||a.inView})}return b},q=function(b,g,l){if(!b.nodes)return console.error("getFiltered() ran without tree.nodes"),null;var a,c,h,k=[];if(Reflect.ownKeys(g.filters).forEach(function(a){if(a!==d.vD){var b=g.filters[a].filter(function(a){return a.active}).map(function(a){return a.value});b.length&&k.push({trait:a,values:b})}}),k.length){for(var j=(a=b.nodes.map(function(a,b){return!a.hasChildren&&l[b]&&k.every(function(b){return b.values.includes((0,f.rs)(a,b.trait))})})).reduce(function(a,b,c){return b&&a.push(c),a},[]),e=0;e<j.length;e++)n(a,b.nodes[j[e]]);c=o(a,b.nodes[0])}return{filtered:a=(h=i(s(a,g.filters,b.nodes)||[a,c],2))[0],idxOfFilteredRoot:c=h[1]}},r=function(a,g,j){var b,k,l,n,o,h=p(a),i=q(a,g,h)||{},r=i.filtered,s=i.idxOfFilteredRoot,c=(b=a,k=g,l=j,n=h,o=r,b.nodes?b.nodes.map(function(b,c){if(n[c]&&(!o||o[c])){var a=(0,f.rs)(b,"num_date"),e=(0,f.rs)(b.parent,"num_date");if(!a||!e)return d.m7;if("divOnly"===k.branchLengthsToDisplay)return d.m7;if(a>=l.dateMinNumeric&&a<=l.dateMaxNumeric)return d.m7;if(!(a<l.dateMinNumeric||e>l.dateMaxNumeric))return d.mZ}return d.OR}):(console.error("calcVisibility ran without tree.nodes"),d.m7));return(0,e.fL)(a.nodes[0],c),{visibility:c,visibilityVersion:a.visibilityVersion+1,branchThickness:m(a.nodes,c),branchThicknessVersion:a.branchThicknessVersion+1,idxOfFilteredRoot:s}};function s(b,e,a){var c=!!Reflect.ownKeys(e).includes(d.vD)&&e[d.vD].filter(function(a){return a.active}).map(function(a){return a.value});if(c&&c.length){b||(b=Array.from({length:a.length},function(){return!0}));var i=t(c),f=i.length,k=new Array(f),n=new Array(a.length),l=function(b,d){if(b.branch_attrs&&b.branch_attrs.mutations&&Object.keys(b.branch_attrs.mutations).length){for(var c=b.branch_attrs.mutations,a=0;a<f;a++)if(c[i[a][0]]){var g=c[i[a][0]].map(function(a){return a.slice(1,-1)}),m=c[i[a][0]].map(function(a){return a.slice(-1)}),e=g.indexOf(i[a][1]);-1===e||(i[a][2].has(m[e])?d[a]=!0:d[a]=!1,k[a]||(k[a]=c[i[a][0]][e].slice(0,1)))}}n[b.arrayIdx]=d,b.hasChildren&&b.children.forEach(function(b){var a;return l(b,function(a){if(Array.isArray(a))return h(a)}(a=d)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||j(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())})};l(a[0],Array.from({length:f},function(){}));var o=k.map(function(a,b){return i[b][2].has(a)}),g=b.map(function(a,b){return!!a&&n[b].map(function(a,b){return void 0===a?o[b]:a}).every(function(a){return a})}),m=v(a,g);return[g,m]}}function t(a){return a.map(function(c){var a=i(c.split(" "),2),d=a[0],b=a[1];return[d,b.slice(0,-1),b.slice(-1)]}).sort(u).map(function(a,b){return 0===b?[[a[0],a[1],new Set(a[2])]]:a}).reduce(function(b,a){var c=b[b.length-1];return a[0]===c[0]&&a[1]===c[1]?c[2].add(a[2]):b.push([a[0],a[1],new Set(a[2])]),b})}function u(a,b){if(a[0]!==b[0])return"nuc"===a[0]?1:"nuc"===b[0]?-1:a<b?-1:1;var c=[parseInt(a[1],10),parseInt(b[1],10)],d=c[0],e=c[1];return d>e?1:e>d?-1:a[2]>b[2]?1:a[2]<b[2]?-1:0}function v(a,f){var b=[],g=new Set,c=0;function d(a){if(f[a.arrayIdx]){b.push(a.arrayIdx);return}if(a.hasChildren)for(var c=0;c<a.children.length;c++)d(a.children[c])}function h(b){g.add(b);var c=a[b].parent.arrayIdx;0===b||g.has(c)||h(c)}function e(a){var b=a.arrayIdx;if(g.has(b)){if(!a.hasChildren){c=b;return}var d=a.children.filter(function(a){return g.has(a.arrayIdx)});if(1!==d.length){c=b;return}e(d[0])}}return d(a[0]),b.forEach(function(a){return h(a)}),e(a[0]),c}},36322:function(d,b,c){"use strict";c.d(b,{U:function(){return e},t:function(){return f}});var a=Array.prototype,e=a.map,f=a.slice},61670:function(c,a,b){"use strict";function d(a){return function(){return a}}b.d(a,{Z:function(){return d}})},75114:function(c,b,a){"use strict";a.d(b,{JG:function(){return n},ZP:function(){return o},mg:function(){return k}});var d=a(32545);function e(a,b){return a=+a,b=+b,function(c){return Math.round(a*(1-c)+b*c)}}var f=a(60205),g=a(36322),h=a(61670);function i(a){return+a}var j=[0,1];function k(a,b){return(b-=a=+a)?function(c){return(c-a)/b}:(0,h.Z)(b)}function l(d,e,f,g){var a=d[0],c=d[1],b=e[0],h=e[1];return c<a?(a=f(c,a),b=g(h,b)):(a=f(a,c),b=g(b,h)),function(c){return b(a(c))}}function m(a,c,f,g){var e=Math.min(a.length,c.length)-1,h=new Array(e),i=new Array(e),b=-1;for(a[e]<a[0]&&(a=a.slice().reverse(),c=c.slice().reverse());++b<e;)h[b]=f(a[b],a[b+1]),i[b]=g(c[b],c[b+1]);return function(b){var c=(0,d.b4)(a,b,1,e)-1;return i[c](h[c](b))}}function n(a,b){return b.domain(a.domain()).range(a.range()).interpolate(a.interpolate()).clamp(a.clamp())}function o(c,d){var h,n,o,b=function(){return h=Math.min(p.length,q.length)>2?m:l,n=o=null,a},a=function(a){var b;return(n||(n=h(p,q,s?(b=c,function(a,c){var d=b(a=+a,c=+c);return function(b){return b<=a?0:b>=c?1:d(b)}}):c,r)))(+a)},p=j,q=j,r=f.Z,s=!1;return a.invert=function(a){var b;return(o||(o=h(q,p,k,s?(b=d,function(a,c){var d=b(a=+a,c=+c);return function(b){return b<=0?a:b>=1?c:d(b)}}):d)))(+a)},a.domain=function(a){return arguments.length?(p=g.U.call(a,i),b()):p.slice()},a.range=function(a){return arguments.length?(q=g.t.call(a),b()):q.slice()},a.rangeRound=function(a){return q=g.t.call(a),r=e,b()},a.clamp=function(a){return arguments.length?(s=!!a,b()):s},a.interpolate=function(a){return arguments.length?(r=a,b()):r},b()}},64881:function(c,b,a){"use strict";a.d(b,{Z:function(){return k},Q:function(){return j}});var d=a(32545),e=a(36263),f=a(75114),g=a(42938),h=a(36545),i=a(29105);function j(a){var b=a.domain;return a.ticks=function(c){var a=b();return(0,d.sd)(a[0],a[a.length-1],null==c?10:c)},a.tickFormat=function(a,c){return function(f,m,a){var c,e,n,b,j=f[0],k=f[f.length-1],l=(0,d.ly)(j,k,null==m?10:m);switch((a=(0,g.Z)(null==a?",f":a)).type){case"s":var o,p,q=Math.max(Math.abs(j),Math.abs(k));return null!=a.precision||isNaN(b=(o=l,p=q,Math.max(0,3*Math.max(-8,Math.min(8,Math.floor((0,h.Z)(p)/3)))-(0,h.Z)(Math.abs(o)))))||(a.precision=b),(0,i.jH)(a,q);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(b=(c=l,e=Math.max(Math.abs(j),Math.abs(k)),c=Math.abs(c),e=Math.abs(e)-c,Math.max(0,(0,h.Z)(e)-(0,h.Z)(c))+1))||(a.precision=b-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(b=(n=l,Math.max(0,-(0,h.Z)(Math.abs(n)))))||(a.precision=b-("%"===a.type)*2)}return(0,i.WU)(a)}(b(),a,c)},a.nice=function(h){null==h&&(h=10);var c,g=b(),i=0,j=g.length-1,e=g[i],f=g[j];return f<e&&(c=e,e=f,f=c,c=i,i=j,j=c),(c=(0,d.G9)(e,f,h))>0?(e=Math.floor(e/c)*c,f=Math.ceil(f/c)*c,c=(0,d.G9)(e,f,h)):c<0&&(e=Math.ceil(e*c)/c,f=Math.floor(f*c)/c,c=(0,d.G9)(e,f,h)),c>0?(g[i]=Math.floor(e/c)*c,g[j]=Math.ceil(f/c)*c,b(g)):c<0&&(g[i]=Math.ceil(e*c)/c,g[j]=Math.floor(f*c)/c,b(g)),a},a}function k(){var a=(0,f.ZP)(f.mg,e.Z);return a.copy=function(){return(0,f.JG)(a,k())},j(a)}},40978:function(h,f,b){"use strict";function c(){}function d(a,e){var d=new c;if(a instanceof c)a.each(function(a,b){d.set(b,a)});else if(Array.isArray(a)){var f,b=-1,g=a.length;if(null==e)for(;++b<g;)d.set(b,a[b]);else for(;++b<g;)d.set(e(f=a[b],b,a),f)}else if(a)for(var h in a)d.set(h,a[h]);return d}b.d(f,{Z:function(){return k}}),c.prototype=d.prototype={constructor:c,has:function(a){return"$"+a in this},get:function(a){return this["$"+a]},set:function(a,b){return this["$"+a]=b,this},remove:function(b){var a="$"+b;return a in this&&delete this[a]},clear:function(){for(var a in this)"$"===a[0]&&delete this[a]},keys:function(){var a=[];for(var b in this)"$"===b[0]&&a.push(b.slice(1));return a},values:function(){var a=[];for(var b in this)"$"===b[0]&&a.push(this[b]);return a},entries:function(){var b=[];for(var a in this)"$"===a[0]&&b.push({key:a.slice(1),value:this[a]});return b},size:function(){var a=0;for(var b in this)"$"===b[0]&& ++a;return a},empty:function(){for(var a in this)if("$"===a[0])return!1;return!0},each:function(b){for(var a in this)"$"===a[0]&&b(this[a],a.slice(1),this)}};var g=d;function e(){}var a=g.prototype;e.prototype=(function(a,d){var c=new e;if(a instanceof e)a.each(function(a){c.add(a)});else if(a){var b=-1,f=a.length;if(null==d)for(;++b<f;)c.add(a[b]);else for(;++b<f;)c.add(d(a[b],b,a))}return c}).prototype={constructor:e,has:a.has,add:function(a){return this["$"+(a+="")]=a,this},remove:a.remove,clear:a.clear,values:a.keys,size:a.size,empty:a.empty,each:a.each};var i=b(36322),j={name:"implicit"};function k(b){var a=function(f){var g=f+"",a=c.get(g);if(!a){if(e!==j)return e;c.set(g,a=d.push(f))}return b[(a-1)%b.length]},c=g(),d=[],e=j;return b=null==b?[]:i.t.call(b),a.domain=function(b){if(!arguments.length)return d.slice();d=[],c=g();for(var e,f,h=-1,i=b.length;++h<i;)c.has(f=(e=b[h])+"")||c.set(f,d.push(e));return a},a.range=function(c){return arguments.length?(b=i.t.call(c),a):b.slice()},a.unknown=function(b){return arguments.length?(e=b,a):e},a.copy=function(){return k().domain(d).range(b).unknown(e)},a}},43717:function(c,b,a){"use strict";a.d(b,{Z:function(){return h},"_":function(){return i}});var d=a(61670),e=a(64881),f=a(75114);function g(a,b){return a<0?-Math.pow(-a,b):Math.pow(a,b)}function h(){var b=1,a=(0,f.ZP)(function(c,a){return(a=g(a,b)-(c=g(c,b)))?function(d){return(g(d,b)-c)/a}:(0,d.Z)(a)},function(a,c){return c=g(c,b)-(a=g(a,b)),function(d){return g(a+c*d,1/b)}}),c=a.domain;return a.exponent=function(a){return arguments.length?(b=+a,c(c())):b},a.copy=function(){return(0,f.JG)(a,h().exponent(b))},(0,e.Q)(a)}function i(){return h().exponent(.5)}},46810:function(c,a,b){"use strict";var d=b(96791),e=b(9102);function f(a,b){return b.encode?b.strict?d(a):encodeURIComponent(a):a}function g(a){return Array.isArray(a)?a.sort():"object"==typeof a?g(Object.keys(a)).sort(function(a,b){return Number(a)-Number(b)}).map(function(b){return a[b]}):a}a.extract=function(a){return a.split("?")[1]||""},a.parse=function(a,c){var d=function(a){var b;switch(a.arrayFormat){case"index":return function(a,d,c){if(b=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),!b){c[a]=d;return}void 0===c[a]&&(c[a]={}),c[a][b[1]]=d};case"bracket":return function(a,d,c){if(b=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),b){if(void 0===c[a]){c[a]=[d];return}}else{c[a]=d;return}c[a]=[].concat(c[a],d)};default:return function(a,c,b){if(void 0===b[a]){b[a]=c;return}b[a]=[].concat(b[a],c)}}}(c=e({arrayFormat:"none"},c)),b=Object.create(null);return"string"!=typeof a?b:(a=a.trim().replace(/^(\?|#|&)/,""))?(a.split("&").forEach(function(e){var c=e.replace(/\+/g," ").split("="),f=c.shift(),a=c.length>0?c.join("="):void 0;a=void 0===a?null:decodeURIComponent(a),d(decodeURIComponent(f),a,b)}),Object.keys(b).sort().reduce(function(c,d){var a=b[d];return Boolean(a)&&"object"==typeof a&&!Array.isArray(a)?c[d]=g(a):c[d]=a,c},Object.create(null))):b},a.stringify=function(a,b){var c=function(a){switch(a.arrayFormat){case"index":return function(b,c,d){return null===c?[f(b,a),"[",d,"]"].join(""):[f(b,a),"[",f(d,a),"]=",f(c,a)].join("")};case"bracket":return function(b,c){return null===c?f(b,a):[f(b,a),"[]=",f(c,a)].join("")};default:return function(b,c){return null===c?f(b,a):[f(b,a),"=",f(c,a)].join("")}}}(b=e({encode:!0,strict:!0,arrayFormat:"none"},b));return a?Object.keys(a).sort().map(function(e){var d=a[e];if(void 0===d)return"";if(null===d)return f(e,b);if(Array.isArray(d)){var g=[];return d.slice().forEach(function(a){void 0!==a&&g.push(c(e,a,g.length))}),g.join("&")}return f(e,b)+"="+f(d,b)}).filter(function(a){return a.length>0}).join("&"):""}},46641:function(u,l,a){"use strict";a.d(l,{zt:function(){return y},"$j":function(){return Z},v9:function(){return $}});var c=a(60822),i=c.createContext(null),m=function(a){a()},v={notify:function(){},get:function(){return[]}};function w(d,e){var f,g=v;function a(){c.onStateChange&&c.onStateChange()}function b(){if(!f){var b,c,h;f=e?e.addNestedSub(a):d.subscribe(a),g=(b=m,c=null,h=null,{clear:function(){c=null,h=null},notify:function(){b(function(){for(var a=c;a;)a.callback(),a=a.next})},get:function(){for(var b=[],a=c;a;)b.push(a),a=a.next;return b},subscribe:function(b){var d=!0,a=h={callback:b,next:null,prev:h};return a.prev?a.prev.next=a:c=a,function(){d&&null!==c&&(d=!1,a.next?a.next.prev=a.prev:h=a.prev,a.prev?a.prev.next=a.next:c=a.next)}}})}}var c={addNestedSub:function(a){return b(),g.subscribe(a)},notifyNestedSubs:function(){g.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(f)},trySubscribe:b,tryUnsubscribe:function(){f&&(f(),f=void 0,g.clear(),g=v)},getListeners:function(){return g}};return c}var x="undefined"!=typeof window&& void 0!==window.document&& void 0!==window.document.createElement?c.useLayoutEffect:c.useEffect,y=function(a){var b=a.store,e=a.context,f=a.children,d=(0,c.useMemo)(function(){var a=w(b);return{store:b,subscription:a}},[b]),g=(0,c.useMemo)(function(){return b.getState()},[b]);return x(function(){var a=d.subscription;return a.onStateChange=a.notifyNestedSubs,a.trySubscribe(),g!==b.getState()&&a.notifyNestedSubs(),function(){a.tryUnsubscribe(),a.onStateChange=null}},[d,g]),c.createElement((e||i).Provider,{value:d},f)},z=a(9652),A=a(22238),n=a(20560),B=a.n(n),C=a(94075),D=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],E=["reactReduxForwardedRef"],F=[],G=[null,null];function H(a,b){var c=a[1];return[b.payload,c+1]}function I(b,c,a){x(function(){return b.apply(void 0,c)},a)}function J(b,c,d,e,f,a,g){b.current=e,c.current=f,d.current=!1,a.current&&(a.current=null,g())}function K(c,d,a,e,f,g,h,i,j,k){if(c){var l=!1,m=null,b=function(){if(!l){var a,b,n=d.getState();try{a=e(n,f.current)}catch(c){b=c,m=c}b||(m=null),a===g.current?h.current||j():(g.current=a,i.current=a,h.current=!0,k({type:"STORE_UPDATED",payload:{error:b}}))}};return a.onStateChange=b,a.trySubscribe(),b(),function(){if(l=!0,a.tryUnsubscribe(),a.onStateChange=null,m)throw m}}}var L=function(){return[null,0]};function M(a,b){return a===b?0!==a||0!==b||1/a==1/b:a!=a&&b!=b}function N(b,a){if(M(b,a))return!0;if("object"!=typeof b||null===b||"object"!=typeof a||null===a)return!1;var c=Object.keys(b),e=Object.keys(a);if(c.length!==e.length)return!1;for(var d=0;d<c.length;d++)if(!Object.prototype.hasOwnProperty.call(a,c[d])||!M(b[c[d]],a[c[d]]))return!1;return!0}function O(a){return function(c,d){var e=a(c,d);function b(){return e}return b.dependsOnOwnProps=!1,b}}function P(a){return null!==a.dependsOnOwnProps&& void 0!==a.dependsOnOwnProps?Boolean(a.dependsOnOwnProps):1!==a.length}function Q(a,b){return function(d,c){c.displayName;var b=function(a,c){return b.dependsOnOwnProps?b.mapToProps(a,c):b.mapToProps(a)};return b.dependsOnOwnProps=!0,b.mapToProps=function(d,e){b.mapToProps=a,b.dependsOnOwnProps=P(a);var c=b(d,e);return"function"==typeof c&&(b.mapToProps=c,b.dependsOnOwnProps=P(c),c=b(d,e)),c},b}}function R(a,b,c){return(0,z.Z)({},c,a,b)}var S=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function T(a,b,c,d){return function(f,e){return c(a(f,e),b(d,e),e)}}function U(b,c,d,e,a){var f,g,h,i,j,k=a.areStatesEqual,l=a.areOwnPropsEqual,m=a.areStatePropsEqual,n=!1;return function(q,r){var s,t,a,u,v,w,o,p;return n?(a=q,o=!l(u=r,g),p=!k(a,f),(f=a,g=u,o&&p)?(h=b(f,g),c.dependsOnOwnProps&&(i=c(e,g)),j=d(h,i,g)):o?(b.dependsOnOwnProps&&(h=b(f,g)),c.dependsOnOwnProps&&(i=c(e,g)),j=d(h,i,g)):(p&&(w=!m(v=b(f,g),h),h=v,w&&(j=d(h,i,g))),j)):(s=q,t=r,h=b(f=s,g=t),i=c(e,g),j=d(h,i,g),n=!0,j)}}var V=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function W(d,b,e){for(var a=b.length-1;a>=0;a--){var c=b[a](d);if(c)return c}return function(b,a){throw new Error("Invalid value of type "+typeof d+" for "+e+" argument when connecting component "+a.wrappedComponentName+".")}}function X(a,b){return a===b}var j,b,k,o,d,p,e,q,f,r,g,s,h,t,Y,Z=(o=void 0===(k=(b=void 0===j?{}:j).connectHOC)?function(l,b){void 0===b&&(b={});var a=b,d=a.getDisplayName,m=void 0===d?function(a){return"ConnectAdvanced("+a+")"}:d,e=a.methodName,n=void 0===e?"connectAdvanced":e,f=a.renderCountProp,o=void 0===f?void 0:f,g=a.shouldHandleStateChanges,p=void 0===g||g,h=a.storeKey,q=void 0===h?"store":h,j=(a.withRef,a.forwardRef),r=void 0!==j&&j,k=a.context,s=(0,A.Z)(a,D),t=void 0===k?i:k;return function(a){var g=a.displayName||a.name||"Component",b=m(g),i=(0,z.Z)({},s,{getDisplayName:m,methodName:n,renderCountProp:o,shouldHandleStateChanges:p,storeKey:q,displayName:b,wrappedComponentName:g,WrappedComponent:a}),h=s.pure,j=h?c.useMemo:function(a){return a()};function d(b){var g=(0,c.useMemo)(function(){var a=b.reactReduxForwardedRef,c=(0,A.Z)(b,E);return[b.context,a,c]},[b]),D=g[0],M=g[1],h=g[2],n=(0,c.useMemo)(function(){return D&&D.Consumer&&(0,C.isContextConsumer)(c.createElement(D.Consumer,null))?D:t},[D,t]),d=(0,c.useContext)(n),k=Boolean(b.store)&&Boolean(b.store.getState)&&Boolean(b.store.dispatch);Boolean(d)&&Boolean(d.store);var e=k?b.store:d.store,o=(0,c.useMemo)(function(){var a;return l(e.dispatch,i)},[e]),q=(0,c.useMemo)(function(){if(!p)return G;var a=w(e,k?null:d.subscription),b=a.notifyNestedSubs.bind(a);return[a,b]},[e,k,d]),m=q[0],r=q[1],N=(0,c.useMemo)(function(){return k?d:(0,z.Z)({},d,{subscription:m})},[k,d,m]),s=(0,c.useReducer)(H,F,L),f=s[0][0],O=s[1];if(f&&f.error)throw f.error;var u=(0,c.useRef)(),v=(0,c.useRef)(h),x=(0,c.useRef)(),y=(0,c.useRef)(!1),B=j(function(){return x.current&&h===v.current?x.current:o(e.getState(),h)},[e,f,h]);I(J,[v,u,y,h,B,x,r]),I(K,[p,e,m,o,v,u,y,x,r,O],[e,m,o]);var P=(0,c.useMemo)(function(){return c.createElement(a,(0,z.Z)({},B,{ref:M}))},[M,a,B]);return(0,c.useMemo)(function(){return p?c.createElement(n.Provider,{value:N},P):P},[n,P,N])}var e=h?c.memo(d):d;if(e.WrappedComponent=a,e.displayName=d.displayName=b,r){var f=c.forwardRef(function(a,b){return c.createElement(e,(0,z.Z)({},a,{reactReduxForwardedRef:b}))});return f.displayName=b,f.WrappedComponent=a,B()(f,a)}return B()(e,a)}}:k,d=b.mapStateToPropsFactories,p=void 0===d?[function(a){return"function"==typeof a?Q(a,"mapStateToProps"):void 0},function(a){return a?void 0:O(function(){return{}})}]:d,e=b.mapDispatchToPropsFactories,q=void 0===e?[function(a){return"function"==typeof a?Q(a,"mapDispatchToProps"):void 0},function(a){return a?void 0:O(function(a){return{dispatch:a}})},function(a){return a&&"object"==typeof a?O(function(b){return function(a,d){var b={};for(var c in a)!function(c){var e=a[c];"function"==typeof e&&(b[c]=function(){return d(e.apply(void 0,arguments))})}(c);return b}(a,b)}):void 0}]:e,f=b.mergePropsFactories,r=void 0===f?[function(a){var b;return"function"==typeof a?(b=a,function(c,a){a.displayName;var d,e=a.pure,f=a.areMergedPropsEqual,g=!1;return function(c,h,i){var a=b(c,h,i);return g?e&&f(a,d)||(d=a):(g=!0,d=a),d}}):void 0},function(a){return a?void 0:function(){return R}}]:f,g=b.selectorFactory,s=void 0===g?function(b,c){var d=c.initMapStateToProps,e=c.initMapDispatchToProps,f=c.initMergeProps,a=(0,A.Z)(c,S),g=d(b,a),h=e(b,a),i=f(b,a);return(a.pure?U:T)(g,h,i,b,a)}:g,function(c,i,j,b){void 0===b&&(b={});var a=b,d=a.pure,e=a.areStatesEqual,f=a.areOwnPropsEqual,g=a.areStatePropsEqual,h=a.areMergedPropsEqual,k=(0,A.Z)(a,V),l=W(c,p,"mapStateToProps"),m=W(i,q,"mapDispatchToProps"),n=W(j,r,"mergeProps");return o(s,(0,z.Z)({methodName:"connect",getDisplayName:function(a){return"Connect("+a+")"},shouldHandleStateChanges:Boolean(c),initMapStateToProps:l,initMapDispatchToProps:m,initMergeProps:n,pure:void 0===d||d,areStatesEqual:void 0===e?X:e,areOwnPropsEqual:void 0===f?N:f,areStatePropsEqual:void 0===g?N:g,areMergedPropsEqual:void 0===h?N:h},k))}),$=(void 0===h&&(h=i),t=h===i?function(){return(0,c.useContext)(i)}:function(){return(0,c.useContext)(h)},function(e,a){void 0===a&&(a=function(a,b){return a===b});var b=t(),f=b.store,g=b.subscription,d=function(f,j,b,k){var d,o=(0,c.useReducer)(function(a){return a+1},0)[1],l=(0,c.useMemo)(function(){return w(b,k)},[b,k]),e=(0,c.useRef)(),m=(0,c.useRef)(),n=(0,c.useRef)(),a=(0,c.useRef)(),g=b.getState();try{if(f!==m.current||g!==n.current||e.current){var h=f(g);d=void 0!==a.current&&j(h,a.current)?a.current:h}else d=a.current}catch(i){throw e.current&&(i.message+="\nThe error may be correlated with this previous error:\n"+e.current.stack+"\n\n"),i}return x(function(){m.current=f,n.current=g,a.current=d,e.current=void 0}),x(function(){function c(){try{var c=b.getState();if(c===n.current)return;var d=m.current(c);if(j(d,a.current))return;a.current=d,n.current=c}catch(f){e.current=f}o()}return l.onStateChange=c,l.trySubscribe(),c(),function(){return l.tryUnsubscribe()}},[b,l]),d}(e,a,f,g);return(0,c.useDebugValue)(d),d});m=a(52425).unstable_batchedUpdates},40367:function(o,b){"use strict";var c=60103,d=60106,e=60107,f=60108,g=60114,h=60109,i=60110,j=60112,k=60113,l=60120,m=60115,n=60116;if("function"==typeof Symbol&&Symbol.for){var a=Symbol.for;c=a("react.element"),d=a("react.portal"),e=a("react.fragment"),f=a("react.strict_mode"),g=a("react.profiler"),h=a("react.provider"),i=a("react.context"),j=a("react.forward_ref"),k=a("react.suspense"),l=a("react.suspense_list"),m=a("react.memo"),n=a("react.lazy"),a("react.block"),a("react.server.block"),a("react.fundamental"),a("react.debug_trace_mode"),a("react.legacy_hidden")}b.isContextConsumer=function(a){return function(a){if("object"==typeof a&&null!==a){var b=a.$$typeof;switch(b){case c:switch(a=a.type){case e:case g:case f:case k:case l:return a;default:switch(a=a&&a.$$typeof){case i:case j:case n:case m:case h:return a;default:return b}}case d:return b}}}(a)===i}},94075:function(a,c,b){"use strict";a.exports=b(40367)},7879:function(d,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a,e=(a=c(60822))&&a.__esModule?a:{default:a};b.default=function(){return e.default.createElement("svg",{width:"14",height:"11",viewBox:"0 0 14 11"},e.default.createElement("path",{d:"M11.264 0L5.26 6.004 2.103 2.847 0 4.95l5.26 5.26 8.108-8.107L11.264 0",fill:"#fff",fillRule:"evenodd"}))}},93897:function(j,f,b){"use strict";var k=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d},l=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=b(60822),e=o(d),m=o(b(94273)),a=o(b(69515)),g=o(b(7879)),h=b(64603),i=o(h),n=b(28418);function o(a){return a&&a.__esModule?a:{default:a}}var c=function(b){function a(c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a);var b=function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,c));return b.handleClick=b.handleClick.bind(b),b.handleTouchStart=b.handleTouchStart.bind(b),b.handleTouchMove=b.handleTouchMove.bind(b),b.handleTouchEnd=b.handleTouchEnd.bind(b),b.handleFocus=b.handleFocus.bind(b),b.handleBlur=b.handleBlur.bind(b),b.previouslyChecked=!!(c.checked||c.defaultChecked),b.state={checked:!!(c.checked||c.defaultChecked),hasFocus:!1},b}return!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}(a,b),l(a,[{key:"componentDidUpdate",value:function(a){a.checked!==this.props.checked&&this.setState({checked:!!this.props.checked})}},{key:"handleClick",value:function(b){if(!this.props.disabled){var a=this.input;if(b.target!==a&&!this.moved){this.previouslyChecked=a.checked,b.preventDefault(),a.focus(),a.click();return}var c=this.props.hasOwnProperty("checked")?this.props.checked:a.checked;this.setState({checked:c})}}},{key:"handleTouchStart",value:function(a){this.props.disabled||(this.startX=(0,n.pointerCoord)(a).x,this.activated=!0)}},{key:"handleTouchMove",value:function(b){if(this.activated&&(this.moved=!0,this.startX)){var a=(0,n.pointerCoord)(b).x;this.state.checked&&a+15<this.startX?(this.setState({checked:!1}),this.startX=a,this.activated=!0):a-15>this.startX&&(this.setState({checked:!0}),this.startX=a,this.activated=a<this.startX+5)}}},{key:"handleTouchEnd",value:function(a){if(this.moved){var b=this.input;if(a.preventDefault(),this.startX){var c=(0,n.pointerCoord)(a).x;!0===this.previouslyChecked&&this.startX+4>c?this.previouslyChecked!==this.state.checked&&(this.setState({checked:!1}),this.previouslyChecked=this.state.checked,b.click()):this.startX-4<c&&this.previouslyChecked!==this.state.checked&&(this.setState({checked:!0}),this.previouslyChecked=this.state.checked,b.click()),this.activated=!1,this.startX=null,this.moved=!1}}}},{key:"handleFocus",value:function(b){var a=this.props.onFocus;a&&a(b),this.setState({hasFocus:!0})}},{key:"handleBlur",value:function(b){var a=this.props.onBlur;a&&a(b),this.setState({hasFocus:!1})}},{key:"getIcon",value:function(b){var c=this.props.icons;return c?void 0===c[b]?a.defaultProps.icons[b]:c[b]:null}},{key:"render",value:function(){var f=this,a=this.props,b=a.className,c=(a.icons,function(b,d){var c={};for(var a in b)!(d.indexOf(a)>=0)&&Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a]);return c}(a,["className","icons"])),d=(0,m.default)("react-toggle",{"react-toggle--checked":this.state.checked,"react-toggle--focus":this.state.hasFocus,"react-toggle--disabled":this.props.disabled},b);return e.default.createElement("div",{className:d,onClick:this.handleClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd},e.default.createElement("div",{className:"react-toggle-track"},e.default.createElement("div",{className:"react-toggle-track-check"},this.getIcon("checked")),e.default.createElement("div",{className:"react-toggle-track-x"},this.getIcon("unchecked"))),e.default.createElement("div",{className:"react-toggle-thumb"}),e.default.createElement("input",k({},c,{ref:function(a){f.input=a},onFocus:this.handleFocus,onBlur:this.handleBlur,className:"react-toggle-screenreader-only",type:"checkbox"})))}}]),a}(d.PureComponent);f.Z=c,c.displayName="Toggle",c.defaultProps={icons:{checked:e.default.createElement(g.default,null),unchecked:e.default.createElement(i.default,null)}},c.propTypes={checked:a.default.bool,disabled:a.default.bool,defaultChecked:a.default.bool,onChange:a.default.func,onFocus:a.default.func,onBlur:a.default.func,className:a.default.string,name:a.default.string,value:a.default.string,id:a.default.string,"aria-labelledby":a.default.string,"aria-label":a.default.string,icons:a.default.oneOfType([a.default.bool,a.default.shape({checked:a.default.node,unchecked:a.default.node})])}},28418:function(b,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.pointerCoord=function(a){if(a){var b=a.changedTouches;if(b&&b.length>0){var c=b[0];return{x:c.clientX,y:c.clientY}}var d=a.pageX;if(void 0!==d)return{x:d,y:a.pageY}}return{x:0,y:0}}},64603:function(d,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a,e=(a=c(60822))&&a.__esModule?a:{default:a};b.default=function(){return e.default.createElement("svg",{width:"10",height:"10",viewBox:"0 0 10 10"},e.default.createElement("path",{d:"M9.9 2.12L7.78 0 4.95 2.828 2.12 0 0 2.12l2.83 2.83L0 7.776 2.123 9.9 4.95 7.07 7.78 9.9 9.9 7.776 7.072 4.95 9.9 2.12",fill:"#fff",fillRule:"evenodd"}))}},57510:function(ao,U,e){"use strict";e.d(U,{Z:function(){return b3}});var o,p,q,c,j,ap,a,k,C,V=e(60822),W=e(69515),aq=e.n(W),ar="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),as=new Uint8Array(16);function at(){if(!ar)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ar(as)}for(var X=[],l=0;l<256;++l)X[l]=(l+256).toString(16).substr(1);var au=function(a,d){var b=d||0,c=X;return[c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],"-",c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]],c[a[b++]]].join("")},av=function(a,c,e){var f=c&&e||0;"string"==typeof a&&(c="binary"===a?new Array(16):null,a=null);var b=(a=a||{}).random||(a.rng||at)();if(b[6]=15&b[6]|64,b[8]=63&b[8]|128,c)for(var d=0;d<16;++d)c[f+d]=b[d];return c||au(b)};function aw(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}function ax(a,b,c){return b&&aw(a.prototype,b),c&&aw(a,c),a}function r(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function ay(){return(ay=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}function az(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function aA(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?az(Object(b),!0).forEach(function(a){r(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):az(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}function aB(a){return(aB=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function aC(a,b){return(aC=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var aD={GLOBAL:{HIDE:"__react_tooltip_hide_event",REBUILD:"__react_tooltip_rebuild_event",SHOW:"__react_tooltip_show_event"}},aE=function(b,c){var a;"function"==typeof window.CustomEvent?a=new window.CustomEvent(b,{detail:c}):(a=document.createEvent("Event")).initEvent(b,!1,!0,c),window.dispatchEvent(a)},aF=function(b,a){var c=this.state.show,d=this.props.id,e=this.isCapture(a.currentTarget),f=a.currentTarget.getAttribute("currentItem");e||a.stopPropagation(),c&&"true"===f?b||this.hideTooltip(a):(a.currentTarget.setAttribute("currentItem","true"),aG(a.currentTarget,this.getTargetArray(d)),this.showTooltip(a))},aG=function(c,b){for(var a=0;a<b.length;a++)c!==b[a]?b[a].setAttribute("currentItem","false"):b[a].setAttribute("currentItem","true")},aH={id:"9b69f92e-d3fe-498b-b1b4-c5e63a51b0cf",set:function(a,b,c){this.id in a?a[this.id][b]=c:Object.defineProperty(a,this.id,{configurable:!0,value:r({},b,c)})},get:function(b,c){var a=b[this.id];if(void 0!==a)return a[c]}},aI=function(a){var c={};for(var b in a)"function"==typeof a[b]?c[b]=a[b].bind(a):c[b]=a[b];return c},aJ=function(i,c,a){var d=c.respectEffect,e=c.customEvent,f=this.props.id,j=a.target.getAttribute("data-tip")||null,g=a.target.getAttribute("data-for")||null,b=a.target;if((!this.isCustomEvent(b)|| void 0!==e&&e)&&null!=j&&(!(void 0!==d&&d)||"float"===this.getEffect(b))&&(null==f&&null==g||g===f)){var h=aI(a);h.currentTarget=b,i(h)}},aK=function(a,c){var b={};return a.forEach(function(d){var a=d.getAttribute(c);a&&a.split(" ").forEach(function(a){return b[a]=!0})}),b},aL=function(){return document.getElementsByTagName("body")[0]};function aM(r,g,h,a,b,i,s){for(var c,j=aN(h),t=j.width,u=j.height,k=aN(g),v=k.width,w=k.height,l=aO(r,g,i),C=l.mouseX,D=l.mouseY,E=aP(i,v,w,t,u),m=aQ(s),F=m.extraOffsetX,G=m.extraOffsetY,H=window.innerWidth,I=window.innerHeight,n=aR(h),x=n.parentTop,y=n.parentLeft,z=function(a){return C+E[a].l+F},A=function(a){return D+E[a].t+G},o=function(a){var d,e,f,g,b,c;return 0>z(a)||C+E[b=a].r+F>H||0>A(a)||D+E[c=a].b+G>I},p=function(a){return!o(a)},B=["top","bottom","left","right"],d=[],e=0;e<4;e++){var q=B[e];p(q)&&d.push(q)}var f=!1;return(p(b)&&b!==a?(f=!0,c=b):d.length>0&&o(b)&&o(a)&&(f=!0,c=d[0]),f)?{isNewState:!0,newState:{place:c}}:{isNewState:!1,position:{left:parseInt(z(a)-y,10),top:parseInt(A(a)-x,10)}}}var aN=function(b){var a=b.getBoundingClientRect(),c=a.height,d=a.width;return{height:parseInt(c,10),width:parseInt(d,10)}},aO=function(a,b,e){var c=b.getBoundingClientRect(),f=c.top,g=c.left,d=aN(b),h=d.width,i=d.height;return"float"===e?{mouseX:a.clientX,mouseY:a.clientY}:{mouseX:g+h/2,mouseY:f+i/2}},aP=function(i,c,d,a,b){var e,f,g,h;return"float"===i?(e={l:-(a/2),r:a/2,t:-(b+3+2),b:-3},g={l:-(a/2),r:a/2,t:15,b:b+3+2+12},h={l:-(a+3+2),r:-3,t:-(b/2),b:b/2},f={l:3,r:a+3+2,t:-(b/2),b:b/2}):"solid"===i&&(e={l:-(a/2),r:a/2,t:-(d/2+b+2),b:-(d/2)},g={l:-(a/2),r:a/2,t:d/2,b:d/2+b+2},h={l:-(a+c/2+2),r:-(c/2),t:-(b/2),b:b/2},f={l:c/2,r:a+c/2+2,t:-(b/2),b:b/2}),{top:e,bottom:g,left:h,right:f}},aQ=function(a){var c=0,d=0;for(var b in"[object String]"===Object.prototype.toString.apply(a)&&(a=JSON.parse(a.toString().replace(/'/g,'"'))),a)"top"===b?d-=parseInt(a[b],10):"bottom"===b?d+=parseInt(a[b],10):"left"===b?c-=parseInt(a[b],10):"right"===b&&(c+=parseInt(a[b],10));return{extraOffsetX:c,extraOffsetY:d}},aR=function(c){for(var a=c;a;){var b=window.getComputedStyle(a);if("none"!==b.getPropertyValue("transform")||"transform"===b.getPropertyValue("will-change"))break;a=a.parentElement}var d=a&&a.getBoundingClientRect().top||0,e=a&&a.getBoundingClientRect().left||0;return{parentTop:d,parentLeft:e}};function aS(a,c,b,d){if(c)return c;if(null!=b)return b;if(null===b)return null;var e=/<br\s*\/?>/;return d&&"false"!==d&&e.test(a)?a.split(e).map(function(a,b){return V.createElement("span",{key:b,className:"multi-line"},a)}):a}function aT(a){var b={};return Object.keys(a).filter(function(a){return/(^aria-\w+$|^role$)/.test(a)}).forEach(function(c){b[c]=a[c]}),b}function aU(a){var b=a.length;return a.hasOwnProperty?Array.prototype.slice.call(a):new Array(b).fill().map(function(b){return a[b]})}var aV={dark:{text:"#fff",background:"#222",border:"transparent",arrow:"#222"},success:{text:"#fff",background:"#8DC572",border:"transparent",arrow:"#8DC572"},warning:{text:"#fff",background:"#F0AD4E",border:"transparent",arrow:"#F0AD4E"},error:{text:"#fff",background:"#BE6464",border:"transparent",arrow:"#BE6464"},info:{text:"#fff",background:"#337AB7",border:"transparent",arrow:"#337AB7"},light:{text:"#222",background:"#fff",border:"transparent",arrow:"#fff"}},D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e.g?e.g:"undefined"!=typeof self?self:{};function E(b,a){return b(a={exports:{}},a.exports),a.exports}var m=function(a){return a&&a.Math==Math&&a},d=m("object"==typeof globalThis&&globalThis)||m("object"==typeof window&&window)||m("object"==typeof self&&self)||m("object"==typeof D&&D)||function(){return this}()||Function("return this")(),n=function(a){try{return!!a()}catch(b){return!0}},h=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),F={}.propertyIsEnumerable,Y=Object.getOwnPropertyDescriptor,aW={f:Y&&!F.call({1:2},1)?function(b){var a=Y(this,b);return!!a&&a.enumerable}:F},aX=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}},aY={}.toString,aZ=function(a){return aY.call(a).slice(8,-1)},a$="".split,a_=n(function(){return!Object("z").propertyIsEnumerable(0)})?function(a){return"String"==aZ(a)?a$.call(a,""):Object(a)}:Object,a0=function(a){if(void 0==a)throw TypeError("Can't call method on "+a);return a},a1=function(a){return a_(a0(a))},G=function(a){return"object"==typeof a?null!==a:"function"==typeof a},a2=function(a,d){var b,c;if(!G(a))return a;if(d&&"function"==typeof(b=a.toString)&&!G(c=b.call(a)))return c;if("function"==typeof(b=a.valueOf)&&!G(c=b.call(a)))return c;if(!d&&"function"==typeof(b=a.toString)&&!G(c=b.call(a)))return c;throw TypeError("Can't convert object to primitive value")},a3=function(a){return Object(a0(a))},a4={}.hasOwnProperty,a5=function(a,b){return a4.call(a3(a),b)},H=d.document,a6=G(H)&&G(H.createElement),a7=function(a){return a6?H.createElement(a):{}},a8=!h&&!n(function(){return 7!=Object.defineProperty(a7("div"),"a",{get:function(){return 7}}).a}),Z=Object.getOwnPropertyDescriptor,$={f:h?Z:function(a,b){if(a=a1(a),b=a2(b,!0),a8)try{return Z(a,b)}catch(c){}if(a5(a,b))return aX(!aW.f.call(a,b),a[b])}},a9=function(a){if(!G(a))throw TypeError(String(a)+" is not an object");return a},_=Object.defineProperty,aa={f:h?_:function(b,c,a){if(a9(b),c=a2(c,!0),a9(a),a8)try{return _(b,c,a)}catch(d){}if("get"in a||"set"in a)throw TypeError("Accessors not supported");return"value"in a&&(b[c]=a.value),b}},ba=h?function(a,b,c){return aa.f(a,b,aX(1,c))}:function(a,b,c){return a[b]=c,a},ab=function(b,a){try{ba(d,b,a)}catch(c){d[b]=a}return a},I="__core-js_shared__",f=d[I]||ab(I,{}),bb=Function.toString;"function"!=typeof f.inspectSource&&(f.inspectSource=function(a){return bb.call(a)});var ac=f.inspectSource,J=d.WeakMap,ad="function"==typeof J&&/native code/.test(ac(J)),K=E(function(a){(a.exports=function(a,b){return f[a]||(f[a]=void 0!==b?b:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})}),bc=0,bd=Math.random(),ae=function(a){return"Symbol("+String(void 0===a?"":a)+")_"+(++bc+bd).toString(36)},be=K("keys"),L=function(a){return be[a]||(be[a]=ae(a))},M={},bf="Object already initialized",af=d.WeakMap;if(ad||f.state){var s=f.state||(f.state=new af),bg=s.get,bh=s.has,bi=s.set;o=function(a,b){if(bh.call(s,a))throw new TypeError(bf);return b.facade=a,bi.call(s,a,b),b},p=function(a){return bg.call(s,a)||{}},q=function(a){return bh.call(s,a)}}else{var ag=L("state");M[ag]=!0,o=function(a,b){if(a5(a,ag))throw new TypeError(bf);return b.facade=a,ba(a,ag,b),b},p=function(a){return a5(a,ag)?a[ag]:{}},q=function(a){return a5(a,ag)}}var bj={set:o,get:p,has:q,enforce:function(a){return q(a)?p(a):o(a,{})},getterFor:function(a){return function(b){var c;if(!G(b)||(c=p(b)).type!==a)throw TypeError("Incompatible receiver, "+a+" required");return c}}},bk=E(function(a){var b=bj.get,c=bj.enforce,e=String(String).split("String");(a.exports=function(f,a,b,g){var i,j=!!g&&!!g.unsafe,h=!!g&&!!g.enumerable,k=!!g&&!!g.noTargetGet;if("function"!=typeof b||("string"!=typeof a||a5(b,"name")||ba(b,"name",a),(i=c(b)).source||(i.source=e.join("string"==typeof a?a:""))),f===d){h?f[a]=b:ab(a,b);return}j?!k&&f[a]&&(h=!0):delete f[a],h?f[a]=b:ba(f,a,b)})(Function.prototype,"toString",function(){return"function"==typeof this&&b(this).source||ac(this)})}),bl=d,bm=function(a){return"function"==typeof a?a:void 0},t=function(a,b){return arguments.length<2?bm(bl[a])||bm(d[a]):bl[a]&&bl[a][b]||d[a]&&d[a][b]},bn=Math.ceil,bo=Math.floor,bp=function(a){return isNaN(a=+a)?0:(a>0?bo:bn)(a)},bq=Math.min,br=function(a){return a>0?bq(bp(a),9007199254740991):0},bs=Math.max,bt=Math.min,bu=function(c,b){var a=bp(c);return a<0?bs(a+b,0):bt(a,b)},N=function(a){return function(g,d,h){var f,c=a1(g),e=br(c.length),b=bu(h,e);if(a&&d!=d){for(;e>b;)if((f=c[b++])!=f)return!0}else for(;e>b;b++)if((a||b in c)&&c[b]===d)return a||b||0;return!a&& -1}},bv={includes:N(!0),indexOf:N(!1)}.indexOf,bw=function(f,d){var a,c=a1(f),e=0,b=[];for(a in c)!a5(M,a)&&a5(c,a)&&b.push(a);for(;d.length>e;)a5(c,a=d[e++])&&(~bv(b,a)||b.push(a));return b},ah=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],bx=ah.concat("length","prototype"),by={f:Object.getOwnPropertyNames||function(a){return bw(a,bx)}},bz={f:Object.getOwnPropertySymbols},bA=t("Reflect","ownKeys")||function(a){var b=by.f(a9(a)),c=bz.f;return c?b.concat(c(a)):b},bB=function(c,d){for(var e=bA(d),f=aa.f,g=$.f,a=0;a<e.length;a++){var b=e[a];a5(c,b)||f(c,b,g(d,b))}},bC=/#|\.prototype\./,i=function(c,a){var b=bE[bD(c)];return b==bG||b!=bF&&("function"==typeof a?n(a):!!a)},bD=i.normalize=function(a){return String(a).replace(bC,".").toLowerCase()},bE=i.data={},bF=i.NATIVE="N",bG=i.POLYFILL="P",bH=i,bI=$.f,bJ=function(a){if("function"!=typeof a)throw TypeError(String(a)+" is not a function");return a},bK=function(a,b,c){if(bJ(a),void 0===b)return a;switch(c){case 0:return function(){return a.call(b)};case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}},bL=Array.isArray||function(a){return"Array"==aZ(a)},u=t("navigator","userAgent")||"",O=d.process,P=O&&O.versions,Q=P&&P.v8;Q?j=(c=Q.split("."))[0]<4?1:c[0]+c[1]:u&&(!(c=u.match(/Edge\/(\d+)/))||c[1]>=74)&&(c=u.match(/Chrome\/(\d+)/))&&(j=c[1]);var bM=j&&+j,ai=!!Object.getOwnPropertySymbols&&!n(function(){return!String(Symbol())|| !Symbol.sham&&bM&&bM<41}),aj=ai&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,bN=K("wks"),v=d.Symbol,bO=aj?v:v&&v.withoutSetter||ae,R=function(a){return a5(bN,a)&&(ai||"string"==typeof bN[a])||(ai&&a5(v,a)?bN[a]=v[a]:bN[a]=bO("Symbol."+a)),bN[a]},bP=R("species"),bQ=function(b,c){var a;return bL(b)&&("function"==typeof(a=b.constructor)&&(a===Array||bL(a.prototype))?a=void 0:G(a)&&null===(a=a[bP])&&(a=void 0)),new(void 0===a?Array:a)(0===c?0:c)},bR=[].push,b=function(a){var c=1==a,d=2==a,e=3==a,f=4==a,b=6==a,g=7==a,h=5==a||b;return function(l,r,s,t){for(var j,m,o=a3(l),n=a_(o),u=bK(r,s,3),p=br(n.length),i=0,q=t||bQ,k=c?q(l,p):d||g?q(l,0):void 0;p>i;i++)if((h||i in n)&&(m=u(j=n[i],i,o),a)){if(c)k[i]=m;else if(m)switch(a){case 3:return!0;case 5:return j;case 6:return i;case 2:bR.call(k,j)}else switch(a){case 4:return!1;case 7:bR.call(k,j)}}return b?-1:e||f?f:k}},ak={forEach:b(0),map:b(1),filter:b(2),some:b(3),every:b(4),find:b(5),findIndex:b(6),filterOut:b(7)},bS=Object.keys||function(a){return bw(a,ah)},bT=h?Object.defineProperties:function(a,b){a9(a);for(var c,d=bS(b),f=d.length,e=0;f>e;)aa.f(a,c=d[e++],b[c]);return a},bU=t("document","documentElement"),bV="prototype",bW="script",al=L("IE_PROTO"),bX=function(){},bY=function(a){return"<"+bW+">"+a+"</"+bW+">"},bZ=function(a){a.write(bY("")),a.close();var b=a.parentWindow.Object;return a=null,b},b$=function(){var a,b=a7("iframe");return b.style.display="none",bU.appendChild(b),b.src=String("java"+bW+":"),(a=b.contentWindow.document).open(),a.write(bY("document.F=Object")),a.close(),a.F},b_=function(){try{ap=document.domain&&new ActiveXObject("htmlfile")}catch(b){}b_=ap?bZ(ap):b$();for(var a=ah.length;a--;)delete b_[bV][ah[a]];return b_()};M[al]=!0;var am=Object.create||function(b,c){var a;return null!==b?(bX[bV]=a9(b),a=new bX,bX[bV]=null,a[al]=b):a=b_(),void 0===c?a:bT(a,c)},w=R("unscopables"),x=Array.prototype;void 0==x[w]&&aa.f(x,w,{configurable:!0,value:am(null)});var S,T,y,b0,b1,z,A,g,b2=ak.find,B="find",an=!0;B in[]&&Array(1)[B](function(){an=!1}),function(a,h){var i,f,b,c,e,j,g=a.target,k=a.global,l=a.stat;if(f=k?d:l?d[g]||ab(g,{}):(d[g]||{}).prototype)for(b in h){if(e=h[b],c=a.noTargetGet?(j=bI(f,b))&&j.value:f[b],i=bH(k?b:g+(l?".":"#")+b,a.forced),!i&& void 0!==c){if(typeof e==typeof c)continue;bB(e,c)}(a.sham||c&&c.sham)&&ba(e,"sham",!0),bk(f,b,e,a)}}({target:"Array",proto:!0,forced:an},{find:function(a){return b2(this,a,arguments.length>1?arguments[1]:void 0)}}),S=B,x[w][S]=!0;var b3=((g=a=((A=a=((z=a=((a=((a=((y=a=((T=a=(C=k=function(b){function a(b){var c,e,d;return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),(c=(e=this,(d=aB(a).call(this,b))&&("object"==typeof d||"function"==typeof d)?d:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(e))).state={uuid:b.uuid||"t"+av(),place:b.place||"top",desiredPlace:b.place||"top",type:"dark",effect:"float",show:!1,border:!1,customColors:{},offset:{},extraClass:"",html:!1,delayHide:0,delayShow:0,event:b.event||null,eventOff:b.eventOff||null,currentEvent:null,currentTarget:null,ariaProps:aT(b),isEmptyTip:!1,disable:!1,possibleCustomEvents:b.possibleCustomEvents||"",possibleCustomEventsOff:b.possibleCustomEventsOff||"",originTooltip:null,isMultiline:!1},c.bind(["showTooltip","updateTooltip","hideTooltip","hideTooltipOnScroll","getTooltipContent","globalRebuild","globalShow","globalHide","onWindowResize","mouseOnToolTip"]),c.mount=!0,c.delayShowLoop=null,c.delayHideLoop=null,c.delayReshow=null,c.intervalUpdateContent=null,c}return function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&aC(b,a)}(a,b),ax(a,null,[{key:"propTypes",get:function(){return{uuid:aq().string,children:aq().any,place:aq().string,type:aq().string,effect:aq().string,offset:aq().object,multiline:aq().bool,border:aq().bool,textColor:aq().string,backgroundColor:aq().string,borderColor:aq().string,arrowColor:aq().string,insecure:aq().bool,"class":aq().string,className:aq().string,id:aq().string,html:aq().bool,delayHide:aq().number,delayUpdate:aq().number,delayShow:aq().number,event:aq().string,eventOff:aq().string,isCapture:aq().bool,globalEventOff:aq().string,getContent:aq().any,afterShow:aq().func,afterHide:aq().func,overridePosition:aq().func,disable:aq().bool,scrollHide:aq().bool,resizeHide:aq().bool,wrapper:aq().string,bodyMode:aq().bool,possibleCustomEvents:aq().string,possibleCustomEventsOff:aq().string,clickable:aq().bool}}}]),ax(a,[{key:"bind",value:function(a){var b=this;a.forEach(function(a){b[a]=b[a].bind(b)})}},{key:"componentDidMount",value:function(){var a=this.props,b=(a.insecure,a.resizeHide);this.bindListener(),this.bindWindowEvents(b),this.injectStyles()}},{key:"componentWillUnmount",value:function(){this.mount=!1,this.clearTimer(),this.unbindListener(),this.removeScrollListener(this.state.currentTarget),this.unbindWindowEvents()}},{key:"injectStyles",value:function(){var b,d=this.tooltipRef;if(d){for(var a=d.parentNode;a.parentNode;)a=a.parentNode;switch(a.constructor.name){case"Document":case"HTMLDocument":case void 0:b=a.head;break;default:b=a}if(!b.querySelector("style[data-react-tooltip]")){var c=document.createElement("style");c.textContent='.__react_component_tooltip {\n  border-radius: 3px;\n  display: inline-block;\n  font-size: 13px;\n  left: -999em;\n  opacity: 0;\n  padding: 8px 21px;\n  position: fixed;\n  pointer-events: none;\n  transition: opacity 0.3s ease-out;\n  top: -999em;\n  visibility: hidden;\n  z-index: 999;\n}\n.__react_component_tooltip.allow_hover, .__react_component_tooltip.allow_click {\n  pointer-events: auto;\n}\n.__react_component_tooltip::before, .__react_component_tooltip::after {\n  content: "";\n  width: 0;\n  height: 0;\n  position: absolute;\n}\n.__react_component_tooltip.show {\n  opacity: 0.9;\n  margin-top: 0;\n  margin-left: 0;\n  visibility: visible;\n}\n.__react_component_tooltip.place-top::before {\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  bottom: -8px;\n  left: 50%;\n  margin-left: -10px;\n}\n.__react_component_tooltip.place-bottom::before {\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  top: -8px;\n  left: 50%;\n  margin-left: -10px;\n}\n.__react_component_tooltip.place-left::before {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  right: -8px;\n  top: 50%;\n  margin-top: -5px;\n}\n.__react_component_tooltip.place-right::before {\n  border-top: 6px solid transparent;\n  border-bottom: 6px solid transparent;\n  left: -8px;\n  top: 50%;\n  margin-top: -5px;\n}\n.__react_component_tooltip .multi-line {\n  display: block;\n  padding: 2px 0;\n  text-align: center;\n}',c.setAttribute("data-react-tooltip","true"),b.appendChild(c)}}}},{key:"mouseOnToolTip",value:function(){return!!this.state.show&&!!this.tooltipRef&&(this.tooltipRef.matches||(this.tooltipRef.msMatchesSelector?this.tooltipRef.matches=this.tooltipRef.msMatchesSelector:this.tooltipRef.matches=this.tooltipRef.mozMatchesSelector),this.tooltipRef.matches(":hover"))}},{key:"getTargetArray",value:function(b){var a,c=[];if(b){var d=b.replace(/\\/g,"\\\\").replace(/"/g,'\\"');a='[data-tip][data-for="'.concat(d,'"]')}else a="[data-tip]:not([data-for])";return aU(document.getElementsByTagName("*")).filter(function(a){return a.shadowRoot}).forEach(function(b){c=c.concat(aU(b.shadowRoot.querySelectorAll(a)))}),c.concat(aU(document.querySelectorAll(a)))}},{key:"bindListener",value:function(){var f=this,a=this.props,d=a.id,b=a.globalEventOff,e=a.isCapture,c=this.getTargetArray(d);c.forEach(function(a){null===a.getAttribute("currentItem")&&a.setAttribute("currentItem","false"),f.unbindBasicListener(a),f.isCustomEvent(a)&&f.customUnbindListener(a)}),this.isBodyMode()?this.bindBodyListener(c):c.forEach(function(a){var b=f.isCapture(a),c=f.getEffect(a);if(f.isCustomEvent(a)){f.customBindListener(a);return}a.addEventListener("mouseenter",f.showTooltip,b),a.addEventListener("focus",f.showTooltip,b),"float"===c&&a.addEventListener("mousemove",f.updateTooltip,b),a.addEventListener("mouseleave",f.hideTooltip,b),a.addEventListener("blur",f.hideTooltip,b)}),b&&(window.removeEventListener(b,this.hideTooltip),window.addEventListener(b,this.hideTooltip,e)),this.bindRemovalTracker()}},{key:"unbindListener",value:function(){var d=this,a=this.props,c=a.id,b=a.globalEventOff;this.isBodyMode()?this.unbindBodyListener():this.getTargetArray(c).forEach(function(a){d.unbindBasicListener(a),d.isCustomEvent(a)&&d.customUnbindListener(a)}),b&&window.removeEventListener(b,this.hideTooltip),this.unbindRemovalTracker()}},{key:"unbindBasicListener",value:function(a){var b=this.isCapture(a);a.removeEventListener("mouseenter",this.showTooltip,b),a.removeEventListener("mousemove",this.updateTooltip,b),a.removeEventListener("mouseleave",this.hideTooltip,b)}},{key:"getTooltipContent",value:function(){var b,c=this.props,a=c.getContent,d=c.children;return a&&(b=Array.isArray(a)?a[0]&&a[0](this.state.originTooltip):a(this.state.originTooltip)),aS(this.state.originTooltip,d,b,this.state.isMultiline)}},{key:"isEmptyTip",value:function(a){return"string"==typeof a&&""===a||null===a}},{key:"showTooltip",value:function(a,d){if(this.tooltipRef&&(!d||this.getTargetArray(this.props.id).some(function(b){return b===a.currentTarget}))){var e=this.props,k=e.multiline,n=e.getContent,o=a.currentTarget.getAttribute("data-tip"),p=a.currentTarget.getAttribute("data-multiline")||k||!1,l=a instanceof window.FocusEvent||d,f=!0;a.currentTarget.getAttribute("data-scroll-hide")?f="true"===a.currentTarget.getAttribute("data-scroll-hide"):null!=this.props.scrollHide&&(f=this.props.scrollHide),a&&a.currentTarget&&a.currentTarget.setAttribute&&a.currentTarget.setAttribute("aria-describedby",this.state.uuid);var b=a.currentTarget.getAttribute("data-place")||this.props.place||"top",g=l&&"solid"||this.getEffect(a.currentTarget),h=a.currentTarget.getAttribute("data-offset")||this.props.offset||{},c=aM(a,a.currentTarget,this.tooltipRef,b,b,g,h);c.position&&this.props.overridePosition&&(c.position=this.props.overridePosition(c.position,a,a.currentTarget,this.tooltipRef,b,b,g,h));var q=c.isNewState?c.newState.place:b;this.clearTimer();var m=a.currentTarget,i=this.state.show?m.getAttribute("data-delay-update")||this.props.delayUpdate:0,r=this,j=function(){r.setState({originTooltip:o,isMultiline:p,desiredPlace:b,place:q,type:m.getAttribute("data-type")||r.props.type||"dark",customColors:{text:m.getAttribute("data-text-color")||r.props.textColor||null,background:m.getAttribute("data-background-color")||r.props.backgroundColor||null,border:m.getAttribute("data-border-color")||r.props.borderColor||null,arrow:m.getAttribute("data-arrow-color")||r.props.arrowColor||null},effect:g,offset:h,html:(m.getAttribute("data-html")?"true"===m.getAttribute("data-html"):r.props.html)||!1,delayShow:m.getAttribute("data-delay-show")||r.props.delayShow||0,delayHide:m.getAttribute("data-delay-hide")||r.props.delayHide||0,delayUpdate:m.getAttribute("data-delay-update")||r.props.delayUpdate||0,border:(m.getAttribute("data-border")?"true"===m.getAttribute("data-border"):r.props.border)||!1,extraClass:m.getAttribute("data-class")||r.props.class||r.props.className||"",disable:(m.getAttribute("data-tip-disable")?"true"===m.getAttribute("data-tip-disable"):r.props.disable)||!1,currentTarget:m},function(){f&&r.addScrollListener(r.state.currentTarget),r.updateTooltip(a),n&&Array.isArray(n)&&(r.intervalUpdateContent=setInterval(function(){if(r.mount){var a=aS(o,"",r.props.getContent[0](),p),b=r.isEmptyTip(a);r.setState({isEmptyTip:b}),r.updatePosition()}},n[1]))})};i?this.delayReshow=setTimeout(j,i):j()}}},{key:"updateTooltip",value:function(a){var h=this,b=this.state,e=b.delayShow,f=b.disable,i=this.props.afterShow,g=this.getTooltipContent(),j=a.currentTarget||a.target;if(!this.mouseOnToolTip()&& !this.isEmptyTip(g)&&!f){var c=this.state.show?0:parseInt(e,10),d=function(){if(Array.isArray(g)&&g.length>0||g){var b=!h.state.show;h.setState({currentEvent:a,currentTarget:j,show:!0},function(){h.updatePosition(),b&&i&&i(a)})}};clearTimeout(this.delayShowLoop),c?this.delayShowLoop=setTimeout(d,c):d()}}},{key:"listenForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.addEventListener("mouseleave",this.hideTooltip)}},{key:"removeListenerForTooltipExit",value:function(){this.state.show&&this.tooltipRef&&this.tooltipRef.removeEventListener("mouseleave",this.hideTooltip)}},{key:"hideTooltip",value:function(a,d){var h=this,e=arguments.length>2&& void 0!==arguments[2]?arguments[2]:{isScroll:!1},f=this.state.disable,b=e.isScroll?0:this.state.delayHide,i=this.props.afterHide,g=this.getTooltipContent();if(this.mount&& !this.isEmptyTip(g)&&!f){if(d&&(!this.getTargetArray(this.props.id).some(function(b){return b===a.currentTarget})||!this.state.show))return;a&&a.currentTarget&&a.currentTarget.removeAttribute&&a.currentTarget.removeAttribute("aria-describedby");var c=function(){var b=h.state.show;if(h.mouseOnToolTip()){h.listenForTooltipExit();return}h.removeListenerForTooltipExit(),h.setState({show:!1},function(){h.removeScrollListener(h.state.currentTarget),b&&i&&i(a)})};this.clearTimer(),b?this.delayHideLoop=setTimeout(c,parseInt(b,10)):c()}}},{key:"hideTooltipOnScroll",value:function(a,b){this.hideTooltip(a,b,{isScroll:!0})}},{key:"addScrollListener",value:function(a){var b=this.isCapture(a);window.addEventListener("scroll",this.hideTooltipOnScroll,b)}},{key:"removeScrollListener",value:function(a){var b=this.isCapture(a);window.removeEventListener("scroll",this.hideTooltipOnScroll,b)}},{key:"updatePosition",value:function(){var j=this,b=this.state,d=b.currentEvent,e=b.currentTarget,f=b.place,g=b.desiredPlace,h=b.effect,i=b.offset,c=this.tooltipRef,a=aM(d,e,c,f,g,h,i);if(a.position&&this.props.overridePosition&&(a.position=this.props.overridePosition(a.position,d,e,c,f,g,h,i)),a.isNewState)return this.setState(a.newState,function(){j.updatePosition()});c.style.left=a.position.left+"px",c.style.top=a.position.top+"px"}},{key:"clearTimer",value:function(){clearTimeout(this.delayShowLoop),clearTimeout(this.delayHideLoop),clearTimeout(this.delayReshow),clearInterval(this.intervalUpdateContent)}},{key:"hasCustomColors",value:function(){var a=this;return Boolean(Object.keys(this.state.customColors).find(function(b){return"border"!==b&&a.state.customColors[b]})||this.state.border&&this.state.customColors.border)}},{key:"render",value:function(){var c,j,p,q,k,l,m,n,d,b,h,r,s,e,f,t,u,v,w,H=this,g=this.state,B=g.extraClass,C=g.html,x=g.ariaProps,D=g.disable,y=g.uuid,o=this.getTooltipContent(),E=this.isEmptyTip(o),z=(t=this.state.uuid,u=this.state.customColors,v=this.state.type,w=this.state.border,b=t,r=(h=(c=u,j=v,p=w,k=c.text,l=c.background,m=c.border,n=c.arrow?c.arrow:c.background,d=aV[q=j]?aA({},aV[q]):void 0,k&&(d.text=k),l&&(d.background=l),p&&(m?d.border=m:d.border="light"===j?"black":"white"),n&&(d.arrow=n),d)).text,s=h.background,e=h.border,f=h.arrow,"\n  	.".concat(b," {\n	    color: ").concat(r,";\n	    background: ").concat(s,";\n	    border: 1px solid ").concat(e,";\n  	}\n\n  	.").concat(b,".place-top {\n        margin-top: -10px;\n    }\n    .").concat(b,".place-top::before {\n        border-top: 8px solid ").concat(e,";\n    }\n    .").concat(b,".place-top::after {\n        border-left: 8px solid transparent;\n        border-right: 8px solid transparent;\n        bottom: -6px;\n        left: 50%;\n        margin-left: -8px;\n        border-top-color: ").concat(f,";\n        border-top-style: solid;\n        border-top-width: 6px;\n    }\n\n    .").concat(b,".place-bottom {\n        margin-top: 10px;\n    }\n    .").concat(b,".place-bottom::before {\n        border-bottom: 8px solid ").concat(e,";\n    }\n    .").concat(b,".place-bottom::after {\n        border-left: 8px solid transparent;\n        border-right: 8px solid transparent;\n        top: -6px;\n        left: 50%;\n        margin-left: -8px;\n        border-bottom-color: ").concat(f,";\n        border-bottom-style: solid;\n        border-bottom-width: 6px;\n    }\n\n    .").concat(b,".place-left {\n        margin-left: -10px;\n    }\n    .").concat(b,".place-left::before {\n        border-left: 8px solid ").concat(e,";\n    }\n    .").concat(b,".place-left::after {\n        border-top: 5px solid transparent;\n        border-bottom: 5px solid transparent;\n        right: -6px;\n        top: 50%;\n        margin-top: -4px;\n        border-left-color: ").concat(f,";\n        border-left-style: solid;\n        border-left-width: 6px;\n    }\n\n    .").concat(b,".place-right {\n        margin-left: 10px;\n    }\n    .").concat(b,".place-right::before {\n        border-right: 8px solid ").concat(e,";\n    }\n    .").concat(b,".place-right::after {\n        border-top: 5px solid transparent;\n        border-bottom: 5px solid transparent;\n        left: -6px;\n        top: 50%;\n        margin-top: -4px;\n        border-right-color: ").concat(f,";\n        border-right-style: solid;\n        border-right-width: 6px;\n    }\n  ")),F="__react_component_tooltip"+" ".concat(this.state.uuid)+(!this.state.show||D||E?"":" show")+(this.state.border?" border":"")+" place-".concat(this.state.place)+" type-".concat(this.hasCustomColors()?"custom":this.state.type)+(this.props.delayUpdate?" allow_hover":"")+(this.props.clickable?" allow_click":""),i=this.props.wrapper;0>a.supportedWrappers.indexOf(i)&&(i=a.defaultProps.wrapper);var A=[F,B].filter(Boolean).join(" ");if(!C)return V.createElement(i,ay({className:"".concat(A),id:this.props.id||y},x,{ref:function(a){return H.tooltipRef=a},"data-id":"tooltip"}),V.createElement("style",{dangerouslySetInnerHTML:{__html:z},"aria-hidden":"true"}),o);var G="".concat(o,'\n<style aria-hidden="true">').concat(z,"</style>");return V.createElement(i,ay({className:"".concat(A),id:this.props.id||y,ref:function(a){return H.tooltipRef=a}},x,{"data-id":"tooltip",dangerouslySetInnerHTML:{__html:G}}))}}],[{key:"getDerivedStateFromProps",value:function(c,a){var d=a.ariaProps,b=aT(c);return Object.keys(b).some(function(a){return b[a]!==d[a]})?aA({},a,{ariaProps:b}):null}}]),a}(V.Component),r(k,"defaultProps",{insecure:!0,resizeHide:!0,wrapper:"div",clickable:!1}),r(k,"supportedWrappers",["div","span"]),r(k,"displayName","ReactTooltip"),C)).prototype.bindRemovalTracker=function(){var c=this,a=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;if(null!=a){var b=new a(function(d){for(var a=0;a<d.length;a++)for(var e=d[a],b=0;b<e.removedNodes.length;b++)if(e.removedNodes[b]===c.state.currentTarget){c.hideTooltip();return}});b.observe(window.document,{childList:!0,subtree:!0}),this.removalTracker=b}},T.prototype.unbindRemovalTracker=function(){this.removalTracker&&(this.removalTracker.disconnect(),this.removalTracker=null)},a)).prototype.isBodyMode=function(){return!!this.props.bodyMode},y.prototype.bindBodyListener=function(d){var n=this,b=this.state,c=b.event,e=b.eventOff,j=b.possibleCustomEvents,k=b.possibleCustomEventsOff,f=aL(),g=aK(d,"data-event"),h=aK(d,"data-event-off");null!=c&&(g[c]=!0),null!=e&&(h[e]=!0),j.split(" ").forEach(function(a){return g[a]=!0}),k.split(" ").forEach(function(a){return h[a]=!0}),this.unbindBodyListener(f);var a=this.bodyModeListeners={};for(var l in null==c&&(a.mouseover=aJ.bind(this,this.showTooltip,{}),a.mousemove=aJ.bind(this,this.updateTooltip,{respectEffect:!0}),a.mouseout=aJ.bind(this,this.hideTooltip,{})),g)a[l]=aJ.bind(this,function(a){var b=a.currentTarget.getAttribute("data-event-off")||e;aF.call(n,b,a)},{customEvent:!0});for(var m in h)a[m]=aJ.bind(this,this.hideTooltip,{customEvent:!0});for(var i in a)f.addEventListener(i,a[i])},y.prototype.unbindBodyListener=function(a){a=a||aL();var b=this.bodyModeListeners;for(var c in b)a.removeEventListener(c,b[c])},a)).prototype.getEffect=function(a){return a.getAttribute("data-effect")||this.props.effect||"float"},a)).prototype.isCapture=function(a){return a&&"true"===a.getAttribute("data-iscapture")||this.props.isCapture||!1},a)).prototype.isCustomEvent=function(a){return this.state.event||!!a.getAttribute("data-event")},z.prototype.customBindListener=function(a){var g=this,b=this.state,d=b.event,e=b.eventOff,f=a.getAttribute("data-event")||d,c=a.getAttribute("data-event-off")||e;f.split(" ").forEach(function(b){a.removeEventListener(b,aH.get(a,b));var d=aF.bind(g,c);aH.set(a,b,d),a.addEventListener(b,d,!1)}),c&&c.split(" ").forEach(function(b){a.removeEventListener(b,g.hideTooltip),a.addEventListener(b,g.hideTooltip,!1)})},z.prototype.customUnbindListener=function(a){var b=this.state,c=b.event,e=b.eventOff,f=c||a.getAttribute("data-event"),d=e||a.getAttribute("data-event-off");a.removeEventListener(f,aH.get(a,c)),d&&a.removeEventListener(d,this.hideTooltip)},a)).prototype.bindWindowEvents=function(a){window.removeEventListener(aD.GLOBAL.HIDE,this.globalHide),window.addEventListener(aD.GLOBAL.HIDE,this.globalHide,!1),window.removeEventListener(aD.GLOBAL.REBUILD,this.globalRebuild),window.addEventListener(aD.GLOBAL.REBUILD,this.globalRebuild,!1),window.removeEventListener(aD.GLOBAL.SHOW,this.globalShow),window.addEventListener(aD.GLOBAL.SHOW,this.globalShow,!1),a&&(window.removeEventListener("resize",this.onWindowResize),window.addEventListener("resize",this.onWindowResize,!1))},A.prototype.unbindWindowEvents=function(){window.removeEventListener(aD.GLOBAL.HIDE,this.globalHide),window.removeEventListener(aD.GLOBAL.REBUILD,this.globalRebuild),window.removeEventListener(aD.GLOBAL.SHOW,this.globalShow),window.removeEventListener("resize",this.onWindowResize)},A.prototype.onWindowResize=function(){this.mount&&this.hideTooltip()},a)).hide=function(a){aE(aD.GLOBAL.HIDE,{target:a})},g.rebuild=function(){aE(aD.GLOBAL.REBUILD)},g.show=function(a){aE(aD.GLOBAL.SHOW,{target:a})},g.prototype.globalRebuild=function(){this.mount&&(this.unbindListener(),this.bindListener())},g.prototype.globalShow=function(a){if(this.mount){var b=a&&a.detail&&a.detail.target&&!0||!1;this.showTooltip({currentTarget:b&&a.detail.target},!0)}},g.prototype.globalHide=function(a){if(this.mount){var b=a&&a.detail&&a.detail.target&&!0||!1;this.hideTooltip({currentTarget:b&&a.detail.target},b)}},a)},62905:function(k,f,b){"use strict";var g=b(60822),l=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},m=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d},o=function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)},p=function(b,a){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&("object"==typeof a||"function"==typeof a)?a:b},q=function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function(h,d){var a=[],b=!0,e=!1,f=void 0;try{for(var g,c=h[Symbol.iterator]();!(b=(g=c.next()).done)&&(a.push(g.value),!d||a.length!==d);b=!0);}catch(i){e=!0,f=i}finally{try{!b&&c.return&&c.return()}finally{if(e)throw f}}return a}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=void 0;a="undefined"!=typeof window?window:"undefined"!=typeof self?self:b.g;var c=null,d=null,h=a.clearTimeout,r=a.setTimeout,i=a.cancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelAnimationFrame,j=a.requestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame;null==i||null==j?(c=h,d=function(a){return r(a,20)}):(c=function(b){var a=q(b,2),c=a[0],d=a[1];i(c),h(d)},d=function(c){var a=j(function(){h(b),c()}),b=r(function(){i(a),c()},20);return[a,b]});var e=function(e){function b(){l(this,b);for(var d,e,a,f,g=arguments.length,h=Array(g),c=0;c<g;c++)h[c]=arguments[c];return f=(e=a=p(this,(d=b.__proto__||Object.getPrototypeOf(b)).call.apply(d,[this].concat(h))),a.state={height:a.props.defaultHeight||0,width:a.props.defaultWidth||0},a._onResize=function(){var c=a.props,j=c.disableHeight,k=c.disableWidth,l=c.onResize;if(a._parentNode){var d=a._parentNode.offsetHeight||0,e=a._parentNode.offsetWidth||0,b=window.getComputedStyle(a._parentNode)||{},f=parseInt(b.paddingLeft,10)||0,g=parseInt(b.paddingRight,10)||0,h=parseInt(b.paddingTop,10)||0,i=parseInt(b.paddingBottom,10)||0,m=d-h-i,n=e-f-g;(j||a.state.height===m)&&(k||a.state.width===n)||(a.setState({height:d-h-i,width:e-f-g}),l({height:d,width:e}))}},a._setRef=function(b){a._autoSizer=b},e),p(a,f)}return o(b,e),m(b,[{key:"componentDidMount",value:function(){var b=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=function(r){var k=void 0,h=void 0,i=void 0,l=void 0,m=void 0,n=void 0,o=void 0,p="undefined"!=typeof document&&document.attachEvent;if(!p){n=function(e){var c=e.__resizeTriggers__,a=c.firstElementChild,b=c.lastElementChild,d=a.firstElementChild;b.scrollLeft=b.scrollWidth,b.scrollTop=b.scrollHeight,d.style.width=a.offsetWidth+1+"px",d.style.height=a.offsetHeight+1+"px",a.scrollLeft=a.scrollWidth,a.scrollTop=a.scrollHeight},m=function(a){return a.offsetWidth!==a.__resizeLast__.width||a.offsetHeight!==a.__resizeLast__.height},o=function(a){if(!(a.target.className&&"function"==typeof a.target.className.indexOf&&0>a.target.className.indexOf("contract-trigger")&&0>a.target.className.indexOf("expand-trigger"))){var b=this;n(this),this.__resizeRAF__&&c(this.__resizeRAF__),this.__resizeRAF__=d(function(){m(b)&&(b.__resizeLast__.width=b.offsetWidth,b.__resizeLast__.height=b.offsetHeight,b.__resizeListeners__.forEach(function(c){c.call(b,a)}))})}};var e=!1,f="";i="animationstart";var g="Webkit Moz O ms".split(" "),q="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),j=document.createElement("fakeelement");if(void 0!==j.style.animationName&&(e=!0),!1===e){for(var b=0;b<g.length;b++)if(void 0!==j.style[g[b]+"AnimationName"]){f="-"+(0,g[b]).toLowerCase()+"-",i=q[b],e=!0;break}}k="@"+f+"keyframes "+(h="resizeanim")+" { from { opacity: 0; } to { opacity: 0; } } ",l=f+"animation: 1ms "+h+"; "}var s=function(b){if(!b.getElementById("detectElementResize")){var c=(k||"")+".resize-triggers { "+(l||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',d=b.head||b.getElementsByTagName("head")[0],a=b.createElement("style");a.id="detectElementResize",a.type="text/css",null!=r&&a.setAttribute("nonce",r),a.styleSheet?a.styleSheet.cssText=c:a.appendChild(b.createTextNode(c)),d.appendChild(a)}};return{addResizeListener:function(b,e){if(p)b.attachEvent("onresize",e);else{if(!b.__resizeTriggers__){var c=b.ownerDocument,f=a.getComputedStyle(b);f&&"static"===f.position&&(b.style.position="relative"),s(c),b.__resizeLast__={},b.__resizeListeners__=[],(b.__resizeTriggers__=c.createElement("div")).className="resize-triggers";var d=c.createElement("div");d.className="expand-trigger",d.appendChild(c.createElement("div"));var g=c.createElement("div");g.className="contract-trigger",b.__resizeTriggers__.appendChild(d),b.__resizeTriggers__.appendChild(g),b.appendChild(b.__resizeTriggers__),n(b),b.addEventListener("scroll",o,!0),i&&(b.__resizeTriggers__.__animationListener__=function(a){a.animationName===h&&n(b)},b.__resizeTriggers__.addEventListener(i,b.__resizeTriggers__.__animationListener__))}b.__resizeListeners__.push(e)}},removeResizeListener:function(a,b){if(p)a.detachEvent("onresize",b);else if(a.__resizeListeners__.splice(a.__resizeListeners__.indexOf(b),1),!a.__resizeListeners__.length){a.removeEventListener("scroll",o,!0),a.__resizeTriggers__.__animationListener__&&(a.__resizeTriggers__.removeEventListener(i,a.__resizeTriggers__.__animationListener__),a.__resizeTriggers__.__animationListener__=null);try{a.__resizeTriggers__=!a.removeChild(a.__resizeTriggers__)}catch(c){}}}}}(b),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var a=this.props,i=a.children,j=a.className,k=a.disableHeight,l=a.disableWidth,m=a.style,e=this.state,f=e.height,h=e.width,b={overflow:"visible"},c={},d=!1;return k||(0===f&&(d=!0),b.height=0,c.height=f),l||(0===h&&(d=!0),b.width=0,c.width=h),(0,g.createElement)("div",{className:j,ref:this._setRef,style:n({},b,m)},!d&&i(c))}}]),b}(g.PureComponent);e.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},f.Z=e},85583:function(i,d,b){"use strict";var j=b(9652),k=b(22238),l=b(60822),e=b(69515),a=b.n(e),f=b(94273),m=b.n(f),g=b(75360),n=["className","cssModule","color","innerRef","pill","tag"],h={color:a().string,pill:a().bool,tag:g.iC,innerRef:a().oneOfType([a().object,a().func,a().string]),children:a().node,className:a().string,cssModule:a().object},c=function(a){var d=a.className,e=a.cssModule,f=a.color,h=a.innerRef,i=a.pill,b=a.tag,c=(0,k.Z)(a,n),o=(0,g.mx)(m()(d,"badge","badge-"+f,!!i&&"badge-pill"),e);return c.href&&"span"===b&&(b="a"),l.createElement(b,(0,j.Z)({},c,{className:o,ref:h}))};c.propTypes=h,c.defaultProps={color:"secondary",pill:!1,tag:"span"},d.Z=c},15605:function(k,f,b){"use strict";var l=b(9652),m=b(22238),n=b(60822),g=b(69515),a=b.n(g),h=b(94273),o=b.n(h),i=b(75360),p=["className","cssModule","hidden","widths","tag","check","size","for"],d=a().oneOfType([a().number,a().string]),c=a().oneOfType([a().bool,a().string,a().number,a().shape({size:d,order:d,offset:d})]),j={children:a().node,hidden:a().bool,check:a().bool,size:a().string,for:a().string,tag:i.iC,className:a().string,cssModule:a().object,xs:c,sm:c,md:c,lg:c,xl:c,widths:a().array},q=function(b,c,a){return!0===a||""===a?b?"col":"col-"+c:"auto"===a?b?"col-auto":"col-"+c+"-auto":b?"col-"+a:"col-"+c+"-"+a},e=function(a){var d=a.className,e=a.cssModule,f=a.hidden,g=a.widths,h=a.tag,j=a.check,b=a.size,k=a.for,r=(0,m.Z)(a,p),c=[];g.forEach(function(d,k){var b=a[d];if(delete r[d],b||""===b){var h=!k;if((0,i.Kn)(b)){var f,g,j=h?"-":"-"+d+"-";f=q(h,d,b.size),c.push((0,i.mx)(o()(((g={})[f]=b.size||""===b.size,g["order"+j+b.order]=b.order||0===b.order,g["offset"+j+b.offset]=b.offset||0===b.offset,g))),e)}else f=q(h,d,b),c.push(f)}});var s=(0,i.mx)(o()(d,!!f&&"sr-only",!!j&&"form-check-label",!!b&&"col-form-label-"+b,c,!!c.length&&"col-form-label"),e);return n.createElement(h,(0,l.Z)({htmlFor:k},r,{className:s}))};e.propTypes=j,e.defaultProps={tag:"label",widths:["xs","sm","md","lg","xl"]},f.Z=e},95755:function(d,c){"use strict";function a(a){return function(b){var c=b.dispatch,d=b.getState;return function(b){return function(e){return"function"==typeof e?e(c,d,a):b(e)}}}}var b=a();b.withExtraArgument=a,c.Z=b},13420:function(d,c,a){"use strict";a.d(c,{md:function(){return m},UY:function(){return k},MT:function(){return j}});var e=a(2753);function f(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function g(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?f(Object(b),!0).forEach(function(a){(0,e.Z)(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):f(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}var h="function"==typeof Symbol&&Symbol.observable||"@@observable",b=function(){return Math.random().toString(36).substring(7).split("").join(".")},i={INIT:"@@redux/INIT"+b(),REPLACE:"@@redux/REPLACE"+b(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+b()}};function j(c,b,a){if("function"==typeof b&&"function"==typeof a||"function"==typeof a&&"function"==typeof arguments[3])throw new Error("Minified Redux error #0; visit https://redux.js.org/Errors?code=0 for the full message or use the non-minified dev environment for full errors. ");if("function"==typeof b&& void 0===a&&(a=b,b=void 0),void 0!==a){if("function"!=typeof a)throw new Error("Minified Redux error #1; visit https://redux.js.org/Errors?code=1 for the full message or use the non-minified dev environment for full errors. ");return a(j)(c,b)}if("function"!=typeof c)throw new Error("Minified Redux error #2; visit https://redux.js.org/Errors?code=2 for the full message or use the non-minified dev environment for full errors. ");var d,l=c,m=b,f=[],n=f,o=!1;function p(){n===f&&(n=f.slice())}function g(){if(o)throw new Error("Minified Redux error #3; visit https://redux.js.org/Errors?code=3 for the full message or use the non-minified dev environment for full errors. ");return m}function k(a){if("function"!=typeof a)throw new Error("Minified Redux error #4; visit https://redux.js.org/Errors?code=4 for the full message or use the non-minified dev environment for full errors. ");if(o)throw new Error("Minified Redux error #5; visit https://redux.js.org/Errors?code=5 for the full message or use the non-minified dev environment for full errors. ");var b=!0;return p(),n.push(a),function(){if(b){if(o)throw new Error("Minified Redux error #6; visit https://redux.js.org/Errors?code=6 for the full message or use the non-minified dev environment for full errors. ");b=!1,p();var c=n.indexOf(a);n.splice(c,1),f=null}}}function e(a){if(!function(a){if("object"!=typeof a||null===a)return!1;for(var b=a;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}(a))throw new Error("Minified Redux error #7; visit https://redux.js.org/Errors?code=7 for the full message or use the non-minified dev environment for full errors. ");if(void 0===a.type)throw new Error("Minified Redux error #8; visit https://redux.js.org/Errors?code=8 for the full message or use the non-minified dev environment for full errors. ");if(o)throw new Error("Minified Redux error #9; visit https://redux.js.org/Errors?code=9 for the full message or use the non-minified dev environment for full errors. ");try{o=!0,m=l(m,a)}finally{o=!1}for(var c=f=n,b=0;b<c.length;b++)(0,c[b])();return a}return e({type:i.INIT}),(d={dispatch:e,subscribe:k,getState:g,replaceReducer:function(a){if("function"!=typeof a)throw new Error("Minified Redux error #10; visit https://redux.js.org/Errors?code=10 for the full message or use the non-minified dev environment for full errors. ");l=a,e({type:i.REPLACE})}})[h]=function(){var a,b=k;return(a={subscribe:function(a){if("object"!=typeof a||null===a)throw new Error("Minified Redux error #11; visit https://redux.js.org/Errors?code=11 for the full message or use the non-minified dev environment for full errors. ");function c(){a.next&&a.next(g())}return c(),{unsubscribe:b(c)}}})[h]=function(){return this},a},d}function k(a){for(var f,e=Object.keys(a),b={},c=0;c<e.length;c++){var d=e[c];"function"==typeof a[d]&&(b[d]=a[d])}var h=Object.keys(b);try{!function(a){Object.keys(a).forEach(function(c){var b=a[c];if(void 0===b(void 0,{type:i.INIT}))throw new Error("Minified Redux error #12; visit https://redux.js.org/Errors?code=12 for the full message or use the non-minified dev environment for full errors. ");if(void 0===b(void 0,{type:i.PROBE_UNKNOWN_ACTION()}))throw new Error("Minified Redux error #13; visit https://redux.js.org/Errors?code=13 for the full message or use the non-minified dev environment for full errors. ")})}(b)}catch(g){f=g}return function(a,d){if(void 0===a&&(a={}),f)throw f;for(var c=!1,j={},e=0;e<h.length;e++){var g=h[e],l=b[g],k=a[g],i=l(k,d);if(void 0===i)throw d&&d.type,new Error("Minified Redux error #14; visit https://redux.js.org/Errors?code=14 for the full message or use the non-minified dev environment for full errors. ");j[g]=i,c=c||i!==k}return(c=c||h.length!==Object.keys(a).length)?j:a}}function l(){for(var c=arguments.length,a=new Array(c),b=0;b<c;b++)a[b]=arguments[b];return 0===a.length?function(a){return a}:1===a.length?a[0]:a.reduce(function(a,b){return function(){return a(b.apply(void 0,arguments))}})}function m(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return function(a){return function(){var b=a.apply(void 0,arguments),d=function(){throw new Error("Minified Redux error #15; visit https://redux.js.org/Errors?code=15 for the full message or use the non-minified dev environment for full errors. ")},f={getState:b.getState,dispatch:function(){return d.apply(void 0,arguments)}},e=c.map(function(a){return a(f)});return d=l.apply(void 0,e)(b.dispatch),g(g({},b),{},{dispatch:d})}}}},96791:function(a){"use strict";a.exports=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}},94037:function(){},11617:function(){}}])
//# sourceMappingURL=706.8531092dd86abec4.js.map