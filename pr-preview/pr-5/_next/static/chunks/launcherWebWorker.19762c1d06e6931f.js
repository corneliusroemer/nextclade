!function(){var c,d,b,e,f,g={81893:function(n,o,a){"use strict";var b,d,c,f,g,h,p,q,i=a(72607),r=a.n(i);a(22265);var j=a(79103),s=a(2263),t=a(31382);(b=f||(f={})).idle="idle",b.loadingData="loadingData",b.initWorkers="initWorkers",b.started="started",b.buildingTree="buildingTree",b.done="done",b.failed="failed",(d=g||(g={})).started="started",d.done="done",d.failed="failed",(c=h||(h={})).File="FileInput",c.Url="Url",c.String="String",c.Default="Default";var k=a(11285),u=a.n(k),e="https://master.clades.nextstrain.org";function v(a,b,c){return(v=!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}()?function(d,e,b){var a=[null];a.push.apply(a,e);var c=new(Function.bind.apply(d,a));return b&&x(c,b.prototype),c}:Reflect.construct).apply(null,arguments)}function w(a){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function x(a,b){return(x=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function l(a){var b="function"==typeof Map?new Map:void 0;return(l=function(a){var d;if(null===a||(d=a,-1===Function.toString.call(d).indexOf("[native code]")))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return v(a,arguments,w(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),x(c,a)})(a)}"".concat(e,"/favicon.ico"),"".concat(e,"/social-1200x600.png"),"".concat(e,"/manifest.json");var m=function(a){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&x(b,a)}(d,a);var b,c,e=(b=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var d,f,a,e,g=w(b);if(c){var h=w(this).constructor;e=Reflect.construct(g,arguments,h)}else e=g.apply(this,arguments);return f=this,(a=e)&&("object"==((d=a)&&"undefined"!=typeof Symbol&&d.constructor===Symbol?"symbol":typeof d)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(f)});function d(a){return!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,d),e.call(this,"Internal Error: ".concat(a,". This is an internal issue, likely due to a programming mistake. Please report it to developers!"))}return d}(l(Error)),y=a(32888),z=a(17932);function A(a){return(0,z.Cs)(a,{timeout:6e4})}function B(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function C(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){B(g,e,f,d,h,"next",a)}function h(a){B(g,e,f,d,h,"throw",a)}d(void 0)})}}var D=function(){"use strict";function b(c,a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),this.workers=[],this.pool=(0,z.Kg)(function(){return A(c())},a)}var a=b.prototype;return a.getWorkers=function(){return this.pool.workers},a.forEachWorker=function(a){var b=this;return C(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",y.dR.forEach(a,b.workers));case 1:case"end":return c.stop()}},c)}))()},a.completed=function(a){var b=this;return C(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",b.pool.completed(a));case 1:case"end":return c.stop()}},c)}))()},a.settled=function(a){var b=this;return C(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",b.pool.settled(a));case 1:case"end":return c.stop()}},c)}))()},a.events=function(){return this.pool.events()},a.queue=function(a){var b=this;return C(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",b.pool.queue(a));case 1:case"end":return c.stop()}},c)}))()},a.terminate=function(a){var b=this;return C(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",b.pool.terminate(a));case 1:case"end":return c.stop()}},c)}))()},b.create=function(a,c){return C(r().mark(function d(){var e;return r().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=new b(a,c),d.next=3,y.dR.map(function(){var a=C(r().mark(function a(b){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",b.init);case 1:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}(),e.getWorkers());case 3:return e.workers=d.sent,d.abrupt("return",e);case 5:case"end":return d.stop()}},d)}))()},b}();function E(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function F(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){E(g,e,f,d,h,"next",a)}function h(a){E(g,e,f,d,h,"throw",a)}d(void 0)})}}var G=function(){"use strict";function c(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,c),this.results=[]}var b=c.prototype;return b.init=function(b,c){var d=this;return F(r().mark(function e(){return r().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.create(function(){return new Worker(new URL(a.p+a.u(342),a.b),{name:"nextcladeWebWorker"})},{size:b,concurrency:1,name:"pool.analyze",maxQueuedJobs:void 0});case 2:return d.pool=e.sent,e.next=5,d.pool.forEachWorker(function(){var a=F(r().mark(function a(b){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",b.create(c));case 1:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e)}))()},b.getInitialData=function(a){var b=this;return F(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",b.pool.queue(function(b){return b.getInitialData(a)}));case 1:case"end":return c.stop()}},c)}))()},b.analyze=function(a,b){var c=this;return F(r().mark(function d(){var e;return r().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,c.pool.queue(function(c){return c.analyze(a,b)});case 2:return(e=d.sent).result&&c.results.push(e.result.analysisResult),d.abrupt("return",e);case 5:case"end":return d.stop()}},d)}))()},b.getOutputTrees=function(a){var b=this;return F(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=Object,c.next=3,y.dR.map(function(){var a=F(r().mark(function a(c){var d,e;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=b.results.filter(function(a){return a.datasetName===c}),a.next=3,b.pool.queue(function(a){return a.getOutputTrees(c,JSON.stringify(d))});case 3:return e=a.sent,a.abrupt("return",[c,e]);case 5:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}(),a);case 3:return c.t1=c.sent,c.abrupt("return",c.t0.fromEntries.call(c.t0,c.t1));case 5:case"end":return c.stop()}},c)}))()},b.destroy=function(){var a=this;return F(r().mark(function b(){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,a.pool.forEachWorker(function(){var a=F(r().mark(function a(b){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",b.destroy());case 1:case"end":return a.stop()}},a)}));return function(b){return a.apply(this,arguments)}}());case 2:case"end":return b.stop()}},b)}))()},b.completed=function(){var a=this;return F(r().mark(function b(){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.abrupt("return",a.pool.completed());case 1:case"end":return b.stop()}},b)}))()},b.terminate=function(){var a=this;return F(r().mark(function b(){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,a.destroy();case 2:return b.next=4,a.pool.terminate(!0);case 4:case"end":return b.stop()}},b)}))()},c.create=function(a,b){return F(r().mark(function d(){var e;return r().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e=new c,d.next=3,e.init(a,b);case 3:return d.abrupt("return",e);case 4:case"end":return d.stop()}},d)}))()},c}();function H(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function I(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){H(g,e,f,d,h,"next",a)}function h(a){H(g,e,f,d,h,"throw",a)}d(void 0)})}}var J=function(){"use strict";function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b)}var c=b.prototype;return c.init=function(){var b=this;return I(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,A(new Worker(new URL(a.p+a.u(647),a.b)));case 2:b.thread=c.sent;case 3:case"end":return c.stop()}},c)}))()},c.parseSequencesStreaming=function(a,b,c,d){var e=this;return I(r().mark(function f(){return r().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return e.subscription=e.thread.values().subscribe(b,c,d),f.next=3,e.thread.parseSequencesStreaming(a);case 3:case"end":return f.stop()}},f)}))()},c.destroy=function(){var a=this;return I(r().mark(function b(){var c;return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=3,null===(c=a.subscription)|| void 0===c?void 0:c.unsubscribe();case 3:return b.next=5,a.thread.destroy();case 5:case"end":return b.stop()}},b)}))()},b.create=function(){return I(r().mark(function a(){var c;return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c=new b,a.next=3,c.init();case 3:return a.abrupt("return",c);case 4:case"end":return a.stop()}},a)}))()},b}();function K(c,d,e,f,g,h,i){try{var a=c[h](i),b=a.value}catch(j){e(j);return}a.done?d(b):Promise.resolve(b).then(f,g)}function L(a){return function(){var b=this,c=arguments;return new Promise(function(e,f){var g=a.apply(b,c);function d(a){K(g,e,f,d,h,"next",a)}function h(a){K(g,e,f,d,h,"throw",a)}d(void 0)})}}function M(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function N(a){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function O(a,b){return(O=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}var P=function(a){"use strict";!function(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,writable:!0,configurable:!0}}),a&&O(b,a)}(d,a);var b,c,e=(b=d,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}(),function(){var d,f,a,e,g=N(b);if(c){var h=N(this).constructor;e=Reflect.construct(g,arguments,h)}else e=g.apply(this,arguments);return f=this,(a=e)&&("object"==((d=a)&&"undefined"!=typeof Symbol&&d.constructor===Symbol?"symbol":typeof d)||"function"==typeof a)?a:function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(f)});function d(a){return M(this,d),e.call(this,"When calling 'module.".concat(a,"': Launcher WebWorker module has not been initialized yet. Make sure to call 'module.init()' function first."))}return d}(m),Q=function(){"use strict";function b(){M(this,b),this.analysisGlobalStatusObservable=new s.x,this.parsedFastaObservable=new s.x,this.analysisResultsObservable=new s.x,this.treeObservable=new s.x}var a=b.prototype;return a.init=function(a,b,c,d,e){var f=this;return L(r().mark(function g(){return r().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,J.create();case 2:return f.fastaParser=g.sent,g.next=5,G.create(a,e);case 5:f.pool=g.sent,f.seqIndexToTopDatasetName=c,f.seqIndicesWithoutDatasetSuggestions=d,f.datasetNames=b;case 9:case"end":return g.stop()}},g)}))()},a.getInitialData=function(a){var b=this;return L(r().mark(function c(){return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.abrupt("return",b.pool.getInitialData(a));case 1:case"end":return c.stop()}},c)}))()},a.launch=function(a){var b=this;return L(r().mark(function c(){var d;return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return b.analysisGlobalStatusObservable.next(f.initWorkers),c.prev=1,b.analysisGlobalStatusObservable.next(f.started),c.next=5,b.fastaParser.parseSequencesStreaming(a,function(a){return b.onSequence(a)},function(a){return b.onError(a)});case 5:return c.next=7,b.pool.completed();case 7:return c.next=9,b.pool.getOutputTrees(b.datasetNames);case 9:d=c.sent,b.treeObservable.next(d),b.analysisGlobalStatusObservable.next(f.done),b.analysisResultsObservable.complete(),c.next=18;break;case 15:c.prev=15,c.t0=c.catch(1),b.onError(c.t0);case 18:return c.prev=18,b.destroy(),c.finish(18);case 21:case"end":return c.stop()}},c,null,[[1,15,18,21]])}))()},a.destroy=function(){var a=this;return L(r().mark(function b(){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Promise.all([a.fastaParser.destroy(),a.pool.terminate()]);case 2:case"end":return b.stop()}},b)}))()},a.onSequence=function(a){var b=this;this.parsedFastaObservable.next((0,t.omit)(a,"seq")),this.onSequenceImpl(a).catch(function(a){return b.onError(a)})},a.onSequenceImpl=function(a){var b=this;return L(r().mark(function c(){var d,e,f,g,h;return r().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(null===(d=b.seqIndicesWithoutDatasetSuggestions)|| void 0===d?void 0:d.includes(a.index))){c.next=4;break}return b.analysisResultsObservable.next({index:a.index,seqName:a.seqName,error:"Unable to detect reference dataset"}),c.abrupt("return");case 4:if(g=null!==(f=null===(e=b.seqIndexToTopDatasetName)|| void 0===e?void 0:e.get(a.index))&& void 0!==f?f:b.datasetNames[0]){c.next=8;break}throw new m("Unable to find selected dataset for sequence #".concat(a.index," '").concat(a.seqName,"'"));case 8:return c.next=10,b.pool.analyze(g,a);case 10:h=c.sent,b.analysisResultsObservable.next(h);case 12:case"end":return c.stop()}},c)}))()},a.onError=function(a){this.analysisGlobalStatusObservable.next(f.failed),this.analysisResultsObservable.error(function(b){var c,a;if(c=b,null!=(a=Error)&&"undefined"!=typeof Symbol&&a[Symbol.hasInstance]?!a[Symbol.hasInstance](c):!(c instanceof a)){var d=u()(b,{space:2,ignoreFunction:!0});return new m("There was an error and ".concat("Nextclade",' was unable to recognize this error type. This is what we know so far: "').concat(d,'"'))}return b}(a)),this.destroy()},b.create=function(a,c,d,e,f){return L(r().mark(function g(){var h;return r().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return h=new b,g.next=3,h.init(a,c,d,e,f);case 3:return g.abrupt("return",h);case 4:case"end":return g.stop()}},g)}))()},b}();(0,j.Jj)({init:function(a,b,c,d,e){return L(r().mark(function f(){return r().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Q.create(a,b,c,d,e);case 2:q=f.sent;case 3:case"end":return f.stop()}},f)}))()},getInitialData:function(a){return L(r().mark(function b(){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(q){b.next=2;break}throw new P("getInitialData");case 2:return b.abrupt("return",q.getInitialData(a));case 3:case"end":return b.stop()}},b)}))()},launch:function(a){return L(r().mark(function b(){return r().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(q){b.next=2;break}throw new P("launch");case 2:return b.next=4,q.launch(a);case 4:case"end":return b.stop()}},b)}))()},destroy:function(){return L(r().mark(function a(){return r().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(q){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,q.destroy();case 4:q=void 0;case 5:case"end":return a.stop()}},a)}))()},getAnalysisGlobalStatusObservable:function(){if(!q)throw new P("getAnalysisGlobalStatusObservable");return s.y.from(q.analysisGlobalStatusObservable)},getAnalysisResultsObservable:function(){if(!q)throw new P("getAnalysisResultsObservable");return s.y.from(q.analysisResultsObservable)},getTreeObservable:function(){if(!q)throw new P("getTreeObservable");return s.y.from(q.treeObservable)}})}},h={};function a(b){var d=h[b];if(void 0!==d)return d.exports;var c=h[b]={id:b,loaded:!1,exports:{}},e=!0;try{g[b].call(c.exports,c,c.exports,a),e=!1}finally{e&&delete h[b]}return c.loaded=!0,c.exports}a.m=g,a.x=function(){var b=a.O(void 0,[382,444,242],function(){return a(81893)});return a.O(b)},c=[],a.O=function(i,e,f,d){if(e){d=d||0;for(var b=c.length;b>0&&c[b-1][2]>d;b--)c[b]=c[b-1];c[b]=[e,f,d];return}for(var g=1/0,b=0;b<c.length;b++){for(var e=c[b][0],f=c[b][1],d=c[b][2],j=!0,h=0;h<e.length;h++)g>=d&&Object.keys(a.O).every(function(b){return a.O[b](e[h])})?e.splice(h--,1):(j=!1,d<g&&(g=d));if(j){c.splice(b--,1);var k=f();void 0!==k&&(i=k)}}return i},a.n=function(c){var b=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(b,{a:b}),b},a.d=function(d,c){for(var b in c)a.o(c,b)&&!a.o(d,b)&&Object.defineProperty(d,b,{enumerable:!0,get:c[b]})},a.f={},a.e=function(b){return Promise.all(Object.keys(a.f).reduce(function(c,d){return a.f[d](b,c),c},[]))},a.u=function(a){return"static/chunks/"+(342===a?"nextcladeWebWorker":a)+"."+({"242":"a3fbc55e343af5ac","342":"70e422ea57b1b63b","382":"7672cfb3e0e23b79","444":"170c49d0571b2ba1","647":"e56761fcdacf97b6"})[a]+".js"},a.miniCssF=function(a){},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"==typeof window)return window}}(),a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a.nmd=function(a){return a.paths=[],a.children||(a.children=[]),a},a.p="/nextclade/pr-preview/pr-5/_next/",a.b=self.location+"/../../../",d={140:1},a.f.i=function(b,c){d[b]||importScripts(a.p+a.u(b))},e=(b=self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push.bind(b),b.push=function(b){var g=b[0],c=b[1],h=b[2];for(var f in c)a.o(c,f)&&(a.m[f]=c[f]);for(h&&h(a);g.length;)d[g.pop()]=1;e(b)},f=a.x,a.x=function(){return Promise.all([382,444,242].map(a.e,a)).then(f)},_N_E=a.x()}()
//# sourceMappingURL=launcherWebWorker.19762c1d06e6931f.js.map